<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedGpa - منصتكم الطبية الشاملة</title>


</head>

<body>
    <html lang="ar" dir="rtl">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MedGpa - نبض الطب</title>
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap"
            rel="stylesheet">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }

            :root {
                /* Modern Medical Palette */
                --primary: #3b82f6;
                /* Bright Royal Blue */
                --primary-dark: #2563eb;
                --secondary: #0f172a;
                /* Slate 900 */
                --light: #f8fafc;
                --gray: #64748b;
                --success: #10b981;
                --warning: #f59e0b;
                --danger: #ef4444;

                /* Accents */
                --accent-1: #8b5cf6;
                /* Violet */
                --accent-2: #ec4899;
                /* Pink */
                --accent-3: #f59e0b;
                /* Amber */
                --accent-4: #10b981;
                /* Emerald */
                --accent-5: #06b6d4;
                /* Cyan */

                /* Glassmorphism Variables */
                --glass-bg: rgba(255, 255, 255, 0.7);
                --glass-border: rgba(255, 255, 255, 0.5);
                --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
                --blur-amount: 12px;

                /* Gradients */
                --header-bg: rgba(255, 255, 255, 0.8);
                --gradient-1: linear-gradient(135deg, #60a5fa, #a78bfa);
                --gradient-2: linear-gradient(135deg, #2dd4bf, #3b82f6);

                /* Text */
                --text-primary: #1e293b;
                --text-secondary: #475569;
            }

            .dark-mode {
                --primary: #60a5fa;
                --primary-dark: #3b82f6;
                --bg-primary: #0f172a;
                --bg-secondary: #1e293b;
                --text-primary: #f8fafc;
                --text-secondary: #94a3b8;

                /* Dark Glass */
                --glass-bg: rgba(30, 41, 59, 0.7);
                --glass-border: rgba(255, 255, 255, 0.08);
                --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);

                --header-bg: rgba(15, 23, 42, 0.8);
                --gradient-1: linear-gradient(135deg, #818cf8, #c084fc);
            }

            /* --- Custom Themes --- */

            /* Surgeon Theme (Rose/Slate) */
            body.theme-surgeon {
                --primary: #e11d48;
                --primary-dark: #be123b;
                --accent-1: #fb7185;
                --gradient-1: linear-gradient(135deg, #fb7185, #e11d48);
                --reading-progress-bg: linear-gradient(90deg, #fb7185, #e11d48, #9f1239, #be123b);
            }

            /* Pharmacist Theme (Emerald) */
            body.theme-pharmacist {
                --primary: #10b981;
                --primary-dark: #059669;
                --accent-1: #34d399;
                --gradient-1: linear-gradient(135deg, #34d399, #10b981);
                --reading-progress-bg: linear-gradient(90deg, #34d399, #10b981, #065f46, #059669);
            }

            /* Sunset Theme (Amber) */
            body.theme-sunset {
                --primary: #f59e0b;
                --primary-dark: #d97706;
                --accent-1: #fbbf24;
                --gradient-1: linear-gradient(135deg, #fbbf24, #f59e0b);
                --reading-progress-bg: linear-gradient(90deg, #fbbf24, #f59e0b, #92400e, #d97706);
            }

            /* Theme Switcher Styles */
            .theme-switcher {
                position: relative;
            }

            .theme-btn {
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                color: var(--text-primary);
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                transition: all 0.3s ease;
            }

            .theme-btn:hover {
                transform: scale(1.1);
                background: var(--primary);
                color: white;
            }

            .theme-menu {
                position: absolute;
                top: 50px;
                right: 0;
                background: var(--glass-bg);
                backdrop-filter: blur(var(--blur-amount));
                border: 1px solid var(--glass-border);
                border-radius: 12px;
                padding: 8px;
                min-width: 150px;
                display: none;
                flex-direction: column;
                gap: 4px;
                z-index: 1000;
                box-shadow: var(--glass-shadow);
            }

            .theme-menu.active {
                display: flex;
                animation: slideDown 0.3s ease forwards;
            }

            .theme-option {
                padding: 8px 12px;
                border-radius: 8px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 500;
                transition: all 0.2s ease;
            }

            .theme-option:hover {
                background: rgba(139, 92, 246, 0.1);
                color: var(--primary);
                transform: translateX(-5px);
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            body {
                background-color: #f0f9ff;
                background-image:
                    radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                    radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                    radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
                background-size: 200% 200%;
                color: var(--text-primary);
                line-height: 1.7;
                overflow-x: hidden;
                transition: all 0.3s ease;
                min-height: 100vh;
            }

            .dark-mode body {
                background-image:
                    radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                    radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                    radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
            }

            /* Light mode animated mesh gradient override */
            body {
                background:
                    radial-gradient(at 40% 20%, hsla(215, 98%, 61%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 80% 0%, hsla(189, 100%, 56%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 0% 50%, hsla(341, 100%, 76%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 80% 50%, hsla(269, 100%, 77%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 0% 100%, hsla(320, 100%, 82%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 80% 100%, hsla(205, 100%, 60%, 0.2) 0px, transparent 50%),
                    radial-gradient(at 0% 0%, hsla(280, 100%, 77%, 0.2) 0px, transparent 50%);
                background-size: 200% 200%;
                animation: meshGradient 20s ease infinite;
            }

            /* Reading Progress Bar */
            #reading-progress {
                position: fixed;
                top: 0;
                left: 0;
                width: 0%;
                height: 4px;
                background: var(--reading-progress-bg, linear-gradient(90deg,
                            #3b82f6,
                            #8b5cf6,
                            #ec4899,
                            #f59e0b));
                background-size: 200% 100%;
                animation: gradientShift 3s ease infinite;
                z-index: 9999;
                transition: width 0.1s ease-out;
                box-shadow: 0 2px 10px rgba(59, 130, 246, 0.5);
            }

            @keyframes gradientShift {
                0% {
                    background-position: 0% 50%;
                }

                50% {
                    background-position: 100% 50%;
                }

                100% {
                    background-position: 0% 50%;
                }
            }

            /* Scroll to Top Button */
            #scroll-to-top {
                position: fixed;
                bottom: 30px;
                right: 30px;
                width: 50px;
                height: 50px;
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
                border: none;
                border-radius: 50%;
                color: white;
                font-size: 24px;
                cursor: pointer;
                opacity: 0;
                visibility: hidden;
                transform: translateY(100px);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 9998;
                box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #scroll-to-top.show {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            #scroll-to-top:hover {
                transform: translateY(-5px) scale(1.1);
                box-shadow: 0 8px 30px rgba(59, 130, 246, 0.6);
            }

            #scroll-to-top:active {
                transform: translateY(-2px) scale(1.05);
            }

            .dark-mode #scroll-to-top {
                background: linear-gradient(135deg, #60a5fa, #a78bfa);
            }

            /* Search Modal */
            #search-modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(15, 23, 42, 0.9);
                backdrop-filter: blur(10px);
                z-index: 10000;
                align-items: flex-start;
                justify-content: center;
                padding-top: 10vh;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            #search-modal.active {
                display: flex;
                opacity: 1;
            }

            .search-container {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
                backdrop-filter: blur(20px);
                border-radius: 24px;
                padding: 2rem;
                width: 90%;
                max-width: 600px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                transform: translateY(-20px);
                transition: transform 0.3s ease;
            }

            #search-modal.active .search-container {
                transform: translateY(0);
            }

            .dark-mode .search-container {
                background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
            }

            .search-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1.5rem;
            }

            .search-header h3 {
                color: var(--primary-dark);
                font-size: 1.5rem;
                margin: 0;
            }

            .dark-mode .search-header h3 {
                color: #c4b5fd;
            }

            .search-close {
                background: none;
                border: none;
                font-size: 2rem;
                color: var(--text-secondary);
                cursor: pointer;
                transition: all 0.2s ease;
                line-height: 1;
            }

            .search-close:hover {
                color: var(--primary);
                transform: rotate(90deg);
            }

            .search-input-wrapper {
                position: relative;
                margin-bottom: 1.5rem;
            }

            #search-input {
                width: 100%;
                padding: 1rem 1.5rem;
                border: 2px solid rgba(99, 102, 241, 0.2);
                border-radius: 16px;
                font-size: 1.1rem;
                background: rgba(255, 255, 255, 0.8);
                transition: all 0.3s ease;
                font-family: 'Tajawal', sans-serif;
            }

            #search-input:focus {
                outline: none;
                border-color: var(--primary);
                box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
            }

            .dark-mode #search-input {
                background: rgba(15, 23, 42, 0.8);
                color: white;
            }

            .search-results {
                max-height: 400px;
                overflow-y: auto;
            }

            .search-result-item {
                padding: 1rem;
                border-radius: 12px;
                margin-bottom: 0.5rem;
                cursor: pointer;
                transition: all 0.2s ease;
                background: rgba(99, 102, 241, 0.05);
            }

            .search-result-item:hover {
                background: rgba(99, 102, 241, 0.15);
                transform: translateX(5px);
            }

            .search-result-title {
                font-weight: 700;
                color: var(--primary-dark);
                margin-bottom: 0.3rem;
            }

            .dark-mode .search-result-title {
                color: #c4b5fd;
            }

            .search-result-desc {
                font-size: 0.9rem;
                color: var(--text-secondary);
            }

            .search-no-results {
                text-align: center;
                padding: 2rem;
                color: var(--text-secondary);
            }

            /* Toast Notifications */
            .toast-notification {
                display: flex;
                align-items: center;
                gap: 12px;
                background: white;
                padding: 1rem 1.2rem;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
                min-width: 300px;
                opacity: 0;
                transform: translateX(400px);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border-left: 4px solid #3b82f6;
            }

            .toast-notification.show {
                opacity: 1;
                transform: translateX(0);
            }

            .dark-mode .toast-notification {
                background: rgba(30, 41, 59, 0.95);
                color: white;
            }

            .toast-icon {
                font-size: 1.5rem;
                flex-shrink: 0;
            }

            .toast-content {
                flex: 1;
                font-size: 0.95rem;
                line-height: 1.4;
            }

            .toast-close {
                background: none;
                border: none;
                font-size: 1.5rem;
                color: var(--text-secondary);
                cursor: pointer;
                padding: 0;
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s ease;
            }

            .toast-close:hover {
                background: rgba(0, 0, 0, 0.1);
            }

            .toast-success {
                border-left-color: #10b981;
            }

            .toast-error {
                border-left-color: #ef4444;
            }

            .toast-warning {
                border-left-color: #f59e0b;
            }

            .toast-info {
                border-left-color: #3b82f6;
            }

            .toast-motivational {
                border-left-color: #8b5cf6;
                background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            }

            .dark-mode .toast-motivational {
                background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
            }

            /* Focus Mode */
            #focus-mode-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(15, 23, 42, 0.95);
                backdrop-filter: blur(20px);
                z-index: 9999;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            #focus-mode-overlay.active {
                display: flex;
                opacity: 1;
            }

            .focus-mode-panel {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 24px;
                padding: 3rem;
                text-align: center;
                color: white;
                max-width: 500px;
            }

            .focus-mode-panel h2 {
                font-size: 2rem;
                margin-bottom: 2rem;
                background: linear-gradient(135deg, #f59e0b, #ef4444);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .pomodoro-timer {
                margin: 2rem 0;
            }

            .timer-display {
                font-size: 4rem;
                font-weight: 700;
                font-family: 'Courier New', monospace;
                color: #f59e0b;
                margin-bottom: 1.5rem;
                text-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
            }

            .timer-controls {
                display: flex;
                gap: 1rem;
                justify-content: center;
            }

            .timer-btn {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                padding: 0.8rem 1.5rem;
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 1rem;
            }

            .timer-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: translateY(-2px);
            }

            .exit-focus-btn {
                margin-top: 2rem;
                background: linear-gradient(135deg, #ef4444, #dc2626);
                border: none;
                color: white;
                padding: 1rem 2rem;
                border-radius: 12px;
                cursor: pointer;
                font-size: 1.1rem;
                transition: all 0.3s ease;
            }

            .exit-focus-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
            }

            /* Achievements Panel */
            #achievements-panel {
                position: fixed;
                top: 0;
                right: -400px;
                width: 400px;
                height: 100vh;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
                backdrop-filter: blur(20px);
                box-shadow: -5px 0 30px rgba(0, 0, 0, 0.2);
                z-index: 10002;
                transition: right 0.3s ease;
                overflow-y: auto;
            }

            #achievements-panel.active {
                right: 0;
            }

            .dark-mode #achievements-panel {
                background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
            }

            .achievements-content {
                padding: 2rem;
            }

            .achievements-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
            }

            .achievements-header h2 {
                color: var(--primary-dark);
                font-size: 1.8rem;
                margin: 0;
            }

            .dark-mode .achievements-header h2 {
                color: #fbbf24;
            }

            .close-achievements {
                background: none;
                border: none;
                font-size: 2rem;
                color: var(--text-secondary);
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .close-achievements:hover {
                color: var(--primary);
                transform: rotate(90deg);
            }

            .points-display {
                text-align: center;
                padding: 2rem;
                background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
                border-radius: 16px;
                margin-bottom: 2rem;
            }

            .points-circle {
                width: 120px;
                height: 120px;
                margin: 0 auto 1rem;
                background: linear-gradient(135deg, #fbbf24, #f59e0b);
                border-radius: 50%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                box-shadow: 0 8px 24px rgba(251, 191, 36, 0.4);
            }

            .points-number {
                font-size: 2.5rem;
                font-weight: 700;
                color: white;
            }

            .points-label {
                font-size: 0.9rem;
                color: rgba(255, 255, 255, 0.9);
            }

            .badges-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .badge-item {
                padding: 1.5rem;
                border-radius: 12px;
                text-align: center;
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }

            .badge-item.unlocked {
                background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
                border-color: #fbbf24;
            }

            .badge-item.locked {
                background: rgba(0, 0, 0, 0.05);
                opacity: 0.5;
            }

            .dark-mode .badge-item.locked {
                background: rgba(255, 255, 255, 0.05);
            }

            .badge-icon {
                font-size: 2.5rem;
                margin-bottom: 0.5rem;
            }

            .badge-item.locked .badge-icon {
                filter: grayscale(100%);
            }

            .badge-name {
                font-weight: 700;
                color: var(--primary-dark);
                margin-bottom: 0.3rem;
            }

            .dark-mode .badge-name {
                color: #fbbf24;
            }

            .badge-desc {
                font-size: 0.85rem;
                color: var(--text-secondary);
            }

            .progress-section {
                margin-top: 2rem;
            }

            .progress-section h3 {
                color: var(--primary-dark);
                margin-bottom: 1rem;
            }

            .dark-mode .progress-section h3 {
                color: #c4b5fd;
            }

            .progress-item {
                display: flex;
                align-items: center;
                gap: 1rem;
                margin-bottom: 1rem;
            }

            .progress-bar {
                flex: 1;
                height: 8px;
                background: rgba(0, 0, 0, 0.1);
                border-radius: 4px;
                overflow: hidden;
            }

            .dark-mode .progress-bar {
                background: rgba(255, 255, 255, 0.1);
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #fbbf24, #f59e0b);
                border-radius: 4px;
                transition: width 0.5s ease;
            }

            /* Study Calendar */
            #calendar-modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(15, 23, 42, 0.9);
                backdrop-filter: blur(10px);
                z-index: 10003;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            #calendar-modal.active {
                display: flex;
                opacity: 1;
            }

            .calendar-container {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
                border-radius: 24px;
                padding: 2rem;
                width: 95%;
                max-width: 500px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                transform: scale(0.9);
                transition: transform 0.3s ease;
            }

            #calendar-modal.active .calendar-container {
                transform: scale(1);
            }

            .dark-mode .calendar-container {
                background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
                color: white;
            }

            .calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1.5rem;
            }

            .calendar-header h2 {
                font-size: 1.5rem;
                color: var(--primary-dark);
            }

            .dark-mode .calendar-header h2 {
                color: #10b981;
            }

            .calendar-weekdays {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                text-align: center;
                font-weight: 700;
                margin-bottom: 1rem;
                color: var(--text-secondary);
            }

            .calendar-days {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }

            .calendar-day,
            .empty-day {
                aspect-ratio: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                cursor: pointer;
                transition: all 0.2s ease;
                font-weight: 500;
            }

            .calendar-day {
                background: rgba(99, 102, 241, 0.05);
            }

            .calendar-day:hover {
                background: var(--primary);
                color: white;
            }

            .calendar-day.today {
                border: 2px solid var(--primary);
                color: var(--primary);
                font-weight: 800;
            }

            .calendar-day.has-event {
                background: rgba(16, 185, 129, 0.15);
                position: relative;
            }

            .calendar-day.has-event::after {
                content: '';
                position: absolute;
                bottom: 4px;
                width: 4px;
                height: 4px;
                background: #10b981;
                border-radius: 50%;
            }

            .close-calendar {
                background: none;
                border: none;
                font-size: 1.8rem;
                cursor: pointer;
                color: var(--text-secondary);
            }

            .event-editor {
                margin-top: 1.5rem;
                padding: 1.5rem;
                background: rgba(16, 185, 129, 0.05);
                border-radius: 16px;
                border: 1px solid rgba(16, 185, 129, 0.2);
            }

            #event-input {
                width: 100%;
                padding: 0.8rem;
                border-radius: 8px;
                border: 1px solid #ddd;
                margin: 1rem 0;
                font-family: inherit;
            }

            .editor-btns {
                display: flex;
                gap: 10px;
            }

            .editor-btns button {
                padding: 0.6rem 1.2rem;
                border-radius: 8px;
                border: none;
                cursor: pointer;
                background: var(--primary);
                color: white;
                font-weight: 600;
            }

            .cancel-btn {
                background: #eee !important;
                color: #666 !important;
            }

            .dark-mode body {
                background-color: #0f172a;
                background-image:
                    radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                    radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                    radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
                background-size: 200% 200%;
            }

            @keyframes meshGradient {
                0% {
                    background-position: 0% 50%;
                }

                50% {
                    background-position: 100% 50%;
                }

                100% {
                    background-position: 0% 50%;
                }
            }

            body {
                background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
                color: var(--text-primary);
                line-height: 1.8;
                overflow-x: hidden;
                transition: all 0.3s ease;
                font-size: 17px;
            }

            /* Modern Button Styles */
            .btn {
                background: linear-gradient(135deg, var(--primary), var(--accent-5));
                color: white;
                border: none;
                padding: 0.8rem 2rem;
                border-radius: 50px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: 0 10px 20px -5px var(--primary);
                position: relative;
                overflow: hidden;
                z-index: 1;
            }

            .btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(135deg, var(--accent-5), var(--primary));
                opacity: 0;
                z-index: -1;
                transition: opacity 0.3s ease;
            }

            .btn:hover {
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 15px 30px -5px var(--primary);
            }

            .btn:hover::before {
                opacity: 1;
            }

            /* Footer - Premium Glassmorphism */
            footer {
                background: linear-gradient(135deg,
                        rgba(15, 23, 42, 0.98) 0%,
                        rgba(30, 41, 59, 0.95) 100%);
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                color: white;
                padding: 4rem 0 2.5rem;
                text-align: center;
                margin-top: 5rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                width: 100%;
                clear: both;
                z-index: 500;
            }

            /* Animated gradient overlay */
            footer::before {
                content: '';
                position: absolute;
                top: 0;
                left: -50%;
                width: 200%;
                height: 100%;
                background: linear-gradient(90deg,
                        transparent,
                        rgba(99, 102, 241, 0.1),
                        rgba(168, 85, 247, 0.1),
                        rgba(236, 72, 153, 0.1),
                        transparent);
                animation: shimmer 8s infinite;
                pointer-events: none;
            }

            @keyframes shimmer {
                0% {
                    transform: translateX(-100%);
                }

                100% {
                    transform: translateX(100%);
                }
            }

            /* Decorative circles */
            footer::after {
                content: '';
                position: absolute;
                bottom: -100px;
                right: -100px;
                width: 300px;
                height: 300px;
                background: radial-gradient(circle, rgba(99, 102, 241, 0.15), transparent 70%);
                border-radius: 50%;
                pointer-events: none;
            }

            .footer-content {
                position: relative;
                z-index: 2;
            }

            .footer-content p {
                margin: 0.5rem 0;
                font-size: 1rem;
                opacity: 0.9;
            }

            .copyright {
                font-weight: 600;
                background: linear-gradient(135deg, #60a5fa, #a78bfa, #ec4899);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                font-size: 1.1rem;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Header Styles - Premium Floating Glass */
            header {
                background: linear-gradient(135deg,
                        rgba(255, 255, 255, 0.95) 0%,
                        rgba(255, 255, 255, 0.85) 100%);
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                border: 1px solid rgba(255, 255, 255, 0.8);
                box-shadow:
                    0 8px 32px rgba(31, 38, 135, 0.15),
                    0 2px 8px rgba(0, 0, 0, 0.05),
                    inset 0 1px 0 rgba(255, 255, 255, 0.9);
                color: var(--text-primary);
                padding: 1rem 2rem;
                position: sticky;
                top: 20px;
                z-index: 1500;
                border-radius: 60px;
                margin: 0 auto 2.5rem;
                max-width: 92%;
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: visible;
            }

            /* Gradient border effect */
            header::before {
                content: '';
                position: absolute;
                inset: -2px;
                border-radius: 60px;
                padding: 2px;
                background: linear-gradient(135deg,
                        rgba(99, 102, 241, 0.4),
                        rgba(168, 85, 247, 0.4),
                        rgba(236, 72, 153, 0.4));
                -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                -webkit-mask-composite: xor;
                mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                mask-composite: exclude;
                opacity: 0;
                transition: opacity 0.3s ease;
                pointer-events: none;
            }

            header:hover::before {
                opacity: 1;
            }

            /* Dark mode header */
            .dark-mode header {
                background: linear-gradient(135deg,
                        rgba(30, 41, 59, 0.95) 0%,
                        rgba(15, 23, 42, 0.9) 100%);
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.4),
                    0 2px 8px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.05);
            }

            /* Scroll effect */
            header.scrolled {
                transform: translateY(-5px);
                box-shadow:
                    0 12px 40px rgba(31, 38, 135, 0.2),
                    0 4px 12px rgba(0, 0, 0, 0.08),
                    inset 0 1px 0 rgba(255, 255, 255, 0.9);
            }

            .header-content {
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: relative;
                flex-direction: row;
                /* Force row direction for correct logo/menu placement */
                width: 100%;
            }

            header {
                direction: ltr;
                /* Force LTR at header level */
            }

            .header-content>* {
                direction: rtl;
                /* Restore RTL for inner elements */
            }

            /* Fix for RTL Layouts to ensure Logo is on Right/Left correctly */
            html[dir="rtl"] .header-content {
                flex-direction: row;
            }

            .logo {
                font-size: 1.8rem;
                font-weight: 800;
                display: flex;
                align-items: center;
                gap: 12px;
                text-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
                position: relative;
                z-index: 2;
                color: var(--primary-dark);
                font-family: 'Tajawal', sans-serif;
            }

            .dark-mode .logo {
                color: white;
            }

            .logo img {
                height: 45px;
                width: auto;
                filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
            }

            .logo::after {
                content: '';
                position: absolute;
                bottom: -6px;
                left: 0;
                right: 0;
                height: 2px;
                background: var(--gradient-1);
                border-radius: 2px;
                opacity: 0.8;
            }

            /* Dropdown Menu */
            .nav-dropdown {
                position: relative;
                display: inline-block;
            }

            /* Dropdown Menu - Enhanced */
            .dropdown-toggle {
                background: linear-gradient(135deg,
                        rgba(255, 255, 255, 0.15),
                        rgba(255, 255, 255, 0.05));
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: var(--text-primary);
                padding: 0.7rem 1.6rem;
                border-radius: 30px;
                font-weight: 700;
                cursor: pointer;
                font-size: 1rem;
                letter-spacing: 0.4px;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
                position: relative;
                overflow: hidden;
            }

            .dropdown-toggle::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg,
                        transparent,
                        rgba(255, 255, 255, 0.2),
                        transparent);
                transition: left 0.5s ease;
            }

            .dropdown-toggle:hover::before {
                left: 100%;
            }

            .dark-mode .dropdown-toggle {
                color: var(--text-primary);
                background: linear-gradient(135deg,
                        rgba(255, 255, 255, 0.08),
                        rgba(255, 255, 255, 0.03));
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .dropdown-toggle:hover {
                background: linear-gradient(135deg, var(--primary), #6366f1);
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
                border-color: transparent;
            }

            .dropdown-menu {
                position: absolute;
                top: 130%;
                right: 0;
                background: linear-gradient(135deg,
                        rgba(255, 255, 255, 0.98),
                        rgba(255, 255, 255, 0.95));
                backdrop-filter: blur(20px) saturate(180%);
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                border: 1px solid rgba(255, 255, 255, 0.8);
                border-radius: 24px;
                box-shadow:
                    0 12px 40px rgba(31, 38, 135, 0.2),
                    0 4px 12px rgba(0, 0, 0, 0.08);
                padding: 0.8rem;
                min-width: 240px;
                z-index: 1001;
                opacity: 0;
                visibility: hidden;
                transform: translateY(-10px) scale(0.95);
                transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
                list-style: none;
            }

            .dark-mode .dropdown-menu {
                background: linear-gradient(135deg,
                        rgba(30, 41, 59, 0.98),
                        rgba(15, 23, 42, 0.95));
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .nav-dropdown:hover .dropdown-menu {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            .dropdown-menu li {
                margin: 0;
            }

            .dropdown-menu a {
                display: block;
                padding: 0.85rem 1.5rem;
                color: var(--text-primary);
                text-decoration: none;
                font-weight: 600;
                transition: all 0.25s ease;
                position: relative;
            }

            .dark-mode .dropdown-menu a {
                color: var(--text-secondary);
            }

            .dropdown-menu a:hover {
                background: rgba(79, 70, 229, 0.1);
                color: var(--primary-dark);
                padding-right: 1.8rem;
            }

            .dark-mode .dropdown-menu a:hover {
                color: #c4b5fd;
                background: rgba(67, 56, 202, 0.2);
            }

            .dropdown-menu a::before {
                content: '';
                position: absolute;
                right: 1.5rem;
                top: 50%;
                transform: translateY(-50%);
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: var(--primary);
                opacity: 0;
                transition: opacity 0.2s ease;
            }

            .dropdown-menu a:hover::before {
                opacity: 1;
            }

            /* Dark Mode Toggle */
            .theme-toggle {
                background: rgba(255, 255, 255, 0.2);
                border: 1.5px solid rgba(255, 255, 255, 0.3);
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 1.2rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
                backdrop-filter: blur(8px);
                position: relative;
                overflow: hidden;
                margin-right: 1rem;
                z-index: 100;
                /* Ensure button is clickable above decorative elements */
            }

            .theme-toggle::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
                border-radius: 50%;
            }

            .theme-toggle:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: rotate(20deg) scale(1.1);
                box-shadow: 0 6px 14px rgba(0, 0, 0, 0.25);
                border-color: rgba(255, 255, 255, 0.4);
            }

            /* Header Decorative Elements */
            .header-decor {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 100%;
                pointer-events: none;
                z-index: 1;
            }

            .decor-circle {
                position: absolute;
                width: 80px;
                height: 80px;
                border-radius: 50%;
                background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
            }

            .decor-circle:nth-child(1) {
                top: -30px;
                right: -30px;
                width: 60px;
                height: 60px;
            }

            .decor-circle:nth-child(2) {
                bottom: -25px;
                left: -25px;
                width: 50px;
                height: 50px;
                background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
            }

            /* Main Content */
            main {
                min-height: calc(100vh - 160px);
                padding: 1.5rem 0 3rem;
            }

            .page {
                display: none;
                animation: fadeInUp 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            }

            .page.active {
                display: block;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .page-header {
                text-align: center;
                margin-bottom: 2.5rem;
                position: relative;
            }

            .page-header::after {
                content: '';
                position: absolute;
                bottom: -15px;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 4px;
                background: var(--gradient-1);
                border-radius: 2px;
                box-shadow: 0 3px 10px rgba(139, 92, 246, 0.25);
            }

            .page-header h1 {
                font-size: 2.8rem;
                color: var(--primary-dark);
                margin-bottom: 1.2rem;
                background: var(--gradient-1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
                font-weight: 800;
            }

            .dark-mode .page-header h1 {
                color: #c4b5fd;
            }

            .page-header p {
                color: var(--text-secondary);
                font-size: 1.2rem;
                max-width: 700px;
                margin: 0 auto;
                font-weight: 500;
                line-height: 1.7;
            }

            /* Hero Section */
            .hero-section {
                text-align: center;
                padding: 3rem 2rem;
                background: var(--glass-bg);
                backdrop-filter: blur(var(--blur-amount));
                -webkit-backdrop-filter: blur(var(--blur-amount));
                border-radius: 30px;
                box-shadow: var(--glass-shadow);
                margin-bottom: 2.5rem;
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
                border: 1px solid var(--glass-border);
            }

            .hero-section::before {
                content: '';
                position: absolute;
                top: -100px;
                right: -100px;
                width: 300px;
                height: 300px;
                background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
                border-radius: 50%;
            }

            .hero-section::after {
                content: '';
                position: absolute;
                bottom: -100px;
                left: -100px;
                width: 250px;
                height: 250px;
                background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
                border-radius: 50%;
            }

            .hero-title {
                font-size: 2.4rem;
                color: var(--primary-dark);
                margin-bottom: 2rem;
                background: var(--gradient-1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
                font-weight: 800;
            }

            .dark-mode .hero-title {
                color: #c4b5fd;
            }

            .target-audience {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
                gap: 1.8rem;
                margin: 2.5rem 0;
            }

            .audience-card {
                background: linear-gradient(135deg, #f8fafc, #f1f5f9);
                padding: 1.8rem;
                border-radius: 20px;
                text-align: center;
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
                transition: all 0.35s ease;
                border: 2px solid transparent;
                position: relative;
                overflow: hidden;
            }

            .dark-mode .audience-card {
                background: linear-gradient(135deg, #334155, #1e293b);
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
            }

            .audience-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--gradient-1);
            }

            .audience-card:hover {
                transform: translateY(-10px) scale(1.02);
                box-shadow: 0 16px 32px rgba(0, 0, 0, 0.18);
                border-color: var(--primary);
            }

            .dark-mode .audience-card:hover {
                box-shadow: 0 16px 32px rgba(0, 0, 0, 0.4);
            }

            .audience-icon {
                font-size: 2.8rem;
                margin-bottom: 1.4rem;
                color: var(--primary);
                transition: transform 0.3s ease;
            }

            .audience-card:hover .audience-icon {
                transform: scale(1.15) rotate(8deg);
            }

            .audience-title {
                font-size: 1.4rem;
                color: var(--primary-dark);
                margin-bottom: 1rem;
                font-weight: 700;
            }

            .dark-mode .audience-title {
                color: #c4b5fd;
            }

            .audience-desc {
                color: var(--text-secondary);
                line-height: 1.8;
                font-size: 1.05rem;
            }

            .special-note {
                background: linear-gradient(135deg, #fffbeb, #fef3c7);
                padding: 2.2rem;
                border-radius: 20px;
                margin-top: 2.5rem;
                border-left: 5px solid var(--warning);
                position: relative;
                text-align: center;
                box-shadow: 0 8px 20px rgba(245, 158, 11, 0.18);
            }

            .dark-mode .special-note {
                background: linear-gradient(135deg, #37302c, #43382a);
                border-left: 5px solid #d97706;
                box-shadow: 0 8px 20px rgba(217, 119, 6, 0.25);
            }

            .special-note::before {
                content: '✨';
                position: absolute;
                top: -25px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 2.4rem;
                background: white;
                width: 60px;
                height: 60px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.18);
                animation: bounce 2s infinite;
            }

            @keyframes bounce {

                0%,
                100% {
                    transform: translateX(-50%) translateY(0);
                }

                50% {
                    transform: translateX(-50%) translateY(-8px);
                }
            }

            .dark-mode .special-note::before {
                background: #1e293b;
                color: #fde047;
            }

            .special-note h3 {
                color: #92400e;
                margin-bottom: 1.4rem;
                font-size: 1.6rem;
                font-weight: 700;
            }

            .dark-mode .special-note h3 {
                color: #fde047;
            }

            .special-note p {
                color: #92400e;
                font-size: 1.25rem;
                font-weight: 700;
                line-height: 1.8;
            }

            .dark-mode .special-note p {
                color: #fde047;
            }

            /* Years Grid */
            .years-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 2.2rem;
                margin-top: 2rem;
            }

            .year-card {
                background: var(--glass-bg);
                backdrop-filter: blur(var(--blur-amount));
                -webkit-backdrop-filter: blur(var(--blur-amount));
                border-radius: 24px;
                overflow: hidden;
                box-shadow: var(--glass-shadow);
                transition: all 0.35s ease;
                position: relative;
                cursor: pointer;
                border: 1px solid var(--glass-border);
            }

            .dark-mode .year-card {
                box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(67, 56, 202, 0.25);
            }

            .year-card:hover {
                transform: translateY(-12px) rotateX(4deg);
                box-shadow: 0 28px 55px -12px rgba(0, 0, 0, 0.25);
            }

            .dark-mode .year-card:hover {
                box-shadow: 0 28px 55px -12px rgba(0, 0, 0, 0.45);
            }

            .year-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 8px;
                background: linear-gradient(90deg, var(--accent-1), var(--accent-2), var(--accent-3), var(--accent-4), var(--accent-5), var(--accent-6), var(--accent-7));
                background-size: 500% 500%;
                animation: gradientShift 4s ease infinite;
            }

            @keyframes gradientShift {
                0% {
                    background-position: 0% 50%;
                }

                50% {
                    background-position: 100% 50%;
                }

                100% {
                    background-position: 0% 50%;
                }
            }

            .year-header {
                padding: 2rem;
                text-align: center;
                background: var(--header-bg);
                color: white;
                position: relative;
            }

            .year-number {
                font-size: 3.8rem;
                font-weight: 900;
                margin-bottom: 0.6rem;
                animation: float 3s ease-in-out infinite;
                text-shadow: 0 5px 12px rgba(0, 0, 0, 0.35);
                letter-spacing: -1.5px;
            }

            @keyframes float {

                0%,
                100% {
                    transform: translateY(0px);
                }

                50% {
                    transform: translateY(-12px);
                }
            }

            .year-title {
                font-size: 1.6rem;
                font-weight: 700;
                text-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);
            }

            .subjects-list {
                list-style: none;
                margin: 1.8rem 0;
                padding: 0 2rem;
            }

            .subjects-list li {
                padding: 0.9rem 0;
                border-bottom: 1px solid #e2e8f0;
                display: flex;
                align-items: center;
                gap: 12px;
                transition: all 0.25s ease;
                cursor: pointer;
                border-radius: 10px;
                margin: 0.3rem 0;
                position: relative;
                overflow: hidden;
            }

            .dark-mode .subjects-list li {
                border-bottom: 1px solid #334155;
            }

            .subjects-list li:last-child {
                border-bottom: none;
            }

            .subjects-list li::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                width: 4px;
                background: var(--gradient-1);
                transform: scaleY(0);
                transform-origin: top;
                transition: transform 0.25s ease;
            }

            .subjects-list li:hover::before {
                transform: scaleY(1);
            }

            .subjects-list li:hover {
                color: var(--primary-dark);
                transform: translateX(8px);
                background: #f8fafc;
                padding-left: 1.2rem;
                box-shadow: 0 3px 10px rgba(79, 70, 229, 0.12);
            }

            .dark-mode .subjects-list li:hover {
                color: #c4b5fd;
                background: #334155;
                box-shadow: 0 3px 10px rgba(67, 56, 202, 0.25);
            }

            .subject-icon {
                font-size: 1.3rem;
                color: var(--primary);
                min-width: 25px;
                text-align: center;
            }

            /* Subject Detail Section */
            .subject-detail-section {
                display: none;
                margin-top: 2.5rem;
                padding: 2.2rem;
                background: var(--glass-bg);
                backdrop-filter: blur(var(--blur-amount));
                -webkit-backdrop-filter: blur(var(--blur-amount));
                border-radius: 30px;
                box-shadow: var(--glass-shadow);
                animation: slideInUp 0.5s cubic-bezier(0.23, 1, 0.32, 1);
                border: 1px solid var(--glass-border);
                transition: all 0.3s ease;
            }

            .dark-mode .subject-detail-section {
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(67, 56, 202, 0.25);
            }

            .subject-detail-section.active {
                display: block;
            }

            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .subject-header {
                text-align: center;
                margin-bottom: 2.2rem;
                padding-bottom: 1.6rem;
                border-bottom: 3px solid #e2e8f0;
                position: relative;
            }

            .dark-mode .subject-header {
                border-bottom: 3px solid #334155;
            }

            /* ====== Horizontal Subject Card ====== */
            .subject {
                background: linear-gradient(135deg, #ffffff, #f3f6fb);
                border-radius: 20px;
                padding: 18px 22px;
                margin-bottom: 20px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 20px;
                position: relative;
                overflow: hidden;
            }

            .subject::before {
                content: "";
                position: absolute;
                right: 0;
                top: 0;
                width: 6px;
                height: 100%;
                background: linear-gradient(180deg, #4facfe, #00f2fe);
            }

            .subject:hover {
                transform: translateY(-3px);
                box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
            }

            /* ====== Title ====== */
            .subject h2 {
                font-size: 20px;
                color: #1e3c72;
                min-width: 140px;
                display: flex;
                align-items: center;
                gap: 8px;
                white-space: nowrap;
            }

            /* ====== Lessons Container ====== */
            .subject-lessons {
                display: flex;
                flex-wrap: wrap;
                gap: 10px 16px;
                flex: 1;
            }

            /* ====== Lesson Item ====== */
            .lesson {
                background: #f9fbff;
                padding: 6px 12px;
                border-radius: 20px;
                transition: all 0.2s ease;
            }

            .lesson:hover {
                background: #eef4ff;
                transform: scale(1.05);
            }

            .lesson label {
                cursor: pointer;
                font-size: 14px;
                color: #333;
                display: flex;
                align-items: center;
                gap: 6px;
            }

            /* Checkbox */
            .lesson input[type="checkbox"] {
                accent-color: #4facfe;
                cursor: pointer;
            }

            /* ====== Progress Area ====== */
            .progress-area {
                min-width: 160px;
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }

            .progress-container {
                width: 100%;
                height: 10px;
                background: #e6ecf5;
                border-radius: 50px;
                overflow: hidden;
            }

            .progress-bar {
                height: 100%;
                width: 0%;
                background: linear-gradient(90deg, #4facfe, #00f2fe, #43e97b);
                border-radius: 50px;
                transition: width 0.4s ease;
            }

            .progress-text {
                font-size: 13px;
                font-weight: bold;
                color: #1e3c72;
            }

            /* ====== Completed Lesson ====== */
            .lesson input[type="checkbox"]:checked+span {
                text-decoration: line-through;
                color: #999;
            }

            /* ====== Responsive ====== */
            @media (max-width: 768px) {
                .subject {
                    flex-direction: column;
                    align-items: flex-start;
                }

                .progress-area {
                    width: 100%;
                }
            }

            .subject-header::after {
                content: '';
                position: absolute;
                bottom: -3px;
                left: 50%;
                transform: translateX(-50%);
                width: 120px;
                height: 3px;
                background: var(--gradient-1);
                border-radius: 2px;
            }

            .subject-header h2 {
                font-size: 2.6rem;
                color: var(--primary-dark);
                margin-bottom: 1.2rem;
                background: var(--gradient-1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
                font-weight: 800;
            }

            .dark-mode .subject-header h2 {
                color: #c4b5fd;
            }

            .subject-overview {
                background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
                padding: 2rem;
                border-radius: 20px;
                margin-bottom: 2.5rem;
                border-left: 5px solid var(--primary);
                position: relative;
                overflow: hidden;
                box-shadow: 0 6px 16px rgba(79, 70, 229, 0.08);
            }

            .subject-overview::before {
                content: '""';
                position: absolute;
                top: -50px;
                right: -50px;
                width: 150px;
                height: 150px;
                background: radial-gradient(circle, rgba(79, 70, 229, 0.1) 0%, transparent 70%);
                border-radius: 50%;
            }

            .subject-overview h3 {
                color: var(--primary-dark);
                margin-bottom: 1rem;
                font-size: 1.5rem;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 700;
            }

            .dark-mode .subject-overview h3 {
                color: #c4b5fd;
            }

            .subject-overview h3::before {
                content: '📖';
                font-size: 1.8rem;
            }

            .subject-overview p {
                color: var(--text-secondary);
                line-height: 1.9;
                font-size: 1.1rem;
                position: relative;
                z-index: 1;
            }

            .content-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
                gap: 2.2rem;
                margin-top: 2rem;
            }

            .content-card {
                background: var(--glass-bg);
                backdrop-filter: blur(var(--blur-amount));
                -webkit-backdrop-filter: blur(var(--blur-amount));
                border-radius: 24px;
                padding: 2.4rem 1.8rem;
                box-shadow: var(--glass-shadow);
                transition: all 0.35s ease;
                border-top: 5px solid var(--primary);
                position: relative;
                overflow: hidden;
                border: 1px solid var(--glass-border);
            }

            .dark-mode .content-card {
                box-shadow: 0 15px 32px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(67, 56, 202, 0.25);
            }

            .content-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 5px;
                background: var(--gradient-1);
            }

            .content-card:hover {
                transform: translateY(-10px) scale(1.02);
                box-shadow: 0 20px 45px rgba(0, 0, 0, 0.2);
            }

            .dark-mode .content-card:hover {
                box-shadow: 0 20px 45px rgba(0, 0, 0, 0.4);
            }

            .content-card h4 {
                color: var(--primary-dark);
                margin-bottom: 1.4rem;
                font-size: 1.6rem;
                text-align: center;
                position: relative;
                padding-bottom: 1rem;
                font-weight: 700;
            }

            .dark-mode .content-card h4 {
                color: #c4b5fd;
            }

            .content-card h4::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 60px;
                height: 3px;
                background: var(--gradient-1);
                border-radius: 2px;
            }

            .content-card ul {
                list-style: none;
            }

            .content-card li {
                padding: 0.8rem 0;
                border-bottom: 1px solid #f1f5f9;
                color: var(--text-secondary);
                font-size: 1rem;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 500;
            }

            .dark-mode .content-card li {
                border-bottom: 1px solid #334155;
            }

            .content-card li:last-child {
                border-bottom: none;
            }

            .content-card li::before {
                content: '✓';
                color: var(--success);
                font-weight: bold;
                font-size: 1.2rem;
                min-width: 22px;
            }

            .content-card li:hover {
                color: var(--primary-dark);
                transform: translateX(6px);
            }

            .dark-mode .content-card li:hover {
                color: #c4b5fd;
            }

            /* Lessons Card Specific Styling */
            .lesson-item {
                background: #f8fafc;
                padding: 1.2rem;
                border-radius: 12px;
                margin-bottom: 1rem;
                border-left: 3px solid var(--primary);
                transition: all 0.25s ease;
                box-shadow: 0 3px 10px rgba(79, 70, 229, 0.06);
            }

            .dark-mode .lesson-item {
                background: #334155;
                box-shadow: 0 3px 10px rgba(67, 56, 202, 0.18);
            }

            .lesson-item:hover {
                background: #f1f5f9;
                transform: translateX(4px);
                box-shadow: 0 5px 14px rgba(0, 0, 0, 0.12);
            }

            .dark-mode .lesson-item:hover {
                background: #475569;
                box-shadow: 0 5px 14px rgba(0, 0, 0, 0.25);
            }

            .lesson-title {
                font-weight: 700;
                color: var(--primary-dark);
                margin-bottom: 0.6rem;
                font-size: 1.1rem;
            }

            .dark-mode .lesson-title {
                color: #c4b5fd;
            }

            .lesson-details {
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
                gap: 10px;
            }

            .lesson-link {
                color: var(--primary);
                text-decoration: none;
                font-weight: 600;
                font-size: 0.95rem;
                transition: all 0.2s ease;
                padding: 0.4rem 0.8rem;
                border-radius: 10px;
                background: rgba(79, 70, 229, 0.1);
            }

            .lesson-link:hover {
                color: var(--primary-dark);
                text-decoration: underline;
                background: rgba(79, 70, 229, 0.2);
                transform: translateY(-2px);
            }

            .dark-mode .lesson-link:hover {
                color: #c4b5fd;
            }

            .difficulty {
                display: inline-flex;
                align-items: center;
                gap: 5px;
                padding: 0.35rem 0.8rem;
                border-radius: 20px;
                font-weight: 700;
                font-size: 0.9rem;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            }

            .difficulty.easy {
                background: linear-gradient(135deg, #dcfce7, #bbf7d0);
                color: #166534;
            }

            .dark-mode .difficulty.easy {
                background: linear-gradient(135deg, #166534, #15803d);
                color: #bbf7d0;
            }

            .difficulty.medium {
                background: linear-gradient(135deg, #fef3c7, #fde68a);
                color: #92400e;
            }

            .dark-mode .difficulty.medium {
                background: linear-gradient(135deg, #92400e, #b45309);
                color: #fde68a;
            }

            .difficulty.hard {
                background: linear-gradient(135deg, #fee2e2, #fecaca);
                color: #991b1b;
            }

            .dark-mode .difficulty.hard {
                background: linear-gradient(135deg, #991b1b, #dc2626);
                color: #fecaca;
            }

            /* Videos Card Specific Styling */
            .video-item {
                background: #f0f9ff;
                padding: 1rem;
                border-radius: 10px;
                margin-bottom: 0.8rem;
                border-left: 3px solid var(--accent-5);
                transition: all 0.25s ease;
                box-shadow: 0 3px 10px rgba(6, 182, 212, 0.08);
            }

            .dark-mode .video-item {
                background: #334155;
                box-shadow: 0 3px 10px rgba(8, 145, 178, 0.2);
            }

            .video-item:hover {
                background: #e0f2fe;
                transform: translateX(2px);
                box-shadow: 0 5px 14px rgba(0, 0, 0, 0.15);
            }

            .dark-mode .video-item:hover {
                background: #475569;
                box-shadow: 0 5px 14px rgba(0, 0, 0, 0.3);
            }

            .video-link {
                color: var(--accent-5);
                text-decoration: none;
                font-weight: 600;
                font-size: 0.95rem;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.2s ease;
                padding: 0.4rem 0.8rem;
                border-radius: 10px;
                background: rgba(6, 182, 212, 0.1);
            }

            .video-link:hover {
                color: var(--primary-dark);
                text-decoration: underline;
                background: rgba(6, 182, 212, 0.2);
                transform: translateY(-2px);
            }

            .dark-mode .video-link:hover {
                color: #c4b5fd;
            }

            /* Semester Toggle Buttons */
            .semester-toggle {
                display: flex;
                gap: 1rem;
                margin-bottom: 1.6rem;
                flex-wrap: wrap;
            }

            .semester-btn {
                background: var(--glass-bg);
                border: 1px solid var(--primary);
                color: var(--primary);
                padding: 0.7rem 1.6rem;
                border-radius: 20px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.25s ease;
                flex: 1;
                min-width: 120px;
                text-align: center;
                font-size: 1rem;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            }

            .semester-btn:hover {
                background: var(--primary);
                color: white;
                transform: translateY(-3px) scale(1.03);
                box-shadow: 0 6px 16px rgba(79, 70, 229, 0.25);
            }

            .semester-btn.active {
                background: var(--primary);
                color: white;
                box-shadow: 0 6px 16px rgba(79, 70, 229, 0.25);
            }

            .semester-content {
                display: none;
            }

            .semester-content.active {
                display: block;
                animation: fadeIn 0.4s ease;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            .empty-content {
                text-align: center;
                color: var(--danger);
                font-weight: 700;
                padding: 2.2rem 1rem;
                font-size: 1.25rem;
                background: linear-gradient(135deg, #fef2f2, #fee2e2);
                border-radius: 16px;
                border: 2.5px dashed var(--danger);
                animation: pulseRed 2s infinite;
                box-shadow: 0 6px 16px rgba(239, 68, 68, 0.18);
            }

            .dark-mode .empty-content {
                background: linear-gradient(135deg, #7f1d1d, #991b1b);
                color: #fecaca;
                border: 2.5px dashed #fecaca;
                box-shadow: 0 6px 16px rgba(153, 27, 27, 0.35);
            }

            @keyframes pulseRed {

                0%,
                100% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.03);
                }
            }

            .empty-content::before {
                content: '⚠️';
                font-size: 2.2rem;
                display: block;
                margin-bottom: 1rem;
            }


            /* Footer - Smaller & More Attractive */
            footer {
                background: linear-gradient(120deg, #1e293b, #0f172a, #1e293b);
                color: white;
                padding: 2rem 0 1.5rem;
                text-align: center;
                margin-top: 2.5rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
            }

            footer::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 30%),
                    radial-gradient(circle at bottom left, rgba(236, 72, 153, 0.15), transparent 30%);
                z-index: 0;
            }

            .footer-content {
                max-width: 650px;
                margin: 0 auto;
                position: relative;
                z-index: 1;
            }

            .footer-content p {
                margin-bottom: 1rem;
                opacity: 0.85;
                line-height: 1.8;
                font-size: 1.05rem;
            }

            .copyright {
                font-weight: 600;
                letter-spacing: 0.5px;
                opacity: 0.9;
            }

            /* Study Map Custom Styles */
            .study-map-section {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
                margin-top: 2rem;
            }

            .study-tip-card {
                background: var(--card-bg);
                border-radius: 20px;
                padding: 2rem;
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
                border-left: 4px solid var(--primary);
                position: relative;
                overflow: hidden;
            }

            .dark-mode .study-tip-card {
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
            }

            .study-tip-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            }

            .dark-mode .study-tip-card:hover {
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            }

            .study-tip-card h3 {
                color: var(--primary-dark);
                margin-bottom: 1.2rem;
                font-size: 1.4rem;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .dark-mode .study-tip-card h3 {
                color: #c4b5fd;
            }

            .study-tip-card h3::before {
                font-size: 1.6rem;
            }

            .study-tip-card p {
                color: var(--text-secondary);
                line-height: 1.8;
                margin-bottom: 1.2rem;
            }

            .study-tip-card ul {
                padding-right: 1.2rem;
            }

            .study-tip-card li {
                margin-bottom: 0.6rem;
                color: var(--text-secondary);
                position: relative;
                padding-right: 1.2rem;
            }

            .study-tip-card li::before {
                content: '•';
                color: var(--primary);
                position: absolute;
                right: 0;
                font-weight: bold;
                font-size: 1.4rem;
            }

            .resources-section {
                margin-top: 3rem;
            }

            .resources-section h2 {
                text-align: center;
                font-size: 2.2rem;
                margin-bottom: 2rem;
                color: var(--primary-dark);
                background: var(--gradient-1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                font-weight: 800;
            }

            .resource-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.8rem;
                margin-top: 1.5rem;
            }

            .resource-card {
                background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
                border-radius: 18px;
                padding: 1.8rem;
                text-align: center;
                box-shadow: 0 8px 20px rgba(79, 70, 229, 0.12);
                transition: all 0.3s ease;
            }

            .dark-mode .resource-card {
                background: linear-gradient(135deg, #1e293b, #334155);
                box-shadow: 0 8px 20px rgba(67, 56, 202, 0.25);
            }

            .resource-card:hover {
                transform: scale(1.03);
                box-shadow: 0 12px 28px rgba(79, 70, 229, 0.2);
            }

            .resource-icon {
                font-size: 2.4rem;
                margin-bottom: 1.2rem;
                color: var(--primary);
            }

            .resource-card h4 {
                color: var(--primary-dark);
                margin-bottom: 1rem;
                font-size: 1.3rem;
            }

            .dark-mode .resource-card h4 {
                color: #c4b5fd;
            }

            .resource-card p {
                color: var(--text-secondary);
                font-size: 0.95rem;
                line-height: 1.6;
            }

            /* About Us Page Specific */
            .about-section {
                margin-top: 2.5rem;
            }

            .about-card {
                background: var(--card-bg);
                border-radius: 20px;
                padding: 2.5rem;
                margin-bottom: 2rem;
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
                border-left: 4px solid var(--primary);
                position: relative;
                overflow: hidden;
            }

            .dark-mode .about-card {
                background: #1e293b;
                box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
            }

            .about-card h2 {
                color: var(--primary-dark);
                margin-bottom: 1.5rem;
                font-size: 1.8rem;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .dark-mode .about-card h2 {
                color: #c4b5fd;
            }

            .about-card h2::before {
                font-size: 1.8rem;
            }

            .about-card p {
                color: var(--text-secondary);
                line-height: 1.8;
                margin-bottom: 1rem;
            }

            .about-card ul {
                padding-right: 1.5rem;
                margin-top: 1rem;
            }

            .about-card li {
                margin-bottom: 0.8rem;
                color: var(--text-secondary);
                position: relative;
                padding-right: 1.5rem;
            }

            .about-card li::before {
                content: '✓';
                color: var(--primary);
                position: absolute;
                right: 0;
                font-weight: bold;
                font-size: 1.4rem;
            }

            .not-for {
                background: linear-gradient(135deg, #fee2e2, #fecaca);
                padding: 1.5rem;
                border-radius: 16px;
                margin: 1.5rem 0;
                border-left: 4px solid var(--danger);
            }

            .dark-mode .not-for {
                background: linear-gradient(135deg, #7f1d1d, #991b1b);
                color: #fecaca;
                border-left: 4px solid #fecaca;
            }

            .not-for h3 {
                color: var(--danger);
                margin-bottom: 1rem;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .dark-mode .not-for h3 {
                color: #fecaca;
            }

            .not-for h3::before {
                content: '❌';
                font-size: 1.6rem;
            }

            .transparency-card {
                background: linear-gradient(135deg, #e0f2fe, #bae6fd);
                border-left: 4px solid var(--accent-5);
            }

            .dark-mode .transparency-card {
                background: linear-gradient(135deg, #0c4a6e, #0ea5e9);
                color: #f0f9ff;
            }

            .transparency-card h2::before {
                content: '⚠️';
            }

            .human-touch {
                background: linear-gradient(135deg, #f0fdf4, #dcfce7);
                border-left: 4px solid var(--success);
                text-align: center;
                padding: 2rem;
                border-radius: 20px;
            }

            .dark-mode .human-touch {
                background: linear-gradient(135deg, #166534, #15803d);
                color: #dcfce7;
            }

            .human-touch p {
                font-style: italic;
                font-size: 1.1rem;
                max-width: 600px;
                margin: 0 auto;
            }

            .interaction-section {
                text-align: center;
                margin-top: 3rem;
                padding: 2.5rem;
                background: var(--card-bg);
                border-radius: 20px;
                box-shadow: 0 8px 20px rgba(79, 70, 229, 0.1);
                border: 1px solid rgba(79, 70, 229, 0.1);
            }

            .interaction-section h3 {
                font-size: 1.8rem;
                margin-bottom: 1.2rem;
                color: var(--primary-dark);
            }

            .interaction-section p {
                color: var(--text-secondary);
                max-width: 600px;
                margin: 0 auto 1.8rem;
                line-height: 1.7;
            }

            .interaction-btn {
                background: var(--gradient-1);
                color: white;
                padding: 0.9rem 2.4rem;
                border-radius: 16px;
                text-decoration: none;
                font-weight: 800;
                font-size: 1.2rem;
                transition: all 0.35s ease;
                box-shadow: 0 6px 20px rgba(139, 92, 246, 0.35);
                display: inline-block;
            }

            .interaction-btn:hover {
                transform: translateY(-4px) scale(1.04);
                box-shadow: 0 10px 28px rgba(139, 92, 246, 0.5);
                background: var(--gradient-2);
            }

            .contact-info {
                background: var(--card-bg);
                border-radius: 20px;
                padding: 2.5rem;
                margin-top: 2rem;
                box-shadow: 0 8px 20px rgba(79, 70, 229, 0.1);
                border: 1px solid rgba(79, 70, 229, 0.1);
                text-align: center;
            }

            .contact-info h3 {
                color: var(--primary-dark);
                margin-bottom: 1.5rem;
                font-size: 1.6rem;
            }

            .contact-info p {
                color: var(--text-secondary);
                margin-bottom: 1rem;
                font-size: 1.1rem;
            }

            .contact-email {
                color: var(--primary);
                font-weight: 700;
                font-size: 1.2rem;
                text-decoration: none;
            }

            .contact-email:hover {
                text-decoration: underline;
            }

            /* Welcome Modal */
            #welcomeModal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                animation: fadeIn 0.5s ease;
            }

            .modal-content {
                background: var(--card-bg);
                padding: 2.5rem;
                border-radius: 20px;
                text-align: center;
                max-width: 500px;
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(79, 70, 229, 0.2);
            }

            .modal-content h2 {
                font-size: 2.2rem;
                color: var(--primary-dark);
                margin-bottom: 1.2rem;
                background: var(--gradient-1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                font-weight: 800;
            }

            .modal-content p {
                color: var(--text-secondary);
                font-size: 1.1rem;
                margin-bottom: 1.5rem;
                line-height: 1.7;
            }

            .close-btn {
                background: var(--gradient-1);
                color: white;
                padding: 0.7rem 1.8rem;
                border-radius: 12px;
                font-weight: 700;
                font-size: 1rem;
                cursor: pointer;
                border: none;
                transition: all 0.3s ease;
                box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
            }

            .close-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            /* Responsive Design - Professional Refinements */
            @media (max-width: 992px) {

                .target-audience,
                .years-grid,
                .study-map-section {
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                }
            }

            @media (max-width: 768px) {
                .hero-title {
                    font-size: 2rem;
                }

                .page-header h1 {
                    font-size: 2.3rem;
                }

                .year-number {
                    font-size: 3.3rem;
                }

                .subject-header h2 {
                    font-size: 2.1rem;
                }

                .header-content {
                    padding: 0.5rem 1rem;
                    gap: 0.8rem;
                }

                .logo {
                    font-size: 1.5rem;
                }

                .logo img {
                    height: 35px;
                }

                .content-grid {
                    grid-template-columns: 1fr;
                    gap: 1.5rem;
                }

                .content-card {
                    padding: 1.8rem 1.2rem;
                }

                .search-container {
                    width: 95%;
                    padding: 1.2rem;
                    margin-top: 5vh;
                }

                #search-input {
                    padding: 1rem;
                    font-size: 1rem;
                }
            }

            @media (max-width: 580px) {
                .header-content {
                    flex-direction: row;
                    flex-wrap: wrap;
                    justify-content: center;
                    gap: 12px;
                }

                .logo {
                    order: -1;
                    width: 100%;
                    justify-content: center;
                    margin-bottom: 5px;
                }

                header {
                    top: 10px;
                    border-radius: 30px;
                    padding: 0.8rem 1rem;
                }

                .dropdown-toggle {
                    padding: 0.6rem 1.2rem;
                    font-size: 0.9rem;
                }

                .theme-toggle {
                    width: 36px;
                    height: 36px;
                }

                .years-grid {
                    grid-template-columns: 1fr;
                }

                .search-overlay {
                    padding-top: 5vh;
                }

                .search-result-item {
                    padding: 1rem;
                    gap: 10px;
                }

                .search-result-icon {
                    width: 35px;
                    height: 35px;
                    font-size: 1.2rem;
                }

                .search-result-title {
                    font-size: 1rem;
                }

                .search-result-desc {
                    font-size: 0.85rem;
                }
            }

            @media (max-width: 480px) {
                .hero-title {
                    font-size: 1.7rem;
                }

                .page-header h1 {
                    font-size: 1.9rem;
                }

                .page-header p {
                    font-size: 1rem;
                }

                .audience-card,
                .about-card,
                .study-tip-card {
                    padding: 1.5rem 1.2rem;
                }

                .btn {
                    width: 100%;
                    text-align: center;
                }

                .interaction-section,
                .contact-info {
                    padding: 1.8rem 1.2rem;
                }

                /* Compact Header for tiny screens */
                .header-content {
                    gap: 8px;
                }

                .dropdown-toggle span {
                    display: none;
                }

                /* Optional: Hide text in menu btn if needed */

                .modal-content {
                    padding: 1.8rem 1.2rem;
                    margin: 15px;
                }

                .modal-content h2 {
                    font-size: 1.6rem;
                }

                .empty-page {
                    padding: 3rem 1.5rem;
                }

                .empty-page h2 {
                    font-size: 1.8rem;
                }
            }

            /* Scroll Animation Classes */
            .hidden-el {
                opacity: 0;
                transform: translateY(30px);
                transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
            }

            .show-el {
                opacity: 1;
                transform: translateY(0);
            }

            /* Search Navigation Highlighting */
            @keyframes pulse-highlight {
                0% {
                    background-color: var(--primary);
                    color: white;
                    transform: scale(1.02);
                    box-shadow: 0 0 20px var(--primary);
                }

                50% {
                    background-color: var(--primary);
                    color: white;
                    transform: scale(1.02);
                    box-shadow: 0 0 30px var(--primary);
                }

                100% {
                    background-color: transparent;
                    color: inherit;
                    transform: scale(1);
                    box-shadow: none;
                }
            }

            .highlight-target {
                animation: pulse-highlight 2s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
                border-radius: 8px;
                z-index: 10;
                position: relative;
            }

            /* --- Mental Health Topics Styles --- */
            .mh-topics-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
                margin-top: 3rem;
            }

            .mh-topic-card {
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                border: 1px solid var(--glass-border);
                border-radius: 20px;
                padding: 2rem;
                transition: all 0.3s ease;
                cursor: pointer;
                position: relative;
                overflow: hidden;
                text-align: right;
            }

            .mh-topic-card:hover {
                transform: translateY(-8px);
                box-shadow: var(--glass-shadow);
                border-color: var(--primary);
            }

            .mh-topic-card h3 {
                color: var(--primary);
                margin-bottom: 1rem;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .mh-topic-card.quran-theme {
                border: 1px solid #c5a059;
                background: linear-gradient(145deg, rgba(20, 20, 40, 0.9), rgba(40, 40, 80, 0.8));
            }

            .mh-topic-card.quran-theme h3 {
                color: #ffd700;
            }

            .mh-detail-card.quran-verse {
                border-right: 4px solid #ffd700;
                text-align: center;
                font-size: 1.4rem;
                font-family: 'Amiri', serif;
                line-height: 2;
            }

            /* --- Detail View Styles --- */
            #mh-topic-detail {
                animation: fadeInScale 0.4s ease-out;
            }

            .mh-detail-header {
                background: linear-gradient(135deg, var(--primary) 0%, var(--accent-1) 100%);
                color: white;
                padding: 4rem 2rem;
                border-radius: 24px;
                text-align: center;
                margin-bottom: 3rem;
                position: relative;
                overflow: hidden;
            }

            .mh-detail-header h2 {
                font-size: 2.5rem;
                margin-bottom: 1rem;
                text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }

            .mh-detail-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 2rem;
                margin-bottom: 3rem;
            }

            .mh-detail-card {
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                border: 1px solid var(--glass-border);
                border-radius: 20px;
                padding: 2rem;
                box-shadow: var(--glass-shadow);
                transition: all 0.3s ease;
            }

            .mh-detail-card:hover {
                border-color: var(--primary);
                transform: translateY(-5px);
            }

            .mh-detail-card h4 {
                color: var(--primary);
                font-size: 1.2rem;
                margin-bottom: 1.2rem;
                display: flex;
                align-items: center;
                gap: 10px;
                border-bottom: 1px solid var(--glass-border);
                padding-bottom: 0.8rem;
            }

            .mh-back-btn {
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                padding: 0.8rem 1.5rem;
                border-radius: 12px;
                cursor: pointer;
                margin-bottom: 2rem;
                display: flex;
                align-items: center;
                gap: 8px;
                color: var(--text-primary);
                transition: all 0.3s ease;
                font-weight: 700;
            }

            .mh-back-btn:hover {
                background: var(--primary);
                color: white;
            }

            @keyframes fadeInScale {
                from {
                    opacity: 0;
                    transform: scale(0.98);
                }

                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            /* Library Styles */
            .library-card {
                background: white;
                border-radius: 15px;
                padding: 1.5rem;
                margin-bottom: 1rem;
                border-right: 4px solid var(--primary);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.02);
            }

            .dark-mode .library-card {
                background: var(--bg-secondary);
            }

            /* Routine Tracker */
            .routine-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 1rem;
                background: rgba(255, 255, 255, 0.5);
                border-radius: 12px;
                margin-bottom: 0.8rem;
            }

            .routine-checkbox {
                width: 24px;
                height: 24px;
                cursor: pointer;
            }

            .streak-count {
                font-weight: 900;
                font-size: 1.5rem;
                color: #f59e0b;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            /* Interactive Mind Map Styles */
            .mind-map-container {
                width: 100%;
                max-width: 1000px;
                margin: 2rem auto;
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                border-radius: 24px;
                padding: 2rem;
                box-shadow: var(--glass-shadow);
                overflow: visible;
                position: relative;
            }

            .mind-map-svg {
                width: 100%;
                height: auto;
                display: block;
            }

            .map-node {
                cursor: pointer;
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

            .map-node circle {
                fill: var(--primary);
                stroke: white;
                stroke-width: 3;
                transition: all 0.3s ease;
            }

            .map-node:hover circle {
                fill: var(--accent-1);
                r: 45;
                /* Center node */
                filter: drop-shadow(0 0 15px var(--primary));
            }

            .map-node.sub-node:hover circle {
                r: 35;
            }

            .map-node text {
                fill: var(--text-primary);
                font-weight: 800;
                font-size: 14px;
                pointer-events: none;
                text-anchor: middle;
                dominant-baseline: middle;
            }

            .map-connection {
                stroke: var(--primary);
                stroke-width: 2;
                stroke-dasharray: 5, 5;
                opacity: 0.4;
                transition: all 0.3s ease;
            }

            .map-node:hover~.map-connection,
            .map-connection.active {
                stroke: var(--accent-1);
                stroke-width: 3;
                opacity: 1;
                stroke-dasharray: none;
            }

            .node-icon {
                font-size: 20px;
                pointer-events: none;
            }

            /* --- Med-Glossary Styles --- */
            .glossary-search-container {
                background: var(--glass-bg);
                backdrop-filter: blur(15px);
                border: 1px solid var(--glass-border);
                border-radius: 24px;
                padding: 2.5rem;
                margin-bottom: 3rem;
                box-shadow: var(--glass-shadow);
                text-align: center;
            }

            .glossary-search-wrapper {
                position: relative;
                max-width: 600px;
                margin: 0 auto 2rem;
            }

            .glossary-search-input {
                width: 100%;
                padding: 1.2rem 3.5rem 1.2rem 1.5rem;
                background: rgba(255, 255, 255, 0.7);
                border: 2px solid var(--glass-border);
                border-radius: 16px;
                font-size: 1.2rem;
                font-family: 'Tajawal', sans-serif;
                transition: all 0.3s ease;
                color: var(--text-primary);
            }

            .dark-mode .glossary-search-input {
                background: rgba(30, 41, 59, 0.7);
            }

            .glossary-search-input:focus {
                border-color: var(--primary);
                box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
                outline: none;
                background: white;
            }

            .dark-mode .glossary-search-input:focus {
                background: #1e293b;
            }

            .glossary-search-icon {
                position: absolute;
                right: 1.2rem;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1.5rem;
                color: var(--primary);
            }

            .alphabet-filter {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
                margin-top: 1.5rem;
            }

            .letter-btn {
                width: 38px;
                height: 38px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                border-radius: 10px;
                cursor: pointer;
                font-weight: 700;
                transition: all 0.2s ease;
                color: var(--text-secondary);
            }

            .letter-btn:hover,
            .letter-btn.active {
                background: var(--primary);
                color: white;
                transform: translateY(-3px);
                box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
            }

            .glossary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 1.5rem;
            }

            .glossary-card {
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                border: 1px solid var(--glass-border);
                border-radius: 20px;
                padding: 1.5rem;
                transition: all 0.3s ease;
                text-align: right;
                border-right: 4px solid var(--primary);
            }

            .glossary-card:hover {
                transform: translateY(-5px);
                box-shadow: var(--glass-shadow);
                border-color: var(--primary);
            }

            .glossary-term {
                font-size: 1.4rem;
                font-weight: 800;
                color: var(--primary-dark);
                margin-bottom: 0.5rem;
                font-family: 'Inter', sans-serif;
            }

            .dark-mode .glossary-term {
                color: #c4b5fd;
            }

            .glossary-full {
                font-size: 0.95rem;
                color: var(--text-secondary);
                margin-bottom: 1rem;
                font-style: italic;
                display: block;
            }

            .glossary-meaning {
                font-size: 1.1rem;
                color: var(--text-primary);
                line-height: 1.6;
                border-top: 1px solid var(--glass-border);
                padding-top: 1rem;
            }

            .glossary-category {
                display: inline-block;
                padding: 0.3rem 0.8rem;
                background: rgba(99, 102, 241, 0.1);
                color: var(--primary);
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 600;
                margin-bottom: 1rem;
            }

            .empty-glossary {
                text-align: center;
                padding: 4rem;
                color: var(--text-secondary);
            }

            .empty-glossary i {
                font-size: 4rem;
                margin-bottom: 1rem;
                display: block;
                opacity: 0.3;
            }

            @keyframes pulse-glow {
                0% {
                    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
                }

                70% {
                    box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
                }

                100% {
                    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
                }
            }

            /* --- Rotation Tracker Styles --- */
            .tracker-dashboard {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2.5rem;
            }

            .stat-card {
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                border-radius: 20px;
                padding: 1.5rem;
                text-align: center;
                transition: transform 0.3s ease;
            }

            .rotation-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 2rem;
            }

            .rotation-card {
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                border: 1px solid var(--glass-border);
                border-radius: 24px;
                padding: 1.8rem;
                position: relative;
                overflow: hidden;
                border-left: 5px solid var(--primary);
            }

            .progress-container {
                height: 10px;
                background: rgba(0, 0, 0, 0.1);
                border-radius: 5px;
                margin: 1rem 0;
                overflow: hidden;
            }

            .progress-bar {
                height: 100%;
                background: var(--primary);
                transition: width 0.5s ease;
            }

            .skill-tag {
                display: inline-block;
                padding: 5px 12px;
                background: rgba(99, 102, 241, 0.1);
                color: var(--primary);
                border-radius: 20px;
                font-size: 0.8rem;
                margin: 4px;
                cursor: pointer;
                transition: all 0.2s;
            }

            .skill-tag.mastered {
                background: var(--success);
                color: white;
            }

            .add-rotation-btn {
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                width: 60px;
                height: 60px;
                border-radius: 50%;
                background: var(--primary);
                color: white;
                font-size: 2rem;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
                cursor: pointer;
                z-index: 100;
                transition: all 0.3s;
            }

            .tracker-form {
                background: var(--glass-bg);
                border: 1px solid var(--glass-border);
                border-radius: 24px;
                padding: 2rem;
                margin-bottom: 2.5rem;
                box-shadow: var(--glass-shadow);
            }

            .tracker-form h2 {
                color: var(--primary);
                margin-bottom: 1.5rem;
            }

            .form-group {
                margin-bottom: 1.2rem;
            }

            .form-group label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 700;
            }

            .form-group input {
                width: 100%;
                padding: 1rem;
                border: 2px solid rgba(99, 102, 241, 0.2);
                border-radius: 12px;
                background: rgba(255, 255, 255, 0.8);
            }

            .rotation-status {
                position: absolute;
                top: 1rem;
                left: 1rem;
                font-size: 0.7rem;
                padding: 4px 10px;
                border-radius: 20px;
            }

            .mobile-menu-toggle {
                display: none;
                background: var(--primary);
                color: white;
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 12px;
                cursor: pointer;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            }

            /* --- Professional Mobile Responsiveness --- */
            @media (max-width: 768px) {
                header {
                    max-width: 96% !important;
                    top: 10px !important;
                    padding: 0.8rem 1.2rem !important;
                    border-radius: 20px !important;
                    margin-bottom: 1.5rem !important;
                }

                header::before {
                    border-radius: 20px;
                }

                .logo {
                    font-size: 1.4rem !important;
                }

                .logo img {
                    height: 35px;
                }

                .mobile-menu-toggle {
                    display: flex !important;
                }

                .dropdown-toggle {
                    display: none !important;
                }

                .dropdown-menu {
                    position: fixed !important;
                    top: 0 !important;
                    right: -100% !important;
                    width: 280px !important;
                    height: 100vh !important;
                    background: var(--glass-bg) !important;
                    backdrop-filter: blur(25px) !important;
                    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.2) !important;
                    display: flex !important;
                    flex-direction: column !important;
                    padding: 2rem 1rem !important;
                    transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
                    border-radius: 0 !important;
                    border: none !important;
                    border-left: 1px solid var(--glass-border) !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                    transform: none !important;
                    z-index: 2000 !important;
                }

                .nav-dropdown.active .dropdown-menu {
                    right: 0 !important;
                }

                .dropdown-menu li {
                    width: 100% !important;
                }

                .dropdown-menu a {
                    font-size: 1.1rem !important;
                    padding: 1rem !important;
                    border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
                }

                .dark-mode .dropdown-menu a {
                    border-bottom-color: rgba(255, 255, 255, 0.05) !important;
                }

                .page-header h1 {
                    font-size: 1.8rem !important;
                }

                .page-header p {
                    font-size: 1rem !important;
                }

                .hero-title {
                    font-size: 1.6rem !important;
                }

                .years-grid,
                .target-audience,
                .mh-topics-grid,
                .resource-grid,
                .glossary-grid,
                .rotation-grid,
                .study-map-section {
                    grid-template-columns: 1fr !important;
                    gap: 1rem !important;
                }

                .tracker-dashboard {
                    grid-template-columns: repeat(2, 1fr) !important;
                    gap: 0.8rem !important;
                }

                .tracker-dashboard .stat-card:last-child {
                    grid-column: span 2 !important;
                }

                .year-card {
                    margin-bottom: 1.5rem !important;
                }

                .container {
                    padding: 0 15px !important;
                }

                #scroll-to-top {
                    bottom: 20px !important;
                    right: 20px !important;
                    width: 45px !important;
                    height: 45px !important;
                }

                .theme-toggle {
                    margin-right: 0.5rem !important;
                }

                .menu-close-btn {
                    display: block !important;
                    align-self: flex-start !important;
                    margin-bottom: 2rem !important;
                    background: none !important;
                    border: none !important;
                    font-size: 1.5rem !important;
                    color: var(--text-primary) !important;
                    cursor: pointer !important;
                }
            }

            @media (min-width: 769px) {
                .menu-close-btn {
                    display: none;
                }
            }
        </style>

    </head>

    <body>

        <!-- Welcome Modal -->
        <div id="welcomeModal">
            <div class="modal-content">
                <h2>Welcome To My Site 😎</h2>
                <p>مرحباً بك في منصة MedGpa</p>
                <button class="close-btn" onclick="document.getElementById('welcomeModal').style.display='none'">ابدأ
                    الاستكشاف</button>
            </div>
        </div>

        <header id="mainHeader">
            <div class="container header-content">
                <div style="display: flex; align-items: center;">
                    <div class="nav-dropdown" id="navDropdown">
                        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
                        <button class="dropdown-toggle">القائمة ▼ </button>
                        <ul class="dropdown-menu">
                            <button class="menu-close-btn" onclick="toggleMobileMenu()">✕</button>
                            <li><a href="#" onclick="showPage('home'); closeMobileMenu();">🏠 الرئيسية</a></li>
                            <li><a href="#" onclick="showPage('years'); closeMobileMenu();">🎓 السنوات الدراسية</a></li>
                            <li><a href="#" onclick="showPage('study_map'); closeMobileMenu();">🗺️ خريطتك الدراسية</a>
                            </li>
                            <li><a href="#" onclick="showPage('medical_calculator'); closeMobileMenu();">⚖️ الحاسبة
                                    الطبية</a></li>
                            <li><a href="#" onclick="showPage('mental_health'); closeMobileMenu();">🧠 صحتك النفسية</a>
                            </li>
                            <li><a href="#" onclick="showPage('qcm'); closeMobileMenu();">📝 QCMs</a></li>
                            <li><a href="#" onclick="showPage('med_glossary'); closeMobileMenu();">📚 قاموس
                                    الاختصارات</a></li>
                            <li><a href="#" onclick="showPage('rotation_tracker'); closeMobileMenu();">🏥 متتبع
                                    التربصات</a></li>
                            <li><a href="#" onclick="showPage('about_us'); closeMobileMenu();">👥 من نحن</a></li>
                        </ul>
                    </div>
                    <div class="theme-switcher">
                        <button class="theme-btn" onclick="toggleThemeMenu()" title="تغيير المظهر">🎨</button>
                        <div id="themeMenu" class="theme-menu">
                            <div class="theme-option" onclick="setThemePalette('default')"><span>🔵</span> الافتراضي
                            </div>
                            <div class="theme-option" onclick="setThemePalette('surgeon')"><span>🔴</span> الجرّاح
                            </div>
                            <div class="theme-option" onclick="setThemePalette('pharmacist')"><span>🟢</span>
                                الصيدلي</div>
                            <div class="theme-option" onclick="setThemePalette('sunset')"><span>🟠</span> الغروب
                            </div>
                        </div>
                    </div>
                    <button class="theme-toggle" id="themeToggle">🌙</button>
                    <div class="header-decor">
                        <div class="decor-circle"></div>
                        <div class="decor-circle"></div>
                    </div>
                </div>
                <div class="logo"><span>MedGpa</span></div>
                <button class="btn" onclick="toggleSearch()"
                    style="padding: 0.5rem 1rem; font-size: 1rem; border-radius: 12px; display: flex; align-items: center; gap: 5px;">
                    <span>بحث</span> 🔍
                </button>
            </div>
        </header>
        <main class="container">

            <section id="home" class="page active">
                <div class="page-header">
                    <h1>مرحباً بك في MedGpa</h1>
                    <p>منصة تعليمية شاملة تهدف إلى تسهيل دراسة المواد الطبية الأساسية من خلال محتوى منظم
                        وسهل الفهم</p>
                </div>
                <div class="hero-section">
                    <h2 class="hero-title">يستهدف الموقع</h2>
                    <div class="target-audience">
                        <div class="audience-card">
                            <div class="audience-icon">⚕️</div>
                            <h3 class="audience-title">طلاب الطب</h3>
                            <p class="audience-desc">(خصوصًا السنوات الأولى)</p>
                        </div>
                        <div class="audience-card">
                            <div class="audience-icon">📚</div>
                            <h3 class="audience-title">من يعانون من كثرة المصادر</h3>
                            <p class="audience-desc">ولا يعرفون من أين يبدأون</p>
                        </div>
                        <div class="audience-card">
                            <div class="audience-icon">⁉️</div>
                            <h3 class="audience-title">من يبحثون عن الاسئلة</h3>
                            <p class="audience-desc">ولم يجدوا من اين</p>
                        </div>
                        <div class="audience-card">
                            <div class="audience-icon">🔍</div>
                            <h3 class="audience-title">من يريدون حساب معدلاتهم</h3>
                            <p class="audience-desc">ولم يعرفو كيف</p>
                        </div>
                        <div class="audience-card">
                            <div class="audience-icon">📉</div>
                            <h3 class="audience-title">من يدرسون كثيرًا</h3>
                            <p class="audience-desc">لكن نتائجهم ضعيفة</p>
                        </div>
                        <div class="audience-card">
                            <div class="audience-icon">😴</div>
                            <h3 class="audience-title">من يشعرون بالإرهاق أو الضياع</h3>
                            <p class="audience-desc">في رحلتهم الأكاديمية</p>
                        </div>
                    </div>
                    <div class="special-note">
                        <h3>ملاحظة خاصة</h3>
                        <p>✨ مكتوب بلغة طالب طب ✨</p>
                    </div>
                    <div style="margin-top: 2.5rem;"><button class="btn" onclick="showPage('years')"
                            style="font-size: 1.2rem; padding: 1rem 2.4rem;">ابدأ رحلتك الآن</button></div>
                </div>
            </section>

            <section id="years" class="page">
                <div class="page-header">
                    <h1>السنوات الدراسية</h1>
                    <p>دليل شامل للسنتين الأولى والثانية في كلية الطب مع المواد الأساسية والمواضيع
                        الرئيسية</p>
                </div>
                <div class="years-grid">

                    <div class="year-card">
                        <div class="year-header">
                            <div class="year-number">1</div>
                            <div class="year-title">السنة الأولى</div>
                        </div>
                        <div class="year-body">
                            <h3
                                style="color: var(--primary-dark); margin-bottom: 1.8rem; text-align: center; font-size: 1.4rem;">
                                المواد الأساسية</h3>
                            <ul class="subjects-list">
                                <li onclick="showSubjectDetail('anatomie')">
                                    <span class="subject-icon">🦴</span>ANATOMIE
                                </li>
                                <li onclick="showSubjectDetail('biochimie')">
                                    <span class="subject-icon">🧪</span>BIOCHIMIE
                                </li>
                                <li onclick="showSubjectDetail('cytologie')">
                                    <span class="subject-icon">🔬</span>CYTOLOGIE
                                </li>
                                <li onclick="showSubjectDetail('physiologie')">
                                    <span class="subject-icon">❤️</span>PHYSIOLOGIE
                                </li>
                                <li onclick="showSubjectDetail('biophysique')">
                                    <span class="subject-icon">⚡</span>BIOPHYSIQUE
                                </li>
                                <li onclick="showSubjectDetail('biostat')">
                                    <span class="subject-icon">📊</span>BIOSTAT
                                </li>
                                <li onclick="showSubjectDetail('ssh')">
                                    <span class="subject-icon">👥</span>SSH
                                </li>
                                <li onclick="showSubjectDetail('embryologie')">
                                    <span class="subject-icon">👶</span>EMBRYOLOGIE
                                </li>
                                <li onclick="showSubjectDetail('chimie')">
                                    <span class="subject-icon">⚗️</span>CHIMIE
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="year-card">
                        <div class="year-header">
                            <div class="year-number">2</div>
                            <div class="year-title">السنة الثانية</div>
                        </div>
                        <div class="year-body">
                            <h3
                                style="color: var(--primary-dark); margin-bottom: 1.8rem; text-align: center; font-size: 1.4rem;">
                                المواد الأساسية</h3>
                            <ul class="subjects-list">
                                <li onclick="showSubjectDetail('cardiovasculaire')">
                                    <span class="subject-icon">🫀</span>CARDIO
                                </li>
                                <li onclick="showSubjectDetail('nerveux')">
                                    <span class="subject-icon">🧠</span>NERVEUX
                                </li>
                                <li onclick="showSubjectDetail('digestif')">
                                    <span class="subject-icon">😋</span>DIGESTIF
                                </li>
                                <li onclick="showSubjectDetail('endocrineien')">
                                    <span class="subject-icon">⚖️</span>ENDOCRINEIEN
                                </li>
                                <li onclick="showSubjectDetail('urinaire')">
                                    <span class="subject-icon">💧</span>URINAIRE
                                </li>
                                <li onclick="showSubjectDetail('genetique')">
                                    <span class="subject-icon">🧬</span>GENETIQUE
                                </li>
                                <li onclick="showSubjectDetail('immunologie')">
                                    <span class="subject-icon">🛡️</span>IMMUNOLOGIE
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="subjectDetailSection" class="subject-detail-section">
                    <div class="subject-header">
                        <h2 id="subjectTitle">عنوان المادة</h2>
                    </div>
                    <div class="subject-overview">
                        <h3>نبذة عن المادة</h3>
                        <p id="subjectOverview">وصف المادة سيظهر هنا...</p>
                    </div>
                    <div class="content-grid">
                        <div class="content-card">
                            <h4>الدروس</h4>
                            <div id="lessonsContent">
                                < !-- Lessons will be populated here with link and difficulty -->
                            </div>
                        </div>
                        <div class="content-card" id="videosCard">
                            <h4>الفيديوهات</h4>
                            <div id="videosContent">
                                < !-- Videos will be populated here with video link -->
                            </div>
                        </div>
                        <div class="content-card">
                            <h4>طريقة المذاكرة</h4>
                            <ul id="studyMethodsList">
                                < !-- Study methods will be populated here -->
                            </ul>
                        </div>
                        <div class="content-card">
                            <h4>أهمية المادة</h4>
                            <ul id="importanceList">
                                < !-- Importance points will be populated here -->
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="study_map" class="page">
                <div class="page-header">
                    <h1>خريطتك الدراسية</h1>
                    <p>أدوات ونصائح لتنظيم جدولك الدراسي وتحقيق أقصى استفادة من وقتك</p>
                </div>

                <div class="study-map-section">
                    <div class="study-tip-card">
                        <h3>📅 تنظيم الوقت</h3>
                        <p>الجدولة اليومية هي حجر الأساس للنجاح في كلية الطب</p>
                        <ul>
                            <li>خصص وقتًا يوميًا لمراجعة المحاضرات</li>
                            <li>استخدم تقنية بومودورو (25 دقيقة دراسة + 5 دقائق راحة)</li>
                            <li>حدد أولوياتك حسب صعوبة المادة وقرب الامتحان</li>
                            <li>لا تنسَ تضمين وقت للراحة والنوم</li>
                            <li>حدد الاهداف قبل ان تبدا الدراسة لتجهيز نفسك نفسيا قبل عقليا
                                وبدنيا</li>
                            <li>لا تعتمد على الناس في توقيت الدراسة لكل شخص وقته المفضل فانا عن
                                نفسي اوقات احب الدراسة ليلا واوقات العكس احب الدراسة صباحا باكرا
                            </li>
                        </ul>
                    </div>
                    <div class="study-tip-card">
                        <h3>🧠 تقنيات الحفظ</h3>
                        <p>الطب يتطلب حفظ كم هائل من المعلومات — اجعله ذكيًا !</p>
                        <ul>
                            <li>استخدم بطاقات الفلاش (Anki مثالي لذلك)</li>
                            <li>استخدم موقع او تطبيق NoteboolLM لانشاء مخططات سهلة الحفظ</li>
                            <li>استخدم التشبيهات والقصص لتثبيت المعلومات</li>
                            <li>كرر المعلومات في فترات متباعدة (Spaced Repetition)</li>
                            <li>اهم شيئ هو حب تلك المادة ولو انها صعبة</li>
                        </ul>
                    </div>
                    <div class="study-tip-card">
                        <h3>📚 طرق الدراسة الفعّالة</h3>
                        <p>الدراسة الذكية أفضل من الدراسة الطويلة !</p>
                        <ul>
                            <li>لا تكتفِ بالقراءة — اكتب، ارسم، علّم غيرك</li>
                            <li>حل الأسئلة التطبيقية بعد كل موضوع les Qcms</li>
                            <li>شكل مجموعات دراسة صغيرة (3-4 أشخاص)</li>
                            <li>استخدم الخرائط الذهنية لربط المواضيع</li>
                            <li>اعتمد على الذكاء الاصطناعي فانه يبسط لك الدروس او يرويها لك على
                                شكل قصة</li>
                            <li>يمكنك الطلب من الذكاء الاصطناعي ان ينشا لك اسئلة لتتدرب عليها
                            </li>
                        </ul>
                    </div>
                    <div class="study-tip-card">
                        <h3>⚖️ التوازن بين الحياة والدراسة</h3>
                        <p>لا تُهمل صحتك النفسية والجسدية !</p>
                        <ul>
                            <li>مارس الرياضة 3 مرات أسبوعيًا (حتى لو 20 دقيقة)</li>
                            <li>احرص على 7-8 ساعات نوم يوميًا</li>
                            <li>خصص وقتًا للعائلة والأصدقاء</li>
                            <li>خذ يوم راحة كامل كل أسبوع</li>
                            <li>لا تجعل حياتك تتوقف عند الطب فقط</li>
                        </ul>
                    </div>
                </div>

                <div class="resources-section">
                    <h2>أدوات مساعدة موصى بها</h2>
                    <div class="resource-grid">
                        <div class="resource-card">
                            <div class="resource-icon">🧠</div>
                            <h4>Ankiو NotebookLM</h4>
                            <p>تطبيق بطاقات فلاش ذكي يستخدم Spaced Repetition لتحسين الحفظ
                                طويل المدى وخرائط ذهنية</p>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">🗓️</div>
                            <h4>Notion / Google Calendar</h4>
                            <p>لتنظيم جدولك الدراسي، تتبع التقدم، ووضع الأهداف الأسبوعية.
                            </p>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">🎨</div>
                            <h4>Drawabox / Sketchy</h4>
                            <p>لتعلم الرسم التشريحي بطريقة مرئية وتفاعلية.</p>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">😎</div>
                            <h4>APKS</h4>
                            <p>تطبيقات 3D مدفوعة ساوفرها لكم ان شاء الله</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="mental_health" class="page">
                <!-- Topics Grid (Main View) -->
                <div id="mh-main-view">
                    <div class="page-header">
                        <h1>ملاذ الصمود النفسي 🌌</h1>
                        <p>رحلة فهم الذات وترميم الروح لمواكبة تحديات الطب</p>
                    </div>

                    <div class="mh-topics-grid">
                        <div class="mh-topic-card" onclick="openMhTopic('anxiety')">
                            <h3><span>😰</span> القلق – Anxiété</h3>
                            <p>كيف تتعامل مع ضغوط الدراسة والامتحانات؟</p>
                        </div>
                        <div class="mh-topic-card" onclick="openMhTopic('fear')">
                            <h3><span>🌑</span> الخوف – Peur</h3>
                            <p>التغلب على الخوف من المجهول والفشل.</p>
                        </div>
                        <div class="mh-topic-card" onclick="openMhTopic('failure')">
                            <h3><span>💔</span> الفشل – Échec</h3>
                            <p>إعادة صياغة الفشل كخطوة نحو النجاح.</p>
                        </div>
                        <div class="mh-topic-card" onclick="openMhTopic('pressure')">
                            <h3><span>📈</span> النجاح والضغط</h3>
                            <p>التعامل مع التوقعات العالية والاحتراق.</p>
                        </div>
                        <div class="mh-topic-card" onclick="openMhTopic('comparison')">
                            <h3><span>⚖️</span> المقارنة بالآخرين</h3>
                            <p>لماذا تشعر أن الجميع أفضل منك؟ وكيف تتوقف؟</p>
                        </div>
                        <div class="mh-topic-card" onclick="openMhTopic('motivation')">
                            <h3><span>🪫</span> فقدان الدافع</h3>
                            <p>استعادة الشغف والهدف في مسيرتك الطبية.</p>
                        </div>
                        <!-- New: Holy Quran Section -->
                        <div class="mh-topic-card quran-theme" onclick="openMhTopic('quran')">
                            <h3><span>📖</span> القرآن الكريم</h3>
                            <p>سكينة الروح وآيات الطمأنينة والشفاء.</p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 4rem;">
                        <button class="btn" style="background: var(--primary); color: white;"
                            onclick="showPage('home')">العودة للرئيسية</button>
                    </div>
                </div>

                <!-- Detail View (Initially Hidden) -->
                <div id="mh-topic-detail" style="display: none;">
                    <button class="mh-back-btn" onclick="closeMhTopic()">← العودة للمواضيع</button>
                    <div id="mh-detail-body">
                        <!-- Injected by JavaScript -->
                    </div>
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn" onclick="closeMhTopic()">العودة للقائمة الرئيسية</button>
                    </div>
                </div>

                <script>
                    const mhTopicsData = {
                        anxiety: {
                            title: "القلق – Anxiété", emoji: "😰",
                            sections: [
                                { title: "ما هو القلق؟", icon: "🔍", text: "رد فعل طبيعي من الجسم تجاه 'خطر' متخيّل أو حقيقي، يتميز بشعور بالتوتر وأفكار مزعجة وتغيرات جسدية (مثل سرعة ضربات القلب)." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "👨‍⚕️", text: "بسبب التراكم المعرفي الهائل (Workload)، الخوف من المسؤولية تجاه المرضى، والمنافسة الشديدة." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "يكون طبيعيًا قبل الامتحانات (يدفع للمذاكرة). يصبح مرضيًا إذا شلّ حركتك، أو منعك من النوم، أو استمر دون سبب واضح." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>قاعدة الـ 5 دقائق: ركز فقط على المهمة الحالية لخمس دقائق.</li><li>التنفس الصدري: شهيق (4ث) - زفير (6ث).</li><li>ممارسة الرياضة لتفريغ الطاقة السلبية.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "القلق لا يفرغ الغد من أحزانه، بل يفرغ اليوم من قوته. أنت أقوى من هواجسك، وكل طبيب ناجح مر بما تمر به الآن.", isSupport: true }
                            ]
                        },
                        fear: {
                            title: "الخوف – Peur", emoji: "🌑",
                            sections: [
                                { title: "ما هو الخوف؟", icon: "🔍", text: "عاطفة أساسية تهدف لحمايتنا، لكن في مسيرة الطب غالباً ما يتحول لخوف من الفشل أو الحكم الاجتماعي." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "🩺", text: "بسبب المثالية المفرطة (Perfectionism). نخشى ألا نكون أطباء جيدين بما يكفي أو نخيب آمال أهلنا." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي عند مواجهة مريض لأول مرة أو إجراء جراحي جديد. يصبح مرضيًا إذا أدى للهروب الدائم من المهام." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>الكتابة التفريغية: اكتب ما تخاف منه بالضبط لتراه بحجمه الحقيقي.</li><li>مبدأ أسوأ الاحتمالات: فكر في الحلول وليس في المشكلة.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "الشجاعة ليست غياب الخوف، بل التحرك رغم وجوده. كل خطوة تخطوها وأنت خائف هي انتصار عظيم.", isSupport: true }
                            ]
                        },
                        failure: {
                            title: "الفشل – Échec", emoji: "💔",
                            sections: [
                                { title: "ما هو الفشل؟", icon: "🔍", text: "مجرد نتيجة لم تحقق التوقعات في لحظة معينة، وليس حكماً نهائياً على قدراتك أو مستقبلك." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "🎓", text: "لأننا اعتدنا أن نكون 'الأوائل'، فأول اصطدام بصعوبة أكاديمية يبدو ككارثة وجودية." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي أن تخفق في جولات دراسية معينة. الفشل المرضي هو التوقف عن المحاولة والاستسلام لليأس." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تحليل الأخطاء بموضوعية لا بجلد الذات.</li><li>فصل القيمة الشخصية عن التحصيل الدراسي.</li><li>طلب الدعم من الزملاء المجربين.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "العظمة لا تكمن في عدم السقوط أبدًا، بل في النهوض في كل مرة نسقط فيها. الفشل هو مجرد جولة، وليس نهاية المعركة.", isSupport: true }
                            ]
                        },
                        pressure: {
                            title: "النجاح والضغط", emoji: "📈",
                            sections: [
                                { title: "ما هو ضغط النجاح؟", icon: "🔍", text: "التوقعات العالية من المحيط (الأهل والمجتمع)، والتي تخلق حالة استنفار دائم وضغطاً نفسياً." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "🏫", text: "بسبب النظرة المقدسة للطبيب، وضغط المسار الطويل الذي يتطلب نفساً طويلاً جداً." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي عندما يحفزك للتفوق. يصبح مرضيًا عندما يتحول لاحتراق (Burnout) أو شعور بالذنب عند الراحة." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تحديد معنى النجاح الخاص بك بعيداً عن أهداف الآخرين.</li><li>ممارسة الهوايات بانتظام لفصل العقل عن جو الدراسة.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "النجاح ليس وجهة نهائية، بل هو الطريقة التي تمشي بها. لا تقتل نفسك لتصبح طبيباً، فالمريض يحتاج طبيباً 'حياً' ومرتاحاً.", isSupport: true }
                            ]
                        },
                        comparison: {
                            title: "المقارنة بالآخرين", emoji: "⚖️",
                            sections: [
                                { title: "ما هي المقارنة؟", icon: "🔍", text: "ميل عقلي لتقييم أنفسنا بناءً على 'واجهة' الآخرين وما يظهرونه من نجاحات وإنجازات." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "📡", text: "بسبب بيئة التنافس العالية، وظهور المثالية الزائفة على وسائل التواصل الاجتماعي." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي كنوع من الإلهام. يصبح مرضيًا إذا تحول لحقد على الذات أو شعور دائم بالنقص." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>قارن نفسك بنسختك الأمس فقط.</li><li>تذكر أن لكل شخص ظروفه وسرعته الخاصة في التعلم.</li><li>قلل متابعة 'المثاليين' على السوشيال ميديا.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "لا تقارن بدايتك بموسم حصاد الآخرين. أنت في رحلتك الخاصة، ومكانك محجوز لك وحدك.", isSupport: true }
                            ]
                        },
                        motivation: {
                            title: "فقدان الدافع", emoji: "🪫",
                            sections: [
                                { title: "ما هو فقدان الدافع؟", icon: "🔍", text: "حالة من الفتور العاطفي تجاه الدراسة، والشعور بأن الهدف أصبح بعيداً أو غير ذي قيمة." },
                                { title: "لماذا يظهر عند طلبة الطب؟", icon: "⏳", text: "بسبب طول المسار، الرتابة، والانفصال عن الجانب الإنساني للطب في مراحل العلوم الأساسية." },
                                { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي في نهاية الفصول الطويلة. يصبح مرضيًا إذا استمر لأشهر وأثر على رغبتك في الاستمرار." },
                                { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تذكر 'لماذا' بدأت أول مرة.</li><li>تغيير الروتين الدراسي جذرياً.</li><li>التركيز على الجانب التطبيقي والإنساني.</li></ul>" },
                                { title: "رسالة دعم نفسية", icon: "💌", text: "تذكر أن الشغف ليس ناراً تشتعل دائماً، بل هو قرار بالاستمرار حتى في الأيام الباردة. هدفك ما زال ينتظرك.", isSupport: true }
                            ]
                        },
                        quran: {
                            title: "القرآن الكريم – أمان الروح", emoji: "🌙",
                            sections: [
                                { title: "طمأنينة القلب", icon: "✨", text: "﴿الَّذينَ آمَنوا وَتَطمَئِنُّ قُلوبُهُم بِذِكرِ اللَّهِ أَلا بِذِكرِ اللَّهِ تَطمَئِنُّ القُلوبُ﴾ [الرعد: ٢٨]" },
                                { title: "بعد العسر يسر", icon: "🌅", text: "﴿فَإِنَّ مَعَ العُسرِ يُسرًا ۝ إِنَّ مَعَ العُسرِ يُسرًا﴾ [الشرح: ٥-٦]" },
                                { title: "الصبر والأمل", icon: "🕊️", text: "﴿وَاصبِر لِحُكمِ رَبِّكَ فَإِنَّكَ بِأَعيُنِنا﴾ [الطور: ٤٨]" },
                                { title: "رحمة الله", icon: "🌊", text: "﴿قُل يا عِبادِيَ الَّذينَ أَسرَفوا عَلى أَنفُسِهِم لا تَقنَطوا مِن رَحمَةِ اللَّهِ﴾ [الزمر: ٥٣]" },
                                { title: "رسالة إيمانية", icon: "🕋", text: "اجعل لك من كتاب الله نصيباً يومياً، فهو الشفاء لما في الصدور، والنور الذي يضيء لك دروب العلم الوعرة.", isSupport: true }
                            ]
                        }
                    };

                    function openMhTopic(id) {
                        const data = mhTopicsData[id];
                        if (!data) return;

                        let html = `
                                <div class="mh-detail-header ${id === 'quran' ? 'quran-theme' : ''}">
                                    <h2>${data.emoji} ${data.title}</h2>
                                    <p>${id === 'quran' ? 'آيات طمأنينة وسكينة' : 'تعرف على أسباب وكيفية التعامل مع هذا التحدي'}</p>
                                </div>
                                <div class="mh-detail-grid">
                            `;

                        data.sections.forEach(s => {
                            if (!s.isSupport) {
                                const cardClass = id === 'quran' ? 'mh-detail-card quran-verse' : 'mh-detail-card';
                                html += `
                                        <div class="${cardClass}">
                                            <h4><span>${s.icon}</span> ${s.title}</h4>
                                            <p>${s.text}</p>
                                        </div>
                                    `;
                            }
                        });

                        const support = data.sections.find(s => s.isSupport);
                        if (support) {
                            html += `</div><div class="mh-support-msg" style="max-width:800px; margin: 0 auto; padding: 2rem; font-size: 1.2rem; text-align:center;">
                                            <h4 style="margin-bottom:1rem; color:var(--primary); font-size:1.5rem;">${support.icon} رسالة لك</h4>
                                            "${support.text}"
                                        </div>`;
                        } else {
                            html += `</div>`;
                        }

                        document.getElementById('mh-detail-body').innerHTML = html;
                        document.getElementById('mh-main-view').style.display = 'none';
                        document.getElementById('mh-topic-detail').style.display = 'block';
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }

                    function closeMhTopic() {
                        document.getElementById('mh-main-view').style.display = 'block';
                        document.getElementById('mh-topic-detail').style.display = 'none';
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                </script>
            </section>

            <section id="medical_calculator" class="page">
                <div class="page-header">
                    <h1>الحاسبة الطبية</h1>
                    <p>احسب معدلك الفصلي أو السنوي</p>
                </div>

                <div id="calc-year-selection" class="years-grid" style="margin-top: 2rem;">
                    <div class="year-card" onclick="initCalculator(1)">
                        <div class="year-header">
                            <div class="year-number">1</div>
                            <div class="year-title">السنة الأولى</div>
                        </div>
                    </div>
                    <div class="year-card" onclick="initCalculator(2)">
                        <div class="year-header">
                            <div class="year-number">2</div>
                            <div class="year-title">السنة الثانية</div>
                        </div>
                    </div>
                </div>
                <div id="calc-home-btn" style="text-align: center; margin-top: 2rem;">
                    <button class="btn" onclick="showPage('home')" style="padding: 0.8rem 2rem;">العودة
                        للرئيسية</button>
                </div>

                <div id="calculator-container" class="hero-section"
                    style="display: none; max-width: 800px; margin: 2rem auto; text-align: right;">

                    <h2 id="calc-title" class="hero-title" style="font-size: 1.8rem; margin-bottom: 1.5rem;">حاسبة
                        السنة
                    </h2>

                    <div id="module-inputs"
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Module inputs will be injected here -->
                    </div>

                    <div style="text-align: center; border-top: 2px solid var(--glass-border); padding-top: 2rem;">
                        <button class="btn" onclick="calculateAverage()"
                            style="font-size: 1.2rem; padding: 1rem 3rem;">احسب المعدل</button>
                        <button class="btn" onclick="clearCalculatorFields()"
                            style="font-size: 1.2rem; padding: 1rem 2rem; background: var(--gray); margin-right: 10px;">مسح
                            الحقول</button>
                        <div id="calc-result" style="margin-top: 2rem; display: none;">
                            <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem;">معدلك هو:</h3>
                            <div id="average-score" style="font-size: 3rem; font-weight: 800; color: var(--primary);">
                                0.00</div>
                            <p id="result-message"
                                style="font-size: 1.1rem; color: var(--text-secondary); margin-top: 1rem;"></p>
                            <button class="btn" onclick="backToCalcYears()"
                                style="margin-top: 2rem; padding: 0.6rem 2rem;">⬅ العودة للقائمة</button>
                            <button class="btn" onclick="exportToPDF()"
                                style="margin-top: 2rem; padding: 0.6rem 2rem; background: var(--success); margin-right: 10px;">📄
                                تحميل النتيجة</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="qcm" class="page">
                <div class="page-header">
                    <h1>بنك الأسئلة (QCM)</h1>
                    <p>اختر السنة الدراسية ثم المادة للبدء في حل الأسئلة والتدريب</p>
                </div>

                <div id="qcm-year-selection" class="years-grid" style="margin-top: 2rem;">
                    <div class="year-card" onclick="showQcmSubjects(1)">
                        <div class="year-header">
                            <div class="year-number">1</div>
                            <div class="year-title">السنة الأولى</div>
                        </div>
                    </div>
                    <div class="year-card" onclick="showQcmSubjects(2)">
                        <div class="year-header">
                            <div class="year-number">2</div>
                            <div class="year-title">السنة الثانية</div>
                        </div>
                    </div>
                </div>

                <div id="qcm-subjects-container" style="display: none; margin-top: 2rem;">
                    <button class="btn" onclick="backToQcmYears()" style="margin-bottom: 2rem;">⬅ العودة لاختيار
                        السنة</button>
                    <div id="qcm-subjects-grid" class="years-grid"
                        style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <!-- Subjects will be injected here -->
                    </div>
                </div>
            </section>

            <section id="qcm_detail" class="page">
                <div class="page-header">
                    <h1 id="qcm-subject-title">المادة</h1>
                    <button class="btn" onclick="showPage('qcm')" style="margin-top: 1rem;">⬅ العودة للمواد</button>
                </div>
                <div id="qcm-detail-content" class="empty-page" style="margin-top: 2.5rem; text-align: center;">
                    <!-- Content will be injected here -->
                </div>
            </section>

            <section id="about_us" class="page">
                <div class="page-header">
                    <h1>من نحن</h1>
                    <p>موقع مصمم من طالب طب لزملائه الطلاب</p>
                </div>
                <div class="container about-section">

                    <div class="about-card">
                        <h2>❓ لماذا أنشأنا هذا الموقع؟</h2>
                        <p><strong>لأننا عشنا المشكلة الحقيقية:</strong></p>
                        <ul>
                            <li><strong>كثرة المصادر:</strong>عشرات الكتب والمواقع
                                والفيديوهات بدون توجيه واضح</li>
                            <li><strong>التشتت:</strong>لا تعرف من أين تبدأ أو ما الذي
                                يجب أن تركز عليه</li>
                            <li><strong>ضغط الدراسة:</strong>ساعات طويلة من الدراسة دون
                                نتائج مرضية</li>
                            <li><strong>نصائح متناقضة:</strong>كل شخص يعطيك نصيحة مختلفة
                                تزيدك حيرة</li>
                        </ul>
                    </div>

                    <div class="about-card">
                        <h2>🌟 ما الذي يميزنا؟</h2>
                        <ul>
                            <li><strong>نرشّح مصادر قليلة ومجربة:</strong>لا نثقل
                                عليك بالمعلومات، نختار لك الأفضل</li>
                            <li><strong>نركز على كيف تدرس وليس ماذا
                                    تحفظ:</strong>نعلمك استراتيجيات الدراسة الذكية
                            </li>
                            <li><strong>نتحدث عن الصحة النفسية بصدق:</strong>لأن
                                النجاح ليس فقط في الدرجات</li>
                            <li><strong>المحتوى مكتوب من طلاب حاليين:</strong>نفهم
                                تحدياتك لأننا نعيشها</li>
                            <li><strong>لا نروّج للوهم أو الطرق
                                    السحرية:</strong>نؤمن أن النجاح يأتي بالجهد
                                الذكي والاستمرارية</li>
                        </ul>
                    </div>

                    <div class="about-card">
                        <h2>🎯 لمن هذا الموقع؟</h2>
                        <ul>
                            <li><strong>طلاب الطب</strong>(خصوصًا السنوات
                                الأولى)</li>
                            <li><strong>من يشعر بالضياع أو الإرهاق</strong>في
                                رحلته الأكاديمية</li>
                            <li><strong>من يريد الدراسة بذكاء</strong>لا بعدد
                                ساعات الدراسة</li>
                        </ul>
                        <div class="not-for">
                            <h3>❌ هذا الموقع ليس لمن يبحث عن:</h3>
                            <ul>
                                <li>طرق مختصرة أو حلول سحرية</li>
                                <li>الغش أو الاعتماد على الآخرين</li>
                                <li>النتائج دون جهد حقيقي</li>
                            </ul>
                        </div>
                    </div>

                    <div class="about-card transparency-card">
                        <h2>⚠️ الشفافية والمسؤولية</h2>
                        <ul>
                            <li><strong>لسنا أطباء مختصين بعد:</strong>نحن
                                طلاب مثلنا مثل باقي الطلاب</li>
                            <li><strong>المحتوى تعليمي
                                    وتجريبي:</strong>بناءً على تجاربنا
                                الشخصية وتجارب زملائنا</li>
                            <li><strong>لا يغني عن المراجع الرسمية أو
                                    الأساتذة:</strong>ننصح دائمًا بالرجوع
                                للمصادر الأكاديمية المعتمدة</li>
                        </ul>
                    </div>

                    <div class="human-touch">
                        <p><strong>طالب مثلك • مررت بنفس الصعوبات •
                                الموقع ينمو معكم</strong></p>
                        <p>هذا يحول الموقع من "منصة" إلى "صديق" </p>
                    </div>

                    <div class="contact-info">
                        <h3>📱 معلومات التواصل</h3>
                        <p><strong>الاسم:</strong>زميل</p>
                        <p><strong>المرحلة الدراسية:</strong>سنة
                            ثانية طب</p>
                        <p><strong>البريد الإلكتروني:</strong><a href="mailto:medgpa00@gmail.com"
                                class="contact-email">medgpa00@gmail.com</a>
                        </p>
                    </div>
                </div>
            </section>

            <section id="med_glossary" class="page">
                <div class="page-header">
                    <h1>قاموس الاختصارات الطبية (Med-Glossary) 📚</h1>
                    <p>دليلك الشامل لفك رموز واختصارات الطب باللغتين الفرنسية والإنجليزية</p>
                </div>

                <div class="glossary-search-container">
                    <div class="glossary-search-wrapper">
                        <span class="glossary-search-icon">🔍</span>
                        <input type="text" id="glossarySearch" class="glossary-search-input"
                            placeholder="ابحث عن اختصار (مثلاً: ECG, HTA, MRI)..." oninput="filterGlossary()">
                    </div>

                    <div id="alphabetFilter" class="alphabet-filter">
                        <!-- Alphabet buttons will be injected here -->
                    </div>
                </div>

                <div id="glossaryGrid" class="glossary-grid">
                    <!-- Glossary cards will be injected here -->
                </div>

                <div id="glossaryEmpty" class="empty-glossary" style="display: none;">
                    <i>🔍</i>
                    <p>عذراً، لم نجد نتائج لهذا البحث. جرب اختصاراً آخر!</p>
                </div>

                <div style="text-align: center; margin-top: 4rem;">
                    <button class="btn" style="background: var(--primary); color: white;"
                        onclick="showPage('home')">العودة للرئيسية</button>
                </div>
            </section>


            <section id="rotation_tracker" class="page">
                <div class="page-header">
                    <h1>متتبع المسار الإكلينيكي 🏥</h1>
                    <p>نظم تربصاتك الميدانية، تتبع تقدمك، ووثق المهارات التي أتقنتها في المستشفى</p>
                </div>

                <div class="tracker-dashboard" id="trackerDashboard">
                    <div class="stat-card">
                        <div style="font-size: 2rem; color: var(--primary);">🏥</div>
                        <div style="font-size: 1.5rem; font-weight: 800;" id="totalRotationsDisplay">0</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">إجمالي التربصات</div>
                    </div>
                    <div class="stat-card">
                        <div style="font-size: 2rem; color: var(--success);">📅</div>
                        <div style="font-size: 1.5rem; font-weight: 800;" id="completedDaysDisplay">0</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">أيام مكتملة</div>
                    </div>
                    <div class="stat-card">
                        <div style="font-size: 2rem; color: var(--accent-1);">🎯</div>
                        <div style="font-size: 1.5rem; font-weight: 800;" id="masteredSkillsDisplay">0</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">مهارات متقنة</div>
                    </div>
                </div>

                <div id="rotationForm" class="tracker-form" style="display: none;">
                    <h2>إضافة تربص جديد 🏥</h2>
                    <div class="form-group">
                        <label>إسم المصلحة (مثال: Cardiologie)</label>
                        <input type="text" id="rotService" placeholder="ادخل إسم المصلحة">
                    </div>
                    <div class="form-group">
                        <label>المستشفى</label>
                        <input type="text" id="rotHospital" placeholder="مثال: المستشفى الجامعي">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>تاريخ اليوم</label>
                            <input type="date" id="rotStart">
                        </div>
                        <div class="form-group">
                            <label>الوقت / الفترة</label>
                            <input type="text" id="rotTime" placeholder="مثال: 08:00 - 14:00">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>المهارات المكتسبة (افصل بينها بفاصلة)</label>
                        <input type="text" id="rotSkills" placeholder="مثال: سحب دم، خياطة جروح، تخطيط قلب">
                        <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">اتركه فارغاً
                            للحصول على المهارات الافتراضية</p>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <button class="btn" onclick="addRotation()">حفظ التربص</button>
                        <button class="btn" style="background: var(--gray);"
                            onclick="toggleRotationForm()">إلغاء</button>
                    </div>
                </div>

                <div class="rotation-grid" id="rotationGrid">
                    <!-- Cards will be injected here -->
                </div>

                <div id="addRotationBtn" class="add-rotation-btn" onclick="toggleRotationForm()">+</div>
            </section>
        </main>


        <footer>
            <div class="container footer-content">
                <p class="copyright">© 2026 MedGpa - All Rights Reserved</p>
                <p>منصة مخصصة لطلاب كليات الطب</p>
            </div>
        </footer>
        <script> // Header scroll effect

            window.addEventListener('scroll', function () {
                const header = document.getElementById('mainHeader');

                if (window.scrollY > 30) {
                    header.classList.add('scrolled');
                }

                else {
                    header.classList.remove('scrolled');
                }
            });

            // Theme toggle functionality
            const themeToggle = document.getElementById('themeToggle');
            const body = document.body;

            if (themeToggle) {
                // Check for saved theme preference or respect OS preference
                const savedTheme = localStorage.getItem('mednova_theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                    body.classList.add('dark-mode');
                    themeToggle.textContent = '☀️';
                }

                else {
                    body.classList.remove('dark-mode');
                    themeToggle.textContent = '🌙';
                }

                themeToggle.addEventListener('click', () => {
                    body.classList.toggle('dark-mode');

                    if (body.classList.contains('dark-mode')) {
                        themeToggle.textContent = '☀️';
                        localStorage.setItem('mednova_theme', 'dark');
                    }

                    else {
                        themeToggle.textContent = '🌙';
                        localStorage.setItem('mednova_theme', 'light');
                    }
                });
            }

            else {
                console.error('Theme toggle button not found!');
            }

            // Show specific page function with active navigation
            function showPage(pageId) {

                // Hide all pages
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                // Hide subject detail section
                document.getElementById('subjectDetailSection').classList.remove('active');
                // Show the selected page
                document.getElementById(pageId).classList.add('active');
                // Update URL hash for bookmarking
                window.location.hash = pageId;
            }

            // Switch semester function
            function switchSemester(contentType, semester) {

                // Update button states
                const buttons = document.querySelectorAll(`.${contentType}-toggle .semester-btn`);
                buttons.forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');

                // Show selected semester content
                const semesterContents = document.querySelectorAll(`#${contentType}Content .semester-content`);
                semesterContents.forEach(content => content.classList.remove('active'));

                document.getElementById(`${contentType}-${semester}`).classList.add('active');
            }

            // Theme Palette Logic
            function setThemePalette(palette) {
                const body = document.body;
                // Remove existing themes
                body.classList.remove('theme-surgeon', 'theme-pharmacist', 'theme-sunset');

                if (palette !== 'default') {
                    body.classList.add(`theme-${palette}`);
                }

                localStorage.setItem('medgpa_theme_palette', palette);

                // Close menu
                const menu = document.getElementById('themeMenu');
                if (menu) menu.classList.remove('active');
            }

            function toggleThemeMenu() {
                const menu = document.getElementById('themeMenu');
                if (menu) menu.classList.toggle('active');
            }

            // Initial Palette Load
            const savedPalette = localStorage.getItem('medgpa_theme_palette');
            if (savedPalette) {
                setThemePalette(savedPalette);
            }

            // Close menu when clicking outside
            window.addEventListener('click', (e) => {
                const menu = document.getElementById('themeMenu');
                const btn = document.querySelector('.theme-btn');
                if (menu && menu.classList.contains('active') && !menu.contains(e.target) && e.target !== btn) {
                    menu.classList.remove('active');
                }
            });

            // Show subject detail function
            function showSubjectDetail(subjectId, targetLessonTitle) {
                const subject = SITE_DATA.subjects[subjectId];
                if (!subject) return;

                const { title, description, lessons, youtube, tips, importance } = subject;

                document.getElementById('subjectTitle').textContent = title;
                document.getElementById('subjectOverview').textContent = description;

                // Handle lessons
                const lessonsContent = document.getElementById('lessonsContent');
                lessonsContent.innerHTML = '';

                const addLessons = (lessonList, semester) => {
                    const container = document.createElement('div');
                    container.className = 'semester-content';
                    if (semester) container.id = `lessons-${semester}`;

                    if (!lessonList || lessonList.length === 0) {
                        container.innerHTML = '<div class="empty-content">سيتم امتلاؤها قريبًا 🔴</div>';
                    } else {
                        lessonList.forEach(lesson => {
                            const isDone = localStorage.getItem(`prog_${subjectId}_${lesson.title}`) === 'done';
                            const item = document.createElement('div');
                            item.className = 'lesson-item';
                            if (targetLessonTitle && lesson.title === targetLessonTitle) {
                                item.classList.add('highlight-target');
                            }
                            item.innerHTML = `
                                    <div style="display: flex; align-items: center; gap: 10px; width: 100%;">
                                        <input type="checkbox" ${isDone ? 'checked' : ''} 
                                            onchange="toggleLessonProgress('${subjectId}', '${lesson.title}', this)" 
                                            style="width: 20px; height: 20px; cursor: pointer;">
                                        <div class="lesson-title" style="margin-bottom: 0; flex: 1; ${isDone ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${lesson.title}</div>
                                    </div>
                                    <div class="lesson-details" style="margin-top: 10px;"> 
                                        <a href="${lesson.link}" class="lesson-link" target="_blank">رابط الدرس</a> 
                                        <span class="difficulty ${lesson.difficulty || 'medium'}">${lesson.difficulty === 'easy' ? 'سهل' : lesson.difficulty === 'hard' ? 'صعب' : 'متوسط'}</span> 
                                    </div>
                                `;
                            container.appendChild(item);
                        });
                    }
                    return container;
                };

                let targetSemester = null;
                if (targetLessonTitle && lessons.semester1 && lessons.semester1.some(l => l.title === targetLessonTitle)) targetSemester = 'semester1';
                else if (targetLessonTitle && lessons.semester2 && lessons.semester2.some(l => l.title === targetLessonTitle)) targetSemester = 'semester2';

                if (lessons.semester1 || lessons.semester2) {
                    lessonsContent.innerHTML = `
                            <div class="semester-toggle lessons-toggle">
                                <button class="semester-btn ${(!targetSemester || targetSemester === 'semester1') ? 'active' : ''}" onclick="switchSemester('lessons', 'semester1')">الفصل الأول</button>
                                <button class="semester-btn ${(targetSemester === 'semester2') ? 'active' : ''}" onclick="switchSemester('lessons', 'semester2')">الفصل الثاني</button>
                            </div>
                        `;
                    const s1 = addLessons(lessons.semester1, 'semester1');
                    const s2 = addLessons(lessons.semester2, 'semester2');
                    if (targetSemester === 'semester2') s2.classList.add('active');
                    else s1.classList.add('active');
                    lessonsContent.appendChild(s1);
                    lessonsContent.appendChild(s2);
                } else {
                    const lessonsList = addLessons(lessons);
                    lessonsList.classList.add('active');
                    lessonsContent.appendChild(lessonsList);
                }

                // Handle Videos
                const videosCard = document.getElementById('videosCard');
                const videosContent = document.getElementById('videosContent');
                videosContent.innerHTML = '';

                if (!youtube) {
                    videosCard.style.display = 'none';
                } else {
                    videosCard.style.display = 'block';
                    if (youtube.semester1 || youtube.semester2) {
                        videosContent.innerHTML = `
                                <div class="semester-toggle videos-toggle">
                                    <button class="semester-btn active" onclick="switchSemester('videos', 'semester1')">الفصل الأول</button>
                                    <button class="semester-btn" onclick="switchSemester('videos', 'semester2')">الفصل الثاني</button>
                                </div>
                                <div id="videos-semester1" class="semester-content active"></div>
                                <div id="videos-semester2" class="semester-content"></div>
                            `;
                        const v1 = document.getElementById('videos-semester1');
                        const v2 = document.getElementById('videos-semester2');

                        const addVids = (list, container) => {
                            if (!list || list.length === 0) {
                                container.innerHTML = '<div class="empty-content">سيتم امتلاؤها قريبًا 🔴</div>';
                            } else {
                                list.forEach(v => {
                                    container.innerHTML += `<div class="video-item"><a href="${v.link}" class="video-link" target="_blank">📹 ${v.title}</a></div>`;
                                });
                            }
                        };
                        addVids(youtube.semester1, v1);
                        addVids(youtube.semester2, v2);
                    } else {
                        videosContent.innerHTML = '<div class="semester-content active"></div>';
                        const vContainer = videosContent.querySelector('.semester-content');
                        youtube.forEach(v => {
                            vContainer.innerHTML += `<div class="video-item"><a href="${v.link}" class="video-link" target="_blank">📹 ${v.title}</a></div>`;
                        });
                    }
                }

                // Populate Tips & Importance
                document.getElementById('studyMethodsList').innerHTML = tips.map(t => `<li>${t}</li>`).join('') || '<li>لا توجد نصائح حاليا</li>';
                document.getElementById('importanceList').innerHTML = importance.map(i => `<li>${i}</li>`).join('') || '<li>لا توجد معلومات حاليا</li>';

                // Show logic
                const subjectSection = document.getElementById('subjectDetailSection');
                subjectSection.classList.add('active');

                // Smooth transition and positioning
                setTimeout(() => {
                    const target = document.querySelector('.highlight-target');
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    } else {
                        subjectSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 200);
            }

            // Intersection Observer for scroll animations
            const observerOptions = {
                threshold: 0.1
            }

                ;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show-el');
                    }
                });
            }

                , observerOptions);

            document.addEventListener('DOMContentLoaded', () => {
                const hiddenElements = document.querySelectorAll('.year-card, .subject-overview, .content-card, .study-tip-card, .audience-card');

                hiddenElements.forEach((el) => {
                    el.classList.add('hidden-el');
                    observer.observe(el);
                });
            });

            // Handle page navigation on load
            window.addEventListener('load', function () {
                const hash = window.location.hash.substring(1);

                if (hash && document.getElementById(hash)) {
                    showPage(hash);
                }
            });

            // Add hover effects to year cards
            document.querySelectorAll('.year-card').forEach(card => {
                card.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-12px) rotateX(4deg)';
                    this.style.boxShadow = '0 28px 55px -12px rgba(0, 0, 0, 0.25)';
                });

                card.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0) rotateX(0)';
                    this.style.boxShadow = '0 20px 40px -10px rgba(0, 0, 0, 0.18)';
                });
            });

            // Button hover effects
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-5px) scale(1.03)';
                    this.style.boxShadow = '0 10px 28px rgba(139, 92, 246, 0.5)';
                });

                button.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 6px 20px rgba(139, 92, 246, 0.35)';
                });
            });

            // Subject list item hover effects
            document.querySelectorAll('.subjects-list li').forEach(item => {
                item.addEventListener('mouseenter', function () {
                    this.style.color = '#4338ca';
                    this.style.transform = 'translateX(8px)';
                    this.style.background = '#f8fafc';
                    this.style.paddingLeft = '1.2rem';
                    this.style.boxShadow = '0 3px 10px rgba(79, 70, 229, 0.12)';
                });

                item.addEventListener('mouseleave', function () {
                    this.style.color = '';
                    this.style.transform = 'translateX(0)';
                    this.style.background = '';
                    this.style.paddingLeft = '';
                    this.style.boxShadow = 'none';
                });
            });

            // QCM Logic
            function showQcmSubjects(year) {
                const grid = document.getElementById('qcm-subjects-grid');
                const subjects_y1 = [
                    { id: 'anatomie', name: 'Anatomie', icon: '🦴', exams: [] },
                    { id: 'biochimie', name: 'Biochimie', icon: '🧪', exams: [] },
                    { id: 'cytologie', name: 'Cytologie', icon: '🔬', exams: [] },
                    { id: 'physiologie', name: 'Physiologie', icon: '🫀', exams: [] },
                    { id: 'biophysique', name: 'Biophysique', icon: '⚡', exams: [] },
                    { id: 'biostat', name: 'Biostat', icon: '📊', exams: [] },
                    { id: 'ssh', name: 'SSH', icon: '📚', exams: [] },
                    { id: 'embryologie', name: 'Embryologie', icon: '👶', exams: [] },
                    { id: 'chimie', name: 'Chimie', icon: '⚗️', exams: [] }
                ];
                const subjects_y2 = [
                    {
                        id: 'cardiovascular',
                        name: 'Cardio',
                        icon: '🫀',
                        exams: [
                            { title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1dNWH6Jwl5jjYvBn5RmRa36SF8Ca0Uzwk/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/16ANPv-4X2UPfMAaMReZTbnis70RiB92b/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1RWLKBNUGmltwYVdh1lrkFkU5Euph_ed4/view?usp=drive_link' }, { title: 'Controle Setif 2023 Affichage', link: 'https://drive.google.com/file/d/1S6FsDhIryLaFLf3pmvNpf57PwrxeecmI/view?usp=drive_link' }
                        ]
                    },
                    { id: 'nerveux', name: 'Nerveux', icon: '🧠', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1WKH-aM8jWuCyRXVqKX-MJraBL9G3Z0oI/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1gD35aNYgBIgS-9_AW7VB_E-Wf_QpGydM/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1hq9fJadEYYKfH07wLv0bFxbHFKozY9lJ/view?usp=drive_link' }] },
                    { id: 'digestif', name: 'Digestif', icon: '😋', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1fWgsh5qWq35fEQ1MZbHFS3ekuDboxJl7/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1giHzRZRnD3ssJiwFsfO8eqzZLVp54sHi/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/13CuQ38SvVzjf67PPdRWg0IAriAHv9obL/view?usp=drive_link' }] },
                    { id: 'endocrineien', name: 'Endocrineien', icon: '⚖️', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/193ilB2f_k8Mr7hPzUu9aW3i3_Z-PunL7/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1Vltn489LlZbbMvwzAxOXxM_pSDMDpk-C/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1NFZxQqGb0xkRWvyu-Zr7cPhIP0WQlyOC/view?usp=drive_link' }, { title: 'Controle Setif 2023 Affichage', link: 'https://drive.google.com/file/d/19RmHfAZfFkbotA0WfQthwAfGCKD8kL8U/view?usp=drive_link' }] },
                    { id: 'urinaire', name: 'Urinaire', icon: '💧', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1kYvzIJplP2OzmE6tUmrlcUXQYp-_-yPO/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/112xJUnuXwB9LOsRAnvJLaf-7jwegTZsz/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/162oSGohUgn7iOi-PiVJ1o6oZiYT9U_IW/view?usp=drive_link' }] },
                    { id: 'genetique', name: 'Genetique', icon: '🧬', exams: [{ title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1ec_8cXEYpxAGuq6cEQoIvrOv21xrAnAk/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1BrHEBKU8x0iVB-iUjwWyGVSQO5NjQBT1/view?usp=drive_link' }] },
                    { id: 'immunologie', name: 'Immunologie', icon: '🛡️', exams: [{ title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1NI7pID9YQ-yQdpXnFp1ggnfW9lHCcb60/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1Ky0rnz2cUPIS3SYThpfw-jYsTP8T6aEF/view?usp=drive_link' }] }
                ];

                const currentSubjects = year === 1 ? subjects_y1 : subjects_y2;
                grid.innerHTML = '';

                currentSubjects.forEach(sub => {
                    const subCard = document.createElement('div');
                    subCard.className = 'year-card';
                    subCard.style.padding = '1.5rem';
                    subCard.style.textAlign = 'center';
                    subCard.innerHTML = `
                    <div style="font-size: 2.5rem; margin-bottom: 1rem;">${sub.icon}</div>
                    <div class="year-title" style="font-size: 1.2rem;">${sub.name}</div>
                `;
                    subCard.onclick = () => showQcmDetail(sub.name, sub.exams);
                    grid.appendChild(subCard);

                    // Observe for animation
                    if (typeof observer !== 'undefined') {
                        subCard.classList.add('hidden-el');
                        observer.observe(subCard);
                    }
                });

                document.getElementById('qcm-year-selection').style.display = 'none';
                document.getElementById('qcm-subjects-container').style.display = 'block';
            }

            function showQcmDetail(title, exams) {
                const detailSection = document.getElementById('qcm_detail');
                const titleEl = document.getElementById('qcm-subject-title');
                const contentEl = document.getElementById('qcm-detail-content');

                titleEl.textContent = `بنك أسئلة: ${title}`;

                if (exams && exams.length > 0) {
                    let examsHTML = `
                    <div style="max-width: 900px; margin: 0 auto; padding: 2rem 1rem;">
                        <h2 style="color: var(--primary); margin-bottom: 2rem; font-size: 1.8rem;">الامتحانات المتاحة الآن 📝</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                `;

                    exams.forEach(exam => {
                        examsHTML += `
                        <div class="about-card" style="text-align: right; border: 1px solid var(--glass-border); display: flex; flex-direction: column; justify-content: space-between; transition: all 0.3s ease;">
                            <div>
                                <h3 style="color: var(--primary-dark); margin-bottom: 1rem; font-size: 1.2rem;">${exam.title}</h3>
                                <p style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1.5rem;">انقر على الزر أدناه لفتح الامتحان ومراجعة الأسئلة في نافذة جديدة.</p>
                            </div>
                            <a href="${exam.link}" class="btn" target="_blank" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.8rem; padding: 0.8rem; font-weight: 600;">
                                <span>ابدأ الامتحان الآن 🚀</span>
                            </a>
                        </div>
                    `;
                    });

                    examsHTML += `
                        </div>
                    </div>
                `;
                    contentEl.innerHTML = examsHTML;
                } else {
                    contentEl.innerHTML = `
                    <div class="empty-page" style="padding: 4rem 1rem;">
                        <h2 style="font-size: 2rem; margin-bottom: 1.5rem;">🚧 سيتم إضافة المحتوى قريباً</h2>
                        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto;">نحن نعمل حالياً على جمع وتنسيق أفضل مجموعة أسئلة (QCM) لمادة <strong>${title}</strong>. ترقبوا التحديث القادم!</p>
                        <div style="font-size: 5rem; margin-top: 3rem; opacity: 0.2;">📚</div>
                    </div>
                `;
                }

                showPage('qcm_detail');
            }

            function backToQcmYears() {
                document.getElementById('qcm-year-selection').style.display = 'grid';
                document.getElementById('qcm-subjects-container').style.display = 'none';
            }

            // Medical Calculator Logic
            let currentCalcYear = 0;
            const coefficients = {
                1: [
                    { id: 'anatomie', name: 'Anatomie', coeff: 2 },
                    { id: 'biochimie', name: 'Biochimie', coeff: 2 },
                    { id: 'cytologie', name: 'Cytologie', coeff: 2 },
                    { id: 'physiologie', name: 'Physiologie', coeff: 1 },
                    { id: 'biophysique', name: 'Biophysique', coeff: 2 },
                    { id: 'biostat', name: 'Biostat', coeff: 1 },
                    { id: 'ssh', name: 'SSH', coeff: 1 },
                    { id: 'embryologie', name: 'Embryologie', coeff: 1 },
                    { id: 'chimie', name: 'Chimie', coeff: 2 }
                ],
                2: [
                    { id: 'cardio', name: 'Cardio', coeff: 4 },
                    { id: 'nerveux', name: 'Nerveux', coeff: 4 },
                    { id: 'digestif', name: 'Digestif', coeff: 4 },
                    { id: 'endocrineien', name: 'Endocrineien', coeff: 4 },
                    { id: 'urinaire', name: 'Urinaire', coeff: 4 },
                    { id: 'genetique', name: 'Genetique', coeff: 2 },
                    { id: 'immunologie', name: 'Immunologie', coeff: 2 }
                ]
            };

            function initCalculator(year) {
                currentCalcYear = year;
                const container = document.getElementById('module-inputs');
                const title = document.getElementById('calc-title');
                const yearData = coefficients[year];

                title.textContent = `حاسبة السنة ${year === 1 ? 'الأولى' : 'الثانية'}`;
                container.innerHTML = '';

                yearData.forEach(mod => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 700; color: var(--primary-dark);">${mod.name} (x${mod.coeff})</label>
                        <input type="number" id="input-${mod.id}" step="0.01" min="0" max="20" placeholder="0.00" 
                               style="width: 100%; padding: 0.8rem; border-radius: 12px; border: 2px solid rgba(99, 102, 241, 0.2); font-family: inherit; font-weight: 700; text-align: center;">
                    `;
                    container.appendChild(div);
                });

                document.getElementById('calc-year-selection').style.display = 'none';
                if (document.getElementById('calc-home-btn')) {
                    document.getElementById('calc-home-btn').style.display = 'none';
                }
                document.getElementById('calculator-container').style.display = 'block';
                document.getElementById('calc-result').style.display = 'none';
            }

            function calculateAverage() {
                const yearData = coefficients[currentCalcYear];
                let totalWeightedScore = 0;
                let totalCoefficients = 0;
                let allFilled = true;
                let invalidGrades = [];

                yearData.forEach(mod => {
                    const inputEl = document.getElementById(`input-${mod.id}`);
                    const val = parseFloat(inputEl.value);
                    if (isNaN(val)) {
                        allFilled = false;
                        inputEl.style.borderColor = 'rgba(99, 102, 241, 0.2)';
                    } else if (val < 0 || val > 20) {
                        invalidGrades.push(mod.name);
                        inputEl.style.borderColor = 'var(--danger)';
                    } else {
                        totalWeightedScore += val * mod.coeff;
                        totalCoefficients += mod.coeff;
                        inputEl.style.borderColor = 'var(--success)';
                    }
                });

                if (!allFilled) {
                    alert('يرجى إدخال النقاط لجميع المواد');
                    return;
                }

                if (invalidGrades.length > 0) {
                    alert(`يرجى التأكد من أن النقاط بين 0 و 20 للمواد التالية: ${invalidGrades.join(', ')}`);
                    return;
                }

                const average = totalWeightedScore / totalCoefficients;
                const scoreEl = document.getElementById('average-score');
                const resultDiv = document.getElementById('calc-result');
                const msgEl = document.getElementById('result-message');

                scoreEl.textContent = average.toFixed(2);

                if (average >= 10) {
                    scoreEl.style.color = 'var(--success)';
                    msgEl.textContent = 'تهانينا! لقد نجحت في العام الدراسي 🎉';
                } else {
                    scoreEl.style.color = 'var(--danger)';
                    msgEl.textContent = 'للأسف، المعدل أقل من 10. بالتوفيق في الاستدراكي 💪';
                }

                resultDiv.style.display = 'block';
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            function backToCalcYears() {
                document.getElementById('calc-year-selection').style.display = 'grid';
                if (document.getElementById('calc-home-btn')) {
                    document.getElementById('calc-home-btn').style.display = 'block';
                }
                document.getElementById('calculator-container').style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function clearCalculatorFields() {
                const yearData = coefficients[currentCalcYear];
                yearData.forEach(mod => {
                    const inputEl = document.getElementById(`input-${mod.id}`);
                    if (inputEl) {
                        inputEl.value = '';
                        inputEl.style.borderColor = 'rgba(99, 102, 241, 0.2)';
                    }
                });
                const resultDiv = document.getElementById('calc-result');
                if (resultDiv) resultDiv.style.display = 'none';
            }

            function exportToPDF() {
                const average = document.getElementById('average-score').textContent;
                const yearLabel = currentCalcYear === 1 ? 'الأولى' : 'الثانية';
                const content = `
                    <html>
                    <head>
                        <title>نتيجتي في MedGpa</title>
                        <style>
                            body { font-family: 'Tajawal', sans-serif; direction: rtl; padding: 40px; text-align: center; }
                            .header { color: #2563eb; font-size: 24px; margin-bottom: 20px; }
                            .result { font-size: 48px; color: #3b82f6; font-weight: bold; margin: 20px 0; }
                            .footer { color: #64748b; margin-top: 40px; }
                        </style>
                    </head>
                    <body>
                        <div class="header">نتيجتي في حاسبة MedGpa - السنة ${yearLabel}</div>
                        <div class="result">معدلي: ${average}</div>
                        <div class="footer">تاريخ الاستخراج: ${new Date().toLocaleDateString('ar-DZ')}</div>
                    </body>
                    </html>
                `;
                const win = window.open('', '', 'height=700,width=700');
                win.document.write(content);
                win.document.close();
                win.print();
            }

            function toggleLessonProgress(subjectId, title, checkbox) {
                const titleEl = checkbox.parentElement.querySelector('.lesson-title');
                if (checkbox.checked) {
                    localStorage.setItem(`prog_${subjectId}_${title}`, 'done');
                    titleEl.style.textDecoration = 'line-through';
                    titleEl.style.opacity = '0.6';
                } else {
                    localStorage.removeItem(`prog_${subjectId}_${title}`);
                    titleEl.style.textDecoration = 'none';
                    titleEl.style.opacity = '1';
                }
            }

            let searchIndex = [];

            function buildSearchIndex() {
                searchIndex = [];
                // Static Pages
                const pages = [
                    { title: 'الرئيسية', desc: 'الصفحة الرئيسية للموقع', id: 'home', icon: '🏠' },
                    { title: 'السنوات الدراسية', desc: 'دليل السنتين الأولى والثانية', id: 'years', icon: '🎓' },
                    { title: 'حاسبة المعدل', desc: 'احسب معدلك الفصلي أو السنوي', id: 'medical_calculator', icon: '⚖️' },
                    { title: 'QCM', desc: 'بنك الأسئلة والامتحانات', id: 'qcm', icon: '📝' },
                    { title: 'من نحن', desc: 'معلومات عن فريق MedGpa', id: 'about_us', icon: '👥' }
                ];
                pages.forEach(p => searchIndex.push({ ...p, type: 'page' }));

                // Subjects and Lessons from SITE_DATA
                Object.values(SITE_DATA.subjects).forEach(sub => {
                    searchIndex.push({
                        title: sub.title,
                        desc: `مادة ${sub.title}`,
                        type: 'subject',
                        id: sub.id,
                        icon: sub.icon,
                        handler: () => {
                            showPage('years');
                            showSubjectDetail(sub.id);
                        }
                    });

                    const addLesson = (l) => {
                        searchIndex.push({
                            title: l.title,
                            desc: `درس في ${sub.title}`,
                            type: 'lesson',
                            id: sub.id,
                            icon: '📖',
                            handler: () => {
                                showPage('years');
                                showSubjectDetail(sub.id, l.title);
                            }
                        });
                    };

                    if (sub.lessons) {
                        if (sub.lessons.semester1) sub.lessons.semester1.forEach(addLesson);
                        if (sub.lessons.semester2) sub.lessons.semester2.forEach(addLesson);
                        if (Array.isArray(sub.lessons)) sub.lessons.forEach(addLesson);
                    }
                });
            }

            function toggleSearch() {
                const modal = document.getElementById('search-modal');
                modal.classList.toggle('active');
                if (modal.classList.contains('active')) {
                    if (searchIndex.length === 0) buildSearchIndex();
                    document.getElementById('search-input').focus();
                }
            }

            function handleSearch(query) {
                const resultsContainer = document.getElementById('search-results');
                if (!query || query.length < 2) {
                    resultsContainer.innerHTML = '';
                    return;
                }

                const q = query.toLowerCase();
                const matches = searchIndex.filter(item =>
                    item.title.toLowerCase().includes(q) ||
                    item.desc.toLowerCase().includes(q)
                );

                if (matches.length === 0) {
                    resultsContainer.innerHTML = '<div class="search-no-results">لا توجد نتائج مطابقة لبحثك</div>';
                    return;
                }

                resultsContainer.innerHTML = matches.map(m => `
                        <div class="search-result-item" onclick="${m.handler ? '' : `showPage('${m.id}');`} toggleSearch();">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.2rem;">${m.icon || '🔍'}</span>
                                <div style="flex: 1;">
                                    <div class="search-result-title">${m.title}</div>
                                    <div class="search-result-desc">${m.desc}</div>
                                </div>
                                <span style="font-size: 0.7rem; background: var(--primary); color: white; padding: 2px 6px; border-radius: 4px; opacity: 0.8;">
                                    ${m.type === 'page' ? 'صفحة' : m.type === 'subject' ? 'مادة' : 'درس'}
                                </span>
                            </div>
                        </div>
                    `).join('');

                // Attach handlers if they exist
                const resultEls = resultsContainer.querySelectorAll('.search-result-item');
                matches.forEach((m, i) => {
                    if (m.handler) {
                        resultEls[i].onclick = (e) => {
                            m.handler();
                            toggleSearch();
                        };
                    }
                });
            }

            function toggleFocusMode() {
                document.getElementById('focus-mode-overlay').classList.toggle('active');
            }

            function toggleAchievements() {
                const panel = document.getElementById('achievements-panel');
                panel.classList.toggle('active');
            }

            // Pomodoro Logic
            let timer;
            let timeLeft = 25 * 60;
            let isRunning = false;

            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timer-display').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            }

            function startTimer() {
                if (isRunning) return;
                isRunning = true;
                timer = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimer();
                    } else {
                        clearInterval(timer);
                        isRunning = false;
                        alert('انتهى الوقت! خذ قسطاً من الراحة ☕');
                    }
                }, 1000);
            }

            function pauseTimer() {
                clearInterval(timer);
                isRunning = false;
            }

            function resetTimer() {
                pauseTimer();
                timeLeft = 25 * 60;
                updateTimer();
            }

        </script>


        <!-- Core Data -->
        <!-- Core Data -->
        <script>
            const SITE_DATA = {
                subjects: {
                    'anatomie': {
                        id: 'anatomie',
                        title: 'ANATOMIE',
                        icon: '🦴',
                        description: 'هاته المادة هي اساس الطب وتعتبر من احلى المواد واسهلها ان احببتها. صحيح انا كثيفة المعلومات لكنها تحسسك بانك تدرس في مجال الطب. حيث ستدرسون فيها اساسيات الجسم : العظام,العضلات,الاوعية الدموية,الاعصاب,المفاصل . وهاته الاساسيات مقسمة الى طرفين العلوي والسفلي .',
                        lessons: {
                            semester1: [
                                { title: 'Introduction Anatomique', link: 'https://docs.google.com/presentation/d/1rKUV7_jZiNRmHKDwjBlLyC4AF66tF5tb/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'easy' },
                                { title: 'Osteologie de MS', link: 'https://docs.google.com/presentation/d/1KxxkQfGv7vcCcgK4My8_s-YKX_vv1gFl/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'medium' },
                                { title: 'Arthrologie de MS', link: 'https://drive.google.com/file/d/1WQZgfFKXFMhtkcaBeir-dM3lttPM6zyH/view?usp=drive_link', difficulty: 'medium' },
                                { title: 'Myologie de MS', link: 'https://drive.google.com/file/d/1jgclrvG1cCyjXwczyWA5ywZCbd0LZEkY/view?usp=drive_link', difficulty: 'hard' },
                                { title: 'Angiologie de MS', link: 'https://drive.google.com/file/d/1IfRBXY3Uyjtc28LGQB9l4ol6Gddc7y95/view?usp=drive_link', difficulty: 'medium' },
                                { title: 'Neurologie de MS', link: 'https://drive.google.com/file/d/1SypSOfHi8hEc2RGyv8c8s2A62N6bx-j2/view?usp=drive_link', difficulty: 'hard' }
                            ],
                            semester2: [
                                { title: 'Osteologie de MP', link: 'https://docs.google.com/presentation/d/1KxxkQfGv7vcCcgK4My8_s-YKX_vv1gFl/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'medium' },
                                { title: 'Arthrologie de MP', link: 'https://drive.google.com/file/d/1XnJ4UH81cCwmF3v6pflO6ONb8Gvqd9vc/view?usp=drive_link', difficulty: 'medium' },
                                { title: 'Myologie de MP', link: 'https://docs.google.com/presentation/d/1L9-vIIs-xVyKBHoTFC83K570T6tLsouv/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'hard' },
                                { title: 'Angiologie de MP', link: 'https://drive.google.com/file/d/1IHv3zJ9VG3Wt9RROnElogj6r2O2HjOn_/view?usp=drive_link', difficulty: 'medium' },
                                { title: 'Neurologie de MP', link: 'https://drive.google.com/file/d/1TMvG0TaTqetZFXx_w3lT2A0emqhy8vkq/view?usp=drive_link', difficulty: 'medium' }
                            ]
                        },
                        youtube: null,
                        tips: ['الرسومات تساعدك كثيرا', 'استخدم تطبيق الاطلس ثلاثي الابعاد', 'حاول ان تتخيل ما تدرسه', 'ابدا بدراستها قبل بقية المواد'],
                        importance: ['أساس جميع التخصصات الطبية', 'ضروري للفهم السريري', 'يساعد في التشخيص الدقيق', 'مهم للإجراءات الجراحية']
                    },
                    'biochimie': {
                        id: 'biochimie',
                        title: 'BIOCHIMIE',
                        icon: '🧪',
                        description: 'هاته المادة سهلة وممتعة قليلا تدرسون فيها 3 مركبات : السكريات,البروتينات والليبيدات حيث يتضمن كل مركب بنيتة الجزئية وعملية الايض الخاصة به.',
                        lessons: {
                            semester1: [{ title: 'Les Structures', link: 'https://drive.google.com/drive/folders/1C4Y5CKvhk0e6JRieW6tpLdlM_UCepgnE?usp=drive_link', difficulty: 'medium' }],
                            semester2: [{ title: 'Les Metabolismes', link: 'https://drive.google.com/drive/folders/1_iemCqiWvlBICk4qmx7xun4avsu88-We?usp=drive_link', difficulty: 'hard' }]
                        },
                        youtube: {
                            semester1: [
                                { title: 'Les Glucides', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeazSlRMM-ZOMRh96D1w9CPln&si=uOKU14DfjlbWeA9z' },
                                { title: 'Les Lipides', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeaxwmnFn3hjIfyLTMx_acYqo&si=QCRumIWbyqpKETNC' },
                                { title: 'Les Proteines', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeayYbxsZKTTfpqfcul7wyl7c&si=jxMM7SluCjpPVFA0' }
                            ]
                        },
                        tips: ['لا تخف هاته المادة تصبح سهلة وممتعة وطبية لابعد درجة في السنة الثانية', 'استخدم المخططات التوضيحية', 'اعتمد الفهم قبل الحفظ خصوصا الفصل الثاني', 'لا تتجاهلو الانزيمات في الفصل الثاني لانها اهم شيئ'],
                        importance: ['فهم أساس الأمراض الوراثية', 'تفسير اختبارات الدم', 'فهم آليات الأدوية', 'أساس الطب الجزيئي']
                    },
                    'cytologie': {
                        id: 'cytologie',
                        title: 'CYTOLOGIE',
                        icon: '🔬',
                        description: 'المادة الجميلة الرائعة التي تذهب بك الى داخل الخلية ,مادة سهلة ليست معقدة ومهمة جدا كاهمية الاناتومي.',
                        lessons: {
                            semester1: [
                                { title: 'Organisation cellulaire', link: 'https://drive.google.com/file/d/1DKrk6yxoY_Ei94WTF8p0-Nf_tUUrm_j8/view?usp=drive_link', difficulty: 'easy' },
                                { title: 'Les Methodes', link: 'https://drive.google.com/file/d/1tXo1PdSlrcX9UoB4FLEeJ4-NRVjePzhp/view?usp=drive_link', difficulty: 'medium' },
                                { title: 'Transports', link: 'https://drive.google.com/file/d/1O5ySEupqa47QQDFn_6mKkqSeveOcZNRV/view?usp=drive_link', difficulty: 'easy' },
                                { title: 'Membeane Plasmique', link: 'https://drive.google.com/file/d/1IRnz_FMpT3xapUnhhI8Bf-Vj2S16Kwi7/view?usp=drive_link', difficulty: 'easy' }
                            ],
                            semester2: [
                                { title: 'cytosquelette', link: 'https://docs.google.com/presentation/d/1lZn6fJKvW64Kg1t7UHydxekE16yDrnAL/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'easy' },
                                { title: 'Endomembranaire', link: 'https://docs.google.com/presentation/d/147GRcFACTKX1VeWVwE05ml2i1bsGuFcy/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'easy' },
                                { title: 'Hyaloplasme', link: 'https://drive.google.com/file/d/1KHbWTUQJa1v4U5ulOCnR7-JYVE4n_27d/view?usp=drive_link', difficulty: 'easy' },
                                { title: 'Les Organites', link: 'https://drive.google.com/drive/folders/1QdfDftHr8iKINuNJMIN2Av3PNczsY2ji?usp=drive_link', difficulty: 'hard' }
                            ]
                        },
                        youtube: {
                            semester1: [{ title: 'Cours', link: 'https://youtube.com/playlist?list=PLgt70N0N-2-1oV2jgobbWVNrYbwpA7zE6&si=XURisgLAR-5f4aKK' }],
                            semester2: [
                                { title: 'Cytosquelette et Hyaloplasm', link: 'https://youtu.be/6ZYjQBK68Bw?si=u13BkB0OqJE1d0X6' },
                                { title: 'Endoo', link: 'https://youtu.be/T-PeJ29z1z0?si=aNzvh_bBz_U1ipLy' }
                            ]
                        },
                        tips: ['الفصل الاول اسهل قليلا من الثاني فركز جبدا فيها', 'انصحك بالحل بعد الانتهاء من الدرس', 'كررها اكثر من مرتين لانها سهلة النسيان', 'كرر الرسوم التوضيحية'],
                        importance: ['فهم التغيرات المرضية', 'أساس علم الأمراض', 'تفسير النتائج المخبرية', 'فهم الاستجابات المناعية']
                    },
                    'physiologie': {
                        id: 'physiologie',
                        title: 'PHYSIOLOGIE',
                        icon: '❤️',
                        description: 'هنا الاساس الثاني وهو علم الوظائف حيث انها مدخل فقط والباقي ياتي مرورا بالسنوات تدرسون فيها الاساسيات',
                        lessons: {
                            semester2: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1_ZVvnJhRvjFB4byK4tLwxRF_XLcbDzvB?usp=drive_link', difficulty: 'hard' }]
                        },
                        youtube: {
                            semester2: [{ title: 'Playliste', link: 'https://youtube.com/playlist?list=PLK4UNCL4RZYqTW-Yu4xCL9T8_W-rrN8V8&si=cr6j0x0WIHNNjrxt' }]
                        },
                        tips: ['مهمة كثيرا في السنة الثانية', 'اعتمد على اليوتيوب 50 بالمئة', 'تحتاج الفهم قبل الحفظ', 'حل الكثير من الأسئلة التطبيقية'],
                        importance: ['فهم الأساس الفسيولوجي للأمراض', 'تفسير نتائج التحاليل', 'فهم آليات عمل الأدوية', 'الأساس للطب السريري']
                    },
                    'biophysique': {
                        id: 'biophysique',
                        title: 'BIOPHYSIQUE',
                        icon: '⚡',
                        description: 'اسمط مادة في الطب تدرس اشياء لا حول ولا قوة الا بالله لكن الفصل الثاني سهل جدا وتدرسون على شيئ طبي الا وهو العين .',
                        lessons: {
                            semester1: [{ title: 'Elctrooo', link: 'https://drive.google.com/drive/folders/1CACmLUtv2k1SAW9BSnuuhQ0Vvqa3UUNl?usp=drive_link', difficulty: 'hard' }],
                            semester2: [{ title: 'Les Yeux', link: 'https://drive.google.com/drive/folders/1_qRmAeoEG0IojG7Xe8X8DcLgx76NOkds?usp=drive_link', difficulty: 'easy' }]
                        },
                        youtube: {
                            semester1: [
                                { title: 'Elctroo', link: 'https://youtube.com/playlist?list=PLvhLrq3xUh-fI7g1pEU8ojMAdH6rDUJh6&si=HjnCPMtVQpH0LtN4' },
                                { title: 'Solutions', link: 'https://youtube.com/playlist?list=PL6z25hk70QWwooWaK_Gf3U4C3LGUyhA3b&si=IeGBiXrLOSDNzqGY' }
                            ],
                            semester2: [{ title: 'Optique', link: 'https://www.youtube.com/playlist?list=PLvhLrq3xUh-frxnqDvto3WsLUQSw4xmij' }]
                        },
                        tips: ['ستتعبك يا صديقي لكنها سهلة في السنة الثانية لاتخف', 'اعتمد على اليوتيوب بشكل كبير', 'اعتمد على شات جيبيتي كثيرا', 'حل المسائل التطبيقية بكثرة بكثرة'],
                        importance: ['فهم الأجهزة الطبية', 'تفسير القياسات الفيزيائية', 'أساس التصوير الطبي', 'فهم الآليات الفيزيائية للأمراض']
                    },
                    'biostat': {
                        id: 'biostat',
                        title: 'BIOSTAT',
                        icon: '📊',
                        description: 'لا اعلم لماذا هي ضمن مواد الطب لكن تحملها فقط لانك لن تراها مجددا ابدا, لكنها سهلة ةتساعدك في رفع معدلك السنوي .',
                        lessons: {
                            semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1C9X0D03QuRhBlOZ8nfswhHm5nw8mAMSj?usp=drive_link', difficulty: 'medium' }],
                            semester2: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1_q7eLd3-2OMKALRFhROGanTHVPNlCGNm?usp=drive_link', difficulty: 'medium' }]
                        },
                        youtube: {
                            semester1: [
                                { title: 'STATISTIQUE', link: 'https://youtube.com/playlist?list=PLTuuQN_bAwZ4bUuYceiDHUELLU_u6UsyS&si=zXtWUm9Z2F5WjyWT' },
                                { title: 'الاحتمالات', link: 'https://youtube.com/playlist?list=PLlaFpJcuzvllMcU6DLqNr-7s2HxeplpC3&si=Wa1F5GN-hlvGqIhH' }
                            ],
                            semester2: []
                        },
                        tips: ['تدرب على برامج التحليل', 'افهم المفاهيم الأساسية', 'حل الكثير من المسائل', 'تعلم تفسير النتائج'],
                        importance: ['تحليل الأبحاث العلمية', 'تصميم الدراسات', 'تفسير النتائج السريرية', 'اتخاذ القرارات المبنية على الأدلة']
                    },
                    'ssh': {
                        id: 'ssh',
                        title: 'SSH',
                        icon: '👥',
                        description: 'دراسة العوامل الاجتماعية والسلوكية التي تؤثر على الصحة والمرض، وعلاقة الطبيب بالمريض والمجتمع. وكذلك تحمي حقوقك الطبية .',
                        lessons: {
                            semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1CSSN_5C27yTZjznP9w7g1yVEWtA4jLd1?usp=drive_link', difficulty: 'hard' }]
                        },
                        youtube: { semester1: [], semester2: [] },
                        tips: ['ضمن المواد التي لن تلتقي بهم ابدا', 'تستطيع تاجيلها ودراستها عند اقتراب الامتحان', 'اعتمد على اليوتيوب بشكل نهائي', 'افهم المفاهيم واحفظها'],
                        importance: ['فهم العوامل الاجتماعية للأمراض', 'تحسين العلاقة مع المرضى', 'اتخاذ قرارات أخلاقية', 'العمل ضمن الفريق الصحي']
                    },
                    'embryologie': {
                        id: 'embryologie',
                        title: 'EMBRYOLOGIE',
                        icon: '👶',
                        description: 'تتمحور حول تطور الجنين من الاخصاب الى الاسبوع الرابع من التطور الجنيني, المادة معقدة قليلا ومهمة كثيرا لكن الفيديوهات التي وضعتها لكم تساعدكم بشكل كبير جدا .',
                        lessons: {
                            semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1CR7rYcjoJ_BWVZHST3RSoA5GhNSoOMFi?usp=drive_link', difficulty: 'hard' }]
                        },
                        youtube: {
                            semester1: [{ title: 'Playlist', link: 'https://youtube.com/playlist?list=PLB3gueQInnKkrl8iQ24xszSHvvrGsz3Ud&si=msutfOyr58ir1j1v' }],
                            semester2: []
                        },
                        tips: ['تابع مراحل التطور بالتسلسل', 'استخدم الرسوم المتحركة كثيرا', 'افهم المصطلحات قبل ما تحفظها', 'ركز على النقاط الحرجة والايام كثيرا'],
                        importance: ['فهم التشوهات الخلقية', 'أساس علم الوراثة', 'تفسير الحالات السريرية', 'مهم لطب النساء والتوليد']
                    },
                    'chimie': {
                        id: 'chimie',
                        title: 'CHIMIE',
                        icon: '⚗️',
                        description: 'من المواد التي ليست مهمة في الطب واراها كاضافة لرفع المعدل تدرسون حول الذرة والجزيئ في الفصل الثاني تصصبح سهلة وممتعة وتميل قليلا الى الطب',
                        lessons: {
                            semester1: [{ title: 'Cours 1', link: 'https://drive.google.com/file/d/1tLpi4wLbj_uTIMtRHE7DMM3K3s-gPPec/view?usp=drive_link', difficulty: 'medium' }],
                            semester2: [
                                { title: 'Solution', link: 'https://docs.google.com/presentation/d/1XNBnClwKTSMqafRPB2Jd2Xq0P1m1WNU7/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'medium' },
                                { title: 'Organique', link: 'https://docs.google.com/presentation/d/1RnAT6fooUe6CMJPzpRi3mG4dRHZy7l5F/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'easy' },
                                { title: 'Stereochemique', link: 'https://docs.google.com/presentation/d/1wed_9uAeHJ8ypWPIv_GmZxFv-q1AnOhJ/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'medium' },
                                { title: 'cenitique', link: 'https://docs.google.com/presentation/d/1NMN026bORuW4COUX0pOF7EgqNH4GgXTL/edit?usp=drive_link&ouid=106233026404999643178&rtpof=true&sd=true', difficulty: 'medium' }
                            ]
                        },
                        youtube: {
                            semester1: [
                                { title: 'Playlist', link: 'https://youtube.com/playlist?list=PLgWzWDJ5fcXkXT1028nVW4HaAJXyjHOEH&si=B8bf8X_WOaPJDgXw' },
                                { title: 'Playlist 2', link: 'https://youtube.com/playlist?list=PLgWzWDJ5fcXmijtRkLeBAbUY5QTr0gX7c&si=lwB8WzdFhocHgOws' },
                                { title: 'Playlist 3', link: 'https://youtube.com/playlist?list=PLvYKeChoC24A6jhqboAovvktPsqLNlXx1&si=OR1IsEbrdS6F5DNX' }
                            ],
                            semester2: [{ title: 'Playlist', link: 'https://youtube.com/playlist?list=PLkpUyH10WPwV578GrSfc0WvLjYCLgQgnE&si=DzYSja3PmwnEEewO' }]
                        },
                        tips: ['افهم الأساس النظري', 'حل التمارين التطبيقية', 'اربط بين الكيمياء والطب', 'استخدم النماذج الجزيئية'],
                        importance: ['أساس الكيمياء الحيوية', 'فهم تفاعلات الأدوية', 'تفسير نتائج المختبر', 'التحضير للصيدلة']
                    },
                    'cardiovasculaire': {
                        id: 'cardiovasculaire',
                        title: 'CARDIOVASCULAIRE',
                        icon: '🫀',
                        description: 'دراسة الجهاز القلبي الوعائي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                        lessons: [
                            { title: 'Anatomique', link: 'https://drive.google.com/drive/folders/1m1IJPo2yc4djXSk1RpJ4hi9smO7C8HQk?usp=drive_link', difficulty: 'medium' },
                            { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1tQ0YGtfyr3XUwmzaCQnKrURc2tVbgVjy?usp=drive_link', difficulty: 'hard' },
                            { title: 'Biophysique', link: 'https://drive.google.com/drive/folders/1aiNVOxcXpJcc0CSrmwyOLVniw7__SLH2?usp=drive_link', difficulty: 'hard' },
                            { title: 'Histologie', link: 'https://drive.google.com/drive/folders/17DDAtsFF12asjfpfEenvUVGtm_rMvfSo?usp=drive_link', difficulty: 'medium' }
                        ],
                        youtube: null,
                        tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين التشريح والوظيفة'],
                        importance: ['أساس أمراض القلب', 'فهم ضغط الدم', 'تفسير تخطيط القلب', 'التعامل مع الطوارئ القلبية']
                    },
                    'nerveux': {
                        id: 'nerveux',
                        title: 'NERVEUX',
                        icon: '🧠',
                        description: 'دراسة الجهاز العصبي، تركيبه، وظائفه، والاضطرابات التي تصيبه.',
                        lessons: [],
                        youtube: null,
                        tips: [],
                        importance: []
                    },
                    'digestif': {
                        id: 'digestif',
                        title: 'DIGESTIF',
                        icon: '😋',
                        description: 'دراسة الجهاز الهضمي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                        lessons: [
                            { title: 'Anatomie', link: 'https://drive.google.com/drive/folders/1OkXTN5dgbLo3oVluQo98r_e4h42-s4Ej?usp=drive_link', difficulty: 'medium' },
                            { title: 'Biochimie', link: 'https://drive.google.com/drive/folders/1Qrkno1LCVGC07MRYyAZSITm00VwP-uKL?usp=drive_link', difficulty: 'easy' },
                            { title: 'Histologie', link: 'https://drive.google.com/drive/folders/1-awFn-UtHWTtFOuzEUIoQyd-lWu1IdXs?usp=drive_link', difficulty: 'easy' },
                            { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1fYSS4ZvCUk-t7KBBpR78rk8aMj5rs0Hc?usp=drive_link', difficulty: 'medium' }
                        ],
                        youtube: null,
                        tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين الأعضاء المختلفة'],
                        importance: ['تشخيص الأمراض الهضمية', 'فهم سوء الامتصاص', 'التخطيط العلاجي', 'الوقاية من الأمراض']
                    },
                    'endocrineien': {
                        id: 'endocrineien',
                        title: 'ENDOCRINEIEN',
                        icon: '⚖️',
                        description: 'دراسة الغدد الصماء، الهرمونات التي تفرزها، وتأثيراتها على الجسم.',
                        lessons: [],
                        youtube: null,
                        tips: [],
                        importance: []
                    },
                    'urinaire': {
                        id: 'urinaire',
                        title: 'URINAIRE',
                        icon: '💧',
                        description: 'دراسة الجهاز البولي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                        lessons: [
                            { title: 'Anatomie', link: 'https://drive.google.com/drive/folders/1-6vSXjW0CMAylAoX3aeC0CIj8-Wsx66M?usp=drive_link', difficulty: 'medium' },
                            { title: 'Biochimie', link: 'https://drive.google.com/drive/folders/1H9s1QAiTS8uzSj8wKci0997AaC6oCaYD?usp=drive_link', difficulty: 'medium' },
                            { title: 'Histologie', link: 'https://drive.google.com/drive/folders/1Ki6ok-KJ1CqV6w9oLgx5K-pB6XRHDmKL?usp=drive_link', difficulty: 'easy' },
                            { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1aJ2hBJ5rgT0ZfL0hTlpLZ3ycZIPECBf2?usp=drive_link', difficulty: 'medium' }
                        ],
                        youtube: null,
                        tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين التركيب والوظيفة'],
                        importance: ['تشخيص أمراض الكلى', 'فهم الفشل الكلوي', 'التخطيط العلاجي', 'الوقاية من الحصوات']
                    },
                    'genetique': {
                        id: 'genetique',
                        title: 'GENETIQUE',
                        icon: '🧬',
                        description: 'دراسة الوراثة، الجينات، والاضطرابات الوراثية التي تصيب الإنسان.',
                        lessons: [],
                        youtube: null,
                        tips: [],
                        importance: []
                    },
                    'immunologie': {
                        id: 'immunologie',
                        title: 'IMMUNOLOGIE',
                        icon: '🛡️',
                        description: 'دراسة جهاز المناعة والدفاعات الطبيعية للجسم ضد العوامل الممرضة والخلايا غير الطبيعية.',
                        lessons: [],
                        youtube: null,
                        tips: [],
                        importance: []
                    }
                }
            };
        </script>

        <!-- Notifications System -->
        <div id="search-modal">
            <div class="search-container">
                <div class="search-header">
                    <h3>البحث في MedGpa 🔍</h3>
                    <button class="search-close" onclick="toggleSearch()">&times;</button>
                </div>
                <div class="search-input-wrapper">
                    <input type="text" id="search-input" placeholder="ابحث عن مادة، درس، أو معلومة..."
                        oninput="handleSearch(this.value)">
                </div>
                <div id="search-results" class="search-results">
                    <!-- Search results appear here -->
                </div>
            </div>
        </div>

        <div id="toast-container"
            style="position: fixed; top: 20px; left: 20px; z-index: 10001; display: flex; flex-direction: column; gap: 10px;">
        </div>

        <div id="focus-mode-overlay">
            <div class="focus-mode-panel">
                <h2>وضعية التركيز 🧘</h2>
                <div class="pomodoro-timer">
                    <div id="timer-display" class="timer-display">25:00</div>
                    <div class="timer-controls">
                        <button class="timer-btn" onclick="startTimer()">بدء</button>
                        <button class="timer-btn" onclick="pauseTimer()">إيقاف</button>
                        <button class="timer-btn" onclick="resetTimer()">إعادة تعيين</button>
                    </div>
                </div>
                <button class="exit-focus-btn" onclick="toggleFocusMode()">إنهاء الوضعية</button>
            </div>
        </div>

        <div id="achievements-panel">
            <div class="achievements-content">
                <div class="achievements-header">
                    <h2>إنجازاتي 🏆</h2>
                    <button class="close-achievements" onclick="toggleAchievements()">&times;</button>
                </div>
                <div class="points-display">
                    <div class="points-circle">
                        <span id="user-points" style="font-size: 2.5rem; font-weight: 800;">0</span>
                        <span style="font-size: 0.9rem;">نقطة</span>
                    </div>
                    <p style="color: var(--text-secondary);">استمر في المذاكرة لجمع المزيد!</p>
                </div>
                <div id="achievements-list">
                    <!-- Achievements will be listed here -->
                </div>
            </div>
        </div>

        <script>
            function showToast(message, type = 'info', duration = 3000) {
                const container = document.getElementById('toast-container');
                if (!container) return;

                const toast = document.createElement('div');
                toast.className = `toast-notification toast-${type}`;

                let icon = 'ℹ️';
                if (type === 'success') icon = '✅';
                if (type === 'error') icon = '❌';
                if (type === 'warning') icon = '⚠️';
                if (type === 'motivational') icon = '🔥';

                toast.innerHTML = `
        <div class="toast-icon">${icon}</div>
        <div class="toast-content">${message}</div>
        <button class="toast-close" onclick="this.parentElement.remove()">&times;</button>
    `;

                container.appendChild(toast);

                // Trigger animation
                setTimeout(() => toast.classList.add('show'), 100);

                // Auto remove
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, duration);
            }

            // Initial Welcome Toast
            setTimeout(() => {
                showToast('شكراً لزيارتك MedGpa! نحن هنا لمساعدتك في رحلتك الطبية ⚕️', 'motivational', 5000);
            }, 2000);

            /* --- Med-Glossary Logic --- */
            const GLOSSARY_DATA = [
                { term: "HTA", full: "Hypertension Artérielle", cat: "Cardiologie", ar: "ارتفاع ضغط الدم" },
                { term: "ECG", full: "Électrocardiogramme", cat: "Cardiologie", ar: "تخطيط القلب الكهربائي" },
                { term: "IRM", full: "Imagerie par Résonance Magnétique", cat: "Radiologie", ar: "التصوير بالرنين المغناطيسي" },
                { term: "AVC", full: "Accident Vasculaire Cérébral", cat: "Neurologie", ar: "سكتة دماغية" },
                { term: "SIDA", full: "Syndrome d'ImmunoDéficience Acquise", cat: "Infectiologie", ar: "نقص المناعة المكتسب (الإيدز)" },
                { term: "ADN", full: "Acide DésoxyriboNucléique", cat: "Génétique", ar: "الحمض النووي الريبوزي منقوص الأكسجين" },
                { term: "QCM", full: "Question à Choix Multiples", cat: "Général", ar: "أسئلة ذات خيارات متعددة" },
                { term: "ORL", full: "Oto-Rhino-Laryngologie", cat: "Spécialité", ar: "طب الأنف والأذن والحنجرة" },
                { term: "EP", full: "Embolie Pulmonaire", cat: "Pneumologie", ar: "الانصمام الرئوي" },
                { term: "IDM", full: "Infarctus du Myocarde", cat: "Cardiologie", ar: "احتشاء عضلة القلب (جلطة)" },
                { term: "BPCO", full: "Broncho-Pneumopathie Chronique Obstructive", cat: "Pneumologie", ar: "الانسداد الرئوي المزمن" },
                { term: "VADS", full: "Voies Aéro-Digestives Supérieures", cat: "Anatomie", ar: "المجاري التنفسية والهضمية العليا" },
                { term: "LCR", full: "Liquide Céphalo-Rachidien", cat: "Neurologie", ar: "السائل الدماغي الشوكي" },
                { term: "PL", full: "Ponction Lombaire", cat: "Neurologie", ar: "البزل القطني" },
                { term: "IV", full: "Intra-Veneux", cat: "Pratique", ar: "حقن وريدي" },
                { term: "IM", full: "Intra-Musculaire", cat: "Pratique", ar: "حقن عضلي" },
                { term: "EFR", full: "Exploration Fonctionnelle Respiratoire", cat: "Pneumologie", ar: "استكشاف الوظائف التنفسية" },
                { term: "HGT", full: "Hémogramme Globu-Test (Glycémie)", cat: "Pratique", ar: "قياس السكر الشعيري" },
                { term: "OAP", full: "Oedème Aigu du Poumon", cat: "Cardiologie", ar: "وذمة الرئة الحادة" },
                { term: "TA", full: "Tension Artérielle", cat: "Général", ar: "الضغط الشرياني" },
                { term: "RAA", full: "Rhumatisme Articulaire Aigu", cat: "Rhumatologie", ar: "الحمى الرثوية (المفاصل)" },
                { term: "CRP", full: "C-Reactive Protein", cat: "Biologie", ar: "البروتين التفاعلي C (مؤشر التهاب)" },
                { term: "VS", full: "Vitesse de Sédimentation", cat: "Biologie", ar: "سرعة الترسيب" },
                { term: "GB", full: "Globules Blancs", cat: "Hématologie", ar: "كريات الدم البيضاء" },
                { term: "GR", full: "Globules Rouges", cat: "Hématologie", ar: "كريات الدم الحمراء" },
                { term: "NFS", full: "Numération Formule Sanguine", cat: "Hématologie", ar: "تحليل تعداد الدم الكامل" },
                { term: "AAA", full: "Anévrisme de l'Aorte Abdominale", cat: "Vasculaire", ar: "تمدد الشريان الأورطي البطني" },
                { term: "ACFA", full: "Arythmie Complexe", cat: "Cardiologie", ar: "الرجفان الأذيني" },
                { term: "ADP", full: "Adénopathie", cat: "Sémiologie", ar: "تضخم العقد اللمفاوية" },
                { term: "AOMI", full: "Artériopathie des Membres Inf.", cat: "Vasculaire", ar: "اعتلال الشرايين المحيطية" },
                { term: "APP", full: "Appendicectomie", cat: "Chirurgie", ar: "استئصال الزائدة الدودية" },
                { term: "ARN", full: "Acide Ribonucléique", cat: "Génétique", ar: "الحمض النووي الريبوزي" },
                { term: "ASAT", full: "Aspartate Aminotransférase", cat: "Biologie", ar: "إنزيم ناقل أمين الأسبرتات (TGO)" },
                { term: "ALAT", full: "Alanine Aminotransférase", cat: "Biologie", ar: "إنزيم ناقل أمين الألانين (TGP)" },
                { term: "ATCD", full: "Antécédents", cat: "Clinique", ar: "السوابق الطبية للمريض" },
                { term: "AVK", full: "Anti-Vitamine K", cat: "Pharmacologie", ar: "مضادات فيتامين K (مميعات دم)" },
                { term: "BAV", full: "Bloc Auriculo-Ventriculaire", cat: "Cardiologie", ar: "إحصار أذيني بطيني" },
                { term: "BCG", full: "Bacille Calmette-Guérin", cat: "Vaccination", ar: "لقاح السل" },
                { term: "BMI", full: "Body Mass Index", cat: "Nutrition", ar: "مؤشر كتلة الجسم (IMC)" },
                { term: "CIVD", full: "Coagulation Intravasculaire", cat: "Hématologie", ar: "التخثر المنتشر داخل الأوعية" },
                { term: "CPRE", full: "Cholangio-Pancréatographie", cat: "Gastro", ar: "تصوير القنوات الصفراوية والبنكرياس" },
                { term: "DFG", full: "Débit de Filtration Glomérulaire", cat: "Néphrologie", ar: "معدل الرشح الكبيبي" },
                { term: "DMLA", full: "Dégénérescence Maculaire", cat: "Ophtalmo", ar: "التنكس البقعي المرتبط بالعمر" },
                { term: "DPN", full: "Diagnostic Prénatal", cat: "Gynécologie", ar: "التشخيص قبل الولادة" },
                { term: "DT1", full: "Diabète de Type 1", cat: "Endocrino", ar: "السكري من النوع 1" },
                { term: "DT2", full: "Diabète de Type 2", cat: "Endocrino", ar: "السكري من النوع 2" },
                { term: "EEG", full: "Électroencéphalogramme", cat: "Neurologie", ar: "تخطيط الدماغ الكهربائي" },
                { term: "EMG", full: "Électromyogramme", cat: "Neurologie", ar: "تخطيط العضلات الكهربائي" },
                { term: "EPS", full: "Électrophorèse des Protéines", cat: "Biologie", ar: "الرحلان الكهربائي لبروتينات المصل" },
                { term: "ERC", full: "Insuffisance Rénale Chronique", cat: "Néphrologie", ar: "القصور الكلوي المزمن" },
                { term: "ETO", full: "Échographie Trans-Oesoph.", cat: "Cardiologie", ar: "التصوير بالصدى عبر المريء" },
                { term: "FCV", full: "Frottis Cervico-Vaginal", cat: "Gynécologie", ar: "لطاخة عنق الرحم" },
                { term: "FEVG", full: "Fraction d'Éjection VG", cat: "Cardiologie", ar: "الكسر القذفي للبطين الأيسر" },
                { term: "FIV", full: "Fécondation In Vitro", cat: "PMA", ar: "التلقيح الاصطناعي (أطفال الأنابيب)" },
                { term: "GCS", full: "Glasgow Coma Scale", cat: "Neurologie", ar: "مقياس غلاسكو للغيبوبة" },
                { term: "GNA", full: "Glomérulonéphrite Aiguë", cat: "Néphrologie", ar: "التهاب الكبيبات الكلوية الحاد" },
                { term: "HbA1c", full: "Hémoglobine Glyquée", cat: "Endocrino", ar: "الهيموغلوبين السكري (التراكمي)" },
                { term: "HDL", full: "High Density Lipoprotein", cat: "Biologie", ar: "البروتين الدهني عالي الكثافة" },
                { term: "HGPO", full: "Hyperglycémie Provoquée", cat: "Endocrino", ar: "اختبار تحمل الغلوكوز الفموي" },
                { term: "HRP", full: "Hématome Rétro-Placentaire", cat: "Gynécologie", ar: "ورم دموي خلف المشيمة" },
                { term: "HTIC", full: "Hypertension Intra-Crânienne", cat: "Neurologie", ar: "ارتفاع الضغط داخل الجمجمة" },
                { term: "HTP", full: "Hypertension Pulmonaire", cat: "Cardiologie", ar: "ارتفاع ضغط الدم الرئوي" },
                { term: "IC", full: "Insuffisance Cardiaque", cat: "Cardiologie", ar: "القصور القلبي" },
                { term: "IRA", full: "Insuffisance Rénale Aiguë", cat: "Néphrologie", ar: "القصور الكلوي الحاد" },
                { term: "IRC", full: "Insuffisance Respiratoire Chronique", cat: "Pneumologie", ar: "القصور التنفسي المزمن" },
                { term: "IVG", full: "Interruption Volontaire Grossesse", cat: "Gynécologie", ar: "الإجهاض الإرادي" },
                { term: "LAL", full: "Leucémie Aiguë Lympho.", cat: "Oncologie", ar: "ابيضاض الدم الليمفاوي الحاد" },
                { term: "LAM", full: "Leucémie Aiguë Myélo.", cat: "Oncologie", ar: "ابيضاض الدم النقوي الحاد" },
                { term: "LDL", full: "Low Density Lipoprotein", cat: "Biologie", ar: "البروتين الدهني منخفض الكثافة" },
                { term: "LEC", full: "Lithotritie Extra-Corporelle", cat: "Urologie", ar: "تفتيت الحصى بالموجات الصدمية" },
                { term: "LED", full: "Lupus Érythémateux Disséminé", cat: "Rhumatologie", ar: "الذئبة الحمامية الجهازية" },
                { term: "LP", full: "Libération Prolongée", cat: "Pharmacologie", ar: "دواء طويل المفعول" },
                { term: "MAP", full: "Menace d'Accouchement Prématuré", cat: "Gynécologie", ar: "خطر الولادة المبكرة" },
                { term: "MFIU", full: "Mort Foetale In Utero", cat: "Gynécologie", ar: "وفاة الجنين داخل الرحم" },
                { term: "NASH", full: "Stéato-Hépatite Non Alcoolique", cat: "Gastro", ar: "التهاب الكبد الدهني غير الكحولي" },
                { term: "OCT", full: "Optical Coherence Tomography", cat: "Ophtalmo", ar: "التصوير المقطعي للترابط البصري" },
                { term: "PAC", full: "Pneumonie Aiguë Communautaire", cat: "Pneumologie", ar: "الالتهاب الرئوي المكتسب" },
                { term: "PAD", full: "Pression Artérielle Diastolique", cat: "Clinique", ar: "الضغط الشرياني الانبساطي" },
                { term: "PAS", full: "Pression Artérielle Systolique", cat: "Clinique", ar: "الضغط الشرياني الانقباضي" },
                { term: "PCR", full: "Polymerase Chain Reaction", cat: "Génétique", ar: "تفاعل البوليميراز المتسلسل" },
                { term: "PE", full: "Pré-Éclampsie", cat: "Gynécologie", ar: "ما قبل الارتعاج (تسمم الحمل)" },
                { term: "PMA", full: "Procréation Médicalement Assis.", cat: "Gynécologie", ar: "المساعدة الطبية على الإنجاب" },
                { term: "PNN", full: "PolyNucléaires Neutrophiles", cat: "Hématologie", ar: "الكريات البيض المتعادلة" },
                { term: "PR", full: "Polyarthrite Rhumatoïde", cat: "Rhumatologie", ar: "التهاب المفاصل الروماتويدي" },
                { term: "PSA", full: "Prostate Specific Antigen", cat: "Urologie", ar: "المستضد البروستاتي النوعي" },
                { term: "PU", full: "Protéinurie", cat: "Néphrologie", ar: "وجود البروتين في البول" },
                { term: "RA", full: "Rétrécissement Aortique", cat: "Cardiologie", ar: "تضيق الصمام الأبهر" },
                { term: "RAM", full: "Rupture des Membranes", cat: "Gynécologie", ar: "تمزق الأغشية (نزول الماء)" },
                { term: "RGO", full: "Reflux Gastro-Oesophagien", cat: "Gastro", ar: "الارتجاع المعدي المريئي" },
                { term: "RM", full: "Rétrécissement Mitral", cat: "Cardiologie", ar: "تضيق الصمام التاجي" },
                { term: "ROR", full: "Rougeole-Oreillons-Rubéole", cat: "Vaccination", ar: "لقاح الحصبة والنكاف والألمانية" },
                { term: "SA", full: "Semaine d'Aménorrhée", cat: "Gynécologie", ar: "أسابيع الحمل" },
                { term: "SAMU", full: "Service d'Aide Médicale Urgente", cat: "Urgences", ar: "الإسعاف الطبي الاستعجالي" },
                { term: "SAT", full: "Saturation en Oxygène", cat: "Clinique", ar: "تشبع الدم بالأكسجين" },
                { term: "SDRA", full: "Syndrome Détresse Resp. Aiguë", cat: "Pneumologie", ar: "متلازمة الضائقة التنفسية الحادة" },
                { term: "SEP", full: "Sclérose En Plaques", cat: "Neurologie", ar: "التصلب اللويحي" },
                { term: "SHU", full: "Syndrome Hémolytique Urémique", cat: "Néphrologie", ar: "المتلازمة الانحلالية اليوريميّة" },
                { term: "SNV", full: "Système Nerveux Végétatif", cat: "Anatomie", ar: "الجهاز العصبي الذاتي" },
                { term: "SOPK", full: "Syndrome Ovaires Polykystiques", cat: "Gynécologie", ar: "متلازمة تكيس المبايض" },
                { term: "TDM", full: "Tomodensitométrie", cat: "Radiologie", ar: "التصوير المقطعي (Scanner)" },
                { term: "TEP", full: "Tomographie Émission Positons", cat: "Radiologie", ar: "التصوير المقطعي بالإصدار البوزيتروني" },
                { term: "TV", full: "Tachycardie Ventriculaire", cat: "Cardiologie", ar: "تسرع القلب البطيني" },
                { term: "TVP", full: "Thrombose Veineuse Profonde", cat: "Cardiologie", ar: "تجلط الأوردة العميقة" },
                { term: "VEMS", full: "Volume Expiratoire Max/Sec", cat: "Pneumologie", ar: "حجم الزفير القسري في ثانية" },
                { term: "VVC", full: "Voie Veineuse Centrale", cat: "Clinique", ar: "القثطرة الوريدية المركزية" },
                { term: "VVP", full: "Voie Veineuse Périphérique", cat: "Clinique", ar: "القثطرة الوريدية المحيطية" },
                { term: "AC", full: "Anticorps", cat: "Immunologie", ar: "أجسام مضادة" },
                { term: "AG", full: "Anesthésie Générale", cat: "Médecine", ar: "تخدير عام" },
                { term: "AINS", full: "Anti-Inflammatoires Non Stéro.", cat: "Pharmacologie", ar: "مضادات الالتهاب غير الستيروئيدية" },
                { term: "AMM", full: "Autorisation Mise sur Marché", cat: "Admin", ar: "ترخيص تسويق الدواء" },
                { term: "AP", full: "Artère Pulmonaire", cat: "Anatomie", ar: "الشريان الرئوي" },
                { term: "ATB", full: "Antibiotique", cat: "Pharmacologie", ar: "مضاد حيوي" },
                { term: "AVP", full: "Accident de la Voie Publique", cat: "Urgences", ar: "حادث سير" },
                { term: "BU", full: "Bandelette Urinaire", cat: "Pratique", ar: "شريط فحص البول" },
                { term: "CEC", full: "Circulation Extra-Corporelle", cat: "Chirurgie", ar: "الدورة الدموية خارج الجسم" },
                { term: "CGR", full: "Concentré de Globules Rouges", cat: "Hématologie", ar: "كريات الدم الحمراء المركزة" },
                { term: "CMV", full: "Cytomégalovirus", cat: "Infectiologie", ar: "الفيروس المضخم للخلايا" },
                { term: "ECBU", full: "Examen Cyto-Bactério des Urines", cat: "Biologie", ar: "فحص البول المخبري" },
                { term: "EEP", full: "Épreuve d'Effort", cat: "Cardiologie", ar: "اختبار الجهد" },
                { term: "GDS", full: "Gaz Du Sang", cat: "Réanimation", ar: "غازات الدم" },
                { term: "IA", full: "Insuffisance Aortique", cat: "Cardiologie", ar: "قصور الصمام الأبهر" },
                { term: "IM", full: "Insuffisance Mitrale", cat: "Cardiologie", ar: "قصور الصمام التاجي" },
                { term: "IV", full: "Insuffisance Ventriculaire", cat: "Cardiologie", ar: "قصور بطيني" },
                { term: "LNH", full: "Lymphome Non Hodgkinien", cat: "Oncologie", ar: "ليمفوما غير هودجكين" },
                { term: "PVC", full: "Pression Veineuse Centrale", cat: "Anesthésie", ar: "الضغط الوريدي المركزي" },
                { term: "VMA", full: "VanillylMandelic Acid", cat: "Biologie", ar: "حمض الفانيليل مندليك" }
            ];

            let currentLetterFilter = '';

            function initGlossary() {
                const alphabetFilter = document.getElementById('alphabetFilter');
                const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

                let html = `<button class="letter-btn ${currentLetterFilter === '' ? 'active' : ''}" onclick="filterByLetter('')">الكل</button>`;
                alphabet.forEach(letter => {
                    html += `<button class="letter-btn ${currentLetterFilter === letter ? 'active' : ''}" onclick="filterByLetter('${letter}')">${letter}</button>`;
                });
                alphabetFilter.innerHTML = html;
                renderGlossary(GLOSSARY_DATA);
            }

            function renderGlossary(data) {
                const grid = document.getElementById('glossaryGrid');
                const empty = document.getElementById('glossaryEmpty');

                if (!grid || !empty) return;

                if (data.length === 0) {
                    grid.innerHTML = '';
                    empty.style.display = 'block';
                    return;
                }

                empty.style.display = 'none';
                let html = '';
                data.sort((a, b) => a.term.localeCompare(b.term)).forEach(item => {
                    html += `
                            <div class="glossary-card">
                                <span class="glossary-category">${item.cat}</span>
                                <h3 class="glossary-term">${item.term}</h3>
                                <span class="glossary-full">${item.full}</span>
                                <div class="glossary-meaning">${item.ar}</div>
                            </div>
                        `;
                });
                grid.innerHTML = html;
            }

            function filterGlossary() {
                const query = document.getElementById('glossarySearch').value.toUpperCase();
                currentLetterFilter = '';
                updateAlphabetButtons();

                const filtered = GLOSSARY_DATA.filter(item =>
                    item.term.toUpperCase().includes(query) ||
                    item.full.toUpperCase().includes(query) ||
                    item.ar.includes(query)
                );
                renderGlossary(filtered);
            }

            function filterByLetter(letter) {
                currentLetterFilter = letter;
                document.getElementById('glossarySearch').value = '';
                updateAlphabetButtons();

                const filtered = letter === ''
                    ? GLOSSARY_DATA
                    : GLOSSARY_DATA.filter(item => item.term.toUpperCase().startsWith(letter));
                renderGlossary(filtered);
            }

            function updateAlphabetButtons() {
                const btns = document.querySelectorAll('.letter-btn');
                btns.forEach(btn => {
                    if (btn.textContent === 'الكل' && currentLetterFilter === '') btn.classList.add('active');
                    else if (btn.textContent === currentLetterFilter) btn.classList.add('active');
                    else btn.classList.remove('active');
                });
            }

            /* --- Rotation Tracker Logic --- */
            let rotations = JSON.parse(localStorage.getItem('medgpa_rotations') || '[]');

            function toggleRotationForm() {
                const form = document.getElementById('rotationForm');
                if (!form) return;
                form.style.display = form.style.display === 'block' ? 'none' : 'block';
                if (form.style.display === 'block') {
                    form.scrollIntoView({ behavior: 'smooth' });
                }
            }

            function addRotation() {
                const service = document.getElementById('rotService').value;
                const hospital = document.getElementById('rotHospital').value;
                const start = document.getElementById('rotStart').value;
                const time = document.getElementById('rotTime').value;

                if (!service || !hospital || !start || !time) {
                    showToast('يرجى ملء جميع الحقول المطلوبة ⚠️', 'warning');
                    return;
                }

                const skillsInput = document.getElementById('rotSkills').value;
                const skillsArray = skillsInput ? skillsInput.split(/[،,]+/).map((s, index) => ({
                    id: Date.now() + index,
                    name: s.trim(),
                    mastered: false
                })).filter(s => s.name !== '') : [
                    { id: 1, name: 'سحب دم', mastered: false },
                    { id: 2, name: 'تركيب كانيولا', mastered: false },
                    { id: 3, name: 'تخطيط قلب', mastered: false },
                    { id: 4, name: 'خياطة جروح', mastered: false },
                    { id: 5, name: 'فحص سريري', mastered: false }
                ];

                const newRot = {
                    id: Date.now(),
                    service,
                    hospital,
                    start,
                    time,
                    skills: skillsArray
                };

                rotations.push(newRot);
                saveRotations();
                renderRotations();
                toggleRotationForm();
                showToast('تمت إضافة التربص بنجاح 🏥', 'success');

                // Clear inputs
                document.getElementById('rotService').value = '';
                document.getElementById('rotHospital').value = '';
                document.getElementById('rotStart').value = '';
                document.getElementById('rotTime').value = '';
                document.getElementById('rotSkills').value = '';
            }

            function saveRotations() {
                localStorage.setItem('medgpa_rotations', JSON.stringify(rotations));
            }

            function deleteRotation(id) {
                if (confirm('هل أنت متأكد من حذف هذا التربص؟')) {
                    rotations = rotations.filter(r => r.id !== id);
                    saveRotations();
                    renderRotations();
                    showToast('تم حذف التربص', 'info');
                }
            }

            function toggleSkill(rotId, skillId) {
                const rot = rotations.find(r => r.id === rotId);
                if (rot) {
                    const skill = rot.skills.find(s => s.id === skillId);
                    if (skill) {
                        skill.mastered = !skill.mastered;
                        saveRotations();
                        renderRotations();
                    }
                }
            }


            function renderRotations() {
                const grid = document.getElementById('rotationGrid');
                if (!grid) return;

                rotations.sort((a, b) => new Date(b.start) - new Date(a.start));

                let html = '';
                let totalDays = 0;
                let masteredSkillsCount = 0;

                rotations.forEach(rot => {
                    const statusClass = 'status-active';
                    const statusLabel = 'تربص مسجل';

                    const start = new Date(rot.start);
                    totalDays += 1; // Each entry counts as a day/session now

                    const masteredCount = rot.skills.filter(s => s.mastered).length;
                    masteredSkillsCount += masteredCount;

                    html += `
                        <div class="rotation-card">
                            <span class="rotation-status ${statusClass}">${statusLabel}</span>
                            <div style="margin-bottom: 1rem; margin-top: 1rem;">
                                <h3 style="color: var(--primary); font-size: 1.4rem;">${rot.service}</h3>
                            <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">
                                📅 ${rot.start} | 🕒 ${rot.time}
                            </div>
                            <div style="border-top: 1px solid rgba(0,0,0,0.05); padding-top: 1rem;">
                                <p style="font-weight: 700; font-size: 0.85rem; margin-bottom: 0.5rem;">المهارات السريرية:</p>
                                <div class="skills-list">
                                    ${rot.skills.map(skill => `
                                        <span class="skill-tag ${skill.mastered ? 'mastered' : ''}" 
                                              onclick="toggleSkill(${rot.id}, ${skill.id})">
                                            ${skill.mastered ? '✓ ' : '+ '}${skill.name}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                            <button onclick="deleteRotation(${rot.id})" 
                                    style="background: none; border: none; color: var(--danger); font-size: 0.8rem; cursor: pointer; margin-top: 1.5rem;">
                                🗑️ حذف التربص
                            </button>
                        </div>
                    `;
                });

                grid.innerHTML = html || '<p style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-secondary);">لا يوجد تربصات مضافة حالياً. اضغط على زر + للبدء.</p>';

                document.getElementById('totalRotationsDisplay').textContent = rotations.length;
                document.getElementById('completedDaysDisplay').textContent = totalDays;
                document.getElementById('masteredSkillsDisplay').textContent = masteredSkillsCount;
            }

            // Patch showPage to init glossary and rotation tracker
            const originalShowPage = window.showPage || function (id) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                const target = document.getElementById(id);
                if (target) target.classList.add('active');
            };

            window.showPage = function (pageId) {
                originalShowPage(pageId);
                if (pageId === 'med_glossary') {
                    initGlossary();
                }
                if (pageId === 'rotation_tracker') {
                    renderRotations();
                }
            };
        </script>

        <!-- Focus Mode -->
        <script>
            console.log('Focus mode system initialized.');
        </script>

        <!-- Achievements System -->
        <script>
            const achievements = [
                { id: 'first_lesson', title: 'بداية المشوار', desc: 'أكملت أول درس لك', icon: '📖', points: 10 },
                { id: 'calc_master', title: 'خبير الحساب', desc: 'استخدمت الحاسبة الطبية', icon: '⚖️', points: 5 },
                { id: 'focus_king', title: 'ملك التركيز', desc: 'أكملت جلسة تركيز كاملة', icon: '🧘', points: 20 }
            ];

            function updatePoints(amount) {
                let points = parseInt(localStorage.getItem('user_points') || '0');
                points += amount;
                localStorage.setItem('user_points', points);
                const display = document.getElementById('user-points');
                if (display) display.textContent = points;
            }

            function initAchievements() {
                const list = document.getElementById('achievements-list');
                if (!list) return;

                list.innerHTML = achievements.map(ach => {
                    const isUnlocked = localStorage.getItem(`ach_${ach.id}`) === 'unlocked';
                    return `
            <div class="achievement-item" style="display: flex; align-items: center; gap: 15px; padding: 1rem; border-radius: 12px; background: rgba(0,0,0,0.05); margin-bottom: 10px; opacity: ${isUnlocked ? 1 : 0.5}">
                <div style="font-size: 2rem;">${ach.icon}</div>
                <div style="flex: 1;">
                    <div style="font-weight: 700;">${ach.title}</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">${ach.desc}</div>
                </div>
                <div style="font-weight: 800; color: var(--primary);">${ach.points}</div>
            </div>
        `;
                }).join('');

                updatePoints(0); // Sync display
            }

            document.addEventListener('DOMContentLoaded', initAchievements);
        </script>

        <!-- Study Calendar -->
        <script>
            console.log('Calendar system initialized.');
            function toggleMobileMenu() {
                const dropdown = document.getElementById('navDropdown');
                dropdown.classList.toggle('active');
            }

            function closeMobileMenu() {
                const dropdown = document.getElementById('navDropdown');
                dropdown.classList.remove('active');
            }

            // Close menu when clicking outside
            document.addEventListener('click', function (e) {
                const dropdown = document.getElementById('navDropdown');
                if (!dropdown.contains(e.target) && dropdown.classList.contains('active')) {
                    dropdown.classList.remove('active');
                }
            });
        </script>
    </body>

    </html>
    </div>

</html>

</body>
    
  </body>
  
</html>
