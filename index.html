<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedGpa - نبض الطب</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            /* Modern Medical Palette */
            --primary: #3b82f6;
            /* Bright Royal Blue */
            --primary-dark: #2563eb;
            --secondary: #0f172a;
            /* Slate 900 */
            --light: #f8fafc;
            --gray: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;

            /* Accents */
            --accent-1: #8b5cf6;
            /* Violet */
            --accent-2: #ec4899;
            /* Pink */
            --accent-3: #f59e0b;
            /* Amber */
            --accent-4: #10b981;
            /* Emerald */
            --accent-5: #06b6d4;
            /* Cyan */

            /* Glassmorphism Variables */
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --blur-amount: 12px;

            /* Gradients */
            --header-bg: rgba(255, 255, 255, 0.8);
            --gradient-1: linear-gradient(135deg, #60a5fa, #a78bfa);
            --gradient-2: linear-gradient(135deg, #2dd4bf, #3b82f6);

            /* Text */
            --text-primary: #1e293b;
            --text-secondary: #475569;

            /* Backgrounds (Light Mode) */
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --border-subtle: rgba(0, 0, 0, 0.1);
        }

        /* User Profile & Login Styles */
        .user-profile-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .login-btn-google {
            background: white;
            color: #333;
            border: 1px solid rgba(0, 0, 0, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .login-btn-google:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .dark-mode .login-btn-google {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .user-avatar-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            padding: 2px;
            cursor: pointer;
            background: transparent;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .user-avatar-btn img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-avatar-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--primary);
        }

        .profile-dropdown {
            position: absolute;
            top: 120%;
            left: 0;
            background: #000;
            -webkit-backdrop-filter: none;
            backdrop-filter: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 1rem;
            min-width: 200px;
            box-shadow: var(--glass-shadow);
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 1000;
            direction: rtl;
            text-align: right;
        }

        .profile-dropdown.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 0.8rem;
        }

        .dark-mode .profile-header {
            border-bottom-color: rgba(255, 255, 255, 0.1);
        }

        .profile-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .profile-email {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .profile-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0.6rem 0.8rem;
            border-radius: 8px;
            color: var(--text-primary);
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .profile-menu-item:hover {
            background: rgba(var(--primary-rgb), 0.1);
            /* Fallback or define RGB var */
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
        }

        .profile-menu-item.logout {
            color: var(--danger);
        }

        .profile-menu-item.logout:hover {
            background: rgba(239, 68, 68, 0.1);
            color: #ff5252;
        }

        .profile-dropdown .profile-name,
        .profile-dropdown .profile-email,
        .profile-dropdown .profile-menu-item {
            color: #fff !important;
        }

        .profile-dropdown .profile-email {
            opacity: 0.7;
        }

        .dark-mode {
            --primary: #60a5fa;
            --primary-dark: #3b82f6;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;

            /* Dark Glass */
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);

            --header-bg: rgba(15, 23, 42, 0.8);
            --gradient-1: linear-gradient(135deg, #818cf8, #c084fc);
            --border-subtle: rgba(255, 255, 255, 0.1);
        }

        /* --- Custom Themes --- */

        /* Surgeon Theme (Rose/Slate) */
        body.theme-surgeon {
            --primary: #e11d48;
            --primary-dark: #be123b;
            --accent-1: #fb7185;
            --gradient-1: linear-gradient(135deg, #fb7185, #e11d48);
            --reading-progress-bg: linear-gradient(90deg, #fb7185, #e11d48, #9f1239, #be123b);
        }

        /* Pharmacist Theme (Emerald) */
        body.theme-pharmacist {
            --primary: #10b981;
            --primary-dark: #059669;
            --accent-1: #34d399;
            --gradient-1: linear-gradient(135deg, #34d399, #10b981);
            --reading-progress-bg: linear-gradient(90deg, #34d399, #10b981, #065f46, #059669);
        }

        /* Sunset Theme (Amber) */
        body.theme-sunset {
            --primary: #f59e0b;
            --primary-dark: #d97706;
            --accent-1: #fbbf24;
            --gradient-1: linear-gradient(135deg, #fbbf24, #f59e0b);
            --reading-progress-bg: linear-gradient(90deg, #fbbf24, #f59e0b, #92400e, #d97706);
        }

        /* Dentistry Theme (Cyan/Teal) */
        body.theme-dentist {
            --primary: #06b6d4;
            --primary-dark: #0891b2;
            --accent-1: #67e8f9;
            --gradient-1: linear-gradient(135deg, #67e8f9, #06b6d4);
            --reading-progress-bg: linear-gradient(90deg, #67e8f9, #06b6d4, #155e75, #0891b2);
        }

        /* Theme Switcher Styles */
        .theme-switcher {
            position: relative;
            margin-left: 15px;
        }

        .theme-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            transform: scale(1.1);
            background: var(--primary);
            color: white;
        }

        .theme-menu {
            position: absolute;
            top: 50px;
            right: 0;
            background: #000;
            -webkit-backdrop-filter: none;
            backdrop-filter: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 8px;
            min-width: 150px;
            display: none;
            flex-direction: column;
            gap: 4px;
            z-index: 1000;
            box-shadow: var(--glass-shadow);
        }

        .theme-menu.active {
            display: flex;
            animation: slideDown 0.3s ease forwards;
        }

        .theme-option {
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .theme-option:hover {
            transform: translateX(-5px);
        }

        .theme-menu .theme-option {
            color: #fff !important;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        body {
            background-color: #f0f9ff;
            background-image:
                radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
            background-size: 200% 200%;
            color: var(--text-primary);
            line-height: 1.7;
            overflow-x: hidden;
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .dark-mode body {
            background-image:
                radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
        }

        /* Light mode animated mesh gradient override */
        body {
            background:
                radial-gradient(at 40% 20%, hsla(215, 98%, 61%, 0.2) 0px, transparent 50%),
                radial-gradient(at 80% 0%, hsla(189, 100%, 56%, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 50%, hsla(341, 100%, 76%, 0.2) 0px, transparent 50%),
                radial-gradient(at 80% 50%, hsla(269, 100%, 77%, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 100%, hsla(320, 100%, 82%, 0.2) 0px, transparent 50%),
                radial-gradient(at 80% 100%, hsla(205, 100%, 60%, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 0%, hsla(280, 100%, 77%, 0.2) 0px, transparent 50%);
            background-size: 200% 200%;
            animation: meshGradient 20s ease infinite;
        }

        /* Reading Progress Bar */
        #reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: var(--reading-progress-bg, linear-gradient(90deg,
                        #3b82f6,
                        #8b5cf6,
                        #ec4899,
                        #f59e0b));
            background-size: 200% 100%;
            animation: gradientShift 3s ease infinite;
            z-index: 9999;
            transition: width 0.1s ease-out;
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.5);
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Scroll to Top Button */
        #scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transform: translateY(100px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 9998;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #scroll-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #scroll-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.6);
        }

        #scroll-to-top:active {
            transform: translateY(-2px) scale(1.05);
        }

        .dark-mode #scroll-to-top {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
        }

        /* Search Modal */
        #search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.9);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            z-index: 10000;
            align-items: flex-start;
            justify-content: center;
            padding-top: 10vh;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #search-modal.active {
            display: flex;
            opacity: 1;
        }

        .search-container {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        #search-modal.active .search-container {
            transform: translateY(0);
        }

        .dark-mode .search-container {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .search-header h3 {
            color: var(--primary-dark);
            font-size: 1.5rem;
            margin: 0;
        }

        .dark-mode .search-header h3 {
            color: #c4b5fd;
        }

        .search-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            line-height: 1;
        }

        .search-close:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .search-input-wrapper {
            position: relative;
            margin-bottom: 1.5rem;
        }

        #search-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid rgba(99, 102, 241, 0.2);
            border-radius: 16px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
            font-family: 'Tajawal', sans-serif;
        }

        #search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .dark-mode #search-input {
            background: rgba(15, 23, 42, 0.8);
            color: white;
        }

        .search-results {
            max-height: 400px;
            overflow-y: auto;
        }

        .search-result-item {
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            background: rgba(99, 102, 241, 0.05);
        }

        .search-result-item:hover {
            background: rgba(99, 102, 241, 0.15);
            transform: translateX(5px);
        }

        .search-result-title {
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.3rem;
        }

        .dark-mode .search-result-title {
            color: #c4b5fd;
        }

        .search-result-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .search-no-results {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        /* Toast Notifications */
        .toast-notification {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            padding: 1rem 1.2rem;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            min-width: 300px;
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 4px solid #3b82f6;
        }

        .toast-notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .dark-mode .toast-notification {
            background: rgba(30, 41, 59, 0.95);
            color: white;
        }

        .toast-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .toast-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        .toast-success {
            border-left-color: #10b981;
        }

        .toast-error {
            border-left-color: #ef4444;
        }

        .toast-warning {
            border-left-color: #f59e0b;
        }

        .toast-info {
            border-left-color: #3b82f6;
        }

        .toast-motivational {
            border-left-color: #8b5cf6;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
        }

        .dark-mode .toast-motivational {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
        }

        /* Focus Mode */
        #focus-mode-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #focus-mode-overlay.active {
            display: flex;
            opacity: 1;
        }

        .focus-mode-panel {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            color: white;
            max-width: 500px;
        }

        .focus-mode-panel h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pomodoro-timer {
            margin: 2rem 0;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: #f59e0b;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
        }

        .timer-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .timer-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .timer-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .exit-focus-btn {
            margin-top: 2rem;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: none;
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .exit-focus-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }

        /* Achievements Panel */
        #achievements-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.2);
            z-index: 10002;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        #achievements-panel.active {
            right: 0;
        }

        .dark-mode #achievements-panel {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
        }

        .achievements-content {
            padding: 2rem;
        }

        .achievements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .achievements-header h2 {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin: 0;
        }

        .dark-mode .achievements-header h2 {
            color: #fbbf24;
        }

        .close-achievements {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .close-achievements:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .points-display {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .points-circle {
            width: 120px;
            height: 120px;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(251, 191, 36, 0.4);
        }

        .points-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
        }

        .points-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .badge-item {
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .badge-item.unlocked {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
            border-color: #fbbf24;
        }

        .badge-item.locked {
            background: rgba(0, 0, 0, 0.05);
            opacity: 0.5;
        }

        .dark-mode .badge-item.locked {
            background: rgba(255, 255, 255, 0.05);
        }

        .badge-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .badge-item.locked .badge-icon {
            filter: grayscale(100%);
        }

        .badge-name {
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.3rem;
        }

        .dark-mode .badge-name {
            color: #fbbf24;
        }

        .badge-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .progress-section {
            margin-top: 2rem;
        }

        .progress-section h3 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .dark-mode .progress-section h3 {
            color: #c4b5fd;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .dark-mode .progress-bar {
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Study Calendar */
        #calendar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.9);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            z-index: 10003;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #calendar-modal.active {
            display: flex;
            opacity: 1;
        }

        .calendar-container {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            border-radius: 24px;
            padding: 2rem;
            width: 95%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        #calendar-modal.active .calendar-container {
            transform: scale(1);
        }

        .dark-mode .calendar-container {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.98), rgba(15, 23, 42, 0.95));
            color: white;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .calendar-header h2 {
            font-size: 1.5rem;
            color: var(--primary-dark);
        }

        .dark-mode .calendar-header h2 {
            color: #10b981;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day,
        .empty-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .calendar-day {
            background: rgba(99, 102, 241, 0.05);
        }

        .calendar-day:hover {
            background: var(--primary);
            color: white;
        }

        .calendar-day.today {
            border: 2px solid var(--primary);
            color: var(--primary);
            font-weight: 800;
        }

        .calendar-day.has-event {
            background: rgba(16, 185, 129, 0.15);
            position: relative;
        }

        .calendar-day.has-event::after {
            content: '';
            position: absolute;
            bottom: 4px;
            width: 4px;
            height: 4px;
            background: #10b981;
            border-radius: 50%;
        }

        .close-calendar {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .event-editor {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(16, 185, 129, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        #event-input {
            width: 100%;
            padding: 0.8rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin: 1rem 0;
            font-family: inherit;
        }

        .editor-btns {
            display: flex;
            gap: 10px;
        }

        .editor-btns button {
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .cancel-btn {
            background: #eee !important;
            color: #666 !important;
        }

        .dark-mode body {
            background-color: #0f172a;
            background-image:
                radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
            background-size: 200% 200%;
        }

        @keyframes meshGradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        body {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: var(--text-primary);
            line-height: 1.8;
            overflow-x: hidden;
            transition: all 0.3s ease;
            font-size: 17px;
        }

        /* Modern Button Styles */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--accent-5));
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 20px -5px var(--primary);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--accent-5), var(--primary));
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 30px -5px var(--primary);
        }

        .btn:hover::before {
            opacity: 1;
        }

        /* Footer - Premium Glassmorphism */
        footer {
            background: linear-gradient(135deg,
                    rgba(15, 23, 42, 0.98) 0%,
                    rgba(30, 41, 59, 0.95) 100%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            backdrop-filter: blur(20px) saturate(180%);
            color: white;
            padding: 4rem 0 2.5rem;
            text-align: center;
            margin-top: 5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            width: 100%;
            clear: both;
            z-index: 500;
        }

        /* Animated gradient overlay */
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -50%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg,
                    transparent,
                    rgba(99, 102, 241, 0.1),
                    rgba(168, 85, 247, 0.1),
                    rgba(236, 72, 153, 0.1),
                    transparent);
            animation: shimmer 8s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Decorative circles */
        footer::after {
            content: '';
            position: absolute;
            bottom: -100px;
            right: -100px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15), transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        .footer-content {
            position: relative;
            z-index: 2;
        }

        .footer-content p {
            margin: 0.5rem 0;
            font-size: 1rem;
            opacity: 0.9;
        }

        .copyright {
            font-weight: 600;
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles - Premium Floating Glass */
        header {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.95) 0%,
                    rgba(255, 255, 255, 0.85) 100%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow:
                0 8px 32px rgba(31, 38, 135, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            color: var(--text-primary);
            padding: 1rem 2rem;
            position: sticky;
            top: 20px;
            z-index: 1500;
            border-radius: 60px;
            margin: 0 auto 2.5rem;
            max-width: 92%;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: visible;
        }

        /* Gradient border effect */
        header::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 60px;
            padding: 2px;
            background: linear-gradient(135deg,
                    rgba(99, 102, 241, 0.4),
                    rgba(168, 85, 247, 0.4),
                    rgba(236, 72, 153, 0.4));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        header:hover::before {
            opacity: 1;
        }

        /* Dark mode header */
        .dark-mode header {
            background: linear-gradient(135deg,
                    rgba(30, 41, 59, 0.95) 0%,
                    rgba(15, 23, 42, 0.9) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        /* Scroll effect */
        header.scrolled {
            transform: translateY(-5px);
            box-shadow:
                0 12px 40px rgba(31, 38, 135, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        .header-content {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 1rem;
            width: 100%;
        }

        .logo {
            justify-self: start;
            grid-column: 1;
        }

        .nav-dropdown {
            justify-self: center;
            grid-column: 2;
        }

        .tools-container {
            justify-self: end;
            grid-column: 3;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        @media (max-width: 950px) {
            .header-content {
                display: flex;
                justify-content: space-between;
            }

            .nav-dropdown {
                order: 2;
            }

            .logo {
                order: 1;
            }

            .tools-container {
                order: 3;
            }
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
            position: relative;
            z-index: 2;
            color: var(--primary-dark);
            font-family: 'Tajawal', sans-serif;
        }

        .dark-mode .logo {
            color: white;
        }

        .logo img {
            height: 45px;
            width: auto;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-1);
            border-radius: 2px;
            opacity: 0.8;
        }

        /* Dropdown Menu Container */
        .nav-dropdown {
            position: static;
            /* Allows menu to center relative to Header */
            display: inline-block;
        }

        /* Dropdown Menu - Modern Pill Toggle */
        .dropdown-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            padding: 0.6rem 1.8rem;
            border-radius: 50px;
            /* Full pill shape */
            font-weight: 700;
            cursor: pointer;
            font-size: 1rem;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }

        .dropdown-toggle::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50px;
            padding: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.5;
        }

        .dropdown-toggle:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            border-color: transparent;
        }

        /* Floating Island Mega Menu */
        .dropdown-menu {
            position: absolute;
            top: 100%;
            /* Below header */
            left: 50%;
            transform: translateX(-50%) translateY(10px) scale(0.95);
            /* Centered relative to header */
            background: #000 !important;
            -webkit-backdrop-filter: none;
            backdrop-filter: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 32px;
            box-shadow:
                0 20px 50px rgba(0, 0, 0, 0.1),
                0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            min-width: 650px;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            gap: 3rem;
            direction: rtl;
            margin-top: 20px;
        }

        .dark-mode .dropdown-menu {
            background: #000 !important;
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        /* Essential text override for black background */
        .dropdown-menu h4,
        .dropdown-menu .dropdown-links a {
            color: #fff !important;
        }

        .dropdown-menu .dropdown-links a {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .dropdown-menu .dropdown-section-title {
            color: var(--primary) !important;
            border-bottom-color: var(--primary) !important;
        }

        .dropdown-section {
            flex: 1;
        }

        .dropdown-section-title {
            font-size: 0.9rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 1.2rem;
            padding-bottom: 0.6rem;
            border-bottom: 2px solid var(--primary);
            width: fit-content;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dropdown-links {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .clinical-tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .dropdown-links a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.8rem 1.2rem;
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            border-radius: 15px;
            transition: all 0.3s ease;
            font-size: 1rem;
            white-space: nowrap;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid transparent;
        }

        .dropdown-links a:hover {
            background: var(--primary);
            color: white !important;
            transform: translateY(-2px);
            border-color: var(--primary-dark);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .dropdown-links a span.icon {
            font-size: 1.2rem;
            order: -1;
            /* Ensure icon is at the start (right in RTL) */
        }

        .nav-dropdown:hover .dropdown-menu,
        .nav-dropdown.active .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0) scale(1);
        }

        @media (max-width: 950px) {
            .dropdown-menu {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                width: 100vw;
                height: 100vh;
                max-height: 100vh;
                min-width: unset;
                max-width: unset;
                border-radius: 0;
                background: rgba(255, 255, 255, 0.7) !important;
                -webkit-backdrop-filter: blur(20px) saturate(180%);
                backdrop-filter: blur(20px) saturate(180%);
                border: none;
                padding: 6rem 2rem 3rem;
                flex-direction: column;
                gap: 2rem;
                overflow-y: auto;
                transform: translateX(100%);
                opacity: 0;
                visibility: hidden;
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                z-index: 2000;
            }

            .dark-mode .dropdown-menu {
                background: rgba(15, 23, 42, 0.8) !important;
                border: none;
            }

            .nav-dropdown.active .dropdown-menu {
                transform: translateX(0);
                opacity: 1;
                visibility: visible;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            .dropdown-toggle {
                display: none;
            }

            .clinical-tools-grid {
                grid-template-columns: 1fr;
            }

            .menu-close-btn {
                display: none;
                /* We use the burger icon */
            }

            /* Staggered Animations */
            .dropdown-links li {
                opacity: 0;
                transform: translateX(30px);
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .nav-dropdown.active .dropdown-links li {
                opacity: 1;
                transform: translateX(0);
            }

            .nav-dropdown.active .dropdown-links li:nth-child(1) {
                transition-delay: 0.1s;
            }

            .nav-dropdown.active .dropdown-links li:nth-child(2) {
                transition-delay: 0.15s;
            }

            .nav-dropdown.active .dropdown-links li:nth-child(3) {
                transition-delay: 0.2s;
            }

            .nav-dropdown.active .dropdown-links li:nth-child(4) {
                transition-delay: 0.25s;
            }

            .nav-dropdown.active .dropdown-links li:nth-child(5) {
                transition-delay: 0.3s;
            }

            .dropdown-section {
                opacity: 0;
                transform: translateY(20px);
                transition: all 0.5s ease;
                transition-delay: 0.05s;
            }

            .nav-dropdown.active .dropdown-section {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Burger Menu Icon Animation CSS */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 32px;
            height: 22px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 2500;
            position: relative;
        }

        .mobile-menu-toggle span {
            width: 100%;
            height: 3px;
            background: var(--gradient-1);
            border-radius: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }

        .nav-dropdown.active .mobile-menu-toggle span:nth-child(1) {
            transform: translateY(9.5px) rotate(45deg);
        }

        .nav-dropdown.active .mobile-menu-toggle span:nth-child(2) {
            opacity: 0;
            width: 0;
        }

        .nav-dropdown.active .mobile-menu-toggle span:nth-child(3) {
            transform: translateY(-9.5px) rotate(-45deg);
        }

        .dark-mode .mobile-menu-toggle span {
            background: #fff;
        }

        /* Dark Mode Toggle */
        .nav-link-card {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1.5px solid rgba(255, 255, 255, 0.3);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            overflow: hidden;
            position: relative;
            margin-left: 10px;
            z-index: 100;
            /* Ensure button is clickable above decorative elements */
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
            border-radius: 50%;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(20deg) scale(1.1);
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Header Decorative Elements */
        .header-decor {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .decor-circle {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
        }

        .decor-circle:nth-child(1) {
            top: -30px;
            right: -30px;
            width: 60px;
            height: 60px;
        }

        .decor-circle:nth-child(2) {
            bottom: -25px;
            left: -25px;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
        }

        /* Main Content */
        main {
            min-height: calc(100vh - 160px);
            padding: 1.5rem 0 3rem;
        }

        .page {
            display: none;
            animation: fadeInUp 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-header {
            text-align: center;
            margin-bottom: 2.5rem;
            position: relative;
        }

        .page-header::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--gradient-1);
            border-radius: 2px;
            box-shadow: 0 3px 10px rgba(139, 92, 246, 0.25);
        }

        .page-header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1.2rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
            font-weight: 800;
        }

        .dark-mode .page-header h1 {
            color: #c4b5fd;
        }

        .page-header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 500;
            line-height: 1.7;
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 3rem 2rem;
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border-radius: 30px;
            box-shadow: var(--glass-shadow);
            margin-bottom: 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid var(--glass-border);
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -100px;
            right: -100px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -100px;
            left: -100px;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .hero-title {
            font-size: 2.4rem;
            color: var(--primary-dark);
            margin-bottom: 2rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
            font-weight: 800;
        }

        .dark-mode .hero-title {
            color: #c4b5fd;
        }

        .target-audience {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 1.8rem;
            margin: 2.5rem 0;
        }

        .audience-card {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            padding: 1.8rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
            transition: all 0.35s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .dark-mode .audience-card {
            background: linear-gradient(135deg, #334155, #1e293b);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
        }

        .audience-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-1);
        }

        .audience-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.18);
            border-color: var(--primary);
        }

        .dark-mode .audience-card:hover {
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.4);
        }

        .audience-icon {
            font-size: 2.8rem;
            margin-bottom: 1.4rem;
            color: var(--primary);
            transition: transform 0.3s ease;
        }

        .audience-card:hover .audience-icon {
            transform: scale(1.15) rotate(8deg);
        }

        .audience-title {
            font-size: 1.4rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .dark-mode .audience-title {
            color: #c4b5fd;
        }

        .audience-desc {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .special-note {
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
            padding: 2.2rem;
            border-radius: 20px;
            margin-top: 2.5rem;
            border-left: 5px solid var(--warning);
            position: relative;
            text-align: center;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.18);
        }

        .dark-mode .special-note {
            background: linear-gradient(135deg, #37302c, #43382a);
            border-left: 5px solid #d97706;
            box-shadow: 0 8px 20px rgba(217, 119, 6, 0.25);
        }

        .special-note::before {
            content: '✨';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.4rem;
            background: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.18);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-8px);
            }
        }

        .dark-mode .special-note::before {
            background: #1e293b;
            color: #fde047;
        }

        .special-note h3 {
            color: #92400e;
            margin-bottom: 1.4rem;
            font-size: 1.6rem;
            font-weight: 700;
        }

        .dark-mode .special-note h3 {
            color: #fde047;
        }

        .special-note p {
            color: #92400e;
            font-size: 1.25rem;
            font-weight: 700;
            line-height: 1.8;
        }

        .dark-mode .special-note p {
            color: #fde047;
        }

        /* Years Grid */
        .years-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.2rem;
            margin-top: 2rem;
        }

        .year-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--glass-shadow);
            transition: all 0.35s ease;
            position: relative;
            cursor: pointer;
            border: 1px solid var(--glass-border);
        }

        .dark-mode .year-card {
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.35);
            border: 1px solid rgba(67, 56, 202, 0.25);
        }

        .year-card:hover {
            transform: translateY(-12px) rotateX(4deg);
            box-shadow: 0 28px 55px -12px rgba(0, 0, 0, 0.25);
        }

        .dark-mode .year-card:hover {
            box-shadow: 0 28px 55px -12px rgba(0, 0, 0, 0.45);
        }

        .year-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-2), var(--accent-3), var(--accent-4), var(--accent-5), var(--accent-6), var(--accent-7));
            background-size: 500% 500%;
            animation: gradientShift 4s ease infinite;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .year-header {
            padding: 2rem;
            text-align: center;
            background: var(--header-bg);
            color: white;
            position: relative;
        }

        .year-number {
            font-size: 3.8rem;
            font-weight: 900;
            margin-bottom: 0.6rem;
            animation: float 3s ease-in-out infinite;
            text-shadow: 0 5px 12px rgba(0, 0, 0, 0.35);
            letter-spacing: -1.5px;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-12px);
            }
        }

        .year-title {
            font-size: 1.6rem;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);
        }

        .subjects-list {
            list-style: none;
            margin: 1.8rem 0;
            padding: 0 2rem;
        }

        .subjects-list li {
            padding: 0.9rem 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.25s ease;
            cursor: pointer;
            border-radius: 10px;
            margin: 0.3rem 0;
            position: relative;
            overflow: hidden;
        }

        .dark-mode .subjects-list li {
            border-bottom: 1px solid #334155;
        }

        .subjects-list li:last-child {
            border-bottom: none;
        }

        .subjects-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--gradient-1);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.25s ease;
        }

        .subjects-list li:hover::before {
            transform: scaleY(1);
        }

        .subjects-list li:hover {
            color: var(--primary-dark);
            transform: translateX(8px);
            background: #f8fafc;
            padding-left: 1.2rem;
            box-shadow: 0 3px 10px rgba(79, 70, 229, 0.12);
        }

        .dark-mode .subjects-list li:hover {
            color: #c4b5fd;
            background: #334155;
            box-shadow: 0 3px 10px rgba(67, 56, 202, 0.25);
        }

        .subject-icon {
            font-size: 1.3rem;
            color: var(--primary);
            min-width: 25px;
            text-align: center;
        }

        /* Subject Detail Section */
        .subject-detail-section {
            display: none;
            margin-top: 2.5rem;
            padding: 2.2rem;
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border-radius: 30px;
            box-shadow: var(--glass-shadow);
            animation: slideInUp 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .dark-mode .subject-detail-section {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.35);
            border: 1px solid rgba(67, 56, 202, 0.25);
        }

        .subject-detail-section.active {
            display: block;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .subject-header {
            text-align: center;
            margin-bottom: 2.2rem;
            padding-bottom: 1.6rem;
            border-bottom: 3px solid #e2e8f0;
            position: relative;
        }

        .dark-mode .subject-header {
            border-bottom: 3px solid #334155;
        }

        /* ====== Horizontal Subject Card ====== */
        .subject {
            background: linear-gradient(135deg, #ffffff, #f3f6fb);
            border-radius: 20px;
            padding: 18px 22px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }

        .subject::before {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(180deg, #4facfe, #00f2fe);
        }

        .subject:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
        }

        /* ====== Title ====== */
        .subject h2 {
            font-size: 20px;
            color: #1e3c72;
            min-width: 140px;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        /* ====== Lessons Container ====== */
        .subject-lessons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px 16px;
            flex: 1;
        }

        /* ====== Lesson Item ====== */
        .lesson {
            background: #f9fbff;
            padding: 6px 12px;
            border-radius: 20px;
            transition: all 0.2s ease;
        }

        .lesson:hover {
            background: #eef4ff;
            transform: scale(1.05);
        }

        .lesson label {
            cursor: pointer;
            font-size: 14px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Checkbox */
        .lesson input[type="checkbox"] {
            accent-color: #4facfe;
            cursor: pointer;
        }

        /* ====== Progress Area ====== */
        .progress-area {
            min-width: 160px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: #e6ecf5;
            border-radius: 50px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4facfe, #00f2fe, #43e97b);
            border-radius: 50px;
            transition: width 0.4s ease;
        }

        .progress-text {
            font-size: 13px;
            font-weight: bold;
            color: #1e3c72;
        }

        /* ====== Completed Lesson ====== */
        .lesson input[type="checkbox"]:checked+span {
            text-decoration: line-through;
            color: #999;
        }

        /* ====== Responsive ====== */
        @media (max-width: 768px) {
            .subject {
                flex-direction: column;
                align-items: flex-start;
            }

            .progress-area {
                width: 100%;
            }
        }

        .subject-header::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 3px;
            background: var(--gradient-1);
            border-radius: 2px;
        }

        .subject-header h2 {
            font-size: 2.6rem;
            color: var(--primary-dark);
            margin-bottom: 1.2rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 3px 10px rgba(139, 92, 246, 0.15);
            font-weight: 800;
        }

        .dark-mode .subject-header h2 {
            color: #c4b5fd;
        }

        .subject-overview {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2.5rem;
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 16px rgba(79, 70, 229, 0.08);
        }

        .subject-overview::before {
            content: '""';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(79, 70, 229, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .subject-overview h3 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
        }

        .dark-mode .subject-overview h3 {
            color: #c4b5fd;
        }

        .subject-overview h3::before {
            content: '📖';
            font-size: 1.8rem;
        }

        .subject-overview p {
            color: var(--text-secondary);
            line-height: 1.9;
            font-size: 1.1rem;
            position: relative;
            z-index: 1;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
            gap: 2.2rem;
            margin-top: 2rem;
        }

        .content-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border-radius: 24px;
            padding: 2.4rem 1.8rem;
            box-shadow: var(--glass-shadow);
            transition: all 0.35s ease;
            border-top: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .dark-mode .content-card {
            box-shadow: 0 15px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(67, 56, 202, 0.25);
        }

        .content-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-1);
        }

        .content-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.2);
        }

        .dark-mode .content-card:hover {
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.4);
        }

        .content-card h4 {
            color: var(--primary-dark);
            margin-bottom: 1.4rem;
            font-size: 1.6rem;
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
            font-weight: 700;
        }

        .dark-mode .content-card h4 {
            color: #c4b5fd;
        }

        .content-card h4::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--gradient-1);
            border-radius: 2px;
        }

        .content-card ul {
            list-style: none;
        }

        .content-card li {
            padding: 0.8rem 0;
            border-bottom: 1px solid #f1f5f9;
            color: var(--text-secondary);
            font-size: 1rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .dark-mode .content-card li {
            border-bottom: 1px solid #334155;
        }

        .content-card li:last-child {
            border-bottom: none;
        }

        .content-card li::before {
            content: '✓';
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
            min-width: 22px;
        }

        .content-card li:hover {
            color: var(--primary-dark);
            transform: translateX(6px);
        }

        .dark-mode .content-card li:hover {
            color: #c4b5fd;
        }

        /* Lessons Card Specific Styling */
        .lesson-item {
            background: #f8fafc;
            padding: 1.2rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary);
            transition: all 0.25s ease;
            box-shadow: 0 3px 10px rgba(79, 70, 229, 0.06);
        }

        .dark-mode .lesson-item {
            background: #334155;
            box-shadow: 0 3px 10px rgba(67, 56, 202, 0.18);
        }

        .lesson-item:hover {
            background: #f1f5f9;
            transform: translateX(4px);
            box-shadow: 0 5px 14px rgba(0, 0, 0, 0.12);
        }

        .dark-mode .lesson-item:hover {
            background: #475569;
            box-shadow: 0 5px 14px rgba(0, 0, 0, 0.25);
        }

        .lesson-title {
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 0.6rem;
            font-size: 1.1rem;
        }

        .dark-mode .lesson-title {
            color: #c4b5fd;
        }

        .lesson-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .lesson-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            padding: 0.4rem 0.8rem;
            border-radius: 10px;
            background: rgba(79, 70, 229, 0.1);
        }

        .lesson-link:hover {
            color: var(--primary-dark);
            text-decoration: underline;
            background: rgba(79, 70, 229, 0.2);
            transform: translateY(-2px);
        }

        .dark-mode .lesson-link:hover {
            color: #c4b5fd;
        }

        .difficulty {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 0.35rem 0.8rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .difficulty.easy {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
        }

        .dark-mode .difficulty.easy {
            background: linear-gradient(135deg, #166534, #15803d);
            color: #bbf7d0;
        }

        .difficulty.medium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
        }

        .dark-mode .difficulty.medium {
            background: linear-gradient(135deg, #92400e, #b45309);
            color: #fde68a;
        }

        .difficulty.hard {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: #991b1b;
        }

        .dark-mode .difficulty.hard {
            background: linear-gradient(135deg, #991b1b, #dc2626);
            color: #fecaca;
        }

        /* Videos Card Specific Styling */
        .video-item {
            background: #f0f9ff;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.8rem;
            border-left: 3px solid var(--accent-5);
            transition: all 0.25s ease;
            box-shadow: 0 3px 10px rgba(6, 182, 212, 0.08);
        }

        .dark-mode .video-item {
            background: #334155;
            box-shadow: 0 3px 10px rgba(8, 145, 178, 0.2);
        }

        .video-item:hover {
            background: #e0f2fe;
            transform: translateX(2px);
            box-shadow: 0 5px 14px rgba(0, 0, 0, 0.15);
        }

        .dark-mode .video-item:hover {
            background: #475569;
            box-shadow: 0 5px 14px rgba(0, 0, 0, 0.3);
        }

        .video-link {
            color: var(--accent-5);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            padding: 0.4rem 0.8rem;
            border-radius: 10px;
            background: rgba(6, 182, 212, 0.1);
        }

        .video-link:hover {
            color: var(--primary-dark);
            text-decoration: underline;
            background: rgba(6, 182, 212, 0.2);
            transform: translateY(-2px);
        }

        .dark-mode .video-link:hover {
            color: #c4b5fd;
        }

        /* Summaries Card Specific Styling */
        #summariesCard {
            border-top: 5px solid var(--accent-3);
        }

        .summaries-toggle .semester-btn.active {
            background: var(--accent-3);
            border-color: var(--accent-3);
            box-shadow: 0 6px 16px rgba(245, 158, 11, 0.25);
        }

        .summaries-toggle .semester-btn:hover:not(.active) {
            color: var(--accent-3);
            border-color: var(--accent-3);
        }

        .summary-item {
            background: #fffbeb;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.8rem;
            border-left: 3px solid var(--accent-3);
            transition: all 0.25s ease;
            box-shadow: 0 3px 10px rgba(245, 158, 11, 0.08);
        }

        .dark-mode .summary-item {
            background: rgba(245, 158, 11, 0.1);
            box-shadow: 0 3px 10px rgba(146, 64, 14, 0.2);
        }

        .summary-item:hover {
            background: #fef3c7;
            transform: translateX(2px);
            box-shadow: 0 5px 14px rgba(245, 158, 11, 0.15);
        }

        .summary-link {
            color: var(--accent-3);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            padding: 0.4rem 0.8rem;
            border-radius: 10px;
            background: rgba(245, 158, 11, 0.1);
        }

        .summary-link:hover {
            color: #92400e;
            text-decoration: underline;
            background: rgba(245, 158, 11, 0.2);
            transform: translateY(-2px);
        }

        .dark-mode .summary-link:hover {
            color: #fbbf24;
        }


        /* Semester Toggle Buttons */
        .semester-toggle {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.6rem;
            flex-wrap: wrap;
        }

        .semester-btn {
            background: var(--glass-bg);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 0.7rem 1.6rem;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.25s ease;
            flex: 1;
            min-width: 120px;
            text-align: center;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .semester-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 6px 16px rgba(79, 70, 229, 0.25);
        }

        .semester-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 6px 16px rgba(79, 70, 229, 0.25);
        }

        .semester-content {
            display: none;
        }

        .semester-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .empty-content {
            text-align: center;
            color: var(--danger);
            font-weight: 700;
            padding: 2.2rem 1rem;
            font-size: 1.25rem;
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border-radius: 16px;
            border: 2.5px dashed var(--danger);
            animation: pulseRed 2s infinite;
            box-shadow: 0 6px 16px rgba(239, 68, 68, 0.18);
        }

        .dark-mode .empty-content {
            background: linear-gradient(135deg, #7f1d1d, #991b1b);
            color: #fecaca;
            border: 2.5px dashed #fecaca;
            box-shadow: 0 6px 16px rgba(153, 27, 27, 0.35);
        }

        @keyframes pulseRed {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        .empty-content::before {
            content: '⚠️';
            font-size: 2.2rem;
            display: block;
            margin-bottom: 1rem;
        }


        /* Footer - Smaller & More Attractive */
        footer {
            background: linear-gradient(120deg, #1e293b, #0f172a, #1e293b);
            color: white;
            padding: 2rem 0 1.5rem;
            text-align: center;
            margin-top: 2.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            -webkit-backdrop-filter: none;
            backdrop-filter: none;
            background: radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 30%),
                radial-gradient(circle at bottom left, rgba(236, 72, 153, 0.15), transparent 30%);
            z-index: 0;
        }

        .footer-content {
            max-width: 650px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .footer-content p {
            margin-bottom: 1rem;
            opacity: 0.85;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .copyright {
            font-weight: 600;
            letter-spacing: 0.5px;
            opacity: 0.9;
        }

        /* Study Map Custom Styles */
        .study-map-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .study-tip-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .dark-mode .study-tip-card {
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
        }

        .study-tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .dark-mode .study-tip-card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .study-tip-card h3 {
            color: var(--primary-dark);
            margin-bottom: 1.2rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dark-mode .study-tip-card h3 {
            color: #c4b5fd;
        }

        .study-tip-card h3::before {
            font-size: 1.6rem;
        }

        .study-tip-card p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 1.2rem;
        }

        .study-tip-card ul {
            padding-right: 1.2rem;
        }

        .study-tip-card li {
            margin-bottom: 0.6rem;
            color: var(--text-secondary);
            position: relative;
            padding-right: 1.2rem;
        }

        .study-tip-card li::before {
            content: '•';
            color: var(--primary);
            position: absolute;
            right: 0;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .resources-section {
            margin-top: 3rem;
        }

        .resources-section h2 {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: var(--primary-dark);
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2.5rem;
        }

        .resource-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: var(--glass-shadow);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.2rem;
            cursor: pointer;
        }

        .resource-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-1);
            opacity: 0.7;
        }

        .resource-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary);
        }

        .resource-icon {
            font-size: 3.2rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
            transition: transform 0.3s ease;
        }

        .resource-card:hover .resource-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .resource-card h4 {
            color: var(--primary-dark);
            margin: 0;
            font-size: 1.5rem;
            font-weight: 800;
        }

        .dark-mode .resource-card h4 {
            color: #c4b5fd;
        }

        .resource-card p {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.7;
            margin: 0;
        }

        .resource-tag {
            font-size: 0.75rem;
            font-weight: 700;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        /* AI Toolkit Specific */
        .ai-toolkit-section {
            margin-top: 5rem;
            padding: 4rem 2rem;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(6, 182, 212, 0.05));
            border-radius: 40px;
            border: 1px solid rgba(59, 130, 246, 0.1);
        }

        .ai-card {
            border-color: rgba(6, 182, 212, 0.3);
            background: rgba(255, 255, 255, 0.4);
        }

        .dark-mode .ai-card {
            background: rgba(15, 23, 42, 0.4);
        }

        .ai-card .resource-icon {
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .ai-card .resource-tag {
            background: rgba(6, 182, 212, 0.1);
            color: #0891b2;
        }

        /* About Us Page Specific */
        .about-section {
            margin-top: 2.5rem;
        }

        .about-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .dark-mode .about-card {
            background: #1e293b;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
        }

        .about-card h2 {
            color: var(--primary-dark);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dark-mode .about-card h2 {
            color: #c4b5fd;
        }

        .about-card h2::before {
            font-size: 1.8rem;
        }

        .about-card p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .about-card ul {
            padding-right: 1.5rem;
            margin-top: 1rem;
        }

        .about-card li {
            margin-bottom: 0.8rem;
            color: var(--text-secondary);
            position: relative;
            padding-right: 1.5rem;
        }

        .about-card li::before {
            content: '✓';
            color: var(--primary);
            position: absolute;
            right: 0;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .not-for {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            padding: 1.5rem;
            border-radius: 16px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--danger);
        }

        .dark-mode .not-for {
            background: linear-gradient(135deg, #7f1d1d, #991b1b);
            color: #fecaca;
            border-left: 4px solid #fecaca;
        }

        .not-for h3 {
            color: var(--danger);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dark-mode .not-for h3 {
            color: #fecaca;
        }

        .not-for h3::before {
            content: '❌';
            font-size: 1.6rem;
        }

        .transparency-card {
            background: linear-gradient(135deg, #e0f2fe, #bae6fd);
            border-left: 4px solid var(--accent-5);
        }

        .dark-mode .transparency-card {
            background: linear-gradient(135deg, #0c4a6e, #0ea5e9);
            color: #f0f9ff;
        }

        .transparency-card h2::before {
            content: '⚠️';
        }

        .human-touch {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-left: 4px solid var(--success);
            text-align: center;
            padding: 2rem;
            border-radius: 20px;
        }

        .dark-mode .human-touch {
            background: linear-gradient(135deg, #166534, #15803d);
            color: #dcfce7;
        }

        .human-touch p {
            font-style: italic;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .interaction-section {
            text-align: center;
            margin-top: 3rem;
            padding: 2.5rem;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.1);
            border: 1px solid rgba(79, 70, 229, 0.1);
        }

        .interaction-section h3 {
            font-size: 1.8rem;
            margin-bottom: 1.2rem;
            color: var(--primary-dark);
        }

        .interaction-section p {
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 1.8rem;
            line-height: 1.7;
        }

        .interaction-btn {
            background: var(--gradient-1);
            color: white;
            padding: 0.9rem 2.4rem;
            border-radius: 16px;
            text-decoration: none;
            font-weight: 800;
            font-size: 1.2rem;
            transition: all 0.35s ease;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.35);
            display: inline-block;
        }

        .interaction-btn:hover {
            transform: translateY(-4px) scale(1.04);
            box-shadow: 0 10px 28px rgba(139, 92, 246, 0.5);
            background: var(--gradient-2);
        }

        .contact-info {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            margin-top: 2rem;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.1);
            border: 1px solid rgba(79, 70, 229, 0.1);
            text-align: center;
        }

        .contact-info h3 {
            color: var(--primary-dark);
            margin-bottom: 1.5rem;
            font-size: 1.6rem;
        }

        .contact-info p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .contact-email {
            color: var(--primary);
            font-weight: 700;
            font-size: 1.2rem;
            text-decoration: none;
        }

        .contact-email:hover {
            text-decoration: underline;
        }

        /* Welcome Modal */
        #welcomeModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(79, 70, 229, 0.2);
        }

        .modal-content h2 {
            font-size: 2.2rem;
            color: var(--primary-dark);
            margin-bottom: 1.2rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .modal-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .close-btn {
            background: var(--gradient-1);
            color: white;
            padding: 0.7rem 1.8rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
        }

        .close-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Responsive Design - Professional Refinements */
        @media (max-width: 992px) {

            .target-audience,
            .years-grid,
            .study-map-section {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }

            .page-header h1 {
                font-size: 2.3rem;
            }

            .year-number {
                font-size: 3.3rem;
            }

            .subject-header h2 {
                font-size: 2.1rem;
            }

            .header-content {
                padding: 0.5rem 1rem;
                gap: 0.8rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .logo img {
                height: 35px;
            }

            .content-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .content-card {
                padding: 1.8rem 1.2rem;
            }

            .search-container {
                width: 95%;
                padding: 1.2rem;
                margin-top: 5vh;
            }

            #search-input {
                padding: 1rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 580px) {
            .header-content {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 12px;
            }

            .logo {
                order: -1;
                width: 100%;
                justify-content: center;
                margin-bottom: 5px;
            }

            header {
                top: 10px;
                border-radius: 30px;
                padding: 0.8rem 1rem;
            }

            .dropdown-toggle {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }

            .theme-toggle {
                width: 36px;
                height: 36px;
            }

            .years-grid {
                grid-template-columns: 1fr;
            }

            .search-overlay {
                padding-top: 5vh;
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
            }

            .search-result-item {
                padding: 1rem;
                gap: 10px;
            }

            .search-result-icon {
                width: 35px;
                height: 35px;
                font-size: 1.2rem;
            }

            .search-result-title {
                font-size: 1rem;
            }

            .search-result-desc {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 1.7rem;
            }

            .page-header h1 {
                font-size: 1.9rem;
            }

            .page-header p {
                font-size: 1rem;
            }

            .audience-card,
            .about-card,
            .study-tip-card {
                padding: 1.5rem 1.2rem;
            }

            .btn {
                width: 100%;
                text-align: center;
            }

            .interaction-section,
            .contact-info {
                padding: 1.8rem 1.2rem;
            }

            /* Compact Header for tiny screens */
            .header-content {
                gap: 8px;
            }

            .dropdown-toggle span {
                display: none;
            }

            /* Optional: Hide text in menu btn if needed */

            .modal-content {
                padding: 1.8rem 1.2rem;
                margin: 15px;
            }

            .modal-content h2 {
                font-size: 1.6rem;
            }

            .empty-page {
                padding: 3rem 1.5rem;
            }

            .empty-page h2 {
                font-size: 1.8rem;
            }
        }

        /* Scroll Animation Classes */
        .hidden-el {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
        }

        .show-el {
            opacity: 1;
            transform: translateY(0);
        }

        /* Search Navigation Highlighting */
        @keyframes pulse-highlight {
            0% {
                background-color: var(--primary);
                color: white;
                transform: scale(1.02);
                box-shadow: 0 0 20px var(--primary);
            }

            50% {
                background-color: var(--primary);
                color: white;
                transform: scale(1.02);
                box-shadow: 0 0 30px var(--primary);
            }

            100% {
                background-color: transparent;
                color: inherit;
                transform: scale(1);
                box-shadow: none;
            }
        }

        .highlight-target {
            animation: pulse-highlight 2s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
            border-radius: 8px;
            z-index: 10;
            position: relative;
        }

        /* --- Mental Health Topics Styles --- */
        .mh-topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .mh-topic-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-align: right;
        }

        .mh-topic-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--glass-shadow);
            border-color: var(--primary);
        }

        .mh-topic-card h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mh-topic-card.quran-theme {
            border: 1px solid #c5a059;
            background: linear-gradient(145deg, rgba(20, 20, 40, 0.9), rgba(40, 40, 80, 0.8));
        }

        .mh-topic-card.quran-theme h3 {
            color: #ffd700;
        }

        .mh-topic-card.duas-theme {
            border: 2px solid #6366f1;
            background: linear-gradient(145deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.15);
            animation: pulse-glow-soft 3s infinite alternate;
        }

        .mh-topic-card.duas-theme:hover {
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.4);
            background: linear-gradient(145deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.2));
            transform: translateY(-10px) scale(1.02);
        }

        .mh-topic-card.duas-theme h3 {
            background: linear-gradient(to left, #6366f1, #a855f7);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }

        @keyframes pulse-glow-soft {
            0% {
                box-shadow: 0 0 10px rgba(99, 102, 241, 0.1);
            }

            100% {
                box-shadow: 0 0 25px rgba(168, 85, 247, 0.2);
            }
        }

        .mh-detail-card.quran-verse {
            border-right: 4px solid #ffd700;
            text-align: center;
            font-size: 1.4rem;
            font-family: 'Amiri', serif;
            line-height: 2;
        }

        /* --- Detail View Styles --- */
        #mh-topic-detail {
            animation: fadeInScale 0.4s ease-out;
        }

        .mh-detail-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent-1) 100%);
            color: white;
            padding: 4rem 2rem;
            border-radius: 24px;
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .mh-detail-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .mh-detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .mh-detail-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--glass-shadow);
            transition: all 0.3s ease;
        }

        .mh-detail-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .mh-detail-card h4 {
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 0.8rem;
        }

        .mh-back-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-weight: 700;
        }

        .mh-back-btn:hover {
            background: var(--primary);
            color: white;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.98);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Library Styles */
        .library-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-right: 4px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.02);
        }

        .dark-mode .library-card {
            background: var(--bg-secondary);
        }

        /* Routine Tracker */
        .routine-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            margin-bottom: 0.8rem;
        }

        .routine-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .streak-count {
            font-weight: 900;
            font-size: 1.5rem;
            color: #f59e0b;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Interactive Mind Map Styles */
        .mind-map-container {
            width: 100%;
            max-width: 1000px;
            margin: 2rem auto;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2rem;
            box-shadow: var(--glass-shadow);
            overflow: visible;
            position: relative;
        }

        .mind-map-svg {
            width: 100%;
            height: auto;
            display: block;
        }

        .map-node {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .map-node circle {
            fill: var(--primary);
            stroke: white;
            stroke-width: 3;
            transition: all 0.3s ease;
        }

        .map-node:hover circle {
            fill: var(--accent-1);
            r: 45;
            /* Center node */
            filter: drop-shadow(0 0 15px var(--primary));
        }

        .map-node.sub-node:hover circle {
            r: 35;
        }

        .map-node text {
            fill: var(--text-primary);
            font-weight: 800;
            font-size: 14px;
            pointer-events: none;
            text-anchor: middle;
            dominant-baseline: middle;
        }

        .map-connection {
            stroke: var(--primary);
            stroke-width: 2;
            stroke-dasharray: 5, 5;
            opacity: 0.4;
            transition: all 0.3s ease;
        }

        .map-node:hover~.map-connection,
        .map-connection.active {
            stroke: var(--accent-1);
            stroke-width: 3;
            opacity: 1;
            stroke-dasharray: none;
        }

        .node-icon {
            font-size: 20px;
            pointer-events: none;
        }

        /* --- Med-Glossary Styles --- */
        .glossary-search-container {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            box-shadow: var(--glass-shadow);
            text-align: center;
        }

        .glossary-search-wrapper {
            position: relative;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .glossary-search-input {
            width: 100%;
            padding: 1.2rem 3.5rem 1.2rem 1.5rem;
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid var(--glass-border);
            border-radius: 16px;
            font-size: 1.2rem;
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
            color: var(--text-primary);
        }

        .dark-mode .glossary-search-input {
            background: rgba(30, 41, 59, 0.7);
        }

        .glossary-search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
            outline: none;
            background: white;
        }

        .dark-mode .glossary-search-input:focus {
            background: #1e293b;
        }

        .glossary-search-icon {
            position: absolute;
            right: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary);
        }

        .alphabet-filter {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .letter-btn {
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.2s ease;
            color: var(--text-secondary);
        }

        .letter-btn:hover,
        .letter-btn.active {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .glossary-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            text-align: right;
            border-right: 4px solid var(--primary);
        }

        .glossary-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--glass-shadow);
            border-color: var(--primary);
        }

        .glossary-term {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            font-family: 'Inter', sans-serif;
        }

        .dark-mode .glossary-term {
            color: #c4b5fd;
        }

        .glossary-full {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-style: italic;
            display: block;
        }

        .glossary-meaning {
            font-size: 1.1rem;
            color: var(--text-primary);
            line-height: 1.6;
            border-top: 1px solid var(--glass-border);
            padding-top: 1rem;
        }

        .glossary-category {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .empty-glossary {
            text-align: center;
            padding: 4rem;
            color: var(--text-secondary);
        }

        .empty-glossary i {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
            opacity: 0.3;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
        }

        /* Win Modal */
        #win-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            z-index: 10005;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #win-modal.active {
            display: flex;
            opacity: 1;
        }

        .win-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
            padding: 3rem;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 25px 50px -12px rgba(251, 191, 36, 0.5);
            transform: scale(0.8);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(251, 191, 36, 0.3);
        }

        #win-modal.active .win-content {
            transform: scale(1);
        }

        .win-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            animation: bounce 2s infinite;
            display: block;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-30px);
            }

            60% {
                transform: translateY(-15px);
            }
        }

        .win-title {
            font-size: 2.2rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #f59e0b, #d97706);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }

        .win-message {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            line-height: 1.6;
        }

        .win-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
            transition: all 0.3s ease;
            font-weight: 700;
        }

        .win-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(245, 158, 11, 0.6);
        }

        /* Particles/Confetti Effect (Simple) */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100%) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* --- Rotation Tracker Styles --- */
        .tracker-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .rotation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }

        .rotation-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.8rem;
            position: relative;
            overflow: hidden;
            border-left: 5px solid var(--primary);
        }

        .progress-container {
            height: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            transition: width 0.5s ease;
        }

        .skill-tag {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .skill-tag.mastered {
            background: var(--success);
            color: white;
        }

        .add-rotation-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s;
        }

        .tracker-form {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2.5rem;
            box-shadow: var(--glass-shadow);
        }

        .tracker-form h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.8);
        }

        .rotation-status {
            position: absolute;
            top: 1rem;
            left: 1rem;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 20px;
        }

        .mobile-menu-toggle {
            display: none;
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        /* --- Lab Values Styles --- */
        .lab-category-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent-1) 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 15px;
            margin: 2.5rem 0 1.5rem;
            display: inline-block;
            font-size: 1.2rem;
            font-weight: 800;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .lab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .lab-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            border-top: 4px solid var(--primary);
        }

        /* Added during refactor */
        .mh-detail-view-container {
            display: none;
        }

        .mh-support-msg {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            font-size: 1.2rem;
            text-align: center;
        }

        .mh-support-title {
            margin-bottom: 1rem;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .calculator-container {
            display: none;
            text-align: right;
        }

        .calculator-header-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .calculator-input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .calculator-input {
            width: 100%;
            padding: 0.8rem;
            border-radius: 12px;
            border: 2px solid rgba(99, 102, 241, 0.2);
            font-family: inherit;
            font-weight: 700;
            text-align: center;
        }

        .btn-calc-action {
            font-size: 1.2rem;
            padding: 1rem 3rem;
        }

        .btn-calc-clear {
            font-size: 1.2rem;
            padding: 1rem 2rem;
            background: var(--gray);
            margin-right: 10px;
        }

        .achievements-card-body {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .flex-between-vcentered {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .contribution-empty-state {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-weight: 700;
        }

        .empty-state-subtext {
            color: var(--gray);
        }

        /* Expandable Search Styles */
        .glossary-search-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: white;
            border-radius: 30px;
            padding: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            width: 50px;
            overflow: hidden;
            cursor: pointer;
        }

        .glossary-search-wrapper.active {
            width: 100%;
            padding: 0.8rem 1.2rem;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
            cursor: default;
        }

        .glossary-search-icon {
            font-size: 1.2rem;
            min-width: 30px;
            text-align: center;
            cursor: pointer;
        }

        .glossary-search-input {
            border: none;
            background: transparent;
            outline: none;
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
            color: var(--text-primary);
            width: 0;
            opacity: 0;
            padding: 0;
            transition: all 0.3s ease;
        }

        .glossary-search-wrapper.active .glossary-search-input {
            width: 100%;
            opacity: 1;
            padding-right: 10px;
        }

        /* Pathology Atlas Styles - Premium Redesign */
        .pathology-filters-wrapper {
            display: flex;
            overflow-x: auto;
            gap: 0.8rem;
            padding: 0.5rem 1.5rem 1.5rem;
            margin-bottom: 2rem;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
            -webkit-overflow-scrolling: touch;
        }

        .pathology-filters-wrapper::-webkit-scrollbar {
            height: 4px;
        }

        .pathology-filters-wrapper::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .pathology-filters .filter-btn {
            padding: 0.7rem 1.5rem;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Tajawal', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .filter-btn:hover {
            transform: translateY(-3px);
            background: var(--bg-hover);
            border-color: var(--primary);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .filter-btn.active {
            background: var(--primary) !important;
            color: white !important;
            border-color: var(--primary) !important;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3) !important;
            transform: translateY(-2px);
        }

        .dark-mode .pathology-filters .filter-btn {
            background: rgba(30, 41, 59, 0.7);
        }

        .dark-mode .pathology-filters .filter-btn.active {
            background: var(--primary) !important;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.5) !important;
        }

        .pathology-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 1px solid var(--border-subtle);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 150px;
        }

        .pathology-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }

        .pathology-info {
            text-align: center;
        }

        .pathology-category {
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.3rem;
        }

        .pathology-title-ar {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.2rem;
        }

        .pathology-title-fr {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Modal Styles */
        .pathology-modal-layout {
            display: block;
            padding: 1rem;
        }

        .pathology-modal-content {
            padding: 1.5rem;
        }

        .pathology-modal-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .pathology-detail-title {
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-subtle);
            padding-bottom: 1rem;
        }

        .pathology-findings-list {
            list-style: none;
            padding: 0;
        }

        .pathology-findings-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: flex-start;
        }

        .pathology-findings-list li::before {
            content: "🔬";
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .pathology-modal-layout {
                grid-template-columns: 1fr;
            }

            .pathology-modal-img {
                min-height: 250px;
            }
        }

        /* Dark Mode Styles for Pathology Atlas */
        .dark-mode .pathology-card {
            background: var(--bg-secondary) !important;
            border: 1px solid var(--border-subtle) !important;
        }

        .dark-mode .pathology-card:hover {
            background: rgba(255, 255, 255, 0.15) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3) !important;
        }

        .dark-mode .pathology-info {
            color: var(--text-primary) !important;
        }

        .dark-mode .pathology-title-ar {
            color: white !important;
        }

        .dark-mode .pathology-title-fr {
            color: rgba(255, 255, 255, 0.7) !important;
        }

        .dark-mode .pathology-category {
            color: var(--primary) !important;
        }

        .dark-mode .pathology-filters .filter-btn {
            background: var(--bg-secondary) !important;
            border-color: var(--border-subtle) !important;
            color: var(--text-primary) !important;
        }

        .dark-mode .pathology-filters .filter-btn.active,
        .dark-mode .pathology-filters .filter-btn:hover {
            background: var(--primary) !important;
            color: white !important;
            border-color: var(--primary) !important;
        }

        .add-case-btn {
            background: var(--gradient-1);
            color: white;
            padding: 0.8rem 1.8rem;
            border-radius: 12px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            margin: 0 auto 1.5rem;
        }

        .add-case-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .pathology-form-group {
            margin-bottom: 1.5rem;
            text-align: right;
        }

        .pathology-form-group label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: flex-end;
        }

        .pathology-form-group input,
        .pathology-form-group select,
        .pathology-form-group textarea {
            width: 100%;
            padding: 1rem 1.2rem;
            border-radius: 16px;
            border: 2px solid var(--glass-border);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
        }

        .pathology-form-group input:focus,
        .pathology-form-group select:focus,
        .pathology-form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
            background: white;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .dark-mode .pathology-form-group input,
        .dark-mode .pathology-form-group select,
        .dark-mode .pathology-form-group textarea {
            background: rgba(15, 23, 42, 0.6);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .dark-mode .pathology-form-group input:focus {
            background: rgba(15, 23, 42, 0.8);
        }

        .form-section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 2rem 0 1.2rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px dashed var(--glass-border);
            color: var(--text-primary);
            font-weight: 800;
        }

        .ar-section {
            border-right: 4px solid var(--primary);
            padding-right: 1.5rem;
        }

        .fr-section {
            border-left: 4px solid var(--accent-1);
            padding-left: 1.5rem;
            text-align: left;
        }

        .fr-section .pathology-form-group {
            text-align: left;
        }

        .fr-section .pathology-form-group label {
            justify-content: flex-start;
        }

        .dynamic-list-item {
            display: flex;
            gap: 10px;
            margin-bottom: 0.5rem;
        }

        .delete-case-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            color: var(--danger);
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.6;
            transition: opacity 0.3s;
            z-index: 5;
            background: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .delete-case-icon:hover {
            opacity: 1;
        }

        .dark-mode .pathology-modal-content {
            background: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
        }

        .dark-mode .glossary-search-wrapper {
            background: var(--bg-secondary) !important;
            border-color: var(--border-subtle) !important;
        }

        .dark-mode .glossary-search-input {
            background: transparent !important;
            color: white !important;
        }

        .dark-mode .glossary-search-input::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
        }

        .dark-mode .pathology-img-container {
            background: rgba(0, 0, 0, 0.3) !important;
        }

        /* Page Header Dark Mode */
        .dark-mode #pathology_atlas .page-header h1 {
            color: white !important;
        }

        .dark-mode #pathology_atlas .page-header p {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        /* Empty State Dark Mode */
        .dark-mode .empty-glossary {
            color: white !important;
        }

        .dark-mode .empty-glossary p {
            color: rgba(255, 255, 255, 0.7) !important;
        }

        .lab-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--glass-shadow);
        }

        .lab-name {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .lab-range {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0.8rem 0;
        }

        .lab-unit {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .lab-note {
            font-size: 0.9rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--glass-border);
            padding-top: 0.8rem;
            margin-top: 0.8rem;
            font-style: italic;
        }

        /* --- Professional Mobile Responsiveness --- */
        @media (max-width: 768px) {
            header {
                max-width: 96% !important;
                top: 10px !important;
                padding: 0.8rem 1.2rem !important;
                border-radius: 20px !important;
                margin-bottom: 1.5rem !important;
            }

            header::before {
                border-radius: 20px;
            }

            .logo {
                font-size: 1.4rem !important;
            }

            .logo img {
                height: 35px;
            }

            .mobile-menu-toggle {
                display: flex !important;
            }

            .dropdown-toggle {
                display: none !important;
            }

            .dropdown-menu {
                position: fixed !important;
                top: 0 !important;
                right: -100% !important;
                width: 280px !important;
                height: 100vh !important;
                background: var(--glass-bg) !important;
                -webkit-backdrop-filter: blur(25px) !important;
                backdrop-filter: blur(25px) !important;
                box-shadow: -10px 0 30px rgba(0, 0, 0, 0.2) !important;
                display: flex !important;
                flex-direction: column !important;
                padding: 2rem 1rem !important;
                transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
                border-radius: 0 !important;
                border: none !important;
                border-left: 1px solid var(--glass-border) !important;
                visibility: visible !important;
                opacity: 1 !important;
                transform: none !important;
                z-index: 2000 !important;
            }

            .nav-dropdown.active .dropdown-menu {
                right: 0 !important;
            }

            .dropdown-menu li {
                width: 100% !important;
            }

            .dropdown-menu a {
                font-size: 1.1rem !important;
                padding: 1rem !important;
                border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
            }

            .dark-mode .dropdown-menu a {
                border-bottom-color: rgba(255, 255, 255, 0.05) !important;
            }

            .page-header h1 {
                font-size: 1.8rem !important;
            }

            .page-header p {
                font-size: 1rem !important;
            }

            .hero-title {
                font-size: 1.6rem !important;
            }

            .years-grid,
            .target-audience,
            .mh-topics-grid,
            .resource-grid,
            .glossary-grid,
            .rotation-grid,
            .study-map-section {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }

            .tracker-dashboard {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.8rem !important;
            }

            .tracker-dashboard .stat-card:last-child {
                grid-column: span 2 !important;
            }

            .year-card {
                margin-bottom: 1.5rem !important;
            }

            .container {
                padding: 0 15px !important;
            }

            #scroll-to-top {
                bottom: 20px !important;
                right: 20px !important;
                width: 45px !important;
                height: 45px !important;
            }

            .theme-toggle {
                margin-right: 0.5rem !important;
            }

            .menu-close-btn {
                display: block !important;
                align-self: flex-start !important;
                margin-bottom: 2rem !important;
                background: none !important;
                border: none !important;
                font-size: 1.5rem !important;
                color: var(--text-primary) !important;
                cursor: pointer !important;
            }
        }

        @media (min-width: 769px) {
            .menu-close-btn {
                display: none;
            }
        }

        /* Students' Section Specific Styles */
        .students-hero {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 30px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            border: 1px solid var(--glass-border);
        }

        .contribution-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2.5rem;
            flex-wrap: wrap;
        }

        .filter-chip {
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .filter-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .contribution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .contribution-card {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(var(--blur-amount));
            backdrop-filter: blur(var(--blur-amount));
            border-radius: 24px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            transition: all 0.35s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contribution-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--glass-shadow);
            border-color: var(--primary);
            background: var(--glass-bg);
            /* Reset background on hover or maintain slightly */
        }

        .contribution-badge {
            font-size: 0.75rem;
            font-weight: 800;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            text-transform: uppercase;
            width: fit-content;
        }

        .badge-lesson {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .badge-summary {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .badge-video {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        /* Type-specific card styles */
        .contribution-card.card-lesson {
            border-top: 5px solid #3b82f6;
            background: rgba(59, 130, 246, 0.03);
        }

        .contribution-card.card-summary {
            border-top: 5px solid #10b981;
            background: rgba(16, 185, 129, 0.03);
        }

        .contribution-card.card-video {
            border-top: 5px solid #ef4444;
            background: rgba(239, 68, 68, 0.03);
        }

        .contribution-card.card-other {
            border-top: 5px solid var(--primary);
        }

        .contribution-title {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .dark-mode .contribution-title {
            color: #c4b5fd;
        }

        .contribution-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .contribution-link {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 700;
            margin-top: auto;
            transition: all 0.3s ease;
        }

        .subject-hero {
            position: relative;
            padding: 4rem 2rem;
            background: var(--gradient-1);
            color: white;
            border-radius: 30px;
            margin-bottom: 3rem;
            overflow: hidden;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .contribution-link:hover {
            background: var(--primary-dark);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .add-contribution-btn {
            background: var(--gradient-2);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0 auto 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(45, 212, 191, 0.3);
        }

        .add-contribution-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(45, 212, 191, 0.4);
        }

        /* Contribution Modal Styles */
        .modal-body-form {
            display: grid;
            gap: 1.5rem;
            padding: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* --- Refactored Inline Styles --- */
        .tools-container .theme-toggle {
            margin-left: 10px;
        }

        .hero-cta-wrapper {
            margin-top: 2.5rem;
        }

        .hero-cta-btn {
            font-size: 1.2rem !important;
            padding: 1rem 2.4rem !important;
        }

        .year-body h3 {
            color: var(--primary-dark);
            margin-bottom: 1.8rem;
            text-align: center;
            font-size: 1.4rem;
            font-weight: 800;
        }

        .page-actions {
            text-align: center;
            margin-top: 4rem;
        }

        .page-actions-sm {
            text-align: center;
            margin-top: 2rem;
        }

        .btn-primary-custom {
            background: var(--primary) !important;
            color: white !important;
        }

        .btn-large {
            font-size: 1.2rem !important;
            padding: 1rem 3rem !important;
        }

        .btn-gray {
            background: var(--gray) !important;
            color: white !important;
        }

        .centered-container-800 {
            max-width: 800px;
            margin: 2rem auto;
        }

        .grid-responsive-calculator {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .calc-result-box {
            text-align: center;
            border-top: 2px solid var(--glass-border);
            padding-top: 2rem;
        }

        /* --- Achievements Page --- */
        .achievements-card {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.15));
            padding: 3rem 2rem;
            border-radius: 24px;
            margin-bottom: 3rem;
            border: 2px solid rgba(251, 191, 36, 0.3);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .achievements-orb-top {
            position: absolute;
            top: -20px;
            right: -20px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.2), transparent);
            border-radius: 50%;
            pointer-events: none;
        }

        .achievements-orb-bottom {
            position: absolute;
            bottom: -30px;
            left: -30px;
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.15), transparent);
            border-radius: 50%;
            pointer-events: none;
        }

        .achievements-trophy-container {
            width: 100px;
            height: 100px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.5), 0 0 0 6px rgba(251, 191, 36, 0.2);
            animation: pulse-glow-achievement 2s ease-in-out infinite;
        }

        .achievements-trophy-icon {
            font-size: 3.5rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .achievements-progress-container {
            width: 160px;
            height: 160px;
            margin: 0 auto 2rem;
            position: relative;
        }

        .achievements-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .achievements-goal-box {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .achievements-reset-btn {
            width: 100%;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 1.2rem;
            font-size: 1.1rem;
            border-radius: 16px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
            transition: all 0.3s ease;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .achievements-reward-card {
            padding: 1.5rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
        }

        .achievements-reward-card:hover {
            transform: translateY(-5px);
        }

        .reward-lesson {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(79, 70, 229, 0.15));
            border-color: rgba(99, 102, 241, 0.3);
        }

        .reward-summary {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(124, 58, 237, 0.15));
            border-color: rgba(139, 92, 246, 0.3);
        }

        .reward-tool {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(219, 39, 119, 0.15));
            border-color: rgba(236, 72, 153, 0.3);
        }

        .achievements-reward-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .achievements-points-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 0.6rem 1.2rem;
            border-radius: 14px;
            font-weight: 900;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
        }

        .relative-z1 {
            position: relative;
            z-index: 1;
        }

        .points-number {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }

        .points-label {
            font-size: 1rem;
            color: rgba(251, 191, 36, 0.9);
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .goal-label {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 600;
        }

        .goal-target {
            color: #fbbf24;
            font-weight: 800;
            font-size: 1.3rem;
        }

        .progress-bar-bg {
            background: rgba(0, 0, 0, 0.1);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 5px;
            transition: width 1s ease;
        }

        /* --- Modals & Overlays --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }

        .modal-z-top {
            z-index: 1000;
        }

        .modal-z-ultra {
            z-index: 2000;
        }

        .bg-overlay-dark {
            background: rgba(0, 0, 0, 0.9);
        }

        .bg-overlay-glass {
            background: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
        }

        .modal-container-pathology {
            background: transparent;
            max-width: 900px;
            margin: 4rem auto;
            padding: 0;
            border: none;
            box-shadow: none;
        }

        .modal-container-add-case {
            max-width: 850px;
            margin: 3rem auto;
            position: relative;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 2.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .close-modal-white {
            position: absolute;
            top: 2rem;
            right: 2rem;
            color: white;
            font-size: 3rem;
            cursor: pointer;
            z-index: 1001;
        }

        .close-modal-circle {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-header-centered {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .hero-title-gradient {
            font-size: 2.2rem;
            font-weight: 900;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .form-group-centered {
            max-width: 400px;
            margin: 0 auto 2.5rem;
        }

        .label-centered {
            justify-content: center;
        }

        .select-centered {
            text-align: center;
            font-weight: 700;
        }

        .mt-3 {
            margin-top: 3rem;
        }
    </style>

</head>

<body>

    <!-- Welcome Modal -->
    <div id="welcomeModal">
        <div class="modal-content">
            <h2>Welcome To My Site 😎</h2>
            <p>مرحباً بك في منصة MedGpa</p>
            <button class="close-btn" onclick="document.getElementById('welcomeModal').style.display='none'">ابدأ
                الاستكشاف</button>
        </div>
    </div>

    <header id="mainHeader">
        <div class="container header-content">
            <div class="logo"><span>MedGpa</span></div>
            <div class="nav-dropdown" id="navDropdown">
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <button class="dropdown-toggle" onclick="toggleMobileMenu()">القائمة ▼ </button>
                <div class="dropdown-menu">
                    <button class="menu-close-btn" onclick="toggleMobileMenu()">✕</button>

                    <div class="dropdown-section">
                        <div class="dropdown-section-title">🎓 القسم الأكاديمي</div>
                        <ul class="dropdown-links">
                            <li><a href="#" onclick="showPage('home'); toggleMobileMenu(); return false;"><span
                                        class="icon">🏠</span> الرئيسية</a></li>
                            <li><a href="#" onclick="showPage('years'); toggleMobileMenu(); return false;"><span
                                        class="icon">🎓</span> السنوات الدراسية</a></li>
                            <li><a href="#" onclick="showPage('study_map'); toggleMobileMenu(); return false;"><span
                                        class="icon">🗺️</span> خريطتك الدراسية</a></li>
                            <li><a href="#" onclick="showPage('qcm'); toggleMobileMenu(); return false;"><span
                                        class="icon">📝</span> QCMs Tests</a></li>
                            <li><a href="#"
                                    onclick="showPage('students_section'); toggleMobileMenu(); return false;"><span
                                        class="icon">👨‍🎓</span> خاص بالطلاب</a></li>
                        </ul>
                    </div>

                    <div class="dropdown-section">
                        <div class="dropdown-section-title">🛠️ الأدوات السريرية</div>
                        <ul class="dropdown-links clinical-tools-grid">
                            <li><a href="#"
                                    onclick="showPage('medical_calculator'); toggleMobileMenu(); return false;"><span
                                        class="icon">⚖️</span> الحاسبة الطبية</a></li>
                            <li><a href="#" onclick="showPage('med_glossary'); toggleMobileMenu(); return false;"><span
                                        class="icon">📚</span> قاموس الاختصارات</a></li>
                            <li><a href="#" onclick="showPage('lab_values'); toggleMobileMenu(); return false;"><span
                                        class="icon">🧪</span> القيم المخبرية</a></li>
                            <li><a href="#"
                                    onclick="showPage('pathology_atlas'); toggleMobileMenu(); return false;"><span
                                        class="icon">🔬</span> أطلس الأمراض</a></li>
                            <li><a href="#"
                                    onclick="showPage('rotation_tracker'); toggleMobileMenu(); return false;"><span
                                        class="icon">🏥</span> متتبع التربصات</a></li>
                        </ul>
                    </div>

                    <div class="dropdown-section">
                        <div class="dropdown-section-title">🤝 الدعم والتواصل</div>
                        <ul class="dropdown-links">
                            <li><a href="#" onclick="showPage('mental_health'); toggleMobileMenu(); return false;"><span
                                        class="icon">🧠</span> هدوئك النفسي</a></li>
                            <li><a href="#" onclick="showPage('about_us'); toggleMobileMenu(); return false;"><span
                                        class="icon">👥</span> من نحن</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tools-container">
                <div class="theme-switcher">
                    <button class="theme-btn" onclick="toggleThemeMenu()" title="تغيير المظهر">🎨</button>
                    <div id="themeMenu" class="theme-menu">
                        <div class="theme-option" onclick="setThemePalette('default')"><span>🔵</span> الافتراضي
                        </div>
                        <div class="theme-option" onclick="setThemePalette('surgeon')"><span>🔴</span> الجرّاح</div>
                        <div class="theme-option" onclick="setThemePalette('pharmacist')"><span>🟢</span> الصيدلي
                        </div>
                        <div class="theme-option" onclick="setThemePalette('sunset')"><span>🟠</span> الممرض</div>
                        <div class="theme-option" onclick="setThemePalette('dentist')"><span>🦷</span> طب الأسنان
                        </div>
                    </div>
                </div>
                <button class="theme-toggle" onclick="toggleAchievements()" title="الإنجازات">🏆</button>
                <button class="theme-toggle" onclick="toggleSearch()" title="بحث">🔍</button>
                <button class="theme-toggle" id="themeToggleNav">🌙</button>
            </div>
        </div>
    </header>

    <main class="container">

        <section id="home" class="page active">
            <div class="page-header">
                <h1>مرحباً بك في MedGpa</h1>
                <p>منصة تعليمية شاملة تهدف إلى تسهيل دراسة المواد الطبية الأساسية من خلال محتوى منظم
                    وسهل الفهم</p>
            </div>
            <div class="hero-section">
                <h2 class="hero-title">يستهدف الموقع</h2>
                <div class="target-audience">
                    <div class="audience-card">
                        <div class="audience-icon">⚕️</div>
                        <h3 class="audience-title">طلاب الطب</h3>
                        <p class="audience-desc">(خصوصًا السنوات الأولى)</p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">📚</div>
                        <h3 class="audience-title">من يعانون من كثرة المصادر</h3>
                        <p class="audience-desc">ولا يعرفون من أين يبدأون</p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">⁉️</div>
                        <h3 class="audience-title">من يبحثون عن الاسئلة</h3>
                        <p class="audience-desc">ولم يجدوا من اين</p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">🔍</div>
                        <h3 class="audience-title">من يريدون حساب معدلاتهم</h3>
                        <p class="audience-desc">ولم يعرفو كيف</p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">📉</div>
                        <h3 class="audience-title">من يدرسون كثيرًا</h3>
                        <p class="audience-desc">لكن نتائجهم ضعيفة</p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">😴</div>
                        <h3 class="audience-title">من يشعرون بالإرهاق أو الضياع</h3>
                        <p class="audience-desc">في رحلتهم الأكاديمية</p>
                    </div>
                </div>
                <div class="special-note">
                    <h3>ملاحظة خاصة</h3>
                    <p>✨ مكتوب بلغة طالب طب ✨</p>
                </div>
                <div class="hero-cta-wrapper">
                    <button class="btn hero-cta-btn" onclick="showPage('years')">ابدأ رحلتك الآن</button>
                </div>
            </div>
        </section>

        <section id="years" class="page">
            <div class="page-header">
                <h1>السنوات الدراسية</h1>
                <p>دليل شامل للسنتين الأولى والثانية في كلية الطب مع المواد الأساسية والمواضيع
                    الرئيسية</p>
            </div>
            <div class="years-grid">

                <div class="year-card">
                    <div class="year-header">
                        <div class="year-number">1</div>
                        <div class="year-title">السنة الأولى</div>
                    </div>
                    <div class="year-body">
                        <h3>المواد الأساسية</h3>
                        <ul class="subjects-list">
                            <li onclick="showSubjectDetail('anatomie')">
                                <span class="subject-icon">🦴</span>ANATOMIE
                            </li>
                            <li onclick="showSubjectDetail('biochimie')">
                                <span class="subject-icon">🧪</span>BIOCHIMIE
                            </li>
                            <li onclick="showSubjectDetail('cytologie')">
                                <span class="subject-icon">🔬</span>CYTOLOGIE
                            </li>
                            <li onclick="showSubjectDetail('physiologie')">
                                <span class="subject-icon">❤️</span>PHYSIOLOGIE
                            </li>
                            <li onclick="showSubjectDetail('biophysique')">
                                <span class="subject-icon">⚡</span>BIOPHYSIQUE
                            </li>
                            <li onclick="showSubjectDetail('biostat')">
                                <span class="subject-icon">📊</span>BIOSTAT
                            </li>
                            <li onclick="showSubjectDetail('ssh')">
                                <span class="subject-icon">👥</span>SSH
                            </li>
                            <li onclick="showSubjectDetail('embryologie')">
                                <span class="subject-icon">👶</span>EMBRYOLOGIE
                            </li>
                            <li onclick="showSubjectDetail('chimie')">
                                <span class="subject-icon">⚗️</span>CHIMIE
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="year-card">
                    <div class="year-header">
                        <div class="year-number">2</div>
                        <div class="year-title">السنة الثانية</div>
                    </div>
                    <div class="year-body">
                        <h3>المواد الأساسية</h3>
                        <ul class="subjects-list">
                            <li onclick="showSubjectDetail('cardiovasculaire')">
                                <span class="subject-icon">🫀</span>CARDIO
                            </li>
                            <li onclick="showSubjectDetail('nerveux')">
                                <span class="subject-icon">🧠</span>NERVEUX
                            </li>
                            <li onclick="showSubjectDetail('digestif')">
                                <span class="subject-icon">😋</span>DIGESTIF
                            </li>
                            <li onclick="showSubjectDetail('endocrineien')">
                                <span class="subject-icon">⚖️</span>ENDOCRINEIEN
                            </li>
                            <li onclick="showSubjectDetail('urinaire')">
                                <span class="subject-icon">💧</span>URINAIRE
                            </li>
                            <li onclick="showSubjectDetail('genetique')">
                                <span class="subject-icon">🧬</span>GENETIQUE
                            </li>
                            <li onclick="showSubjectDetail('immunologie')">
                                <span class="subject-icon">🛡️</span>IMMUNOLOGIE
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="subjectDetailSection" class="subject-detail-section">
                <div class="subject-header">
                    <h2 id="subjectTitle">عنوان المادة</h2>
                </div>
                <div class="subject-overview">
                    <h3>نبذة عن المادة</h3>
                    <p id="subjectOverview">وصف المادة سيظهر هنا...</p>
                </div>
                <div class="content-grid">
                    <div class="content-card">
                        <h4>الدروس</h4>
                        <div id="lessonsContent">
                            <!-- Lessons will be populated here with link and difficulty -->
                        </div>
                    </div>
                    <div class="content-card" id="videosCard">
                        <h4>الفيديوهات</h4>
                        <div id="videosContent">
                            <!-- Videos will be populated here with video link -->
                        </div>
                    </div>
                    <div class="content-card" id="summariesCard">
                        <h4>الملخصات</h4>
                        <div id="summariesContent">
                            <!-- Summaries will be populated here -->
                        </div>
                    </div>
                    <div class="content-card">
                        <h4>طريقة المذاكرة</h4>
                        <ul id="studyMethodsList">
                            <!-- Study methods will be populated here -->
                        </ul>
                    </div>
                    <div class="content-card">
                        <h4>أهمية المادة</h4>
                        <ul id="importanceList">
                            <!-- Importance points will be populated here -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="study_map" class="page">
            <div class="page-header">
                <h1>خريطتك الدراسية</h1>
                <p>أدوات ونصائح لتنظيم جدولك الدراسي وتحقيق أقصى استفادة من وقتك</p>
            </div>

            <div class="study-map-section">
                <div class="study-tip-card">
                    <h3>📅 تنظيم الوقت</h3>
                    <p>الجدولة اليومية هي حجر الأساس للنجاح في كلية الطب</p>
                    <ul>
                        <li>خصص وقتًا يوميًا لمراجعة المحاضرات</li>
                        <li>استخدم تقنية بومودورو (25 دقيقة دراسة + 5 دقائق راحة)</li>
                        <li>حدد أولوياتك حسب صعوبة المادة وقرب الامتحان</li>
                        <li>لا تنسَ تضمين وقت للراحة والنوم</li>
                        <li>حدد الاهداف قبل ان تبدا الدراسة لتجهيز نفسك نفسيا قبل عقليا
                            وبدنيا</li>
                        <li>لا تعتمد على الناس في توقيت الدراسة لكل شخص وقته المفضل فانا عن
                            نفسي اوقات احب الدراسة ليلا واوقات العكس احب الدراسة صباحا باكرا
                        </li>
                    </ul>
                </div>
                <div class="study-tip-card">
                    <h3>🧠 تقنيات الحفظ</h3>
                    <p>الطب يتطلب حفظ كم هائل من المعلومات — اجعله ذكيًا !</p>
                    <ul>
                        <li>استخدم بطاقات الفلاش (Anki مثالي لذلك)</li>
                        <li>استخدم موقع او تطبيق NoteboolLM لانشاء مخططات سهلة الحفظ</li>
                        <li>استخدم التشبيهات والقصص لتثبيت المعلومات</li>
                        <li>كرر المعلومات في فترات متباعدة (Spaced Repetition)</li>
                        <li>اهم شيئ هو حب تلك المادة ولو انها صعبة</li>
                    </ul>
                </div>
                <div class="study-tip-card">
                    <h3>📚 طرق الدراسة الفعّالة</h3>
                    <p>الدراسة الذكية أفضل من الدراسة الطويلة !</p>
                    <ul>
                        <li>لا تكتفِ بالقراءة — اكتب، ارسم، علّم غيرك</li>
                        <li>حل الأسئلة التطبيقية بعد كل موضوع les Qcms</li>
                        <li>شكل مجموعات دراسة صغيرة (3-4 أشخاص)</li>
                        <li>استخدم الخرائط الذهنية لربط المواضيع</li>
                        <li>اعتمد على الذكاء الاصطناعي فانه يبسط لك الدروس او يرويها لك على
                            شكل قصة</li>
                        <li>يمكنك الطلب من الذكاء الاصطناعي ان ينشا لك اسئلة لتتدرب عليها
                        </li>
                    </ul>
                </div>
                <div class="study-tip-card">
                    <h3>⚖️ التوازن بين الحياة والدراسة</h3>
                    <p>لا تُهمل صحتك النفسية والجسدية !</p>
                    <ul>
                        <li>مارس الرياضة 3 مرات أسبوعيًا (حتى لو 20 دقيقة)</li>
                        <li>احرص على 7-8 ساعات نوم يوميًا</li>
                        <li>خصص وقتًا للعائلة والأصدقاء</li>
                        <li>خذ يوم راحة كامل كل أسبوع</li>
                        <li>لا تجعل حياتك تتوقف عند الطب فقط</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>📉 التعامل مع العثرات</h3>
                    <p>العلامة الضعيفة ليست نهاية العالم، بل هي درس للمستقبل !</p>
                    <ul>
                        <li>حلل أخطاءك في الامتحان بوضوح: هل كان نقص حفظ أم ضيق وقت؟</li>
                        <li>لا تقارن نفسك بالآخرين، فلكل طالب "رتمه" الخاص في الاستيعاب</li>
                        <li>استشر زملائك الأكبر سنًا؛ فقد مروا بنفس تجاربك وتجاوزوها</li>
                        <li>تذكر أن الطبيب الناجح هو من تعلّم من أخطائه وصار أقوى</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🔍 فن اختيار المصادر</h3>
                    <p>كثرة المصادر تشتت الذهن — اختر سلاحك بذكاء !</p>
                    <ul>
                        <li>اعتمد مصدرًا واحدًا أساسيًا (Cours) ومصدرًا ثانيًا لتبسيط الفهم</li>
                        <li>فيديوهات Ninja Nerd و Sketchy منقذة في المواد العميقة</li>
                        <li>لا تهمل ملخصات الطلبة (Les Polycopiés) المعتمدة في كليتك</li>
                        <li>تأكد دائمًا من توافق المصدر الخارجي مع منهج الأستاذ</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🏥 بوابة المستشفى (السنوات السريرية)</h3>
                    <p>من السنة الثالثة، تصبح جدران المستشفى هي كتابك الحقيقي !</p>
                    <ul>
                        <li>تعلم فن الاستجواب الطبي (Anamnesis)؛ فهو 70% من التشخيص</li>
                        <li>اربط الحالة التي تراها في المستشفى بالدرس النظري فورًا</li>
                        <li>الاحترام واللباس المهني يفتحان لك أبواب التعلم مع الطاقم الطبي</li>
                        <li>كن مبادرًا في الفحص والوقوف بجانب المريض بمسؤولية</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🎓 مهارات خارج المنهج</h3>
                    <p>الطبيب المتميز هو أكثر من مجرد "حافظ للكتب" !</p>
                    <ul>
                        <li>تعلم كيفية قراءة وتقييم الأبحاث العلمية (EBM)</li>
                        <li>انضم للنشاطات الطلابية؛ فهي تبني شخصيتك القيادية واجتماعياتك</li>
                        <li>اللغة الإنجليزية هي مفتاحك للوصول لأحدث المراجع العالمية</li>
                        <li>طور مهارات التواصل؛ فنصف الطب هو كيفية "جبر خاطر" المريض</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🏁 عقلية الماراثون</h3>
                    <p>الطب رحلة طويلة، فوزّع مجهودك بحكمة !</p>
                    <ul>
                        <li>هذا الطريق ماراثون وليس سباقًا قصيرًا؛ النفس الطويل هو الأهم</li>
                        <li>حافظ على "شغف البدايات" وتذكر دائمًا الدافع الذي أدخلك الطب</li>
                        <li>صداقاتك في الكلية هي السند الحقيقي في اللحظات الصعبة</li>
                        <li>الشهادة هي رخصة للبدء في التعلم، فالطبيب طالب علم للأبد</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🎯 اختيار التخصص المستقبلي</h3>
                    <p>طريق الألف ميل يبدأ باكتشاف شغفك الحقيقي !</p>
                    <ul>
                        <li>استغل فترات التدريب في المستشفى لتجربة مختلف الأقسام بقلب مفتوح</li>
                        <li>دوّن ملاحظاتك: هل تميل للجراحة والعمل اليدوي أم للطب الباطني والتحليل؟</li>
                        <li>اسأل الأطباء المقيمين (Résidents) عن نمط حياتهم اليومي ومميزات تخصصهم</li>
                        <li>لا تستعجل القرار؛ فكل مادة تدرسها الآن هي قطعة من أحجية مستقبلك</li>
                    </ul>
                </div>

                <div class="study-tip-card">
                    <h3>🌿 صحتك النفسية هي وقودك</h3>
                    <p>دراسة الطب صعبة، لذا كن رحيمًا بنفسك !</p>
                    <ul>
                        <li>تعلم كيفية التعامل مع الضغط (Burnout)؛ فهو ليس علامة ضعف بل تنبيه</li>
                        <li>مارس هوايات غير طبية (قراءة، رسم، برمجة) لتفصل عقلك عن جو الدراسة</li>
                        <li>حافظ على علاقاتك الاجتماعية خارج الوسط الطبي لتبقي رؤيتك للحياة واسعة</li>
                        <li>أنت إنسان رائع قبل أن تكون طبيبًا؛ نجاحك المهني يبدأ من سلامك الداخلي</li>
                    </ul>
                </div>
            </div>

            <div class="resources-section">
                <div class="resources-section">
                    <h2>ترسانة الأدوات الطبية الشاملة (Universal Medical Toolkit) 🛠️🤖</h2>
                    <div class="resource-grid">
                        <!-- Standard Tools -->
                        <div class="resource-card" onclick="window.open('https://apps.ankiweb.net/', '_blank')">
                            <div class="resource-tag">حفظ وذاكرة</div>
                            <div class="resource-icon">🧠</div>
                            <h4>Anki</h4>
                            <p>استخدم التكرار المتباعد (Spaced Repetition) لتحويل المعلومات الضخمة إلى ذاكرة طويلة
                                الأمد.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://3d4medical.com/', '_blank')">
                            <div class="resource-tag">تشريح مرئي</div>
                            <div class="resource-icon">🦴</div>
                            <h4>Complete Anatomy</h4>
                            <p>أقوى أطلس تشريح ثلاثي الأبعاد في العالم؛ لتخيل كل عضلة وعصب بدقة مذهلة.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://www.ninjanerd.org/', '_blank')">
                            <div class="resource-tag">تعلم تفاعلي</div>
                            <div class="resource-icon">🎬</div>
                            <h4>Ninja Nerd</h4>
                            <p>ملك تبسيط الطب؛ فيديوهات تشرح أعقد العمليات الفسيولوجية بأسلوب قصصي ممتع.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://www.notion.so/', '_blank')">
                            <div class="resource-tag">تنظيم وإدارة</div>
                            <div class="resource-icon">📓</div>
                            <h4>Notion</h4>
                            <p>مساحة عملك المتكاملة لتنظيم الدروس، تتبع المراجعة، وبناء قاعدة بياناتك الطبية.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://obsidian.md/', '_blank')">
                            <div class="resource-tag">تفكير عميق</div>
                            <div class="resource-icon">🕸️</div>
                            <h4>Obsidian</h4>
                            <p>لبناء "دماغ ثانٍ" وربط الدروس ببعضها البعض عبر خرائط ذهنية لا نهائية.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://www.amboss.com/', '_blank')">
                            <div class="resource-tag">مرجع سريري</div>
                            <div class="resource-icon">🏥</div>
                            <h4>UpToDate / Amboss</h4>
                            <p>المصادر التي يعتمد عليها الأطباء حول العالم للحصول على أدق المعلومات السريرية.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://www.medscape.com/', '_blank')">
                            <div class="resource-tag">قاموس ومرجع</div>
                            <div class="resource-icon">💊</div>
                            <h4>Medscape</h4>
                            <p>تطبيقي المفضل للبحث عن الأدوية، الجرعات، والأمراض بسرعة واحترافية.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://pubmed.ncbi.nlm.nih.gov/', '_blank')">
                            <div class="resource-tag">بحث علمي</div>
                            <div class="resource-icon">🔍</div>
                            <h4>PubMed</h4>
                            <p>بوابتك لعالم الأبحاث الطبية الموثقة؛ لتبقى دائمًا على اطلاع بأحدث الاكتشافات.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://scholar.google.com/', '_blank')">
                            <div class="resource-tag">أكاديمي</div>
                            <div class="resource-icon">🎓</div>
                            <h4>Google Scholar</h4>
                            <p>الباحث العلمي المثالي لإيجاد المصادر والمراجع الموثوقة لبحوثك الجامعية.</p>
                        </div>

                        <div class="resource-card">
                            <div class="resource-tag">تطبيقات مهكرة</div>
                            <div class="resource-icon">🔓</div>
                            <h4>Medical APKS</h4>
                            <p>سأقوم بمشاركة روابط لتطبيقات طبية مدفوعة بشكل مجاني لمساعدتكم في دراستكم.</p>
                        </div>

                        <div class="resource-card" onclick="window.open('https://www.calm.com/', '_blank')">
                            <div class="resource-tag">صحة نفسية</div>
                            <div class="resource-icon">🧘</div>
                            <h4>Headspace / Calm</h4>
                            <p>تطبيقات التأمل والهدوء النفسي؛ للسيطرة على قلق الامتحانات وضغط الدراسة.</p>
                        </div>

                        <!-- AI Tools -->
                        <div class="resource-card ai-card"
                            onclick="window.open('https://notebooklm.google.com/', '_blank')">
                            <div class="resource-tag">AI مساعد</div>
                            <div class="resource-icon">🤖</div>
                            <h4>NotebookLM</h4>
                            <p>أداة جوجل لتحويل ملفاتك إلى قاعدة بيانات تفاعلية؛ تنشئ لك ملخصات وقوالب مراجعة.</p>
                        </div>

                        <div class="resource-card ai-card"
                            onclick="window.open('https://www.perplexity.ai/', '_blank')">
                            <div class="resource-tag">AI بحث</div>
                            <div class="resource-icon">🌐</div>
                            <h4>Perplexity AI</h4>
                            <p>البديل المتطور لـ Google؛ يقدم إجابات طبية دقيقة مع ذكر المصادر الأصلية فورًا.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://consensus.app/', '_blank')">
                            <div class="resource-tag">AI تحليل</div>
                            <div class="resource-icon">🔬</div>
                            <h4>Consensus</h4>
                            <p>محرك بحث يعتمد على الذكاء الاصطناعي لاستخراج الحقائق من آلاف الأبحاث العلمية.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://claude.ai/', '_blank')">
                            <div class="resource-tag">AI شرح</div>
                            <div class="resource-icon">💡</div>
                            <h4>Claude AI</h4>
                            <p>يتميز بقدرات تحليلية هائلة؛ اطلب منه شرح أعقد دروس الفيزيولوجيا بأسلوب بسيط.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://chatgpt.com/', '_blank')">
                            <div class="resource-tag">AI محاكاة</div>
                            <div class="resource-icon">👨‍⚕️</div>
                            <h4>ChatGPT</h4>
                            <p>مثالي لمحاكاة السيناريوهات السريرية وتدريب عقلك على التشخيص وحل الأسئلة.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://gamma.app/', '_blank')">
                            <div class="resource-tag">AI عروض</div>
                            <div class="resource-icon">📊</div>
                            <h4>Gamma AI</h4>
                            <p>حوّل ملاحظاتك إلى عروض تقديمية احترافية في ثوانٍ لمشاريعك الجامعية.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://elicit.org/', '_blank')">
                            <div class="resource-tag">AI مراجع</div>
                            <div class="resource-icon">🧪</div>
                            <h4>Elicit</h4>
                            <p>مساعدك في كتابة المراجعات المنهجية والأبحاث؛ يقوم بتلخيص الدراسات واستخراج البيانات.</p>
                        </div>

                        <div class="resource-card ai-card" onclick="window.open('https://scite.ai/', '_blank')">
                            <div class="resource-tag">AI تدقيق</div>
                            <div class="resource-icon">📘</div>
                            <h4>Scite.ai</h4>
                            <p>يكشف لك مدى صحة المعلومات الطبية من خلال تحليل استشهادات الأبحاث الأخرى لها.</p>
                        </div>
                    </div>
                </div>
        </section>

        <section id="mental_health" class="page">
            <!-- Topics Grid (Main View) -->
            <div id="mh-main-view">
                <div class="page-header">
                    <h1>افهم عن نفسك اكثر</h1>
                    <p>رحلة فهم الذات وترميم الروح لمواكبة تحديات الطب</p>
                </div>

                <div class="mh-topics-grid">
                    <div class="mh-topic-card" onclick="openMhTopic('anxiety')">
                        <h3><span>😰</span> القلق – Anxiété</h3>
                        <p>كيف تتعامل مع ضغوط الدراسة والامتحانات؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('fear')">
                        <h3><span>🌑</span> الخوف – Peur</h3>
                        <p>التغلب على الخوف من المجهول والفشل.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('failure')">
                        <h3><span>💔</span> الفشل – Échec</h3>
                        <p>إعادة صياغة الفشل كخطوة نحو النجاح.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('pressure')">
                        <h3><span>📈</span> النجاح والضغط</h3>
                        <p>التعامل مع التوقعات العالية والاحتراق.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('comparison')">
                        <h3><span>⚖️</span> المقارنة بالآخرين</h3>
                        <p>لماذا تشعر أن الجميع أفضل منك؟ وكيف تتوقف؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('motivation')">
                        <h3><span>🪫</span> فقدان الدافع</h3>
                        <p>استعادة الشغف والهدف في مسيرتك الطبية.</p>
                    </div>
                    <!-- New: Holy Quran Section -->
                    <div class="mh-topic-card quran-theme" onclick="openMhTopic('quran')">
                        <h3><span>📖</span> القرآن الكريم</h3>
                        <p>سكينة الروح وآيات الطمأنينة والشفاء.</p>
                    </div>
                    <div class="mh-topic-card duas-theme" onclick="openMhTopic('duas')">
                        <h3><span>🤲</span> أدعية تيسير الدراسة</h3>
                        <p>أذكار وأدعية للفهم والحفظ والنجاح.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('burnout')">
                        <h3><span>😫</span> الاحتراق النفسي - Burnout</h3>
                        <p>عندما ينفد وقودك النفسي والبدني.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('loneliness')">
                        <h3><span>🚶</span> الوحدة - Solitude</h3>
                        <p>الشعور بالعزلة وسط الأصدقاء والزملاء.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('imposter')">
                        <h3><span>🎭</span> متلازمة المحتال</h3>
                        <p>هل تشعر أنك لست ذكياً بما يكفي؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('sleep')">
                        <h3><span>💤</span> جودة النوم - Sommeil</h3>
                        <p>كيف تستعيد نومك العميق في ظل الضغط؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('grief')">
                        <h3><span>🕯️</span> الفقد والحزن - Deuil</h3>
                        <p>التأقلم مع خسارة عزيز أو مشروع حياة.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('anger')">
                        <h3><span>💢</span> الغضب - Colère</h3>
                        <p>تحويل التوتر إلى طاقة إيجابية بدل الانفجار.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('time_pressure')">
                        <h3><span>⏳</span> ضغط الوقت</h3>
                        <p>خسارة السباق مع الزمن وكيفية العودة.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('social_anxiety')">
                        <h3><span>🤝</span> الرهاب الاجتماعي</h3>
                        <p>الخوف من المواجهات السريرية والتقديم.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('confidence')">
                        <h3><span>🦁</span> الثقة بالنفس</h3>
                        <p>بناء إيمان قوي بقدراتك كطبيب مستقبلي.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('concentration')">
                        <h3><span>🎯</span> التركيز - Focus</h3>
                        <p>محاربة التشتت في عالم مليء بالمغريات.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('perfectionism')">
                        <h3><span>✨</span> المثالية المفرطة</h3>
                        <p>لماذا يمنعك بحثك عن الكمال من التطور؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('homesickness')">
                        <h3><span>🏠</span> الحنين للأهل</h3>
                        <p>التعامل مع الغربة والبعد عن جو العائلة.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('boundaries')">
                        <h3><span>🛑</span> وضع الحدود</h3>
                        <p>متى وكيف تقول 'لا' من أجل صحتك؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('exam_stress')">
                        <h3><span>✍️</span> قلق الامتحانات</h3>
                        <p>السيطرة على الرجفة والنسيان قبل الاختبار.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('clinical_anxiety')">
                        <h3><span>🏥</span> القلق السريري</h3>
                        <p>الخوف من الخطأ الطبي ومواجهة المرضى.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('body_mind')">
                        <h3><span>🧘</span> لغة الجسد والعقل</h3>
                        <p>فهم الآلام الجسدية الناتجة عن التوتر.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('addiction')">
                        <h3><span>⚠️</span> الهروب للإدمان</h3>
                        <p>وعي حول مخاطر الاعتماد على المنبهات.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('depression')">
                        <h3><span>🌧️</span> الاكتئاب - Dépress.</h3>
                        <p>عندما يغيم الحزن على ألوان حياتك.</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('resilience')">
                        <h3><span>💎</span> المرونة النفسية</h3>
                        <p>كيف تصبح مثل الألماس.. يقوى بالضغط؟</p>
                    </div>
                    <div class="mh-topic-card" onclick="openMhTopic('mindfulness')">
                        <h3><span>🌊</span> الوعي التام</h3>
                        <p>فن العيش في اللحظة الحاضرة بهدوء.</p>
                    </div>
                </div>

                <div class="page-actions">
                    <button class="btn btn-primary-custom" onclick="showPage('home')">العودة للرئيسية</button>
                </div>
            </div>

            <!-- Detail View (Initially Hidden) -->
            <div id="mh-topic-detail" class="mh-detail-view-container">
                <button class="mh-back-btn" onclick="closeMhTopic()">← العودة للمواضيع</button>
                <div id="mh-detail-body">
                    <!-- Injected by JavaScript -->
                </div>
                <div class="page-actions-sm">
                    <button class="btn" onclick="closeMhTopic()">العودة للقائمة الرئيسية</button>
                </div>
            </div>

            <script>
                const mhTopicsData = {
                    anxiety: {
                        title: "القلق – Anxiété", emoji: "😰",
                        sections: [
                            { title: "ما هو القلق؟", icon: "🔍", text: "رد فعل طبيعي من الجسم تجاه 'خطر' متخيّل أو حقيقي، يتميز بشعور بالتوتر وأفكار مزعجة وتغيرات جسدية (مثل سرعة ضربات القلب)." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "👨‍⚕️", text: "بسبب التراكم المعرفي الهائل (Workload)، الخوف من المسؤولية تجاه المرضى، والمنافسة الشديدة." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "يكون طبيعيًا قبل الامتحانات (يدفع للمذاكرة). يصبح مرضيًا إذا شلّ حركتك، أو منعك من النوم، أو استمر دون سبب واضح." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>قاعدة الـ 5 دقائق: ركز فقط على المهمة الحالية لخمس دقائق.</li><li>التنفس الصدري: شهيق (4ث) - زفير (6ث).</li><li>ممارسة الرياضة لتفريغ الطاقة السلبية.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "القلق لا يفرغ الغد من أحزانه، بل يفرغ اليوم من قوته. أنت أقوى من هواجسك، وكل طبيب ناجح مر بما تمر به الآن.", isSupport: true }
                        ]
                    },
                    fear: {
                        title: "الخوف – Peur", emoji: "🌑",
                        sections: [
                            { title: "ما هو الخوف؟", icon: "🔍", text: "عاطفة أساسية تهدف لحمايتنا، لكن في مسيرة الطب غالباً ما يتحول لخوف من الفشل أو الحكم الاجتماعي." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "🩺", text: "بسبب المثالية المفرطة (Perfectionism). نخشى ألا نكون أطباء جيدين بما يكفي أو نخيب آمال أهلنا." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي عند مواجهة مريض لأول مرة أو إجراء جراحي جديد. يصبح مرضيًا إذا أدى للهروب الدائم من المهام." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>الكتابة التفريغية: اكتب ما تخاف منه بالضبط لتراه بحجمه الحقيقي.</li><li>مبدأ أسوأ الاحتمالات: فكر في الحلول وليس في المشكلة.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "الشجاعة ليست غياب الخوف، بل التحرك رغم وجوده. كل خطوة تخطوها وأنت خائف هي انتصار عظيم.", isSupport: true }
                        ]
                    },
                    failure: {
                        title: "الفشل – Échec", emoji: "💔",
                        sections: [
                            { title: "ما هو الفشل؟", icon: "🔍", text: "مجرد نتيجة لم تحقق التوقعات في لحظة معينة، وليس حكماً نهائياً على قدراتك أو مستقبلك." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "🎓", text: "لأننا اعتدنا أن نكون 'الأوائل'، فأول اصطدام بصعوبة أكاديمية يبدو ككارثة وجودية." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي أن تخفق في جولات دراسية معينة. الفشل المرضي هو التوقف عن المحاولة والاستسلام لليأس." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تحليل الأخطاء بموضوعية لا بجلد الذات.</li><li>فصل القيمة الشخصية عن التحصيل الدراسي.</li><li>طلب الدعم من الزملاء المجربين.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "العظمة لا تكمن في عدم السقوط أبدًا، بل في النهوض في كل مرة نسقط فيها. الفشل هو مجرد جولة، وليس نهاية المعركة.", isSupport: true }
                        ]
                    },
                    pressure: {
                        title: "النجاح والضغط", emoji: "📈",
                        sections: [
                            { title: "ما هو ضغط النجاح؟", icon: "🔍", text: "التوقعات العالية من المحيط (الأهل والمجتمع)، والتي تخلق حالة استنفار دائم وضغطاً نفسياً." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "🏫", text: "بسبب النظرة المقدسة للطبيب، وضغط المسار الطويل الذي يتطلب نفساً طويلاً جداً." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي عندما يحفزك للتفوق. يصبح مرضيًا عندما يتحول لاحتراق (Burnout) أو شعور بالذنب عند الراحة." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تحديد معنى النجاح الخاص بك بعيداً عن أهداف الآخرين.</li><li>ممارسة الهوايات بانتظام لفصل العقل عن جو الدراسة.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "النجاح ليس وجهة نهائية، بل هو الطريقة التي تمشي بها. لا تقتل نفسك لتصبح طبيباً، فالمريض يحتاج طبيباً 'حياً' ومرتاحاً.", isSupport: true }
                        ]
                    },
                    comparison: {
                        title: "المقارنة بالآخرين", emoji: "⚖️",
                        sections: [
                            { title: "ما هي المقارنة؟", icon: "🔍", text: "ميل عقلي لتقييم أنفسنا بناءً على 'واجهة' الآخرين وما يظهرونه من نجاحات وإنجازات." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "📡", text: "بسبب بيئة التنافس العالية، وظهور المثالية الزائفة على وسائل التواصل الاجتماعي." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي كنوع من الإلهام. يصبح مرضيًا إذا تحول لحقد على الذات أو شعور دائم بالنقص." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>قارن نفسك بنسختك الأمس فقط.</li><li>تذكر أن لكل شخص ظروفه وسرعته الخاصة في التعلم.</li><li>قلل متابعة 'المثاليين' على السوشيال ميديا.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "لا تقارن بدايتك بموسم حصاد الآخرين. أنت في رحلتك الخاصة، ومكانك محجوز لك وحدك.", isSupport: true }
                        ]
                    },
                    motivation: {
                        title: "فقدان الدافع", emoji: "🪫",
                        sections: [
                            { title: "ما هو فقدان الدافع؟", icon: "🔍", text: "حالة من الفتور العاطفي تجاه الدراسة، والشعور بأن الهدف أصبح بعيداً أو غير ذي قيمة." },
                            { title: "لماذا يظهر عند طلبة الطب؟", icon: "⏳", text: "بسبب طول المسار، الرتابة، والانفصال عن الجانب الإنساني للطب في مراحل العلوم الأساسية." },
                            { title: "متى يكون طبيعيًا؟", icon: "⚖️", text: "طبيعي في نهاية الفصول الطويلة. يصبح مرضيًا إذا استمر لأشهر وأثر على رغبتك في الاستمرار." },
                            { title: "تقنيات التعامل معه", icon: "🛠️", text: "<ul><li>تذكر 'لماذا' بدأت أول مرة.</li><li>تغيير الروتين الدراسي جذرياً.</li><li>التركيز على الجانب التطبيقي والإنساني.</li></ul>" },
                            { title: "رسالة دعم نفسية", icon: "💌", text: "تذكر أن الشغف ليس ناراً تشتعل دائماً، بل هو قرار بالاستمرار حتى في الأيام الباردة. هدفك ما زال ينتظرك.", isSupport: true }
                        ]
                    },
                    quran: {
                        title: "القرآن الكريم – أمان الروح", emoji: "🌙",
                        sections: [
                            { title: "سعة الله ورحمته", icon: "✨", text: "﴿لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا﴾ [البقرة: ٢٨٦]" },
                            { title: "اليقين بالفرج", icon: "🌅", text: "﴿فَإِنَّ مَعَ الْعُسْرِ يُسْرًا ۝ إِنَّ مَعَ الْعُسْرِ يُسْرًا﴾ [الشرح: ٥-٦]" },
                            { title: "طمأنينة الذاكرين", icon: "💎", text: "﴿أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ﴾ [الرعد: ٢٨]" },
                            { title: "الأمل في الله", icon: "🕊️", text: "﴿وَلَا تَيْأَسُوا مِن رَّوْحِ اللَّهِ﴾ [يوسف: ٨٧]" },
                            { title: "رعاية الله لك", icon: "👁️", text: "﴿وَاصْبِرْ لِحُكْمِ رَبِّكَ فَإِنَّكَ بِأَعْيُنِنَا﴾ [الطور: ٤٨]" },
                            { title: "قربه من العبد", icon: "🤝", text: "﴿وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ﴾ [البقرة: ١٨٦]" },
                            { title: "معية الله", icon: "🛡️", text: "﴿إِنَّ اللَّهَ مَعَ الصَّابِرِينَ﴾ [البقرة: ١٥٣]" },
                            { title: "كاشف الضر", icon: "🌊", text: "﴿وَإِن يَمْسَسْكَ اللَّهُ بِضُرٍّ فَلَا كَاشِفَ لَهُ إِلَّا هُوَ﴾ [الأنعام: ١٧]" },
                            { title: "الاستجابة للفرار لله", icon: "🆘", text: "﴿ادْعُونِي أَسْتَجِبْ لَكُمْ﴾ [غافر: ٦٠]" },
                            { title: "القوة في المحن", icon: "🧱", text: "﴿قَالَ لَا تَخَافَا ۖ إِنَّنِي مَعَكُمَا أَسْمَعُ وَأَرَىٰ﴾ [طه: ٤٦]" },
                            { title: "الحنان الرباني", icon: "🧸", text: "﴿مَا وَدَّعَكَ رَبُّكَ وَمَا قَلَىٰ﴾ [الضحى: ٣]" },
                            { title: "الاستغفار والفرج", icon: "🌧️", text: "﴿فَقُلْتُ اسْتَغْفِرُوا رَبَّكُمْ إِنَّهُ كَانَ غَفَّارًا﴾ [نوح: ١٠]" },
                            { title: "إجابة المضطر", icon: "⚡", text: "﴿أَمَّن يُجِيبُ الْمُضْطَرَّ إِذَا دَعَاهُ وَيَكْشِفُ السُّوءَ﴾ [النمل: ٦٢]" },
                            { title: "الشفاء التام", icon: "🩺", text: "﴿وَإِذَا مَرِضْتُ فَهُوَ يَشْفِينِ﴾ [الشعراء: ٨٠]" },
                            { title: "شفاء الصدور", icon: "❤️", text: "﴿وَشِفَاءٌ لِّمَا فِي الصُّدُورِ﴾ [يونس: ٥٧]" },
                            { title: "الرحمة والسكينة", icon: "📖", text: "﴿وَنُنَزِّلُ مِنَ الْقُرْآنِ مَا هُوَ شِفَاءٌ وَرَحْمَةٌ لِّلْمُؤْمِنينَ﴾ [الإسراء: ٨٢]" },
                            { title: "الصمود والثبات", icon: "🏔️", text: "﴿وَلَا تَهِنُوا وَلَا تَحْزَنُوا وَأَنتُمُ الْأَعْلَوْنَ إِن كُنتُم مُّؤْمِنِينَ﴾ [آل عمران: ١٣٩]" },
                            { title: "البشرى للصابرين", icon: "🏆", text: "﴿وَبَشِّرِ الصَّابِرِينَ﴾ [البقرة: ١٥٥]" },
                            { title: "احتواء الله لضيقك", icon: "🫂", text: "﴿وَلَقَدْ نَعْلَمُ أَنَّكَ يَضِيقُ صَدْرُكَ بِمَا يَقُولُونَ﴾ [الحجر: ٩٧]" },
                            { title: "رسالة إيمانية", icon: "🕋", text: "اجعل لك من كتاب الله نصيباً يومياً، فهو الشفاء لما في الصدور، والنور الذي يضيء لك دروب العلم الوعرة.", isSupport: true }
                        ]
                    },
                    duas: {
                        title: "أدعية تيسير الدراسة والنجاح", emoji: "🤲",
                        sections: [
                            { title: "دعاء البدء بالمذاكرة", icon: "📖", text: "اللهم إني أسألك فهم النبيين، وحفظ المرسلين، وإلهام الملائكة المقربين." },
                            { title: "للمساعدة في الحفظ", icon: "📝", text: "اللهم اجعل لساني عامراً بذكرك، وقلبي بخشيتك، وسري بطاعتك." },
                            { title: "تيسير الفهم", icon: "💡", text: "اللهم أخرجنا من ظلمات الوهم، وأكرمنا بنور الفهم، وافتح علينا بمعرفة العلم." },
                            { title: "عند نسيان المعلومات", icon: "🔍", text: "اللهم يا جامع الناس ليوم لا ريب فيه، اجمع عليّ ضالتي (ما نسيته)." },
                            { title: "قبل دخول الامتحان", icon: "🚪", text: "ربِّ أدخلني مدخل صدق، وأخرجني مخرج صدق، واجعل لي من لدنك سلطاناً نصيراً." },
                            { title: "عند استلام الوريقة", icon: "✍️", text: "ربِّ اشرح لي صدري، ويسر لي أمري، واحلل عقدة من لساني يفقهوا قولي." },
                            { title: "للثبات والهدوء", icon: "🧘", text: "اللهم لا سهل إلا ما جعلته سهلاً، وأنت تجعل الحزن (الصعب) إذا شئت سهلاً." },
                            { title: "طلب التوفيق", icon: "🎯", text: "اللهم إني استودعتك ما قرأت وما حفظت وما تعلمت، فرده لي وقت حاجتي إليه." },
                            { title: "البركة في الوقت", icon: "⏳", text: "اللهم بارك لي في وقتي، وبارك لي في جهدي، ولا تجعل للملل طريقاً إلى قلبي." },
                            { title: "عند الضيق الدراسي", icon: "😮‍💨", text: "يا حي يا قيوم برحمتك أستغيث، أصلح لي شأني كله ولا تكلني إلى نفسي طرفة عين." },
                            { title: "دعاء العلم النافع", icon: "🌱", text: "اللهم انفعني بما علمتني، وعلمني ما ينفعني، وزدني علماً." },
                            { title: "تحصين النفس", icon: "🛡️", text: "حسبي الله لا إله إلا هو، عليه توكلت وهو رب العرش العظيم (7 مرات)." },
                            { title: "لفتح الأبواب المغلقة", icon: "🔑", text: "يا فتاح يا عليم، افتح لي فتحاً مبيناً من لدنك." },
                            { title: "عند مواجهة مسألة صعبة", icon: "🤯", text: "يا هادي اهدني لأرشد أمري، ويا معين أعني على ما عجزت عنه." },
                            { title: "التوكل الكامل", icon: "⚓", text: "بسم الله، توكلت على الله، ولا حول ولا قوة إلا بالله العلي العظيم." },
                            { title: "للصبر على طول الطريق", icon: "🐢", text: "ربنا أفرغ علينا صبراً وتوفنا مسلمين." },
                            { title: "دعاء الانتهاء من المذاكرة", icon: "✅", text: "الحمد لله الذي هدانا لهذا وما كنا لنهتدي لولا أن هدانا الله." },
                            { title: "طلب النجاح الباهر", icon: "🏆", text: "اللهم ارزقني قوة الحفظ، وسرعة الفهم، وصفاء الذهن، وبلغني الدرجات العلى." },
                            { title: "سيد الاستغفار (للراحة)", icon: "✨", text: "اللهم أنت ربي لا إله إلا أنت، خلقتني وأنا عبدك، وأنا على عهدك ووعدك ما استطعت." },
                            { title: "لإزالة الهم والغم", icon: "🌧️", text: "لا إله إلا أنت سبحانك إني كنت من الظالمين." },
                            { title: "رسالة إيمانية", icon: "💌", text: "الدعاء هو العبادة، وهو رفيقك في دروب الطب الطويلة. ثق أن الله يسمعك ولن يضيع تعبك.", isSupport: true }
                        ]
                    },
                    burnout: {
                        title: "الاحتراق النفسي - Burnout", emoji: "😫",
                        sections: [
                            { title: "ما هو الاحتراق؟", icon: "🔍", text: "حالة من الإرهاق العاطفي والجسدي والذهني الناتج عن التوتر المزمن والمبالغ فيه." },
                            { title: "العلامات", icon: "⚠️", text: "فقدان الاهتمام بالدراسة، الشعور بالعجز، الصداع المزمن، وتراجع الأداء الأكاديمي." },
                            { title: "نصائح العلاج", icon: "🛠️", text: "خذ إجازة قصيرة فوراً، قلل من الالتزامات غير الضرورية، واطلب الدعم من المختصين." },
                            { title: "رسالة دعم", icon: "💌", text: "أنت لست آلة، ومن حقك أن تتعب. الراحة جزء من خطة النجاح وليست عائقاً أمامها.", isSupport: true }
                        ]
                    },
                    loneliness: {
                        title: "الوحدة - Solitude", emoji: "🚶",
                        sections: [
                            { title: "شعور الوحدة", icon: "🔍", text: "الإحساس بالانفصال عن الآخرين، حتى في القاعات المزدحمة بالطلاب." },
                            { title: "لماذا يحدث؟", icon: "🏫", text: "بسبب الغرق في المذاكرة الفردية واختلاف الاهتمامات بين الزملاء." },
                            { title: "كيف تكسره؟", icon: "🤝", text: "انضم لمجموعات دراسة، شارك في نشاطات تطوعية، وتحثث مع صديق تثق به." },
                            { title: "رسالة دعم", icon: "💌", text: "خلف كل باب غرفة يذاكر خلفها طالب طب، هناك قلب يشعر بنفس ما تشعر به. لست وحدك في هذا الطريق.", isSupport: true }
                        ]
                    },
                    imposter: {
                        title: "متلازمة المحتال", emoji: "🎭",
                        sections: [
                            { title: "ما هي؟", icon: "🔍", text: "الاعتقاد بأن نجاحك ضربة حظ وأنك ستُكشف قريباً كشخص غير مؤهل." },
                            { title: "الحقيقة", icon: "💡", text: "معظم طلبة الطب المتميزين يعانون من هذا الشعور. أنت هنا لأنك تستحق ذلك تماماً." },
                            { title: "المواجهة", icon: "🦁", text: "وثق إنجازاتك الصغيرة، وتقبل المديح، وتذكر الصعاب التي تغلبت عليها سابقاً." },
                            { title: "رسالة دعم", icon: "💌", text: "وجودك في كلية الطب ليس خطأً كونياً، بل هو نتيجة تعبك كفاحك. صدق في نفسك كما نصدق فيك نحن.", isSupport: true }
                        ]
                    },
                    sleep: {
                        title: "جودة النوم - Sommeil", emoji: "💤",
                        sections: [
                            { title: "أهمية النوم", icon: "🧠", text: "الدماغ يثبت المعلومات أثناء النوم. السهر الطويل يدمر ذاكرتك القصيرة والبعيدة." },
                            { title: "نظافة النوم", icon: "🧼", text: "حدد موعداً ثابتاً، امنع الشاشات قبل ساعة من النوم، واجعل غرفتك باردة ومظلمة." },
                            { title: "القيلولة", icon: "⏰", text: "قيلولة 20 دقيقة (Power Nap) كافية لتجديد نشاطك دون استنزاف وقتك." },
                            { title: "رسالة دعم", icon: "💌", text: "جسمك هو وسيلتك الوحيدة للوصول لحلمك، فلا تظلمه بالحرمان من النوم. نم جيداً لتذاكر بذكاء.", isSupport: true }
                        ]
                    },
                    grief: {
                        title: "الفقد والحزن - Deuil", emoji: "🕯️",
                        sections: [
                            { title: "عن الحزن", icon: "🔍", text: "الحزن عملية طبيعية تأخذ وقتاً مختلفاً من شخص لآخر. لا تضغط على نفسك لتكون بخير فوراً." },
                            { title: "الدراسة والحزن", icon: "📖", text: "من الصعب التركيز أثناء الفقد. اعطِ نفسك الإذن بالدراسة بحدها الأدنى في هذه الفترة." },
                            { title: "التفريغ", icon: "🌊", text: "البكاء والحديث عن المشاعر يساعد في التئام جروح الروح." },
                            { title: "رسالة دعم", icon: "💌", text: "رحم الله من فقدت، وألهمك الصبر. جرحك سيلتئم، وستشرق الشمس في روحك من جديد.", isSupport: true }
                        ]
                    },
                    anger: {
                        title: "الغضب - Colère", emoji: "💢",
                        sections: [
                            { title: "لماذا نغضب؟", icon: "🔍", text: "غالباً ما يكون الغضب قناعاً للإرهاق أو الشعور بالظلم أو ضيق الوقت." },
                            { title: "التحكم", icon: "🧘", text: "تقنية العد للعشرة، الوضوء، أو تغيير المكان فور الشعور بالشرارة الأولى." },
                            { title: "التفريغ", icon: "🥊", text: "النشاط البدني العنيف (رياضة) أفضل وسيلة لتفريغ شحنات الغضب المخزونة." },
                            { title: "رسالة دعم", icon: "💌", text: "هدوئك هو قوتك الحقيقية. لا تدع لحظة غضب تهدم ما بنيته في أيام من الصبر.", isSupport: true }
                        ]
                    },
                    time_pressure: {
                        title: "ضغط الوقت", emoji: "⏳",
                        sections: [
                            { title: "صراع الزمن", icon: "🔍", text: "الشعور الدائم بأن الساعات لا تكفي والمواد تتراكم بشكل مرعب." },
                            { title: "الحل الذكي", icon: "🎯", text: "مبدأ باريتو (80/20): ركز على 20% من المعلومات التي تعطيك 80% من النتيجة." },
                            { title: "التفويض", icon: "🤝", text: "لا تحاول القيام بكل شيء وحدك. استخدم ملخصات جاهزة أو اطلب مساعدة الزملاء." },
                            { title: "رسالة دعم", icon: "💌", text: "الوقت كافٍ إذا عرفت أين تضع جهدك. لا تلهث خلف المثالية، واسعَ خلف الفائدة.", isSupport: true }
                        ]
                    },
                    social_anxiety: {
                        title: "الرهاب الاجتماعي", emoji: "🤝",
                        sections: [
                            { title: "القلق من الآخرين", icon: "🔍", text: "الخوف من ارتكاب الأخطاء أمام المرضى أو التعرض للسخرية من الأساتذة." },
                            { title: "التعرض المتدرج", icon: "🚶", text: "ابدأ بالحديث مع زملائك المقربين، ثم المرضى، وصولاً للمجموعات الكبيرة." },
                            { title: "التفكير الواقعي", icon: "💡", text: "تذكر أن الجميع يرتكب أخطاء، وأن الأساتذة كانوا يوماً ما في مكانك تماماً." },
                            { title: "رسالة دعم", icon: "💌", text: "صوتك مسموع، وخبرتك تنمو مع كل محاولة. لا تجعل الخجل يحرم العالم من مهاراتك الطببة.", isSupport: true }
                        ]
                    },
                    confidence: {
                        title: "الثقة بالنفس", emoji: "🦁",
                        sections: [
                            { title: "بناء الثقة", icon: "🔍", text: "الثقة تأتي من الكفاءة، والكفاءة تأتي من التكرار والتدريب المستمر." },
                            { title: "التحدث الذاتي", icon: "🗣️", text: "استخدم توكيدات إيجابية يومية. أنت تتعلم، ومن حق المتعلم أن يخطئ ويصيب." },
                            { title: "النجاحات الصغيرة", icon: "🏆", text: "احتفل بإنهاء فصل واحد أو فهم معلومة صعبة. النجاح الكبير هو مجموع صغائر المهام." },
                            { title: "رسالة دعم", icon: "💌", text: "أنت تمتلك في داخلك شجاعة لم تكتشفها بعد. ثق في مسارك، فأنت تصنع مستقبلك الآن.", isSupport: true }
                        ]
                    },
                    concentration: {
                        title: "التركيز - Focus", emoji: "🎯",
                        sections: [
                            { title: "تحدي التشتت", icon: "🔍", text: "صعوبة البقاء مع الكتاب لأكثر من 10 دقائق بسبب الإشعارات أو الأفكار الجانبية." },
                            { title: "العمل العميق", icon: "🌊", text: "خصص بلوكات زمنية (90 دقيقة) بدون هاتف تماماً. التركيز عضلة تقوى بالمران." },
                            { title: "البيئة", icon: "🧹", text: "نظم مكتبك، فالبيئة المنظمة تعكس عقلاً منظماً وقادراً على التركيز." },
                            { title: "رسالة دعم", icon: "💌", text: "قطرة الماء تخرق الصخر ليس بالقوة ولكن بالتكرار. ابقَ مركزاً، وستصل حتماً.", isSupport: true }
                        ]
                    },
                    perfectionism: {
                        title: "المثالية المفرطة", emoji: "✨",
                        sections: [
                            { title: "فخ الكمال", icon: "🔍", text: "انتظار الظروف المثالية للبدء، أو الحزن لأنك لم تحفظ كل كلمة في المرجع." },
                            { title: "مبدأ 'جيد بما يكفي'", icon: "⚖️", text: "تعلم أن تكتفي بالقدر الذي يسمح لك بالاستمرار. الكمال عدو الإنجاز." },
                            { title: "المرونة", icon: "🌀", text: "كن مرناً مع جدولك. إذا فاتك شيء، ابدأ مما أنت فيه الآن ولا تضيع الوقت في الندم." },
                            { title: "رسالة دعم", icon: "💌", text: "الطب رحلة تعلم مدى الحياة، وليست سباقاً للوصول للكمال في يوم واحد. كن رحيماً بنفسك.", isSupport: true }
                        ]
                    },
                    homesickness: {
                        title: "الحنين للأهل", emoji: "🏠",
                        sections: [
                            { title: "ألم الغربة", icon: "🔍", text: "الشعور بالحاجة لحضن العائلة أو طعام الأم، خاصة في ليالي الامتحانات الباردة." },
                            { title: "التواصل", icon: "📞", text: "خصص وقتاً ثابتاً للاتصال بالفيديو. الصوت والصورة يقللان من حدة الحنين." },
                            { title: "بناء وطن جديد", icon: "🌳", text: "اجعل غرفتك في السكن تشبه غرفتك الأصلية، وكون صداقات تكون بمثابة عائلة بديلة." },
                            { title: "رسالة دعم", icon: "💌", text: "تعبك اليوم في غربتك سيبني لك وطناً من الفخر لأسرتك غداً. هم دائماً معك في قلوبهم.", isSupport: true }
                        ]
                    },
                    boundaries: {
                        title: "وضع الحدود", emoji: "🛑",
                        sections: [
                            { title: "فن الـ 'لا'", icon: "🔍", text: "القدرة على رفض الطلبات التي تستنزف وقتك وطاقتك على حساب دراستك وصحتك." },
                            { title: "الأولويات", icon: "🔝", text: "صحتك النفسية ودراستك هما الأولوية القصوى. تعلم أن تضع حدوداً واضحة للآخرين." },
                            { title: "الراحة المقدسة", icon: "🛋️", text: "لا تشعر بالذنب عندما تأخذ وقتاً لنفسك. الحدود تحميك من الاحتراق النفسي." },
                            { title: "رسالة دعم", icon: "💌", text: "أن ترسم حدوداً حول نفسك لا يعني أنك قاسي، بل يعني أنك تحترم قيمتك ووقتك.", isSupport: true }
                        ]
                    },
                    exam_stress: {
                        title: "قلق الامتحانات", emoji: "✍️",
                        sections: [
                            { title: "أعراض القلق", icon: "🔍", text: "الضيق في الصدر، نسيان المعلومات، والبدء في التشكيك في كل إجابة." },
                            { title: "الاستعداد النفسي", icon: "🧘", text: "تدرب على أسئلة سابقة في ظروف مشابهة للامتحان. الألفة تقتل الخوف." },
                            { title: "يوم الامتحان", icon: "🌟", text: "تجنب النقاشات المتوترة قبل الدخول، وخذ أنفاساً عميقة قبل قراءة الورقة." },
                            { title: "رسالة دعم", icon: "💌", text: "هذا الامتحان ليس نهاية العالم، بل هو مجرد خطوة. أنت ذاكرت وبذلت جهدك، والنتائج على الله.", isSupport: true }
                        ]
                    },
                    clinical_anxiety: {
                        title: "القلق السريري", emoji: "🏥",
                        sections: [
                            { title: "رهبة المشفى", icon: "🔍", text: "الخوف من الخطأ في التشخيص، أو التعرض للنقد أمام المريض." },
                            { title: "التعلم من الخطأ", icon: "📚", text: "الأخطاء السريرية في مرحلة الدراسة هي أفضل دروس ستتذكرها طوال حياتك." },
                            { title: "الثقة بالمعرفة", icon: "💡", text: "أنت تمتلك العلم النظري، والمهارة السريرية تأتي مع الوقت والممارسة." },
                            { title: "رسالة دعم", icon: "💌", text: "كل طبيب عظيم كان يوماً ما طالباً يرتجف خوفاً في الممرات. ثباتك سيأتي مع الممارسة.", isSupport: true }
                        ]
                    },
                    body_mind: {
                        title: "لغة الجسد والعقل", emoji: "🧘",
                        sections: [
                            { title: "الأعراض الجسدية", icon: "🔍", text: "آلام الظهر، القولون العصبي، وتساقط الشعر غالباً ما تكون رسائل من عقلك المتعب." },
                            { title: "الاستماع للجسد", icon: "👂", text: "عندما تشعر بالألم، توقف واسأل نفسك: هل أنا مضغوط نفسياً الآن؟" },
                            { title: "التوازن", icon: "⚖️", text: "الرياضة، اليوغا، والمساج ليست رفاهية، بل هي ضرورة لتفريغ ضغط العقل من الجسد." },
                            { title: "رسالة دعم", icon: "💌", text: "جسدك هو أمانة عندك، فلا تحمله ما لا يطيق. اعتني به ليعتني بك في مستقبلك المهني.", isSupport: true }
                        ]
                    },
                    addiction: {
                        title: "الهروب للإدمان", emoji: "⚠️",
                        sections: [
                            { title: "المنبهات والعادات", icon: "🔍", text: "الاعتماد المفرط على الكافيين أو الأدوية المنبهة كوسيلة وحيدة للصمود." },
                            { title: "المخاطر", icon: "📉", text: "تدمير الجهاز العصبي، الاعتمادية، والانهيار المفاجئ للقدرات الذهنية." },
                            { title: "البدائل الصحية", icon: "🍎", text: "الغذاء الصحي، شرب الماء بكثرة، وتنظيم ساعات النوم تعطي طاقة مستدامة." },
                            { title: "رسالة دعم", icon: "💌", text: "لا تشتري تركيزاً مؤقتاً بصحتك الدائمة. مستقبلك كطبيب يتطلب عقلاً صافياً ونقياً.", isSupport: true }
                        ]
                    },
                    depression: {
                        title: "الاكتئاب - Dépression", emoji: "🌧️",
                        sections: [
                            { title: "غياب الشغف", icon: "🔍", text: "فقدان القدرة على الاستمتاع بأي شيء، والشعور بثقل دائم في الحركة والروح." },
                            { title: "الطلب للمساعدة", icon: "🆘", text: "الاكتئاب ليس ضعفاً في الإيمان أو نقصاً في الشخصية، بل هو خلل كيميائي يحتاج علاجاً." },
                            { title: "الخطوات الأولى", icon: "👣", text: "تحدث مع مختص، لا تعزل نفسك، وقم بمهام بسيطة جداً يومياً." },
                            { title: "رسالة دعم", icon: "💌", text: "حتى في أظلم الليالي، يظل الفجر قادماً. أنت لست وحدك، والمساعدة موجودة دائماً لمن يطلبها.", isSupport: true }
                        ]
                    },
                    resilience: {
                        title: "المرونة النفسية", emoji: "💎",
                        sections: [
                            { title: "فن الصمود", icon: "🔍", text: "القدرة على التعافي من الصدمات والضغوط والعودة أقوى مما كنت." },
                            { title: "بناء المرونة", icon: "🛠️", text: "انظر للتحديات كفرص للنمو. تقبل أن الحياة ليست مثالية دائماً." },
                            { title: "شبكة الدعم", icon: "🕸️", text: "الأصدقاء والعائلة هم حصنك الذي تستند عليه وقت العواصف." },
                            { title: "رسالة دعم", icon: "💌", text: "الضغط هو ما يصنع الألماس. كل تحدٍ تواجهه اليوم يبني فيك طبيباً حكيماً غداً.", isSupport: true }
                        ]
                    },
                    mindfulness: {
                        title: "الوعي التام", emoji: "🌊",
                        sections: [
                            { title: "هنا والآن", icon: "🔍", text: "التركيز على اللحظة الحاضرة دون الانشغال بالماضي أو القلق من المستقبل." },
                            { title: "تمرين الحواس", icon: "🧘", text: "عين (5 أشياء تراها)، أذن (4 تسمعها)، يد (3 تلمسها).. لتهدئة القلق الفوري." },
                            { title: "التأمل", icon: "☁️", text: "تخصيص 10 دقائق صمت يومياً لمراقبة أفكارك دون الحكم عليها." },
                            { title: "رسالة دعم", icon: "💌", text: "الحياة تحدث الآن، فلا تضيعها في القلق على غدٍ لم يأتِ بعد. عش لحظتك بسلام.", isSupport: true }
                        ]
                    }
                };

                function openMhTopic(id) {
                    const data = mhTopicsData[id];
                    if (!data) return;

                    let html = `
                                <div class="mh-detail-header ${id === 'quran' ? 'quran-theme' : ''}">
                                    <h2>${data.emoji} ${data.title}</h2>
                                    <p>${id === 'quran' ? 'آيات طمأنينة وسكينة' : 'تعرف على أسباب وكيفية التعامل مع هذا التحدي'}</p>
                                </div>
                                <div class="mh-detail-grid">
                            `;

                    data.sections.forEach(s => {
                        if (!s.isSupport) {
                            const cardClass = id === 'quran' ? 'mh-detail-card quran-verse' : 'mh-detail-card';
                            html += `
                                        <div class="${cardClass}">
                                            <h4><span>${s.icon}</span> ${s.title}</h4>
                                            <p>${s.text}</p>
                                        </div>
                                    `;
                        }
                    });

                    const support = data.sections.find(s => s.isSupport);
                    if (support) {
                        html += `</div><div class="mh-support-msg">
                                            <h4 class="mh-support-title">${support.icon} رسالة لك</h4>
                                            "${support.text}"
                                        </div>`;
                    } else {
                        html += `</div>`;
                    }

                    document.getElementById('mh-detail-body').innerHTML = html;
                    document.getElementById('mh-main-view').style.display = 'none';
                    document.getElementById('mh-topic-detail').style.display = 'block';
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }

                function closeMhTopic() {
                    document.getElementById('mh-main-view').style.display = 'block';
                    document.getElementById('mh-topic-detail').style.display = 'none';
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            </script>
        </section>

        <section id="medical_calculator" class="page">
            <div class="page-header">
                <h1>الحاسبة الطبية</h1>
                <p>احسب معدلك الفصلي أو السنوي</p>
            </div>

            <div id="calc-year-selection" class="years-grid page-actions-sm">
                <div class="year-card" onclick="initCalculator(1)">
                    <div class="year-header">
                        <div class="year-number">1</div>
                        <div class="year-title">السنة الأولى</div>
                    </div>
                </div>
                <div class="year-card" onclick="initCalculator(2)">
                    <div class="year-header">
                        <div class="year-number">2</div>
                        <div class="year-title">السنة الثانية</div>
                    </div>
                </div>
            </div>
            <div id="calc-home-btn" class="page-actions-sm">
                <button class="btn btn-primary-custom" onclick="showPage('home')">العودة
                    للرئيسية</button>
            </div>

            <div id="calculator-container" class="hero-section centered-container-800 calculator-container">

                <h2 id="calc-title" class="hero-title calculator-header-title">حاسبة السنو
                </h2>

                <div id="module-inputs" class="grid-responsive-calculator">
                    <!-- Module inputs will be injected here -->
                </div>

                <div class="calc-result-box">
                    <button class="btn btn-calc-action" onclick="calculateAverage()">احسب المعدل</button>
                    <button class="btn btn-calc-clear" onclick="clearCalculatorFields()">مسح الحقول</button>
                    <div id="calc-result" style="margin-top: 2rem; display: none;">
                        <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem;">معدلك هو:</h3>
                        <div id="average-score" style="font-size: 3rem; font-weight: 800; color: var(--primary);">
                            0.00</div>
                        <p id="result-message"
                            style="font-size: 1.1rem; color: var(--text-secondary); margin-top: 1rem;"></p>
                        <button class="btn" onclick="backToCalcYears()"
                            style="margin-top: 2rem; padding: 0.6rem 2rem;">⬅ العودة للقائمة</button>
                        <button class="btn" onclick="exportToPDF()"
                            style="margin-top: 2rem; padding: 0.6rem 2rem; background: var(--success); margin-right: 10px;">📄
                            تحميل النتيجة</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="qcm" class="page">
            <div class="page-header">
                <h1>بنك الأسئلة (QCM)</h1>
                <p>اختر السنة الدراسية ثم المادة للبدء في حل الأسئلة والتدريب</p>
            </div>

            <div id="qcm-year-selection" class="years-grid" style="margin-top: 2rem;">
                <div class="year-card" onclick="showQcmSubjects(1)">
                    <div class="year-header">
                        <div class="year-number">1</div>
                        <div class="year-title">السنة الأولى</div>
                    </div>
                </div>
                <div class="year-card" onclick="showQcmSubjects(2)">
                    <div class="year-header">
                        <div class="year-number">2</div>
                        <div class="year-title">السنة الثانية</div>
                    </div>
                </div>
            </div>

            <div id="qcm-subjects-container" style="display: none; margin-top: 2rem;">
                <button class="btn" onclick="backToQcmYears()" style="margin-bottom: 2rem;">⬅ العودة لاختيار
                    السنة</button>
                <div id="qcm-subjects-grid" class="years-grid"
                    style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <!-- Subjects will be injected here -->
                </div>
            </div>
        </section>

        <section id="qcm_detail" class="page">
            <div class="page-header">
                <h1 id="qcm-subject-title">المادة</h1>
                <button class="btn" onclick="showPage('qcm')" style="margin-top: 1rem;">⬅ العودة للمواد</button>
            </div>
            <div id="qcm-detail-content" class="empty-page" style="margin-top: 2.5rem; text-align: center;">
                <!-- Content will be injected here -->
            </div>
        </section>

        <!-- Lab Values Reference Section -->
        <section id="lab_values" class="page">
            <div class="page-header">
                <h1>دليل القيم المخبرية (Lab Values) 🧪</h1>
                <p>مرجع سريع للقيم الطبيعية والتحاليل المخبرية الأكثر شيوعاً</p>
            </div>

            <div class="glossary-search-container" style="padding: 1.5rem;">
                <div class="glossary-search-wrapper" id="labSearchWrapper" style="margin-bottom: 0;"
                    onclick="toggleSearch('labSearchWrapper')">
                    <span class="glossary-search-icon">🔍</span>
                    <input type="text" id="labSearch" class="glossary-search-input"
                        placeholder="ابحث عن تحليل (مثلاً: Hb, Urea, Glucose)..." oninput="filterLabValues()"
                        onclick="event.stopPropagation()">
                </div>
            </div>

            <div id="labValuesContainer">
                <!-- Categories and cards will be injected here -->
            </div>

            <div id="labEmpty" class="empty-glossary" style="display: none;">
                <i>🧪</i>
                <p>عذراً، لم نجد نتائج لهذا البحث.</p>
            </div>

            <div style="text-align: center; margin-top: 4rem;">
                <button class="btn" style="background: var(--primary); color: white;" onclick="showPage('home')">العودة
                    للرئيسية</button>
            </div>
        </section>

        <!-- Achievements Page -->
        <section id="achievements" class="page">
            <div class="page-header">
                <h1>🏆 إنجازاتك</h1>
                <p>تابع تقدمك الدراسي واحصل على مكافآت عند إتمام المهام</p>
            </div>

            <div class="hero-section" style="max-width: 1000px; margin: 2rem auto;">
                <!-- Points Display Card -->
                <div class="achievements-card">
                    <!-- Decorative Elements -->
                    <div class="achievements-orb-top"></div>
                    <div class="achievements-orb-bottom"></div>

                    <div class="relative-z1">
                        <!-- Trophy Icon -->
                        <div class="achievements-trophy-container">
                            <span class="achievements-trophy-icon">🏆</span>
                        </div>

                        <!-- Circular Progress -->
                        <div class="achievements-progress-container">
                            <svg width="160" height="160" style="transform: rotate(-90deg);">
                                <circle cx="80" cy="80" r="70" fill="none" stroke="rgba(251, 191, 36, 0.2)"
                                    stroke-width="10" />
                                <circle cx="80" cy="80" r="70" fill="none" stroke="url(#gradient-page)"
                                    stroke-width="10" stroke-dasharray="440" stroke-dashoffset="440"
                                    stroke-linecap="round" style="transition: stroke-dashoffset 1s ease;">
                                    <animate attributeName="stroke-dashoffset" from="440" to="0" dur="2s"
                                        fill="freeze" />
                                </circle>
                                <defs>
                                    <linearGradient id="gradient-page" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="achievements-card-body">
                                <div class="points-number" id="points-display">0</div>
                                <div class="points-label">نقطة حالية</div>
                            </div>
                        </div>

                        <!-- Target Progress -->
                        <div class="achievements-goal-box">
                            <div class="flex-between-vcentered mb-2">
                                <span class="goal-label">الهدف القادم: المستوى الجديد</span>
                                <span class="goal-target">60 نقطة</span>
                            </div>
                            <div class="progress-bar-bg">
                                <div class="progress-bar-fill"></div>
                            </div>
                        </div>

                        <!-- Reset Button -->
                        <button onclick="resetPoints()" class="achievements-reset-btn">
                            <span style="font-size: 1.4rem;">🔄</span>
                            <span>إعادة تعيين النقاط</span>
                        </button>
                    </div>
                </div>

                <!-- Rewards Grid -->
                <h2 style="color: var(--primary-dark); margin-bottom: 1.5rem; font-size: 1.8rem; text-align: center;">
                    كيف تكسب النقاط؟</h2>
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.25rem; margin-bottom: 3rem;">
                    <div class="achievements-reward-card reward-lesson">
                        <div class="achievements-reward-icon"
                            style="background: linear-gradient(135deg, #6366f1, #4f46e5); box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);">
                            📖</div>
                        <div style="flex: 1; text-align: right;">
                            <div
                                style="font-size: 1.1rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 0.25rem;">
                                إنهاء درس جديد</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">تحصل على نقاط عند إتمام دراسة
                                أي
                                موضوع</div>
                        </div>
                        <div class="achievements-points-badge">+10</div>
                    </div>

                    <div class="achievements-reward-card reward-summary">
                        <div class="achievements-reward-icon"
                            style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); box-shadow: 0 4px 16px rgba(139, 92, 246, 0.4);">
                            📝</div>
                        <div style="flex: 1; text-align: right;">
                            <div
                                style="font-size: 1.1rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 0.25rem;">
                                قراءة ملخص فصلي</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">نقاط إضافية عند مراجعة
                                الملخصات
                                الشاملة</div>
                        </div>
                        <div class="achievements-points-badge">+5</div>
                    </div>

                    <div class="achievements-reward-card reward-tool">
                        <div class="achievements-reward-icon"
                            style="background: linear-gradient(135deg, #ec4899, #db27eb); box-shadow: 0 4px 16px rgba(236, 72, 153, 0.4);">
                            🛠️</div>
                        <div style="flex: 1; text-align: right;">
                            <div
                                style="font-size: 1.1rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 0.25rem;">
                                استخدام الأدوات الطبية</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">استخدم الحاسبة أو بنك الأسئلة
                            </div>
                        </div>
                        <div class="achievements-points-badge">+2</div>
                    </div>
                </div>

                <!-- Win Message -->
                <div
                    style="padding: 2rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.15)); border-radius: 20px; border: 2px solid rgba(16, 185, 129, 0.3); text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                    <div style="font-size: 2.5rem; margin-bottom: 1rem;">🎉</div>
                    <div style="color: #10b981; font-weight: 700; font-size: 1.4rem; margin-bottom: 0.75rem;">اجمع 60
                        نقطة للفوز!</div>
                    <div style="color: var(--text-secondary); font-size: 1rem; line-height: 1.6;">ستظهر رسالة فوز مذهلة
                        مع مفاجأة رائعة 🎊</div>
                </div>

                <!-- Back Button -->
                <div style="text-align: center; margin-top: 3rem;">
                    <button class="btn" onclick="showPage('home')" style="padding: 1rem 3rem; font-size: 1.1rem;">العودة
                        للرئيسية</button>
                </div>
            </div>
        </section>

        <!-- Pathology Atlas Section -->
        <section id="pathology_atlas" class="page">
            <div class="page-header">
                <h1>أطلس الأمراض (Pathology Atlas) 🔬</h1>
                <p>معرض تفاعلي للشرائح المجهرية والعلامات السريرية (عربي / Français)</p>
            </div>

            <div class="glossary-search-container" style="padding: 1.5rem;">
                <div class="glossary-search-wrapper" id="pathologySearchWrapper" style="margin-bottom: 1.5rem;"
                    onclick="toggleSearch('pathologySearchWrapper')">
                    <span class="glossary-search-icon">🔍</span>
                    <input type="text" id="pathologySearch" class="glossary-search-input"
                        placeholder="ابحث عن مرض أو شريحة (Anemia, Inflammation)..." oninput="filterPathology()"
                        onclick="event.stopPropagation()">
                </div>

                <div style="text-align: center;">
                    <button class="add-case-btn" onclick="openAddPathologyModal()">
                        <span>✚</span> إضافة حالة جديدة (Add Case)
                    </button>
                </div>

                <div class="pathology-filters">
                    <div class="pathology-filters-wrapper">
                        <button class="filter-btn active" onclick="filterPathologyCategory('all')">الكل (All)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Hematology')">دم (Hemato)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Histology')">أنسجة (Histo)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Cytology')">خلايا (Cyto)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Cardiovascular')">قلب
                            (Cardio)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Respiratory')">تنفس (Resp)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Digestive')">هضمي (GI)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Urinary')">بولي (Uro)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Endocrine')">غدد (Endo)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Reproductive')">تناسلي
                            (Repro)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Nervous System')">أعصاب
                            (Neuro)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Infectious')">عدوى (Infec)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Musculoskeletal')">عظام
                            (Bone)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Dermatopathology')">جلد
                            (Dermato)</button>
                        <button class="filter-btn" onclick="filterPathologyCategory('Miscellaneous')">متنوع
                            (Misc)</button>
                    </div>
                </div>
            </div>
            </div>

            <div id="pathologyGrid" class="rotation-grid"
                style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));">
                <!-- Pathology cards will be injected here -->
            </div>

            <div id="pathologyEmpty" class="empty-glossary" style="display: none;">
                <i>🔬</i>
                <p>عذراً، لم نجد نتائج لهذا البحث.</p>
            </div>

            <div style="text-align: center; margin-top: 4rem;">
                <button class="btn" style="background: var(--primary); color: white;" onclick="showPage('home')">العودة
                    للرئيسية</button>
            </div>
        </section>

        <!-- Pathology Modal viewer -->
        <div id="pathologyModal" class="modal-overlay modal-z-top bg-overlay-dark">
            <span class="close-modal-white" onclick="closePathologyModal()">&times;</span>
            <div class="modal-container-pathology">
                <div id="pathologyModalBody" class="rotation-card"
                    style="border-radius: 20px; overflow: hidden; position: relative;">
                    <!-- Content injected by JS -->
                </div>
            </div>
        </div>

        <!-- Add Pathology Modal -->
        <div id="addPathologyModal" class="modal-overlay modal-z-ultra bg-overlay-glass">
            <div class="modal-container-add-case">
                <span onclick="closeAddPathologyModal()" class="close-modal-circle">&times;</span>

                <div class="modal-header-centered">
                    <h2 class="hero-title-gradient">إضافة حالة مجهرية جديدة</h2>
                    <p class="audience-desc">ساهم في إثراء المحتوى الطبي لزملائك 🔬</p>
                </div>

                <form id="addPathologyForm">
                    <div class="pathology-form-group form-group-centered">
                        <label class="label-centered"><span>📂</span> الفئة الطبية (Category)</label>
                        <select id="case_category" required class="select-centered" title="Select Medical Category">
                            <option value="Hematology">Hematology (دم)</option>
                            <option value="Histology">Histology (أنسجة)</option>
                            <option value="Cytology">Cytology (خلايا)</option>
                            <option value="Cardiovascular">Cardiovascular (قلب)</option>
                            <option value="Respiratory">Respiratory (تنفس)</option>
                            <option value="Digestive">Digestive (هضمي)</option>
                            <option value="Urinary">Urinary (بولي)</option>
                            <option value="Endocrine">Endocrine (غدد)</option>
                            <option value="Reproductive">Reproductive (تناسلي)</option>
                            <option value="Nervous System">Nervous System (أعصاب)</option>
                            <option value="Infectious">Infectious (عدوى)</option>
                            <option value="Musculoskeletal">Musculoskeletal (عظام)</option>
                            <option value="Dermatopathology">Dermatopathology (جلد)</option>
                            <option value="Miscellaneous">Miscellaneous (متنوع)</option>
                        </select>
                    </div>

                    <div class="ar-section">
                        <div class="form-section-header"><span>🇸🇦</span> القسم العربي (Arabic Section)</div>
                        <div class="pathology-form-group">
                            <label><span>🏷️</span> اسم المرض / الشريحة</label>
                            <input type="text" id="case_title_ar" required placeholder="مثلاً: فقر الدم بنقص الحديد">
                        </div>
                        <div class="pathology-form-group">
                            <label><span>🎯</span> التشخيص النهائي</label>
                            <input type="text" id="case_diag_ar" required placeholder="التشخيص المختصر...">
                        </div>
                        <div class="pathology-form-group">
                            <label><span>📝</span> الملاحظات المجهرية (سطر لكل ملاحظة)</label>
                            <textarea id="case_findings_ar" rows="3" required
                                placeholder="• نقص الهيموغلوبين&#10;• صغر حجم الكريات..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>🤒</span> الأعراض السريرية</label>
                            <textarea id="case_symptoms_ar" rows="2" placeholder="تعب، شحوب، ضيق تنفس..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>💊</span> العلاج المقترح</label>
                            <textarea id="case_treatment_ar" rows="2"
                                placeholder="مكملات الحديد، نظام غذائي..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>✅</span> التصرف الصحيح</label>
                            <textarea id="case_action_ar" rows="2" placeholder="إجراء فحص دم شامل..."></textarea>
                        </div>
                    </div>

                    <div class="fr-section mt-3">
                        <div class="form-section-header"><span>🇫🇷</span> Section Française (French Section)</div>
                        <div class="pathology-form-group">
                            <label><span>🏷️</span> Nom de la Pathologie / Lame</label>
                            <input type="text" id="case_title_fr" required placeholder="ex: Anémie Ferriprive">
                        </div>
                        <div class="pathology-form-group">
                            <label><span>🎯</span> Diagnostic Final</label>
                            <input type="text" id="case_diag_fr" required placeholder="Diagnostic court...">
                        </div>
                        <div class="pathology-form-group">
                            <label><span>📝</span> Observations Microscopiques (une par ligne)</label>
                            <textarea id="case_findings_fr" rows="3" required
                                placeholder="• Diminution de l'Hb&#10;• Microcytose..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>🤒</span> Symptômes Cliniques</label>
                            <textarea id="case_symptoms_fr" rows="2"
                                placeholder="Fatigue, pâleur, dyspnée..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>💊</span> Traitement Proposé</label>
                            <textarea id="case_treatment_fr" rows="2" placeholder="Suppléments de fer..."></textarea>
                        </div>
                        <div class="pathology-form-group">
                            <label><span>✅</span> Conduite à Tenir</label>
                            <textarea id="case_action_fr" rows="2" placeholder="Faire un hémogramme..."></textarea>
                        </div>
                    </div>

                    <div style="margin-top: 3.5rem; text-align: center;">
                        <button type="button" class="btn" onclick="saveNewPathologyCase()"
                            style="width: 100%; max-width: 500px; padding: 1.25rem; font-size: 1.3rem; font-weight: 800; border-radius: 20px; background: var(--gradient-1); box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);">
                            حفظ ومشاركة الحالة (Save & Share) 🚀
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Add Contribution Modal -->
        <div id="addContributionModal" class="modal"
            style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; background: rgba(0,0,0,0.6); backdrop-filter: blur(12px); overflow-y: auto;">
            <div class="modal-content"
                style="max-width: 600px; margin: 4rem auto; position: relative; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 32px; padding: 2.5rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
                <span onclick="closeAddContributionModal()"
                    style="position: absolute; top: 1.5rem; right: 1.5rem; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.05); border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s;">&times;</span>

                <div style="text-align: center; margin-bottom: 2rem;">
                    <h2 style="font-size: 2rem; font-weight: 900; color: var(--primary-dark);">إضافة مساهمة جديدة 🌟
                    </h2>
                    <p style="color: var(--text-secondary);">ساهم في إثراء المحتوى لزملائك</p>
                </div>

                <form id="addContributionForm" onsubmit="event.preventDefault(); saveStudentContribution();">
                    <div class="pathology-form-group">
                        <label>عنوان المساهمة</label>
                        <input type="text" id="cont_title" required placeholder="مثلاً: شرح تخطيط القلب">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="pathology-form-group">
                            <label>النوع</label>
                            <select id="cont_type">
                                <option value="lesson">📖 درس</option>
                                <option value="summary">📑 ملخص</option>
                                <option value="video">🎥 فيديو</option>
                                <option value="other">✨ أخرى</option>
                            </select>
                        </div>
                        <div class="pathology-form-group">
                            <label>السنة الدراسية</label>
                            <select id="cont_year">
                                <option value="1">1 (الأولى)</option>
                                <option value="2">2 (الثانية)</option>
                                <option value="3">3 (الثالثة)</option>
                                <option value="4">4 (الرابعة)</option>
                                <option value="5">5 (الخامسة)</option>
                                <option value="6">6 (السادسة)</option>
                            </select>
                        </div>
                    </div>

                    <div class="pathology-form-group">
                        <label>المادة / الموديول</label>
                        <input type="text" id="cont_subject" required placeholder="مثلاً: Cardiologie">
                    </div>

                    <div class="pathology-form-group">
                        <label>الرابط (External Link)</label>
                        <input type="url" id="cont_link" required placeholder="https://...">
                    </div>

                    <div class="pathology-form-group">
                        <label>اسم المساهم (اختياري)</label>
                        <input type="text" id="cont_author" placeholder="اسمك الكريم">
                    </div>

                    <div style="margin-top: 2rem;">
                        <button type="submit" class="btn"
                            style="width: 100%; padding: 1rem; border-radius: 15px; background: var(--primary); color: white; font-weight: 800;">
                            نشر المساهمة الآن 🚀
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <section id="about_us" class="page">
            <div class="page-header">
                <h1>من نحن</h1>
                <p>موقع مصمم من طالب طب لزملائه الطلاب</p>
            </div>
            <div class="container about-section">

                <div class="about-card">
                    <h2>❓ لماذا أنشأنا هذا الموقع؟</h2>
                    <p><strong>لأننا عشنا المشكلة الحقيقية:</strong></p>
                    <ul>
                        <li><strong>كثرة المصادر:</strong>عشرات الكتب والمواقع
                            والفيديوهات بدون توجيه واضح</li>
                        <li><strong>التشتت:</strong>لا تعرف من أين تبدأ أو ما الذي
                            يجب أن تركز عليه</li>
                        <li><strong>ضغط الدراسة:</strong>ساعات طويلة من الدراسة دون
                            نتائج مرضية</li>
                        <li><strong>نصائح متناقضة:</strong>كل شخص يعطيك نصيحة مختلفة
                            تزيدك حيرة</li>
                    </ul>
                </div>

                <div class="about-card">
                    <h2>🌟 ما الذي يميزنا؟</h2>
                    <ul>
                        <li><strong>نرشّح مصادر قليلة ومجربة:</strong>لا نثقل
                            عليك بالمعلومات، نختار لك الأفضل</li>
                        <li><strong>نركز على كيف تدرس وليس ماذا
                                تحفظ:</strong>نعلمك استراتيجيات الدراسة الذكية
                        </li>
                        <li><strong>نتحدث عن الصحة النفسية بصدق:</strong>لأن
                            النجاح ليس فقط في الدرجات</li>
                        <li><strong>المحتوى مكتوب من طلاب حاليين:</strong>نفهم
                            تحدياتك لأننا نعيشها</li>
                        <li><strong>لا نروّج للوهم أو الطرق
                                السحرية:</strong>نؤمن أن النجاح يأتي بالجهد
                            الذكي والاستمرارية</li>
                    </ul>
                </div>

                <div class="about-card">
                    <h2>🎯 لمن هذا الموقع؟</h2>
                    <ul>
                        <li><strong>طلاب الطب</strong>(خصوصًا السنوات
                            الأولى)</li>
                        <li><strong>من يشعر بالضياع أو الإرهاق</strong>في
                            رحلته الأكاديمية</li>
                        <li><strong>من يريد الدراسة بذكاء</strong>لا بعدد
                            ساعات الدراسة</li>
                    </ul>
                    <div class="not-for">
                        <h3>❌ هذا الموقع ليس لمن يبحث عن:</h3>
                        <ul>
                            <li>طرق مختصرة أو حلول سحرية</li>
                            <li>الغش أو الاعتماد على الآخرين</li>
                            <li>النتائج دون جهد حقيقي</li>
                        </ul>
                    </div>
                </div>

                <div class="about-card transparency-card">
                    <h2>⚠️ الشفافية والمسؤولية</h2>
                    <ul>
                        <li><strong>لسنا أطباء مختصين بعد:</strong>نحن
                            طلاب مثلنا مثل باقي الطلاب</li>
                        <li><strong>المحتوى تعليمي
                                وتجريبي:</strong>بناءً على تجاربنا
                            الشخصية وتجارب زملائنا</li>
                        <li><strong>لا يغني عن المراجع الرسمية أو
                                الأساتذة:</strong>ننصح دائمًا بالرجوع
                            للمصادر الأكاديمية المعتمدة</li>
                    </ul>
                </div>

                <div class="human-touch">
                    <p><strong>طالب مثلك • مررت بنفس الصعوبات •
                            الموقع ينمو معكم</strong></p>
                    <p>هذا يحول الموقع من "منصة" إلى "صديق" </p>
                </div>

                <div class="contact-info">
                    <h3>📱 معلومات التواصل</h3>
                    <p><strong>الاسم:</strong>زميل</p>
                    <p><strong>المرحلة الدراسية:</strong>سنة
                        ثانية طب</p>
                    <p><strong>البريد الإلكتروني:</strong><a href="mailto:medgpa00@gmail.com"
                            class="contact-email">medgpa00@gmail.com</a>
                    </p>
                </div>
            </div>
        </section>

        <section id="med_glossary" class="page">
            <div class="page-header">
                <h1>قاموس الاختصارات الطبية (Med-Glossary) 📚</h1>
                <p>دليلك الشامل لفك رموز واختصارات الطب باللغتين الفرنسية والإنجليزية</p>
            </div>

            <div class="glossary-search-container">
                <div class="glossary-search-wrapper" id="glossarySearchWrapper"
                    onclick="toggleSearch('glossarySearchWrapper')">
                    <span class="glossary-search-icon">🔍</span>
                    <input type="text" id="glossarySearch" class="glossary-search-input"
                        placeholder="ابحث عن اختصار (مثلاً: ECG, HTA, MRI)..." oninput="filterGlossary()"
                        onclick="event.stopPropagation()">
                </div>

                <div id="alphabetFilter" class="alphabet-filter">
                    <!-- Alphabet buttons will be injected here -->
                </div>
            </div>

            <div id="glossaryGrid" class="glossary-grid">
                <!-- Glossary cards will be injected here -->
            </div>

            <div id="glossaryEmpty" class="empty-glossary" style="display: none;">
                <i>🔍</i>
                <p>عذراً، لم نجد نتائج لهذا البحث. جرب اختصاراً آخر!</p>
            </div>

            <div style="text-align: center; margin-top: 4rem;">
                <button class="btn" style="background: var(--primary); color: white;" onclick="showPage('home')">العودة
                    للرئيسية</button>
            </div>
        </section>


        <!-- Students' Section -->
        <section id="students_section" class="page">
            <div class="students-hero">
                <h1 style="font-size: 2.5rem; font-weight: 900; color: var(--primary-dark); margin-bottom: 1rem;">👨‍🎓
                    مساحة الطلاب المتطوعين</h1>
                <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto 2rem;">هذه
                    المساحة مخصصة لمشاركاتكم. يمكنكم إضافة دروس، ملخصات، أو فيديوهات لمساعدة زملائكم في مسيرتهم
                    الدراسية.</p>
                <button class="add-contribution-btn" onclick="openAddContributionModal()"
                    style="background: var(--primary); color: white; border: none; padding: 1rem 2.5rem; border-radius: 50px; font-weight: 800; cursor: pointer; font-size: 1.1rem; box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3); transition: all 0.3s ease;">
                    <span>➕</span> إضافة مساهمة جديدة
                </button>
            </div>

            <div class="contribution-filters">
                <div class="filter-chip active" onclick="filterContributions('all', this)">الكل</div>
                <div class="filter-chip" onclick="filterContributions('lesson', this)">📖 دروس</div>
                <div class="filter-chip" onclick="filterContributions('summary', this)">📑 ملخصات</div>
                <div class="filter-chip" onclick="filterContributions('video', this)">🎥 فيديوهات</div>
                <div class="filter-chip" onclick="filterContributions('other', this)">✨ أخرى</div>
            </div>

            <div id="contributionGrid" class="contribution-grid">
                <!-- Injected by JS -->
            </div>

            <div id="contributionEmpty" class="empty-glossary contribution-empty-state">
                <div class="empty-state-icon">📂</div>
                <p class="empty-state-text">لا توجد مساهمات هنا بعد...</p>
                <p class="empty-state-subtext">كن أول من يشارك درساً أو ملخصاً لمساعدة زملائك!</p>
            </div>

            <div style="text-align: center; margin-top: 4rem;">
                <button class="btn" style="background: var(--primary); color: white;" onclick="showPage('home')">العودة
                    للرئيسية</button>
            </div>
        </section>

        <section id="rotation_tracker" class="page">
            <div class="page-header">
                <h1>متتبع المسار الإكلينيكي 🏥</h1>
                <p>نظم تربصاتك الميدانية، تتبع تقدمك، ووثق المهارات التي أتقنتها في المستشفى</p>
            </div>

            <div class="tracker-dashboard" id="trackerDashboard">
                <div class="stat-card">
                    <div style="font-size: 2rem; color: var(--primary);">🏥</div>
                    <div style="font-size: 1.5rem; font-weight: 800;" id="totalRotationsDisplay">0</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">إجمالي التربصات</div>
                </div>
                <div class="stat-card">
                    <div style="font-size: 2rem; color: var(--success);">📅</div>
                    <div style="font-size: 1.5rem; font-weight: 800;" id="completedDaysDisplay">0</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">أيام مكتملة</div>
                </div>
                <div class="stat-card">
                    <div style="font-size: 2rem; color: var(--accent-1);">🎯</div>
                    <div style="font-size: 1.5rem; font-weight: 800;" id="masteredSkillsDisplay">0</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">مهارات متقنة</div>
                </div>
            </div>

            <div id="rotationForm" class="tracker-form" style="display: none;">
                <h2>إضافة تربص جديد 🏥</h2>
                <div class="form-group">
                    <label>إسم المصلحة (مثال: Cardiologie)</label>
                    <input type="text" id="rotService" placeholder="ادخل إسم المصلحة">
                </div>
                <div class="form-group">
                    <label>المستشفى</label>
                    <input type="text" id="rotHospital" placeholder="مثال: المستشفى الجامعي">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>تاريخ اليوم</label>
                        <input type="date" id="rotStart">
                    </div>
                    <div class="form-group">
                        <label>الوقت / الفترة</label>
                        <input type="text" id="rotTime" placeholder="مثال: 08:00 - 14:00">
                    </div>
                </div>
                <div class="form-group">
                    <label>المهارات المكتسبة (افصل بينها بفاصلة)</label>
                    <input type="text" id="rotSkills" placeholder="مثال: سحب دم، خياطة جروح، تخطيط قلب">
                    <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">اتركه فارغاً
                        للحصول على المهارات الافتراضية</p>
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <button class="btn" onclick="addRotation()">حفظ التربص</button>
                    <button class="btn" style="background: var(--gray);" onclick="toggleRotationForm()">إلغاء</button>
                </div>
            </div>

            <div class="rotation-grid" id="rotationGrid">
                <!-- Cards will be injected here -->
            </div>

            <div id="addRotationBtn" class="add-rotation-btn" onclick="toggleRotationForm()">+</div>
        </section>
    </main>


    <footer>
        <div class="container footer-content">
            <p class="copyright">© 2026 MedGpa - All Rights Reserved</p>
            <p>منصة مخصصة لطلاب كليات الطب</p>
        </div>
    </footer>
    <script>
        /* Expandable Search Logic */
        function toggleSearch(wrapperId) {
            const wrapper = document.getElementById(wrapperId);
            const input = wrapper.querySelector('input');

            // Close other open searches first
            document.querySelectorAll('.glossary-search-wrapper.active').forEach(w => {
                if (w.id !== wrapperId) w.classList.remove('active');
            });

            wrapper.classList.add('active');
            setTimeout(() => input.focus(), 100);
        }

        // Close search when clicking outside
        document.addEventListener('click', function (event) {
            const isClickInside = event.target.closest('.glossary-search-wrapper');
            if (!isClickInside) {
                document.querySelectorAll('.glossary-search-wrapper.active').forEach(wrapper => {
                    const input = wrapper.querySelector('input');
                    if (!input.value) { // Only collapse if empty
                        wrapper.classList.remove('active');
                    }
                });
            }
        });

        // Header scroll effect

        window.addEventListener('scroll', function () {
            const header = document.getElementById('mainHeader');

            if (window.scrollY > 30) {
                header.classList.add('scrolled');
            }

            else {
                header.classList.remove('scrolled');
            }
        });

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        if (themeToggle) {
            // Check for saved theme preference or respect OS preference
            const savedTheme = localStorage.getItem('mednova_theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
            }

            else {
                body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
            }

            themeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');

                if (body.classList.contains('dark-mode')) {
                    themeToggle.textContent = '☀️';
                    localStorage.setItem('mednova_theme', 'dark');
                }

                else {
                    themeToggle.textContent = '🌙';
                    localStorage.setItem('mednova_theme', 'light');
                }
            });
        }

        else {
            console.error('Theme toggle button not found!');
        }

        // Lab Values Logic
        const labValuesData = [
            {
                category: "Hematology (الدمويات)",
                items: [
                    { name: "Hémoglobine (Hb) - Homme", range: "13.5 - 17.5", unit: "g/dL", note: "Anémie < 13.5" },
                    { name: "Hémoglobine (Hb) - Femme", range: "12.0 - 15.5", unit: "g/dL", note: "Anémie < 12.0" },
                    { name: "Hématocrite (Hct) - Homme", range: "41 - 50", unit: "%", note: "" },
                    { name: "Hématocrite (Hct) - Femme", range: "36 - 44", unit: "%", note: "" },
                    { name: "Globules Blancs (WBC)", range: "4,500 - 11,000", unit: "/mm³", note: "Infection si élevé" },
                    { name: "Plaquettes (PLT)", range: "150,000 - 450,000", unit: "/mm³", note: "Risque hémorragique si < 50k" },
                    { name: "Volume Globulaire Moyen (VGM/MCV)", range: "80 - 100", unit: "fL", note: "Microcytaire < 80, Macrocytaire > 100" },
                    { name: "TCMH (MCH)", range: "27 - 33", unit: "pg", note: "" },
                    { name: "IDR (RDW)", range: "11.5 - 14.5", unit: "%", note: "Indicateur d'anisocytose" },
                    { name: "Réticulocytes", range: "0.5 - 1.5", unit: "%", note: "Réponse médullaire" },
                    { name: "Neutrophiles", range: "40 - 70", unit: "%", note: "Élevé dans les infections bactériennes" },
                    { name: "Lymphocytes", range: "20 - 45", unit: "%", note: "Élevé dans les infections virales" },
                    { name: "Monocytes", range: "2 - 8", unit: "%", note: "" },
                    { name: "Éosinophiles", range: "1 - 4", unit: "%", note: "Allergie/Parasites si élevé" },
                    { name: "Basophiles", range: "0 - 1", unit: "%", note: "" }
                ]
            },
            {
                category: "Electrolytes & Minerals (الشاريدات والمعادن)",
                items: [
                    { name: "Natrémie (Na+)", range: "135 - 145", unit: "mEq/L", note: "Critique < 125 ou > 155" },
                    { name: "Kaliémie (K+)", range: "3.5 - 5.1", unit: "mEq/L", note: "Critique < 3.0 ou > 6.0" },
                    { name: "Chlorémie (Cl-)", range: "98 - 107", unit: "mEq/L", note: "" },
                    { name: "Bicarbonates (CO2/HCO3)", range: "22 - 28", unit: "mEq/L", note: "" },
                    { name: "Calcémie Totale (Ca2+)", range: "8.5 - 10.5", unit: "mg/dL", note: "Corriger pour l'albumine" },
                    { name: "Calcium Ionisé", range: "4.5 - 5.6", unit: "mg/dL", note: "Forme active" },
                    { name: "Magnésémie (Mg2+)", range: "1.7 - 2.2", unit: "mg/dL", note: "" },
                    { name: "Phosphorémie (PO4)", range: "2.5 - 4.5", unit: "mg/dL", note: "" },
                    { name: "Trou Anionique", range: "8 - 16", unit: "mEq/L", note: "Outil d'acidose métabolique" }
                ]
            },
            {
                category: "Renal Function (وظائف الكلى)",
                items: [
                    { name: "Créatininémie (Homme)", range: "0.7 - 1.3", unit: "mg/dL", note: "Élevée dans l'insuffisance rénale" },
                    { name: "Créatininémie (Femme)", range: "0.6 - 1.1", unit: "mg/dL", note: "" },
                    { name: "Urée (BUN)", range: "7 - 20", unit: "mg/dL", note: "" },
                    { name: "Rapport BUN/Créatinine", range: "10:1 - 20:1", unit: "", note: ">20:1 suspecter déshydratation" },
                    { name: "Débit de Filtration Glomérulaire (DFG)", range: "> 90", unit: "mL/min", note: "IRC si < 60" },
                    { name: "Acide Urique (Homme)", range: "3.5 - 7.2", unit: "mg/dL", note: "Marqueur de la goutte" },
                    { name: "Acide Urique (Femme)", range: "2.6 - 6.0", unit: "mg/dL", note: "" },
                    { name: "Albuminurie", range: "< 30", unit: "mg/g", note: "Marqueur précoce de dommage rénal" }
                ]
            },
            {
                category: "Liver Function (وظائف الكبد)",
                items: [
                    { name: "ALAT (TGP)", range: "7 - 55", unit: "U/L", note: "Dommage hépatique spécifique" },
                    { name: "ASAT (TGO)", range: "8 - 48", unit: "U/L", note: "" },
                    { name: "Phosphatases Alcalines (PAL)", range: "40 - 129", unit: "U/L", note: "Élévation biliaire ou osseuse" },
                    { name: "Gamma-GT", range: "8 - 61", unit: "U/L", note: "Sensible aux obstructions biliaires" },
                    { name: "Bilirubine Totale", range: "0.1 - 1.2", unit: "mg/dL", note: "Ictère si > 2.5" },
                    { name: "Bilirubine Directe", range: "0 - 0.3", unit: "mg/dL", note: "Conjuguée" },
                    { name: "Albumine Sérique", range: "3.5 - 5.0", unit: "g/dL", note: "Synthétisée par le foie" },
                    { name: "Protéines Totales", range: "6.3 - 7.9", unit: "g/dL", note: "" },
                    { name: "Ammoniémie", range: "15 - 45", unit: "µg/dL", note: "Neurotoxique si élevé" }
                ]
            },
            {
                category: "Cardiac Markers (واصمات القلب)",
                items: [
                    { name: "Troponine I (Tnl)", range: "< 0.04", unit: "ng/mL", note: "Marqueur d'infarctus du myocarde" },
                    { name: "CK-MB", range: "0 - 5", unit: "ng/mL", note: "" },
                    { name: "CK Totale (CPK)", range: "38 - 174", unit: "U/L", note: "Homme légèrement plus élevé" },
                    { name: "BNP", range: "< 100", unit: "pg/mL", note: "Marqueur d'insuffisance cardiaque" },
                    { name: "NT-proBNP", range: "< 125", unit: "pg/mL", note: "Selon l'âge" },
                    { name: "Myoglobine", range: "0 - 85", unit: "ng/mL", note: "Marqueur précoce non spécifique" }
                ]
            },
            {
                category: "Coagulation (التخثر)",
                items: [
                    { name: "Temps de Prothrombine (TP)", range: "11 - 13.5", unit: "sec", note: "" },
                    { name: "INR (Normal)", range: "0.8 - 1.1", unit: "", note: "2.0-3.0 sous Warfarine" },
                    { name: "TCA (aPTT)", range: "25 - 35", unit: "sec", note: "Suivi de l'héparine" },
                    { name: "D-Dimères", range: "< 500", unit: "ng/mL", note: "Exclure MTEV/EP si négatif" },
                    { name: "Fibrinogène", range: "200 - 400", unit: "mg/dL", note: "Réactif de phase aiguë" }
                ]
            },
            {
                category: "Diabetes & Metabolic (السكري والأيض)",
                items: [
                    { name: "Glycémie à jeun", range: "70 - 99", unit: "mg/dL", note: "Diabète si > 126" },
                    { name: "HbA1c", range: "4.0 - 5.6", unit: "%", note: "Pré-diabète 5.7-6.4%" },
                    { name: "Glycémie aléatoire", range: "< 140", unit: "mg/dL", note: "" },
                    { name: "HGPO (2h)", range: "< 140", unit: "mg/dL", note: "Test post-charge" },
                    { name: "Peptide-C", range: "1.1 - 4.4", unit: "ng/mL", note: "Marqueur de production d'insuline" },
                    { name: "Lactate", range: "0.5 - 2.2", unit: "mmol/L", note: "Marqueur de sepsis si élevé" }
                ]
            },
            {
                category: "Lipids & Nutrition (الدهون والتغذية)",
                items: [
                    { name: "Cholestérol Total", range: "< 200", unit: "mg/dL", note: "" },
                    { name: "LDL (Mauvais)", range: "< 100", unit: "mg/dL", note: "Cible plus basse si haut risque" },
                    { name: "HDL (Bon)", range: "> 40", unit: "mg/dL", note: "> 60 est protecteur" },
                    { name: "Triglycérides", range: "< 150", unit: "mg/dL", note: "" },
                    { name: "VLDL", range: "2 - 30", unit: "mg/dL", note: "" }
                ]
            },
            {
                category: "Thyroid & Endocrine (الغدد الصماء)",
                items: [
                    { name: "TSH", range: "0.4 - 4.0", unit: "mIU/L", note: "Hyper < 0.4, Hypo > 4.0" },
                    { name: "T4 Libre (Thyroxine)", range: "0.8 - 1.8", unit: "ng/dL", note: "" },
                    { name: "T3 Libre", range: "2.3 - 4.2", unit: "pg/mL", note: "" },
                    { name: "Cortisol (8h AM)", range: "5 - 23", unit: "µg/dL", note: "" },
                    { name: "ACTH", range: "6 - 58", unit: "pg/mL", note: "" },
                    { name: "PTH (Parathormone)", range: "10 - 65", unit: "pg/mL", note: "" }
                ]
            },
            {
                category: "Vitamins & Iron (الفيتامينات والحديد)",
                items: [
                    { name: "Vitamine B12", range: "200 - 900", unit: "pg/mL", note: "" },
                    { name: "Folates (Acide Folique)", range: "2 - 20", unit: "ng/mL", note: "" },
                    { name: "Vitamine D (Totale)", range: "30 - 80", unit: "ng/mL", note: "Déficience < 20" },
                    { name: "Fer Sérique", range: "60 - 170", unit: "µg/dL", note: "" },
                    { name: "Ferritine (Homme)", range: "20 - 250", unit: "ng/mL", note: "Fer de réserve" },
                    { name: "Ferritine (Femme)", range: "10 - 120", unit: "ng/mL", note: "" },
                    { name: "CTFF (TIBC)", range: "240 - 450", unit: "µg/dL", note: "" },
                    { name: "Saturation de la Transferrine", range: "20 - 50", unit: "%", note: "" }
                ]
            },
            {
                category: "ABG - Arterial Blood Gas (غازات الدم)",
                items: [
                    { name: "pH", range: "7.35 - 7.45", unit: "", note: "Acidose < 7.35, Alcalose > 7.45" },
                    { name: "PaCO2", range: "35 - 45", unit: "mmHg", note: "Marqueur respiratoire" },
                    { name: "PaO2", range: "80 - 100", unit: "mmHg", note: "" },
                    { name: "Bicarbonates (HCO3)", range: "22 - 26", unit: "mEq/L", note: "Marqueur métabolique" },
                    { name: "Saturation en O2 (SaO2)", range: "95 - 100", unit: "%", note: "" },
                    { name: "Excès de Base", range: "-2 to +2", unit: "mmol/L", note: "" }
                ]
            },
            {
                category: "Hormones & Reproductive (الهرمونات والتكاثر)",
                items: [
                    { name: "Testostérone (Homme)", range: "270 - 1070", unit: "ng/dL", note: "Selon l'âge" },
                    { name: "Œstradiol (Femme)", range: "30 - 400", unit: "pg/mL", note: "Varie avec le cycle" },
                    { name: "Progestérone", range: "1 - 20", unit: "ng/mL", note: "" },
                    { name: "FSH", range: "1.5 - 12.4", unit: "mIU/mL", note: "" },
                    { name: "LH", range: "1.7 - 8.6", unit: "mIU/mL", note: "" },
                    { name: "Prolactine (Femme)", range: "4.8 - 23.3", unit: "ng/mL", note: "" },
                    { name: "PSA (Total)", range: "< 4.0", unit: "ng/mL", note: "Dépistage > 50 ans" }
                ]
            },
            {
                category: "Immunology (المناعة والالتهاب)",
                items: [
                    { name: "Protéine C-Réactive (CRP)", range: "< 1.0", unit: "mg/dL", note: "Inflammation aiguë" },
                    { name: "Vitesse de Sédimentation (VS)", range: "< 20", unit: "mm/hr", note: "" },
                    { name: "FAN (ANA)", range: "Négatif", unit: "", note: "Dépistage auto-immun" },
                    { name: "Facteur Rhumatoïde", range: "< 14", unit: "IU/mL", note: "" },
                    { name: "Complément C3", range: "80 - 160", unit: "mg/dL", note: "" },
                    { name: "Complément C4", range: "16 - 48", unit: "mg/dL", note: "" },
                    { name: "IgG (Totale)", range: "700 - 1600", unit: "mg/dL", note: "" },
                    { name: "IgA", range: "70 - 400", unit: "mg/dL", note: "" },
                    { name: "IgM", range: "40 - 230", unit: "mg/dL", note: "" }
                ]
            },
            {
                category: "Tumor Markers (واصمات الأورام)",
                items: [
                    { name: "ACE (CEA)", range: "0 - 3", unit: "ng/mL", note: "Marqueur Colon/GI" },
                    { name: "Alpha-fœtoprotéine (AFP)", range: "< 10", unit: "ng/mL", note: "" },
                    { name: "CA 125", range: "0 - 35", unit: "U/mL", note: "Marqueur cancer de l'ovaire" },
                    { name: "CA 15-3", range: "< 30", unit: "U/mL", note: "Marqueur cancer du sein" },
                    { name: "CA 19-9", range: "< 37", unit: "U/mL", note: "Marqueur cancer du pancréas" },
                    { name: "hCG (Tumoral)", range: "Négatif", unit: "mIU/mL", note: "" }
                ]
            },
            {
                category: "CSF Analysis (السائل الدماغي الشوكي)",
                items: [
                    { name: "Glycorachie", range: "40 - 70", unit: "mg/dL", note: "60% de la glycémie" },
                    { name: "Protéinorachie", range: "15 - 45", unit: "mg/dL", note: "" },
                    { name: "Globules Blancs (LCR)", range: "0 - 5", unit: "cells/mm³", note: "Surtout lymphocytes" },
                    { name: "Pression d'Ouverture", range: "7 - 18", unit: "cm H2O", note: "" },
                    { name: "Lactate (LCR)", range: "1.1 - 2.4", unit: "mmol/L", note: "" }
                ]
            }
        ];

        function renderLabValues(filter = '') {
            const container = document.getElementById('labValuesContainer');
            const emptyMsg = document.getElementById('labEmpty');
            let html = '';
            let totalFound = 0;

            labValuesData.forEach(cat => {
                const filteredItems = cat.items.filter(item =>
                    item.name.toLowerCase().includes(filter.toLowerCase())
                );

                if (filteredItems.length > 0) {
                    totalFound += filteredItems.length;
                    html += `<div class="lab-category-header">${cat.category}</div>`;
                    html += `<div class="lab-grid">`;
                    filteredItems.forEach(item => {
                        html += `
                                <div class="lab-card">
                                    <div class="lab-name">${item.name} 🧪</div>
                                    <div class="lab-range">${item.range} <span class="lab-unit">${item.unit}</span></div>
                                    ${item.note ? `<div class="lab-note">📌 ${item.note}</div>` : ''}
                                </div>
                            `;
                    });
                    html += `</div>`;
                }
            });

            container.innerHTML = html;
            emptyMsg.style.display = totalFound === 0 ? 'block' : 'none';
        }

        function filterLabValues() {
            const query = document.getElementById('labSearch').value;
            renderLabValues(query);
        }

        // In showPage function, add:
        // if (pageId === 'lab_values') renderLabValues();

        window.addEventListener('load', () => {
            if (window.location.hash === '#lab_values') renderLabValues();
        });

        // Show specific page function with active navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            // Hide subject detail section
            const subDetail = document.getElementById('subjectDetailSection');
            if (subDetail) subDetail.classList.remove('active');

            // Show the selected page
            const targetPage = document.getElementById(pageId);
            if (targetPage) targetPage.classList.add('active');

            // Update URL hash for bookmarking
            window.location.hash = pageId;

            // Feature Initialization
            if (['medical_calculator', 'med_glossary', 'lab_values', 'pathology_atlas', 'rotation_tracker'].includes(pageId)) {
                updatePoints(5);
            }
            if (pageId === 'med_glossary' && typeof initGlossary === 'function') {
                initGlossary();
            }
            if (pageId === 'lab_values') {
                renderLabValues();
            }
            if (pageId === 'rotation_tracker' && typeof renderRotations === 'function') {
                renderRotations();
            }
        }

        // Switch semester function
        function switchSemester(contentType, semester) {

            // Update button states
            const buttons = document.querySelectorAll(`.${contentType}-toggle .semester-btn`);
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Show selected semester content
            const semesterContents = document.querySelectorAll(`#${contentType}Content .semester-content`);
            semesterContents.forEach(content => content.classList.remove('active'));

            document.getElementById(`${contentType}-${semester}`).classList.add('active');
        }

        // Theme Palette Logic
        function setThemePalette(palette) {
            const body = document.body;
            // Remove existing themes
            body.classList.remove('theme-surgeon', 'theme-pharmacist', 'theme-sunset', 'theme-dentist');

            if (palette !== 'default') {
                body.classList.add(`theme-${palette}`);
            }

            localStorage.setItem('medgpa_theme_palette', palette);

            // Close menu
            const menu = document.getElementById('themeMenu');
            if (menu) menu.classList.remove('active');
        }

        function toggleThemeMenu() {
            const menu = document.getElementById('themeMenu');
            if (menu) menu.classList.toggle('active');
        }

        // Initial Palette Load
        const savedPalette = localStorage.getItem('medgpa_theme_palette');
        if (savedPalette) {
            setThemePalette(savedPalette);
        }

        // Dark Mode Logic
        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            localStorage.setItem('medgpa_dark_mode', isDarkMode ? 'enabled' : 'disabled');

            // Update button icon
            const btn = document.getElementById('themeToggleNav');
            if (btn) {
                btn.textContent = isDarkMode ? '☀️' : '🌙';
            }
        }

        // Initialize Dark Mode on Load
        document.addEventListener('DOMContentLoaded', () => {
            const savedDarkMode = localStorage.getItem('medgpa_dark_mode');
            const btn = document.getElementById('themeToggleNav');

            if (savedDarkMode === 'enabled') {
                document.body.classList.add('dark-mode');
                if (btn) btn.textContent = '☀️';
            }

            if (btn) {
                btn.addEventListener('click', toggleDarkMode);
            }
        });

        // Close theme menu when clicking outside
        window.addEventListener('click', (e) => {
            const menu = document.getElementById('themeMenu');
            const btn = document.querySelector('.theme-btn');
            if (menu && menu.classList.contains('active') && !menu.contains(e.target) && e.target !== btn) {
                menu.classList.remove('active');
            }
        });

        // Show subject detail function
        function showSubjectDetail(subjectId, targetLessonTitle) {
            const subject = SITE_DATA.subjects[subjectId];
            if (!subject) return;

            const { title, description, lessons, youtube, summaries, tips, importance } = subject;

            document.getElementById('subjectTitle').textContent = title;
            document.getElementById('subjectOverview').textContent = description;

            // Handle lessons
            const lessonsContent = document.getElementById('lessonsContent');
            lessonsContent.innerHTML = '';

            const addLessons = (lessonList, semester) => {
                const container = document.createElement('div');
                container.className = 'semester-content';
                if (semester) container.id = `lessons-${semester}`;

                if (!lessonList || lessonList.length === 0) {
                    container.innerHTML = '<div class="empty-content">سيتم امتلاؤها قريبًا 🔴</div>';
                } else {
                    lessonList.forEach(lesson => {
                        const isDone = localStorage.getItem(`prog_${subjectId}_${lesson.title}`) === 'done';
                        const item = document.createElement('div');
                        item.className = 'lesson-item';
                        if (targetLessonTitle && lesson.title === targetLessonTitle) {
                            item.classList.add('highlight-target');
                        }
                        item.innerHTML = `
                                    <div style="display: flex; align-items: center; gap: 10px; width: 100%;">
                                        <input type="checkbox" ${isDone ? 'checked' : ''} 
                                            onchange="toggleLessonProgress('${subjectId}', '${lesson.title}', this)" 
                                            style="width: 20px; height: 20px; cursor: pointer;">
                                        <div class="lesson-title" style="margin-bottom: 0; flex: 1; ${isDone ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${lesson.title}</div>
                                    </div>
                                    <div class="lesson-details" style="margin-top: 10px;"> 
                                        <a href="${lesson.link}" class="lesson-link" target="_blank">رابط الدرس</a> 
                                        <span class="difficulty ${lesson.difficulty || 'medium'}">${lesson.difficulty === 'easy' ? 'سهل' : lesson.difficulty === 'hard' ? 'صعب' : 'متوسط'}</span> 
                                    </div>
                                `;
                        container.appendChild(item);
                    });
                }
                return container;
            };

            let targetSemester = null;
            if (targetLessonTitle && lessons.semester1 && lessons.semester1.some(l => l.title === targetLessonTitle)) targetSemester = 'semester1';
            else if (targetLessonTitle && lessons.semester2 && lessons.semester2.some(l => l.title === targetLessonTitle)) targetSemester = 'semester2';

            if (lessons.semester1 || lessons.semester2) {
                lessonsContent.innerHTML = `
                            <div class="semester-toggle lessons-toggle">
                                <button class="semester-btn ${(!targetSemester || targetSemester === 'semester1') ? 'active' : ''}" onclick="switchSemester('lessons', 'semester1')">الفصل الأول</button>
                                <button class="semester-btn ${(targetSemester === 'semester2') ? 'active' : ''}" onclick="switchSemester('lessons', 'semester2')">الفصل الثاني</button>
                            </div>
                        `;
                const s1 = addLessons(lessons.semester1, 'semester1');
                const s2 = addLessons(lessons.semester2, 'semester2');
                if (targetSemester === 'semester2') s2.classList.add('active');
                else s1.classList.add('active');
                lessonsContent.appendChild(s1);
                lessonsContent.appendChild(s2);
            } else {
                const lessonsList = addLessons(lessons);
                lessonsList.classList.add('active');
                lessonsContent.appendChild(lessonsList);
            }

            // Handle Videos
            const videosCard = document.getElementById('videosCard');
            const videosContent = document.getElementById('videosContent');
            videosContent.innerHTML = '';

            if (!youtube) {
                videosCard.style.display = 'none';
            } else {
                videosCard.style.display = 'block';
                if (youtube.semester1 || youtube.semester2) {
                    videosContent.innerHTML = `
                                <div class="semester-toggle videos-toggle">
                                    <button class="semester-btn active" onclick="switchSemester('videos', 'semester1')">الفصل الأول</button>
                                    <button class="semester-btn" onclick="switchSemester('videos', 'semester2')">الفصل الثاني</button>
                                </div>
                                <div id="videos-semester1" class="semester-content active"></div>
                                <div id="videos-semester2" class="semester-content"></div>
                            `;
                    const v1 = document.getElementById('videos-semester1');
                    const v2 = document.getElementById('videos-semester2');

                    const addVids = (list, container) => {
                        if (!list || list.length === 0) {
                            container.innerHTML = '<div class="empty-content">سيتم امتلاؤها قريبًا 🔴</div>';
                        } else {
                            list.forEach(v => {
                                container.innerHTML += `<div class="video-item"><a href="${v.link}" class="video-link" target="_blank">📹 ${v.title}</a></div>`;
                            });
                        }
                    };
                    addVids(youtube.semester1, v1);
                    addVids(youtube.semester2, v2);
                } else {
                    videosContent.innerHTML = '<div class="semester-content active"></div>';
                    const vContainer = videosContent.querySelector('.semester-content');
                    youtube.forEach(v => {
                        vContainer.innerHTML += `<div class="video-item"><a href="${v.link}" class="video-link" target="_blank">📹 ${v.title}</a></div>`;
                    });
                }
            }

            // Handle Summaries
            const summariesCard = document.getElementById('summariesCard');
            const summariesContent = document.getElementById('summariesContent');
            summariesContent.innerHTML = '';

            if (!summaries) {
                summariesCard.style.display = 'none';
            } else {
                summariesCard.style.display = 'block';

                const addSums = (list, container) => {
                    if (!list || list.length === 0) {
                        container.innerHTML = '<div class="empty-content">سيتم امتلاؤها قريبًا 🔴</div>';
                    } else {
                        list.forEach(s => {
                            const isDone = localStorage.getItem(`prog_sum_${subjectId}_${s.title}`) === 'done';
                            container.innerHTML += `
                                <div class="summary-item" style="display: flex; align-items: center; gap: 10px;">
                                    <input type="checkbox" ${isDone ? 'checked' : ''} 
                                        onchange="toggleSummaryProgress('${subjectId}', '${s.title}', this)" 
                                        style="width: 20px; height: 20px; cursor: pointer;">
                                    <a href="${s.link}" class="summary-link" target="_blank" style="flex: 1; ${isDone ? 'text-decoration: line-through; opacity: 0.6;' : ''}">📄 ${s.title}</a>
                                </div>`;
                        });
                    }
                };

                if (summaries.semester1 || summaries.semester2) {
                    summariesContent.innerHTML = `
                        <div class="semester-toggle summaries-toggle">
                            <button class="semester-btn active" onclick="switchSemester('summaries', 'semester1')">الفصل الأول</button>
                            <button class="semester-btn" onclick="switchSemester('summaries', 'semester2')">الفصل الثاني</button>
                        </div>
                        <div id="summaries-semester1" class="semester-content active"></div>
                        <div id="summaries-semester2" class="semester-content"></div>
                    `;
                    addSums(summaries.semester1, document.getElementById('summaries-semester1'));
                    addSums(summaries.semester2, document.getElementById('summaries-semester2'));
                } else {
                    summariesContent.innerHTML = '<div class="semester-content active"></div>';
                    addSums(summaries, summariesContent.querySelector('.semester-content'));
                }
            }

            // Populate Tips & Importance
            document.getElementById('studyMethodsList').innerHTML = tips.map(t => `<li>${t}</li>`).join('') || '<li>لا توجد نصائح حاليا</li>';
            document.getElementById('importanceList').innerHTML = importance.map(i => `<li>${i}</li>`).join('') || '<li>لا توجد معلومات حاليا</li>';

            // Show logic
            const subjectSection = document.getElementById('subjectDetailSection');
            subjectSection.classList.add('active');

            // Smooth transition and positioning
            setTimeout(() => {
                const target = document.querySelector('.highlight-target');
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    subjectSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 200);
        }

        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1
        }

            ;

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('show-el');
                }
            });
        }

            , observerOptions);

        document.addEventListener('DOMContentLoaded', () => {
            const hiddenElements = document.querySelectorAll('.year-card, .subject-overview, .content-card, .study-tip-card, .audience-card');

            hiddenElements.forEach((el) => {
                el.classList.add('hidden-el');
                observer.observe(el);
            });
        });

        // Handle page navigation on load
        window.addEventListener('load', function () {
            const hash = window.location.hash.substring(1);

            if (hash && document.getElementById(hash)) {
                showPage(hash);
            }
        });

        // Add hover effects to year cards
        document.querySelectorAll('.year-card').forEach(card => {
            card.addEventListener('mouseenter', function () {
                this.style.transform = 'translateY(-12px) rotateX(4deg)';
                this.style.boxShadow = '0 28px 55px -12px rgba(0, 0, 0, 0.25)';
            });

            card.addEventListener('mouseleave', function () {
                this.style.transform = 'translateY(0) rotateX(0)';
                this.style.boxShadow = '0 20px 40px -10px rgba(0, 0, 0, 0.18)';
            });
        });

        // Button hover effects
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('mouseenter', function () {
                this.style.transform = 'translateY(-5px) scale(1.03)';
                this.style.boxShadow = '0 10px 28px rgba(139, 92, 246, 0.5)';
            });

            button.addEventListener('mouseleave', function () {
                this.style.transform = 'translateY(0) scale(1)';
                this.style.boxShadow = '0 6px 20px rgba(139, 92, 246, 0.35)';
            });
        });

        // Subject list item hover effects
        document.querySelectorAll('.subjects-list li').forEach(item => {
            item.addEventListener('mouseenter', function () {
                this.style.color = '#4338ca';
                this.style.transform = 'translateX(8px)';
                this.style.background = '#f8fafc';
                this.style.paddingLeft = '1.2rem';
                this.style.boxShadow = '0 3px 10px rgba(79, 70, 229, 0.12)';
            });

            item.addEventListener('mouseleave', function () {
                this.style.color = '';
                this.style.transform = 'translateX(0)';
                this.style.background = '';
                this.style.paddingLeft = '';
                this.style.boxShadow = 'none';
            });
        });

        // QCM Logic
        function showQcmSubjects(year) {
            const grid = document.getElementById('qcm-subjects-grid');
            const subjects_y1 = [
                { id: 'anatomie', name: 'Anatomie', icon: '🦴', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/14YsqpOT0jQe8M7_oz4IDewN--vUapusb/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/1uWcYS2kg-k6PjfvN69KExFhBUzN9aJla/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1GiQXFVv4zW3stjkMydUmeni8tFJ0lQXz/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/1UkWS7_H7PjZ34bqi8uOjzQ-GAPKQ2zXe/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1QhcegphKnU-szuZxlji15WSbhaIVBT67/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1SD0rNDCOdSAKf57bUZrpo7r60mg-OV4Z/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1Rg4TQ6i2aODA0OlKt7zg-XPRHYK5LhLz/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VRe6oJmXri-TIJPHgLVA-L8DGhOhINhY/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1qHMo3AEGWsHUQh5-anL8MTjsEleo5rNP/view?usp=drive_link' }] },
                { id: 'biochimie', name: 'Biochimie', icon: '🧪', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/19A0WeQO6XWUARU_XeAbHHCZ3sfgIQCUJ/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/1QoFZQOP0uDyRdaESiUEXWm6WfxpKHvEh/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1skHvUyUSArfj5j_XQ8BcgGAidMGul365/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/1fL94vI8k6C-_68RmPTFHwRwe92JzzQin/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1hpA7LppojYOLkEietsdmR-wWpvAjAaMe/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1SBRK5trNjuA9I3N5oPaFp-NOtp9hpMNC/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RfyaumzfxCqUFXcdbvJZV6Xjj5tVcfiN/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VK_JumVGQbJpxOqjfmDY0Yp0pfjw_17Z/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1ZQo-s1pS0E1bILeglDx-5LUpQ2VlFBFZ/view?usp=drive_link' }] },
                { id: 'cytologie', name: 'Cytologie', icon: '🔬', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/1S7Z2t5YUeKSB878kAvYrgktAQfLjIgzF/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/11HXr8YVGDDDlx5YMvpqn2wNpe_fLPYRE/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1C1cPVJ_P8GjvgrXX6zzD0UTPuacptgsJ/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/1Zt4M80QlxJYEJg90Aan0c3G-UAddwJEF/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1SZrFA90kLEjNPdetZVQIgI0--J0LLC-Y/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RoYM1tgzW9mQwAxHnUWZjRMnTQfwiUfa/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RTtFxt7evonbv7u8DUN0eC_qoCNj2gUr/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VHxDwCqW8BGJ26AA41xl4Ntj0_m4hR9F/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1mFnxu5gDRktPJdGCMC0WYl4o7UdsHvwL/view?usp=drive_link' }] },
                { id: 'biophysique', name: 'Biophysique', icon: '⚡', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/1vezLEjKgRWnZuz19Mg5cvYl9Ol1p-rGC/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/17vKK5nmAPQr5Sz1JdcsmuFdt7Anxsgkp/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1QuWCbirISVe4s5HjO4h-tU7rh80jMcQw/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/1IrQT7Xu_7KSxp9P-f9T2q6HR8KpBhHbm/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1hbEJhIsih_JkWrXgpWvqbyRSqICvX-GE/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RvpSf-oYY0zsPDd-fw30gbvaF7aomEPn/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RMACPAkOVDyjtCsg2ghtvEBWzZFV_vPJ/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VZIWwHZNLzC2OMT86i-rjDtvRiMUKBXT/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1XEPQMj8x3u_iyn8Y2BGu6L5AgmvKQxig/view?usp=drive_link' }] },
                { id: 'biostat', name: 'Biostat', icon: '📊', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/1JUh3_NxmvtTK4LF_fL2Ni4FY9sYJelN6/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/15vhB0nimTjEqd8ppUoacz6KSmUY--RcZ/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1avxQ6pgNBX1xEWKE3qiRVEaiLV5LugWb/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/1sHH1_ZqRlydZTXeGhIdIpgjeQKLDmKcf/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1i1EY6I51m2A95uH070UGBVeJLxg8rEoc/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1Rqi4T5Dul6uPiPa29HyEq1sPxHmgPzvn/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RUpZgM6tBjoBtIVtJE8yoXkHKEf2kUUn/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VQkC4H0bADOTvuf5NGv8iFziH6IG0Z51/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/10KqELlFbVSQodpdHtS-bgf0uRg38oTz-/view?usp=drive_link' }] },
                { id: 'physiologie', name: 'Physiologie', icon: '🫀', exams: [{ title: 'Controle 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1OCvbnhnylH_vVeOl0-BPk9dM6MEHDwMA/view?usp=drive_link' }, { title: 'Controle 2024', link: 'https://drive.google.com/file/d/1gnmg5p7acFD0KHDiUgeL1BlEygwxJOs-/view?usp=drive_link' }, { title: 'Controle 2024 Affichage', link: 'https://drive.google.com/file/d/1rtuQbRgEciLi2Wm1oMTPjnVWDso2Ox8D/view?usp=drive_link' }] },
                { id: 'histoloie', name: 'Histologie', icon: '🫠', exams: [{ title: 'Controle 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1Rn56v1WXSw3GwC_0Rjtplhl8H0aCwlc-/view?usp=drive_link' }, { title: 'Controle 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1V3wiH8jA47pB5x5Q2vApQj4Jle8WlgJ5/view?usp=drive_link' }, { title: 'Controle 2024', link: 'https://drive.google.com/file/d/1Vm4ATQH3JdEvVfHk11zALD3jWFqu-L83/view?usp=drive_link' }, { title: 'Controle 2024 Affichage', link: 'https://drive.google.com/file/d/1-pCxorrl02S8uz9nY0rsX9LY0yLtTjez/view?usp=drive_link' }] },
                { id: 'ssh', name: 'SSH', icon: '📚', exams: [{ title: 'Controle 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1hKYsRLqV_ZUblzs4veCeGJHScWOKsszH/view?usp=drive_link' }, { title: 'Controle 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RSvnEX8yGu53DQaoqZTpO4IHxG4TcqGu/view?usp=drive_link' }, { title: 'Controle 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1V3_94SvlczEytb_8KicqDiEmXl6YFYY4/view?usp=drive_link' }, { title: 'Controle 2024', link: 'https://drive.google.com/file/d/15D-ClI3zcD5Z8ha7yRaAG-ssol94Eadl/view?usp=drive_link' }, { title: 'Controle 2024 Affichage', link: 'https://drive.google.com/file/d/1tSSa45gDSRALI0rluRUkTvJIRGnMZRPl/view?usp=drive_link' }] },
                { id: 'embryologie', name: 'Embryologie', icon: '👶', exams: [{ title: 'Controle 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1SiAEaZScpk7O1AtntaUQu56oMBC2X01H/view?usp=drive_link' }, { title: 'Controle 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1RgZN9a9bmtfd8ayao78e_-b-eezRnyRF/view?usp=drive_link' }, { title: 'Controle 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1USpXuY-TAKL0CbxB_xtOg8Kqut5JY8tA/view?usp=drive_link' }, { title: 'Controle 2024', link: 'https://drive.google.com/file/d/1dfoUBeMBbeXt5ITRuM8ryv3PsZzLXYCx/view?usp=drive_link' }, { title: 'Controle 2024 Affichage', link: 'https://drive.google.com/file/d/1k5fhmvh4tciVmwUNMO9zf7Blq7sGrhvQ/view?usp=drive_link' }] },
                { id: 'chimie', name: 'Chimie', icon: '⚗️', exams: [{ title: 'Controle S1 2024', link: 'https://drive.google.com/file/d/1AfIRXn48GuIYT-WCMtkQRd2O2uRjIyZr/view?usp=drive_link' }, { title: 'Controle S1 2024 Affichage', link: 'https://drive.google.com/file/d/1YmDHmOJ1cu0ji1YLvgIhndy9p8NSMc_w/view?usp=drive_link' }, { title: 'Controle S2 2024', link: 'https://drive.google.com/file/d/1uR2rU01Qzwwp-2xzae4YCOTPzeV_usfd/view?usp=drive_link' }, { title: 'Controle S2 2024 Affichage', link: 'https://drive.google.com/file/d/15Ub-B27Lx1kNnOy4FzrC_jjk1VBINRIM/view?usp=drive_link' }, { title: 'Controle S1 2023 مع التصحيح', link: 'https://drive.google.com/file/d/1hvwIWWckxTOarrOrUZCI2Qsf5AftAfDM/view?usp=drive_link' }, { title: 'Controle S2 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1S2G8FvrK-7aAgGqxKtpbtdQJx_t6i_aK/view?usp=drive_link' }, { title: 'Controle S1 2022 مع التصحيح', link: 'https://drive.google.com/file/d/1Rdv8QwRNew-mzFs9vBgiM2wIlRUo4Irz/view?usp=drive_link' }, { title: 'Controle S1 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1VTkHEw3ZOYPIif58RfdsRhlOXdyi__8p/view?usp=drive_link' }, { title: 'Controle S2 2021 مع التصحيح', link: 'https://drive.google.com/file/d/1xKGbiGSQ7dXPdRTX5g9hlQCuQcWeQkVf/view?usp=drive_link' }] }
            ];
            const subjects_y2 = [
                {
                    id: 'cardiovascular',
                    name: 'Cardio',
                    icon: '🫀',
                    exams: [
                        { title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1dNWH6Jwl5jjYvBn5RmRa36SF8Ca0Uzwk/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/16ANPv-4X2UPfMAaMReZTbnis70RiB92b/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1RWLKBNUGmltwYVdh1lrkFkU5Euph_ed4/view?usp=drive_link' }, { title: 'Controle Setif 2023 Affichage', link: 'https://drive.google.com/file/d/1S6FsDhIryLaFLf3pmvNpf57PwrxeecmI/view?usp=drive_link' }
                    ]
                },
                { id: 'nerveux', name: 'Nerveux', icon: '🧠', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1WKH-aM8jWuCyRXVqKX-MJraBL9G3Z0oI/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1gD35aNYgBIgS-9_AW7VB_E-Wf_QpGydM/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1hq9fJadEYYKfH07wLv0bFxbHFKozY9lJ/view?usp=drive_link' }] },
                { id: 'digestif', name: 'Digestif', icon: '😋', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1fWgsh5qWq35fEQ1MZbHFS3ekuDboxJl7/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1giHzRZRnD3ssJiwFsfO8eqzZLVp54sHi/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/13CuQ38SvVzjf67PPdRWg0IAriAHv9obL/view?usp=drive_link' }] },
                { id: 'endocrineien', name: 'Endocrineien', icon: '⚖️', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/193ilB2f_k8Mr7hPzUu9aW3i3_Z-PunL7/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1Vltn489LlZbbMvwzAxOXxM_pSDMDpk-C/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1NFZxQqGb0xkRWvyu-Zr7cPhIP0WQlyOC/view?usp=drive_link' }, { title: 'Controle Setif 2023 Affichage', link: 'https://drive.google.com/file/d/19RmHfAZfFkbotA0WfQthwAfGCKD8kL8U/view?usp=drive_link' }] },
                { id: 'urinaire', name: 'Urinaire', icon: '💧', exams: [{ title: 'Controle Setif 2023', link: 'https://drive.google.com/file/d/1kYvzIJplP2OzmE6tUmrlcUXQYp-_-yPO/view?usp=drive_link' }, { title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/112xJUnuXwB9LOsRAnvJLaf-7jwegTZsz/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/162oSGohUgn7iOi-PiVJ1o6oZiYT9U_IW/view?usp=drive_link' }] },
                { id: 'genetique', name: 'Genetique', icon: '🧬', exams: [{ title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1ec_8cXEYpxAGuq6cEQoIvrOv21xrAnAk/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1BrHEBKU8x0iVB-iUjwWyGVSQO5NjQBT1/view?usp=drive_link' }] },
                { id: 'immunologie', name: 'Immunologie', icon: '🛡️', exams: [{ title: 'Controle Setif 2022', link: 'https://drive.google.com/file/d/1NI7pID9YQ-yQdpXnFp1ggnfW9lHCcb60/view?usp=drive_link' }, { title: 'Controle Setif 2022 Affichage', link: 'https://drive.google.com/file/d/1Ky0rnz2cUPIS3SYThpfw-jYsTP8T6aEF/view?usp=drive_link' }] }
            ];

            const currentSubjects = year === 1 ? subjects_y1 : subjects_y2;
            grid.innerHTML = '';

            currentSubjects.forEach(sub => {
                const subCard = document.createElement('div');
                subCard.className = 'year-card';
                subCard.style.padding = '1.5rem';
                subCard.style.textAlign = 'center';
                subCard.innerHTML = `
                    <div style="font-size: 2.5rem; margin-bottom: 1rem;">${sub.icon}</div>
                    <div class="year-title" style="font-size: 1.2rem;">${sub.name}</div>
                `;
                subCard.onclick = () => showQcmDetail(sub.name, sub.exams);
                grid.appendChild(subCard);

                // Observe for animation
                if (typeof observer !== 'undefined') {
                    subCard.classList.add('hidden-el');
                    observer.observe(subCard);
                }
            });

            document.getElementById('qcm-year-selection').style.display = 'none';
            document.getElementById('qcm-subjects-container').style.display = 'block';
        }

        function showQcmDetail(title, exams) {
            const detailSection = document.getElementById('qcm_detail');
            const titleEl = document.getElementById('qcm-subject-title');
            const contentEl = document.getElementById('qcm-detail-content');

            titleEl.textContent = `بنك أسئلة: ${title}`;

            if (exams && exams.length > 0) {
                let examsHTML = `
                    <div style="max-width: 900px; margin: 0 auto; padding: 2rem 1rem;">
                        <h2 style="color: var(--primary); margin-bottom: 2rem; font-size: 1.8rem;">الامتحانات المتاحة الآن 📝</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                `;

                exams.forEach(exam => {
                    examsHTML += `
                        <div class="about-card" style="text-align: right; border: 1px solid var(--glass-border); display: flex; flex-direction: column; justify-content: space-between; transition: all 0.3s ease;">
                            <div>
                                <h3 style="color: var(--primary-dark); margin-bottom: 1rem; font-size: 1.2rem;">${exam.title}</h3>
                                <p style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1.5rem;">انقر على الزر أدناه لفتح الامتحان ومراجعة الأسئلة في نافذة جديدة.</p>
                            </div>
                            <a href="${exam.link}" class="btn" target="_blank" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.8rem; padding: 0.8rem; font-weight: 600;">
                                <span>ابدأ الامتحان الآن 🚀</span>
                            </a>
                        </div>
                    `;
                });

                examsHTML += `
                        </div>
                    </div>
                `;
                contentEl.innerHTML = examsHTML;
            } else {
                contentEl.innerHTML = `
                    <div class="empty-page" style="padding: 4rem 1rem;">
                        <h2 style="font-size: 2rem; margin-bottom: 1.5rem;">🚧 سيتم إضافة المحتوى قريباً</h2>
                        <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto;">نحن نعمل حالياً على جمع وتنسيق أفضل مجموعة أسئلة (QCM) لمادة <strong>${title}</strong>. ترقبوا التحديث القادم!</p>
                        <div style="font-size: 5rem; margin-top: 3rem; opacity: 0.2;">📚</div>
                    </div>
                `;
            }

            showPage('qcm_detail');
        }

        function backToQcmYears() {
            document.getElementById('qcm-year-selection').style.display = 'grid';
            document.getElementById('qcm-subjects-container').style.display = 'none';
        }

        // Medical Calculator Logic
        let currentCalcYear = 0;
        const coefficients = {
            1: [
                { id: 'anatomie', name: 'Anatomie', coeff: 2 },
                { id: 'biochimie', name: 'Biochimie', coeff: 2 },
                { id: 'cytologie', name: 'Cytologie', coeff: 2 },
                { id: 'physiologie', name: 'Physiologie', coeff: 1 },
                { id: 'biophysique', name: 'Biophysique', coeff: 2 },
                { id: 'biostat', name: 'Biostat', coeff: 1 },
                { id: 'ssh', name: 'SSH', coeff: 1 },
                { id: 'embryologie', name: 'Embryologie', coeff: 1 },
                { id: 'chimie', name: 'Chimie', coeff: 2 }
            ],
            2: [
                { id: 'cardio', name: 'Cardio', coeff: 4 },
                { id: 'nerveux', name: 'Nerveux', coeff: 4 },
                { id: 'digestif', name: 'Digestif', coeff: 4 },
                { id: 'endocrineien', name: 'Endocrineien', coeff: 4 },
                { id: 'urinaire', name: 'Urinaire', coeff: 4 },
                { id: 'genetique', name: 'Genetique', coeff: 2 },
                { id: 'immunologie', name: 'Immunologie', coeff: 2 }
            ]
        };

        function initCalculator(year) {
            currentCalcYear = year;
            const container = document.getElementById('module-inputs');
            const title = document.getElementById('calc-title');
            const yearData = coefficients[year];

            title.textContent = `حاسبة السنة ${year === 1 ? 'الأولى' : 'الثانية'}`;
            container.innerHTML = '';

            yearData.forEach(mod => {
                const div = document.createElement('div');
                div.innerHTML = `
                        <label class="calculator-input-label">${mod.name} (x${mod.coeff})</label>
                        <input type="number" id="input-${mod.id}" class="calculator-input" step="0.01" min="0" max="20" placeholder="0.00">
                    `;
                container.appendChild(div);
            });

            document.getElementById('calc-year-selection').style.display = 'none';
            if (document.getElementById('calc-home-btn')) {
                document.getElementById('calc-home-btn').style.display = 'none';
            }
            document.getElementById('calculator-container').style.display = 'block';
            document.getElementById('calc-result').style.display = 'none';
        }

        function calculateAverage() {
            const yearData = coefficients[currentCalcYear];
            let totalWeightedScore = 0;
            let totalCoefficients = 0;
            let allFilled = true;
            let invalidGrades = [];

            yearData.forEach(mod => {
                const inputEl = document.getElementById(`input-${mod.id}`);
                const val = parseFloat(inputEl.value);
                if (isNaN(val)) {
                    allFilled = false;
                    inputEl.style.borderColor = 'rgba(99, 102, 241, 0.2)';
                } else if (val < 0 || val > 20) {
                    invalidGrades.push(mod.name);
                    inputEl.style.borderColor = 'var(--danger)';
                } else {
                    totalWeightedScore += val * mod.coeff;
                    totalCoefficients += mod.coeff;
                    inputEl.style.borderColor = 'var(--success)';
                }
            });

            if (!allFilled) {
                alert('يرجى إدخال النقاط لجميع المواد');
                return;
            }

            if (invalidGrades.length > 0) {
                alert(`يرجى التأكد من أن النقاط بين 0 و 20 للمواد التالية: ${invalidGrades.join(', ')}`);
                return;
            }

            const average = totalWeightedScore / totalCoefficients;
            const scoreEl = document.getElementById('average-score');
            const resultDiv = document.getElementById('calc-result');
            const msgEl = document.getElementById('result-message');

            scoreEl.textContent = average.toFixed(2);

            if (average >= 10) {
                scoreEl.style.color = 'var(--success)';
                msgEl.textContent = 'تهانينا! لقد نجحت في العام الدراسي 🎉';
            } else {
                scoreEl.style.color = 'var(--danger)';
                msgEl.textContent = 'للأسف، المعدل أقل من 10. بالتوفيق في الاستدراكي 💪';
            }

            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function backToCalcYears() {
            document.getElementById('calc-year-selection').style.display = 'grid';
            if (document.getElementById('calc-home-btn')) {
                document.getElementById('calc-home-btn').style.display = 'block';
            }
            document.getElementById('calculator-container').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function clearCalculatorFields() {
            const yearData = coefficients[currentCalcYear];
            yearData.forEach(mod => {
                const inputEl = document.getElementById(`input-${mod.id}`);
                if (inputEl) {
                    inputEl.value = '';
                    inputEl.style.borderColor = 'rgba(99, 102, 241, 0.2)';
                }
            });
            const resultDiv = document.getElementById('calc-result');
            if (resultDiv) resultDiv.style.display = 'none';
        }

        function exportToPDF() {
            const average = document.getElementById('average-score').textContent;
            const yearLabel = currentCalcYear === 1 ? 'الأولى' : 'الثانية';
            const content = `
                    <html>
                    <head>
                        <title>نتيجتي في MedGpa</title>
                        <style>
                            body { font-family: 'Tajawal', sans-serif; direction: rtl; padding: 40px; text-align: center; }
                            .header { color: #2563eb; font-size: 24px; margin-bottom: 20px; }
                            .result { font-size: 48px; color: #3b82f6; font-weight: bold; margin: 20px 0; }
                            .footer { color: #64748b; margin-top: 40px; }
                        </style>
                    </head>
                    <body>
                        <div class="header">نتيجتي في حاسبة MedGpa - السنة ${yearLabel}</div>
                        <div class="result">معدلي: ${average}</div>
                        <div class="footer">تاريخ الاستخراج: ${new Date().toLocaleDateString('ar-DZ')}</div>
                    </body>
                    </html>
                `;
            const win = window.open('', '', 'height=700,width=700');
            win.document.write(content);
            win.document.close();
            win.print();
        }

        function updatePoints(amount) {
            let points = parseInt(localStorage.getItem('userPoints') || '0');
            points += amount;

            // Check for reset (Level Up)
            if (points >= 60) {
                points = 0;
                showWinModal();
            } else {
                showToast(`🌟 +${amount} نقاط! (المجموع: ${points})`);
            }

            localStorage.setItem('userPoints', points);
            updatePointsDisplay();
        }

        function showWinModal() {
            const modal = document.getElementById('win-modal');
            modal.classList.add('active');

            // Generate confetti
            for (let i = 0; i < 50; i++) {
                createConfetti();
            }
        }

        function closeWinModal() {
            const modal = document.getElementById('win-modal');
            modal.classList.remove('active');
        }

        function createConfetti() {
            const colors = ['#f59e0b', '#ef4444', '#3b82f6', '#10b981', '#8b5cf6'];
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';

            document.body.appendChild(confetti);

            setTimeout(() => {
                confetti.remove();
            }, 4000);
        }

        function updatePointsDisplay() {
            const points = localStorage.getItem('userPoints') || '0';
            const display = document.querySelector('.points-number');
            if (display) display.textContent = points;
        }

        // Initialize points display on load
        document.addEventListener('DOMContentLoaded', updatePointsDisplay);

        function toggleLessonProgress(subjectId, title, checkbox) {
            const titleEl = checkbox.parentElement.querySelector('.lesson-title');
            if (checkbox.checked) {
                localStorage.setItem(`prog_${subjectId}_${title}`, 'done');
                titleEl.style.textDecoration = 'line-through';
                titleEl.style.opacity = '0.6';
                updatePoints(10);
            } else {
                localStorage.removeItem(`prog_${subjectId}_${title}`);
                titleEl.style.textDecoration = 'none';
                titleEl.style.opacity = '1';
            }
        }

        function toggleSummaryProgress(subjectId, title, checkbox) {
            const linkEl = checkbox.parentElement.querySelector('.summary-link');
            if (checkbox.checked) {
                localStorage.setItem(`prog_sum_${subjectId}_${title}`, 'done');
                linkEl.style.textDecoration = 'line-through';
                linkEl.style.opacity = '0.6';
                updatePoints(10);
            } else {
                localStorage.removeItem(`prog_sum_${subjectId}_${title}`);
                linkEl.style.textDecoration = 'none';
                linkEl.style.opacity = '1';
            }
        }

        let searchIndex = [];

        function buildSearchIndex() {
            searchIndex = [];
            // Static Pages
            const pages = [
                { title: 'الرئيسية', desc: 'الصفحة الرئيسية للموقع', id: 'home', icon: '🏠' },
                { title: 'السنوات الدراسية', desc: 'دليل السنتين الأولى والثانية', id: 'years', icon: '🎓' },
                { title: 'حاسبة المعدل', desc: 'احسب معدلك الفصلي أو السنوي', id: 'medical_calculator', icon: '⚖️' },
                { title: 'QCM', desc: 'بنك الأسئلة والامتحانات', id: 'qcm', icon: '📝' },
                { title: 'من نحن', desc: 'معلومات عن فريق MedGpa', id: 'about_us', icon: '👥' }
            ];
            pages.forEach(p => searchIndex.push({ ...p, type: 'page' }));

            // Subjects and Lessons from SITE_DATA
            Object.values(SITE_DATA.subjects).forEach(sub => {
                searchIndex.push({
                    title: sub.title,
                    desc: `مادة ${sub.title}`,
                    type: 'subject',
                    id: sub.id,
                    icon: sub.icon,
                    handler: () => {
                        showPage('years');
                        showSubjectDetail(sub.id);
                    }
                });

                const addLesson = (l) => {
                    searchIndex.push({
                        title: l.title,
                        desc: `درس في ${sub.title}`,
                        type: 'lesson',
                        id: sub.id,
                        icon: '📖',
                        handler: () => {
                            showPage('years');
                            showSubjectDetail(sub.id, l.title);
                        }
                    });
                };

                if (sub.lessons) {
                    if (sub.lessons.semester1) sub.lessons.semester1.forEach(addLesson);
                    if (sub.lessons.semester2) sub.lessons.semester2.forEach(addLesson);
                    if (Array.isArray(sub.lessons)) sub.lessons.forEach(addLesson);
                }

                // Video Indexing
                const addVideo = (v) => {
                    searchIndex.push({
                        title: v.title,
                        desc: `فيديو في ${sub.title}`,
                        type: 'video',
                        id: sub.id,
                        icon: '🎬',
                        link: v.link,
                        handler: () => {
                            window.open(v.link, '_blank');
                        }
                    });
                };

                if (sub.youtube) {
                    if (sub.youtube.semester1) sub.youtube.semester1.forEach(addVideo);
                    if (sub.youtube.semester2) sub.youtube.semester2.forEach(addVideo);
                    if (Array.isArray(sub.youtube)) sub.youtube.forEach(addVideo);
                }

                // Summary Indexing
                const addSummary = (s) => {
                    searchIndex.push({
                        title: s.title,
                        desc: `ملخص في ${sub.title}`,
                        type: 'summary',
                        id: sub.id,
                        icon: '📑',
                        link: s.link,
                        handler: () => {
                            window.open(s.link, '_blank');
                        }
                    });
                };

                if (sub.summaries) {
                    if (sub.summaries.semester1) sub.summaries.semester1.forEach(addSummary);
                    if (sub.summaries.semester2) sub.summaries.semester2.forEach(addSummary);
                    if (Array.isArray(sub.summaries)) sub.summaries.forEach(addSummary);
                }
            });
        }

        function toggleSearch() {
            const modal = document.getElementById('search-modal');
            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                if (searchIndex.length === 0) buildSearchIndex();
                document.getElementById('search-input').focus();
            }
        }

        function handleSearch(query) {
            const resultsContainer = document.getElementById('search-results');
            if (!query || query.length < 2) {
                resultsContainer.innerHTML = '';
                return;
            }

            const q = query.toLowerCase();
            const matches = searchIndex.filter(item =>
                item.title.toLowerCase().includes(q) ||
                item.desc.toLowerCase().includes(q)
            );

            if (matches.length === 0) {
                resultsContainer.innerHTML = '<div class="search-no-results">لا توجد نتائج مطابقة لبحثك</div>';
                return;
            }

            resultsContainer.innerHTML = matches.map(m => `
                        <div class="search-result-item" onclick="${m.handler ? '' : `showPage('${m.id}');`} toggleSearch();">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.2rem;">${m.icon || '🔍'}</span>
                                <div style="flex: 1;">
                                    <div class="search-result-title">${m.title}</div>
                                    <div class="search-result-desc">${m.desc}</div>
                                </div>
                                <span style="font-size: 0.7rem; background: var(--primary); color: white; padding: 2px 6px; border-radius: 4px; opacity: 0.8;">
                                    ${m.type === 'page' ? 'صفحة' : m.type === 'subject' ? 'مادة' : m.type === 'lesson' ? 'درس' : m.type === 'video' ? 'فيديو' : 'ملخص'}
                                </span>
                            </div>
                        </div>
                    `).join('');

            // Attach handlers if they exist
            const resultEls = resultsContainer.querySelectorAll('.search-result-item');
            matches.forEach((m, i) => {
                if (m.handler) {
                    resultEls[i].onclick = (e) => {
                        m.handler();
                        toggleSearch();
                    };
                }
            });
        }

        function toggleFocusMode() {
            document.getElementById('focus-mode-overlay').classList.toggle('active');
        }

        function toggleAchievements() {
            const panel = document.getElementById('achievements-panel');
            panel.classList.toggle('active');
        }

        // Pomodoro Logic
        let timer;
        let timeLeft = 25 * 60;
        let isRunning = false;

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer-display').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        function startTimer() {
            if (isRunning) return;
            isRunning = true;
            timer = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateTimer();
                } else {
                    clearInterval(timer);
                    isRunning = false;
                    alert('انتهى الوقت! خذ قسطاً من الراحة ☕');
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timer);
            isRunning = false;
        }

        function resetTimer() {
            pauseTimer();
            timeLeft = 25 * 60;
            updateTimer();
        }

    </script>


    <!-- Core Data -->
    <!-- Core Data -->
    <script>
        const SITE_DATA = {
            subjects: {
                'anatomie': {
                    id: 'anatomie',
                    title: 'ANATOMIE',
                    icon: '🦴',
                    description: 'هاته المادة هي اساس الطب وتعتبر من احلى المواد واسهلها ان احببتها. صحيح انا كثيفة المعلومات لكنها تحسسك بانك تدرس في مجال الطب. حيث ستدرسون فيها اساسيات الجسم : العظام,العضلات,الاوعية الدموية,الاعصاب,المفاصل . وهاته الاساسيات مقسمة الى طرفين العلوي والسفلي .',
                    lessons: {
                        semester1: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1FRIK7z7hfsEX2AgXHoaZpw3Hw3-ET0Po?usp=drive_link', difficulty: 'medium' }
                        ],
                        semester2: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1k1RUejIy_MO_keqTlVRvlYQI3EY8Yv5X?usp=drive_link', difficulty: 'hard' }
                        ]
                    },
                    youtube: null,
                    summaries: {
                        semester1: [],
                        semester2: []
                    },
                    tips: ['الرسومات تساعدك كثيرا', 'استخدم تطبيق الاطلس ثلاثي الابعاد', 'حاول ان تتخيل ما تدرسه', 'ابدا بدراستها قبل بقية المواد'],
                    importance: ['أساس جميع التخصصات الطبية', 'ضروري للفهم السريري', 'يساعد في التشخيص الدقيق', 'مهم للإجراءات الجراحية']
                },
                'biochimie': {
                    id: 'biochimie',
                    title: 'BIOCHIMIE',
                    icon: '🧪',
                    description: 'هاته المادة سهلة وممتعة قليلا تدرسون فيها 3 مركبات : السكريات,البروتينات والليبيدات حيث يتضمن كل مركب بنيتة الجزئية وعملية الايض الخاصة به.',
                    lessons: {
                        semester1: [{ title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1FZs8kNn5796w59b2eEJQde6kAigBpcH9?usp=drive_link', difficulty: 'medium' }],
                        semester2: [{ title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1YFU85mAJduicdQeGwimDH-cQOa4eWUsW?usp=drive_link', difficulty: 'hard' }]
                    },
                    youtube: {
                        semester1: [
                            { title: 'Les Glucides', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeazSlRMM-ZOMRh96D1w9CPln&si=uOKU14DfjlbWeA9z' },
                            { title: 'Les Lipides', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeaxwmnFn3hjIfyLTMx_acYqo&si=QCRumIWbyqpKETNC' },
                            { title: 'Les Proteines', link: 'https://youtube.com/playlist?list=PLCkSZi2UeeayYbxsZKTTfpqfcul7wyl7c&si=jxMM7SluCjpPVFA0' }
                        ]
                    },
                    summaries: {
                        semester1: [],
                        semester2: []
                    },
                    tips: ['لا تخف هاته المادة تصبح سهلة وممتعة وطبية لابعد درجة في السنة الثانية', 'استخدم المخططات التوضيحية', 'اعتمد الفهم قبل الحفظ خصوصا الفصل الثاني', 'لا تتجاهلو الانزيمات في الفصل الثاني لانها اهم شيئ'],
                    importance: ['فهم أساس الأمراض الوراثية', 'تفسير اختبارات الدم', 'فهم آليات الأدوية', 'أساس الطب الجزيئي']
                },
                'cytologie': {
                    id: 'cytologie',
                    title: 'CYTOLOGIE',
                    icon: '🔬',
                    description: 'المادة الجميلة الرائعة التي تذهب بك الى داخل الخلية ,مادة سهلة ليست معقدة ومهمة جدا كاهمية الاناتومي.',
                    lessons: {
                        semester1: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1FfbS8vkNuisDhI5Uu46pbgWF09MH7gp9?usp=drive_link', difficulty: 'easy' }
                        ],
                        semester2: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1Vp2LLEyLbF2WeRDBFJCk7G7Cq9ddcgXg?usp=drive_link', difficulty: 'easy' }
                        ]
                    },
                    youtube: {
                        semester1: [{ title: 'Cours', link: 'https://youtube.com/playlist?list=PLgt70N0N-2-1oV2jgobbWVNrYbwpA7zE6&si=XURisgLAR-5f4aKK' }],
                        semester2: [
                            { title: 'Cytosquelette et Hyaloplasm', link: 'https://youtu.be/6ZYjQBK68Bw?si=u13BkB0OqJE1d0X6' },
                            { title: 'Endoo', link: 'https://youtu.be/T-PeJ29z1z0?si=aNzvh_bBz_U1ipLy' }
                        ]
                    },
                    summaries: {
                        semester1: [],
                        semester2: []
                    },
                    tips: ['الفصل الاول اسهل قليلا من الثاني فركز جبدا فيها', 'انصحك بالحل بعد الانتهاء من الدرس', 'كررها اكثر من مرتين لانها سهلة النسيان', 'كرر الرسوم التوضيحية'],
                    importance: ['فهم التغيرات المرضية', 'أساس علم الأمراض', 'تفسير النتائج المخبرية', 'فهم الاستجابات المناعية']
                },
                'physiologie': {
                    id: 'physiologie',
                    title: 'PHYSIOLOGIE',
                    icon: '❤️',
                    description: 'هنا الاساس الثاني وهو علم الوظائف حيث انها مدخل فقط والباقي ياتي مرورا بالسنوات تدرسون فيها الاساسيات',
                    lessons: {
                        semester2: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1_ZVvnJhRvjFB4byK4tLwxRF_XLcbDzvB?usp=drive_link', difficulty: 'hard' }]
                    },
                    youtube: {
                        semester2: [{ title: 'Playliste', link: 'https://youtube.com/playlist?list=PLK4UNCL4RZYqTW-Yu4xCL9T8_W-rrN8V8&si=cr6j0x0WIHNNjrxt' }]
                    },
                    summaries: {
                        semester2: []
                    },
                    tips: ['مهمة كثيرا في السنة الثانية', 'اعتمد على اليوتيوب 50 بالمئة', 'تحتاج الفهم قبل الحفظ', 'حل الكثير من الأسئلة التطبيقية'],
                    importance: ['فهم الأساس الفسيولوجي للأمراض', 'تفسير نتائج التحاليل', 'فهم آليات عمل الأدوية', 'الأساس للطب السريري']
                },
                'biophysique': {
                    id: 'biophysique',
                    title: 'BIOPHYSIQUE',
                    icon: '⚡',
                    description: 'اسمط مادة في الطب تدرس اشياء لا حول ولا قوة الا بالله لكن الفصل الثاني سهل جدا وتدرسون على شيئ طبي الا وهو العين .',
                    lessons: {
                        semester1: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1FWhbqCBpw6rIrfVjNgwePjQf933PEWmO?usp=drive_link', difficulty: 'hard' }
                        ],
                        semester2: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1VrRTABtEO1lXg2rzx1ZStdU13Zb1mk0Q?usp=drive_link', difficulty: 'medium' }
                        ]
                    },
                    youtube: {
                        semester2: [{ title: 'Optique', link: 'https://www.youtube.com/playlist?list=PLvhLrq3xUh-frxnqDvto3WsLUQSw4xmij' }]
                    },
                    summaries: {
                        semester1: [],
                        semester2: []
                    },
                    tips: ['ستتعبك يا صديقي لكنها سهلة في السنة الثانية لاتخف', 'اعتمد على اليوتيوب بشكل كبير', 'اعتمد على شات جيبيتي كثيرا', 'حل المسائل التطبيقية بكثرة بكثرة'],
                    importance: ['فهم الأجهزة الطبية', 'تفسير القياسات الفيزيائية', 'أساس التصوير الطبي', 'فهم الآليات الفيزيائية للأمراض']
                },
                'biostat': {
                    id: 'biostat',
                    title: 'BIOSTAT',
                    icon: '📊',
                    description: 'لا اعلم لماذا هي ضمن مواد الطب لكن تحملها فقط لانك لن تراها مجددا ابدا, لكنها سهلة ةتساعدك في رفع معدلك السنوي .',
                    lessons: {
                        semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1C9X0D03QuRhBlOZ8nfswhHm5nw8mAMSj?usp=drive_link', difficulty: 'medium' }],
                        semester2: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1k5WvVI2hZ3mNWJNFRN7i1mOwSnagN4jo?usp=drive_link', difficulty: 'medium' }]
                    },
                    youtube: {
                        semester2: []
                    },
                    summaries: {
                        semester1: [{ title: 'Resume', link: 'https://drive.google.com/file/d/19NBn5eaXRzvNF46qsKrvfaMLhAwyJw7b/view?usp=drive_link' }, { title: 'Resume proba', link: 'https://drive.google.com/file/d/1d3DwpWdQL1zNv_hAv2Eq2s1dqaQGdqsB/view?usp=drive_link' }],
                        semester2: []
                    },
                    tips: ['تدرب على برامج التحليل', 'افهم المفاهيم الأساسية', 'حل الكثير من المسائل', 'تعلم تفسير النتائج'],
                    importance: ['تحليل الأبحاث العلمية', 'تصميم الدراسات', 'تفسير النتائج السريرية', 'اتخاذ القرارات المبنية على الأدلة']
                },
                'ssh': {
                    id: 'ssh',
                    title: 'SSH',
                    icon: '👥',
                    description: 'دراسة العوامل الاجتماعية والسلوكية التي تؤثر على الصحة والمرض، وعلاقة الطبيب بالمريض والمجتمع. وكذلك تحمي حقوقك الطبية .',
                    lessons: {
                        semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1CSSN_5C27yTZjznP9w7g1yVEWtA4jLd1?usp=drive_link', difficulty: 'hard' }]
                    },
                    youtube: { semester1: [], semester2: [] },
                    summaries: { semester1: [{ title: 'Resume', link: 'https://drive.google.com/file/d/1rcKrcs6OXaPkdQD4DdNCMX8nr3Kt_4s9/view?usp=drive_link' }] },
                    tips: ['ضمن المواد التي لن تلتقي بهم ابدا', 'تستطيع تاجيلها ودراستها عند اقتراب الامتحان', 'اعتمد على اليوتيوب بشكل نهائي', 'افهم المفاهيم واحفظها'],
                    importance: ['فهم العوامل الاجتماعية للأمراض', 'تحسين العلاقة مع المرضى', 'اتخاذ قرارات أخلاقية', 'العمل ضمن الفريق الصحي']
                },
                'embryologie': {
                    id: 'embryologie',
                    title: 'EMBRYOLOGIE',
                    icon: '👶',
                    description: 'تتمحور حول تطور الجنين من الاخصاب الى الاسبوع الرابع من التطور الجنيني, المادة معقدة قليلا ومهمة كثيرا لكن الفيديوهات التي وضعتها لكم تساعدكم بشكل كبير جدا .',
                    lessons: {
                        semester1: [{ title: 'Cours', link: 'https://drive.google.com/drive/folders/1CR7rYcjoJ_BWVZHST3RSoA5GhNSoOMFi?usp=drive_link', difficulty: 'hard' }]
                    },
                    youtube: {
                        semester1: [{ title: 'Playlist', link: 'https://youtube.com/playlist?list=PLB3gueQInnKkrl8iQ24xszSHvvrGsz3Ud&si=msutfOyr58ir1j1v' }]
                    },
                    summaries: { semester1: [] },
                    tips: ['تابع مراحل التطور بالتسلسل', 'استخدم الرسوم المتحركة كثيرا', 'افهم المصطلحات قبل ما تحفظها', 'ركز على النقاط الحرجة والايام كثيرا'],
                    importance: ['فهم التشوهات الخلقية', 'أساس علم الوراثة', 'تفسير الحالات السريرية', 'مهم لطب النساء والتوليد']
                },
                'chimie': {
                    id: 'chimie',
                    title: 'CHIMIE',
                    icon: '⚗️',
                    description: 'من المواد التي ليست مهمة في الطب واراها كاضافة لرفع المعدل تدرسون حول الذرة والجزيئ في الفصل الثاني تصصبح سهلة وممتعة وتميل قليلا الى الطب',
                    lessons: {
                        semester1: [{ title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1F_2dZ-X19hYq7KAeUwEA375H4XkDLtHy?usp=drive_link', difficulty: 'medium' }],
                        semester2: [
                            { title: 'Les Cours', link: 'https://drive.google.com/drive/folders/1VrCWvQr1JKH40d01CJkQIT2J9Qkt0B5P?usp=drive_link', difficulty: 'medium' }
                        ]
                    },
                    youtube: {
                        semester1: [
                            { title: 'Playlist', link: 'https://youtube.com/playlist?list=PLgWzWDJ5fcXkXT1028nVW4HaAJXyjHOEH&si=B8bf8X_WOaPJDgXw' },
                            { title: 'Playlist 2', link: 'https://youtube.com/playlist?list=PLgWzWDJ5fcXmijtRkLeBAbUY5QTr0gX7c&si=lwB8WzdFhocHgOws' },
                            { title: 'Playlist 3', link: 'https://youtube.com/playlist?list=PLvYKeChoC24A6jhqboAovvktPsqLNlXx1&si=OR1IsEbrdS6F5DNX' }
                        ],
                        semester2: [{ title: 'Playlist', link: 'https://youtube.com/playlist?list=PLkpUyH10WPwV578GrSfc0WvLjYCLgQgnE&si=DzYSja3PmwnEEewO' }]
                    },
                    summaries: {
                        semester1: [],
                        semester2: []
                    },
                    tips: ['افهم الأساس النظري', 'حل التمارين التطبيقية', 'اربط بين الكيمياء والطب', 'استخدم النماذج الجزيئية'],
                    importance: ['أساس الكيمياء الحيوية', 'فهم تفاعلات الأدوية', 'تفسير نتائج المختبر', 'التحضير للصيدلة']
                },
                'cardiovasculaire': {
                    id: 'cardiovasculaire',
                    title: 'CARDIOVASCULAIRE',
                    icon: '🫀',
                    description: 'دراسة الجهاز القلبي الوعائي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                    lessons: [
                        { title: 'Anatomique', link: 'https://drive.google.com/drive/folders/1m1IJPo2yc4djXSk1RpJ4hi9smO7C8HQk?usp=drive_link', difficulty: 'medium' },
                        { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1tQ0YGtfyr3XUwmzaCQnKrURc2tVbgVjy?usp=drive_link', difficulty: 'hard' },
                        { title: 'Biophysique', link: 'https://drive.google.com/drive/folders/1aiNVOxcXpJcc0CSrmwyOLVniw7__SLH2?usp=drive_link', difficulty: 'hard' },
                        { title: 'Histologie', link: 'https://drive.google.com/drive/folders/17DDAtsFF12asjfpfEenvUVGtm_rMvfSo?usp=drive_link', difficulty: 'medium' }
                    ],
                    youtube: null,
                    summaries: [{ title: 'Lumed Anatomie', link: 'https://drive.google.com/file/d/1p8tzAzQ1aNosaKYfF6nhi_Dh7QSGJ_Vj/view?usp=drive_link' }],
                    tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين التشريح والوظيفة'],
                    importance: ['أساس أمراض القلب', 'فهم ضغط الدم', 'تفسير تخطيط القلب', 'التعامل مع الطوارئ القلبية']
                },
                'nerveux': {
                    id: 'nerveux',
                    title: 'NERVEUX',
                    icon: '🧠',
                    description: 'دراسة الجهاز العصبي، تركيبه، وظائفه، والاضطرابات التي تصيبه.',
                    lessons: [],
                    youtube: null,
                    summaries: [],
                    tips: [],
                    importance: []
                },
                'digestif': {
                    id: 'digestif',
                    title: 'DIGESTIF',
                    icon: '😋',
                    description: 'دراسة الجهاز الهضمي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                    lessons: [
                        { title: 'Anatomie', link: 'https://drive.google.com/drive/folders/1OkXTN5dgbLo3oVluQo98r_e4h42-s4Ej?usp=drive_link', difficulty: 'medium' },
                        { title: 'Biochimie', link: 'https://drive.google.com/drive/folders/1Qrkno1LCVGC07MRYyAZSITm00VwP-uKL?usp=drive_link', difficulty: 'easy' },
                        { title: 'Histologie', link: 'https://drive.google.com/drive/folders/1-awFn-UtHWTtFOuzEUIoQyd-lWu1IdXs?usp=drive_link', difficulty: 'easy' },
                        { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1fYSS4ZvCUk-t7KBBpR78rk8aMj5rs0Hc?usp=drive_link', difficulty: 'medium' }
                    ],
                    youtube: null,
                    summaries: [{ title: 'Lumed Anatomie', link: 'https://drive.google.com/drive/folders/17CbnmOLKkWCYJd3IQ0NbgCJ_d8IZseYs?usp=drive_link' }, { title: 'Lumed Biochimie', link: 'https://drive.google.com/drive/folders/1qWGNdW812vrqAUnaHWKYam1ZVZgLJVqJ?usp=drive_link' }, { title: 'Lumed Histologie', link: 'https://drive.google.com/drive/folders/1JhyLqxGrG5dQsBm72ASYeviZh12UmGeW?usp=drive_link' }, { title: 'Lumed Physiologie', link: 'https://drive.google.com/drive/folders/1Qtfx2KPMSxOrQoG08yXTwneKdrNKJr2O?usp=drive_link' }],
                    tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين الأعضاء المختلفة'],
                    importance: ['تشخيص الأمراض الهضمية', 'فهم سوء الامتصاص', 'التخطيط العلاجي', 'الوقاية من الأمراض']
                },
                'endocrineien': {
                    id: 'endocrineien',
                    title: 'ENDOCRINEIEN',
                    icon: '⚖️',
                    description: 'دراسة الغدد الصماء، الهرمونات التي تفرزها، وتأثيراتها على الجسم.',
                    lessons: [
                        { title: 'Anatomie', link: 'https://drive.google.com/drive/folders/1Qwhdu0mKSeFwmRE8zfwQbZWQGGLDzF2a?usp=drive_link', difficulty: 'hard' },
                        { title: 'Biochimie', link: 'https://drive.google.com/drive/folders/1JCJ2HJUi1WN6bhkvoR4nbhm_GfGodTiw?usp=drive_link', difficulty: 'easy' },
                        { title: 'Histologie', link: 'https://drive.google.com/drive/folders/1y1qosuksPA_ey39MaP0JD97f9FqBmXpy?usp=drive_link', difficulty: 'medium' },
                        { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1a56QvdTzSnUiRGX34NNksyri9Ko7_M5F?usp=drive_link', difficulty: 'easy' }
                    ],
                    youtube: null,
                    summaries: [{ title: 'Lumed Anatomie', link: 'https://drive.google.com/drive/folders/1wL-lSqECA3zXUkhPMOfIQ7H-Qk5ug1Vw?usp=drive_link' }, { title: 'Lumed Biochimie', link: 'https://drive.google.com/drive/folders/17rzQ0ZdRAUOV4KKIzQSAOKKT23OcAVfE?usp=drive_link' }, { title: 'Lumed Histologie', link: 'https://drive.google.com/drive/folders/1ZzxNjPAtEZ4dBxh5ZcTYaA4gaQifpFIC?usp=drive_link' }, { title: 'Lumed Physiologie', link: 'https://drive.google.com/drive/folders/1uhqy0FkrkCzCPQB1fHd-FWlGG4Rps9Mh?usp=drive_link' }],
                    tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين الغدد المختلفة'],
                    importance: ['تشخيص الأمراض الغدية', 'فهم الاعراض المرتبطة', 'التخطيط العلاجي', 'الوقاية من الأمراض']
                },
                'urinaire': {
                    id: 'urinaire',
                    title: 'URINAIRE',
                    icon: '💧',
                    description: 'دراسة الجهاز البولي، تركيبه، وظائفه، والأمراض التي تصيبه.',
                    lessons: [
                        { title: 'Anatomie', link: 'https://drive.google.com/drive/folders/1-6vSXjW0CMAylAoX3aeC0CIj8-Wsx66M?usp=drive_link', difficulty: 'medium' },
                        { title: 'Biochimie', link: 'https://drive.google.com/drive/folders/1H9s1QAiTS8uzSj8wKci0997AaC6oCaYD?usp=drive_link', difficulty: 'medium' },
                        { title: 'Histologie', link: 'https://drive.google.com/drive/folders/1Ki6ok-KJ1CqV6w9oLgx5K-pB6XRHDmKL?usp=drive_link', difficulty: 'easy' },
                        { title: 'Physiologie', link: 'https://drive.google.com/drive/folders/1aJ2hBJ5rgT0ZfL0hTlpLZ3ycZIPECBf2?usp=drive_link', difficulty: 'medium' }
                    ],
                    youtube: null,
                    summaries: [{ title: 'Lumed Anatomie', link: 'https://drive.google.com/drive/folders/1-LRsk7tb50KBFhEfx-JQMIicUO-33u-j?usp=drive_link' }, { title: 'Lumed Biochimie', link: 'https://drive.google.com/file/d/1Lmzai9J9x2TXQ2wV01W4pb7Wtn5DDPy-/view?usp=drive_link' }, { title: 'Lumed Histologie', link: 'https://drive.google.com/drive/folders/1N1XPlP5ycIbNL2N3yzwuSuIySSqnWknW?usp=drive_link' }, { title: 'Lumed Physiologie', link: 'https://drive.google.com/drive/folders/1p4Bmbkz2E33IaSxpXrEgVE0Di015PKUb?usp=drive_link' }],
                    tips: ['استخدم الرسوم التوضيحية', 'ادرس الحالات السريرية', 'افهم الآليات الفسيولوجية', 'ربط بين التركيب والوظيفة'],
                    importance: ['تشخيص أمراض الكلى', 'فهم الفشل الكلوي', 'التخطيط العلاجي', 'الوقاية من الحصوات']
                },
                'genetique': {
                    id: 'genetique',
                    title: 'GENETIQUE',
                    icon: '🧬',
                    description: 'دراسة الوراثة، الجينات، والاضطرابات الوراثية التي تصيب الإنسان.',
                    lessons: [],
                    youtube: null,
                    summaries: [],
                    tips: [],
                    importance: []
                },
                'immunologie': {
                    id: 'immunologie',
                    title: 'IMMUNOLOGIE',
                    icon: '🛡️',
                    description: 'دراسة جهاز المناعة والدفاعات الطبيعية للجسم ضد العوامل الممرضة والخلايا غير الطبيعية.',
                    lessons: [],
                    youtube: null,
                    summaries: [],
                    tips: [],
                    importance: []
                }
            }
        };
    </script>

    <!-- Notifications System -->
    <div id="search-modal">
        <div class="search-container">
            <div class="search-header">
                <h3>البحث في MedGpa 🔍</h3>
                <button class="search-close" onclick="toggleSearch()">&times;</button>
            </div>
            <div class="search-input-wrapper">
                <input type="text" id="search-input" placeholder="ابحث عن مادة، درس، أو معلومة..."
                    oninput="handleSearch(this.value)">
            </div>
            <div id="search-results" class="search-results">
                <!-- Search results appear here -->
            </div>
        </div>
    </div>

    <div id="toast-container"
        style="position: fixed; top: 20px; left: 20px; z-index: 10001; display: flex; flex-direction: column; gap: 10px;">
    </div>

    <div id="focus-mode-overlay">
        <div class="focus-mode-panel">
            <h2>وضعية التركيز 🧘</h2>
            <div class="pomodoro-timer">
                <div id="timer-display" class="timer-display">25:00</div>
                <div class="timer-controls">
                    <button class="timer-btn" onclick="startTimer()">بدء</button>
                    <button class="timer-btn" onclick="pauseTimer()">إيقاف</button>
                    <button class="timer-btn" onclick="resetTimer()">إعادة تعيين</button>
                </div>
            </div>
            <button class="exit-focus-btn" onclick="toggleFocusMode()">إنهاء الوضعية</button>
        </div>
    </div>

    <div id="achievements-panel">
        <div class="achievements-content">
            <div class="achievements-header">
                <h2>إنجازاتي 🏆</h2>
                <button class="close-achievements" onclick="toggleAchievements()">&times;</button>
            </div>
            <div class="points-display">
                <div class="points-circle">
                    <span id="user-points" style="font-size: 2.5rem; font-weight: 800;">0</span>
                    <span style="font-size: 0.9rem;">نقطة</span>
                </div>
                <p style="color: var(--text-secondary);">استمر في المذاكرة لجمع المزيد!</p>
            </div>
            <div id="achievements-list">
                <!-- Achievements will be listed here -->
            </div>
        </div>
    </div>

    <script>
        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast-notification toast-${type}`;

            let icon = 'ℹ️';
            if (type === 'success') icon = '✅';
            if (type === 'error') icon = '❌';
            if (type === 'warning') icon = '⚠️';
            if (type === 'motivational') icon = '🔥';

            toast.innerHTML = `
        <div class="toast-icon">${icon}</div>
        <div class="toast-content">${message}</div>
        <button class="toast-close" onclick="this.parentElement.remove()">&times;</button>
    `;

            container.appendChild(toast);

            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 100);

            // Auto remove
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // Initial Welcome Toast
        setTimeout(() => {
            showToast('شكراً لزيارتك MedGpa! نحن هنا لمساعدتك في رحلتك الطبية ⚕️', 'motivational', 5000);
        }, 2000);

        /* --- Med-Glossary Logic --- */
        const GLOSSARY_DATA = [
            { term: "HTA", full: "Hypertension Artérielle", cat: "Cardiologie", ar: "ارتفاع ضغط الدم" },
            { term: "ECG", full: "Électrocardiogramme", cat: "Cardiologie", ar: "تخطيط القلب الكهربائي" },
            { term: "IRM", full: "Imagerie par Résonance Magnétique", cat: "Radiologie", ar: "التصوير بالرنين المغناطيسي" },
            { term: "AVC", full: "Accident Vasculaire Cérébral", cat: "Neurologie", ar: "سكتة دماغية" },
            { term: "SIDA", full: "Syndrome d'ImmunoDéficience Acquise", cat: "Infectiologie", ar: "نقص المناعة المكتسب (الإيدز)" },
            { term: "ADN", full: "Acide DésoxyriboNucléique", cat: "Génétique", ar: "الحمض النووي الريبوزي منقوص الأكسجين" },
            { term: "QCM", full: "Question à Choix Multiples", cat: "Général", ar: "أسئلة ذات خيارات متعددة" },
            { term: "ORL", full: "Oto-Rhino-Laryngologie", cat: "Spécialité", ar: "طب الأنف والأذن والحنجرة" },
            { term: "EP", full: "Embolie Pulmonaire", cat: "Pneumologie", ar: "الانصمام الرئوي" },
            { term: "IDM", full: "Infarctus du Myocarde", cat: "Cardiologie", ar: "احتشاء عضلة القلب (جلطة)" },
            { term: "BPCO", full: "Broncho-Pneumopathie Chronique Obstructive", cat: "Pneumologie", ar: "الانسداد الرئوي المزمن" },
            { term: "VADS", full: "Voies Aéro-Digestives Supérieures", cat: "Anatomie", ar: "المجاري التنفسية والهضمية العليا" },
            { term: "LCR", full: "Liquide Céphalo-Rachidien", cat: "Neurologie", ar: "السائل الدماغي الشوكي" },
            { term: "PL", full: "Ponction Lombaire", cat: "Neurologie", ar: "البزل القطني" },
            { term: "IV", full: "Intra-Veneux", cat: "Pratique", ar: "حقن وريدي" },
            { term: "IM", full: "Intra-Musculaire", cat: "Pratique", ar: "حقن عضلي" },
            { term: "EFR", full: "Exploration Fonctionnelle Respiratoire", cat: "Pneumologie", ar: "استكشاف الوظائف التنفسية" },
            { term: "HGT", full: "Hémogramme Globu-Test (Glycémie)", cat: "Pratique", ar: "قياس السكر الشعيري" },
            { term: "OAP", full: "Oedème Aigu du Poumon", cat: "Cardiologie", ar: "وذمة الرئة الحادة" },
            { term: "TA", full: "Tension Artérielle", cat: "Général", ar: "الضغط الشرياني" },
            { term: "RAA", full: "Rhumatisme Articulaire Aigu", cat: "Rhumatologie", ar: "الحمى الرثوية (المفاصل)" },
            { term: "CRP", full: "C-Reactive Protein", cat: "Biologie", ar: "البروتين التفاعلي C (مؤشر التهاب)" },
            { term: "VS", full: "Vitesse de Sédimentation", cat: "Biologie", ar: "سرعة الترسيب" },
            { term: "GB", full: "Globules Blancs", cat: "Hématologie", ar: "كريات الدم البيضاء" },
            { term: "GR", full: "Globules Rouges", cat: "Hématologie", ar: "كريات الدم الحمراء" },
            { term: "NFS", full: "Numération Formule Sanguine", cat: "Hématologie", ar: "تحليل تعداد الدم الكامل" },
            { term: "AAA", full: "Anévrisme de l'Aorte Abdominale", cat: "Vasculaire", ar: "تمدد الشريان الأورطي البطني" },
            { term: "ACFA", full: "Arythmie Complexe", cat: "Cardiologie", ar: "الرجفان الأذيني" },
            { term: "ADP", full: "Adénopathie", cat: "Sémiologie", ar: "تضخم العقد اللمفاوية" },
            { term: "AOMI", full: "Artériopathie des Membres Inf.", cat: "Vasculaire", ar: "اعتلال الشرايين المحيطية" },
            { term: "APP", full: "Appendicectomie", cat: "Chirurgie", ar: "استئصال الزائدة الدودية" },
            { term: "ARN", full: "Acide Ribonucléique", cat: "Génétique", ar: "الحمض النووي الريبوزي" },
            { term: "ASAT", full: "Aspartate Aminotransférase", cat: "Biologie", ar: "إنزيم ناقل أمين الأسبرتات (TGO)" },
            { term: "ALAT", full: "Alanine Aminotransférase", cat: "Biologie", ar: "إنزيم ناقل أمين الألانين (TGP)" },
            { term: "ATCD", full: "Antécédents", cat: "Clinique", ar: "السوابق الطبية للمريض" },
            { term: "AVK", full: "Anti-Vitamine K", cat: "Pharmacologie", ar: "مضادات فيتامين K (مميعات دم)" },
            { term: "BAV", full: "Bloc Auriculo-Ventriculaire", cat: "Cardiologie", ar: "إحصار أذيني بطيني" },
            { term: "BCG", full: "Bacille Calmette-Guérin", cat: "Vaccination", ar: "لقاح السل" },
            { term: "BMI", full: "Body Mass Index", cat: "Nutrition", ar: "مؤشر كتلة الجسم (IMC)" },
            { term: "CIVD", full: "Coagulation Intravasculaire", cat: "Hématologie", ar: "التخثر المنتشر داخل الأوعية" },
            { term: "CPRE", full: "Cholangio-Pancréatographie", cat: "Gastro", ar: "تصوير القنوات الصفراوية والبنكرياس" },
            { term: "DFG", full: "Débit de Filtration Glomérulaire", cat: "Néphrologie", ar: "معدل الرشح الكبيبي" },
            { term: "DMLA", full: "Dégénérescence Maculaire", cat: "Ophtalmo", ar: "التنكس البقعي المرتبط بالعمر" },
            { term: "DPN", full: "Diagnostic Prénatal", cat: "Gynécologie", ar: "التشخيص قبل الولادة" },
            { term: "DT1", full: "Diabète de Type 1", cat: "Endocrino", ar: "السكري من النوع 1" },
            { term: "DT2", full: "Diabète de Type 2", cat: "Endocrino", ar: "السكري من النوع 2" },
            { term: "EEG", full: "Électroencéphalogramme", cat: "Neurologie", ar: "تخطيط الدماغ الكهربائي" },
            { term: "EMG", full: "Électromyogramme", cat: "Neurologie", ar: "تخطيط العضلات الكهربائي" },
            { term: "EPS", full: "Électrophorèse des Protéines", cat: "Biologie", ar: "الرحلان الكهربائي لبروتينات المصل" },
            { term: "ERC", full: "Insuffisance Rénale Chronique", cat: "Néphrologie", ar: "القصور الكلوي المزمن" },
            { term: "ETO", full: "Échographie Trans-Oesoph.", cat: "Cardiologie", ar: "التصوير بالصدى عبر المريء" },
            { term: "FCV", full: "Frottis Cervico-Vaginal", cat: "Gynécologie", ar: "لطاخة عنق الرحم" },
            { term: "FEVG", full: "Fraction d'Éjection VG", cat: "Cardiologie", ar: "الكسر القذفي للبطين الأيسر" },
            { term: "FIV", full: "Fécondation In Vitro", cat: "PMA", ar: "التلقيح الاصطناعي (أطفال الأنابيب)" },
            { term: "GCS", full: "Glasgow Coma Scale", cat: "Neurologie", ar: "مقياس غلاسكو للغيبوبة" },
            { term: "GNA", full: "Glomérulonéphrite Aiguë", cat: "Néphrologie", ar: "التهاب الكبيبات الكلوية الحاد" },
            { term: "HbA1c", full: "Hémoglobine Glyquée", cat: "Endocrino", ar: "الهيموغلوبين السكري (التراكمي)" },
            { term: "HDL", full: "High Density Lipoprotein", cat: "Biologie", ar: "البروتين الدهني عالي الكثافة" },
            { term: "HGPO", full: "Hyperglycémie Provoquée", cat: "Endocrino", ar: "اختبار تحمل الغلوكوز الفموي" },
            { term: "HRP", full: "Hématome Rétro-Placentaire", cat: "Gynécologie", ar: "ورم دموي خلف المشيمة" },
            { term: "HTIC", full: "Hypertension Intra-Crânienne", cat: "Neurologie", ar: "ارتفاع الضغط داخل الجمجمة" },
            { term: "HTP", full: "Hypertension Pulmonaire", cat: "Cardiologie", ar: "ارتفاع ضغط الدم الرئوي" },
            { term: "IC", full: "Insuffisance Cardiaque", cat: "Cardiologie", ar: "القصور القلبي" },
            { term: "IRA", full: "Insuffisance Rénale Aiguë", cat: "Néphrologie", ar: "القصور الكلوي الحاد" },
            { term: "IRC", full: "Insuffisance Respiratoire Chronique", cat: "Pneumologie", ar: "القصور التنفسي المزمن" },
            { term: "IVG", full: "Interruption Volontaire Grossesse", cat: "Gynécologie", ar: "الإجهاض الإرادي" },
            { term: "LAL", full: "Leucémie Aiguë Lympho.", cat: "Oncologie", ar: "ابيضاض الدم الليمفاوي الحاد" },
            { term: "LAM", full: "Leucémie Aiguë Myélo.", cat: "Oncologie", ar: "ابيضاض الدم النقوي الحاد" },
            { term: "LDL", full: "Low Density Lipoprotein", cat: "Biologie", ar: "البروتين الدهني منخفض الكثافة" },
            { term: "LEC", full: "Lithotritie Extra-Corporelle", cat: "Urologie", ar: "تفتيت الحصى بالموجات الصدمية" },
            { term: "LED", full: "Lupus Érythémateux Disséminé", cat: "Rhumatologie", ar: "الذئبة الحمامية الجهازية" },
            { term: "LP", full: "Libération Prolongée", cat: "Pharmacologie", ar: "دواء طويل المفعول" },
            { term: "MAP", full: "Menace d'Accouchement Prématuré", cat: "Gynécologie", ar: "خطر الولادة المبكرة" },
            { term: "MFIU", full: "Mort Foetale In Utero", cat: "Gynécologie", ar: "وفاة الجنين داخل الرحم" },
            { term: "NASH", full: "Stéato-Hépatite Non Alcoolique", cat: "Gastro", ar: "التهاب الكبد الدهني غير الكحولي" },
            { term: "OCT", full: "Optical Coherence Tomography", cat: "Ophtalmo", ar: "التصوير المقطعي للترابط البصري" },
            { term: "PAC", full: "Pneumonie Aiguë Communautaire", cat: "Pneumologie", ar: "الالتهاب الرئوي المكتسب" },
            { term: "PAD", full: "Pression Artérielle Diastolique", cat: "Clinique", ar: "الضغط الشرياني الانبساطي" },
            { term: "PAS", full: "Pression Artérielle Systolique", cat: "Clinique", ar: "الضغط الشرياني الانقباضي" },
            { term: "PCR", full: "Polymerase Chain Reaction", cat: "Génétique", ar: "تفاعل البوليميراز المتسلسل" },
            { term: "PE", full: "Pré-Éclampsie", cat: "Gynécologie", ar: "ما قبل الارتعاج (تسمم الحمل)" },
            { term: "PMA", full: "Procréation Médicalement Assis.", cat: "Gynécologie", ar: "المساعدة الطبية على الإنجاب" },
            { term: "PNN", full: "PolyNucléaires Neutrophiles", cat: "Hématologie", ar: "الكريات البيض المتعادلة" },
            { term: "PR", full: "Polyarthrite Rhumatoïde", cat: "Rhumatologie", ar: "التهاب المفاصل الروماتويدي" },
            { term: "PSA", full: "Prostate Specific Antigen", cat: "Urologie", ar: "المستضد البروستاتي النوعي" },
            { term: "PU", full: "Protéinurie", cat: "Néphrologie", ar: "وجود البروتين في البول" },
            { term: "RA", full: "Rétrécissement Aortique", cat: "Cardiologie", ar: "تضيق الصمام الأبهر" },
            { term: "RAM", full: "Rupture des Membranes", cat: "Gynécologie", ar: "تمزق الأغشية (نزول الماء)" },
            { term: "RGO", full: "Reflux Gastro-Oesophagien", cat: "Gastro", ar: "الارتجاع المعدي المريئي" },
            { term: "RM", full: "Rétrécissement Mitral", cat: "Cardiologie", ar: "تضيق الصمام التاجي" },
            { term: "ROR", full: "Rougeole-Oreillons-Rubéole", cat: "Vaccination", ar: "لقاح الحصبة والنكاف والألمانية" },
            { term: "SA", full: "Semaine d'Aménorrhée", cat: "Gynécologie", ar: "أسابيع الحمل" },
            { term: "SAMU", full: "Service d'Aide Médicale Urgente", cat: "Urgences", ar: "الإسعاف الطبي الاستعجالي" },
            { term: "SAT", full: "Saturation en Oxygène", cat: "Clinique", ar: "تشبع الدم بالأكسجين" },
            { term: "SDRA", full: "Syndrome Détresse Resp. Aiguë", cat: "Pneumologie", ar: "متلازمة الضائقة التنفسية الحادة" },
            { term: "SEP", full: "Sclérose En Plaques", cat: "Neurologie", ar: "التصلب اللويحي" },
            { term: "SHU", full: "Syndrome Hémolytique Urémique", cat: "Néphrologie", ar: "المتلازمة الانحلالية اليوريميّة" },
            { term: "SNV", full: "Système Nerveux Végétatif", cat: "Anatomie", ar: "الجهاز العصبي الذاتي" },
            { term: "SOPK", full: "Syndrome Ovaires Polykystiques", cat: "Gynécologie", ar: "متلازمة تكيس المبايض" },
            { term: "TDM", full: "Tomodensitométrie", cat: "Radiologie", ar: "التصوير المقطعي (Scanner)" },
            { term: "TEP", full: "Tomographie Émission Positons", cat: "Radiologie", ar: "التصوير المقطعي بالإصدار البوزيتروني" },
            { term: "TV", full: "Tachycardie Ventriculaire", cat: "Cardiologie", ar: "تسرع القلب البطيني" },
            { term: "TVP", full: "Thrombose Veineuse Profonde", cat: "Cardiologie", ar: "تجلط الأوردة العميقة" },
            { term: "VEMS", full: "Volume Expiratoire Max/Sec", cat: "Pneumologie", ar: "حجم الزفير القسري في ثانية" },
            { term: "VVC", full: "Voie Veineuse Centrale", cat: "Clinique", ar: "القثطرة الوريدية المركزية" },
            { term: "VVP", full: "Voie Veineuse Périphérique", cat: "Clinique", ar: "القثطرة الوريدية المحيطية" },
            { term: "AC", full: "Anticorps", cat: "Immunologie", ar: "أجسام مضادة" },
            { term: "AG", full: "Anesthésie Générale", cat: "Médecine", ar: "تخدير عام" },
            { term: "AINS", full: "Anti-Inflammatoires Non Stéro.", cat: "Pharmacologie", ar: "مضادات الالتهاب غير الستيروئيدية" },
            { term: "AMM", full: "Autorisation Mise sur Marché", cat: "Admin", ar: "ترخيص تسويق الدواء" },
            { term: "AP", full: "Artère Pulmonaire", cat: "Anatomie", ar: "الشريان الرئوي" },
            { term: "ATB", full: "Antibiotique", cat: "Pharmacologie", ar: "مضاد حيوي" },
            { term: "AVP", full: "Accident de la Voie Publique", cat: "Urgences", ar: "حادث سير" },
            { term: "BU", full: "Bandelette Urinaire", cat: "Pratique", ar: "شريط فحص البول" },
            { term: "CEC", full: "Circulation Extra-Corporelle", cat: "Chirurgie", ar: "الدورة الدموية خارج الجسم" },
            { term: "CGR", full: "Concentré de Globules Rouges", cat: "Hématologie", ar: "كريات الدم الحمراء المركزة" },
            { term: "CMV", full: "Cytomégalovirus", cat: "Infectiologie", ar: "الفيروس المضخم للخلايا" },
            { term: "ECBU", full: "Examen Cyto-Bactério des Urines", cat: "Biologie", ar: "فحص البول المخبري" },
            { term: "EEP", full: "Épreuve d'Effort", cat: "Cardiologie", ar: "اختبار الجهد" },
            { term: "GDS", full: "Gaz Du Sang", cat: "Réanimation", ar: "غازات الدم" },
            { term: "IA", full: "Insuffisance Aortique", cat: "Cardiologie", ar: "قصور الصمام الأبهر" },
            { term: "IM", full: "Insuffisance Mitrale", cat: "Cardiologie", ar: "قصور الصمام التاجي" },
            { term: "IV", full: "Insuffisance Ventriculaire", cat: "Cardiologie", ar: "قصور بطيني" },
            { term: "LNH", full: "Lymphome Non Hodgkinien", cat: "Oncologie", ar: "ليمفوما غير هودجكين" },
            { term: "PVC", full: "Pression Veineuse Centrale", cat: "Anesthésie", ar: "الضغط الوريدي المركزي" },
            { term: "VMA", full: "VanillylMandelic Acid", cat: "Biologie", ar: "حمض الفانيليل مندليك" }
        ];

        let currentLetterFilter = '';

        function initGlossary() {
            const alphabetFilter = document.getElementById('alphabetFilter');
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

            let html = `<button class="letter-btn ${currentLetterFilter === '' ? 'active' : ''}" onclick="filterByLetter('')">الكل</button>`;
            alphabet.forEach(letter => {
                html += `<button class="letter-btn ${currentLetterFilter === letter ? 'active' : ''}" onclick="filterByLetter('${letter}')">${letter}</button>`;
            });
            alphabetFilter.innerHTML = html;
            renderGlossary(GLOSSARY_DATA);
        }

        function renderGlossary(data) {
            const grid = document.getElementById('glossaryGrid');
            const empty = document.getElementById('glossaryEmpty');

            if (!grid || !empty) return;

            if (data.length === 0) {
                grid.innerHTML = '';
                empty.style.display = 'block';
                return;
            }

            empty.style.display = 'none';
            let html = '';
            data.sort((a, b) => a.term.localeCompare(b.term)).forEach(item => {
                html += `
                            <div class="glossary-card">
                                <span class="glossary-category">${item.cat}</span>
                                <h3 class="glossary-term">${item.term}</h3>
                                <span class="glossary-full">${item.full}</span>
                                <div class="glossary-meaning">${item.ar}</div>
                            </div>
                        `;
            });
            grid.innerHTML = html;
        }

        function filterGlossary() {
            const query = document.getElementById('glossarySearch').value.toUpperCase();
            currentLetterFilter = '';
            updateAlphabetButtons();

            const filtered = GLOSSARY_DATA.filter(item =>
                item.term.toUpperCase().includes(query) ||
                item.full.toUpperCase().includes(query) ||
                item.ar.includes(query)
            );
            renderGlossary(filtered);
        }

        function filterByLetter(letter) {
            currentLetterFilter = letter;
            document.getElementById('glossarySearch').value = '';
            updateAlphabetButtons();

            const filtered = letter === ''
                ? GLOSSARY_DATA
                : GLOSSARY_DATA.filter(item => item.term.toUpperCase().startsWith(letter));
            renderGlossary(filtered);
        }

        function updateAlphabetButtons() {
            const btns = document.querySelectorAll('.letter-btn');
            btns.forEach(btn => {
                if (btn.textContent === 'الكل' && currentLetterFilter === '') btn.classList.add('active');
                else if (btn.textContent === currentLetterFilter) btn.classList.add('active');
                else btn.classList.remove('active');
            });
        }

        // --- Pathology Atlas Logic ---
        const INTERNAL_PATHOLOGY_DATA = [
            {
                id: 1,
                category: "Hematology",
                title_fr: "Anémie Ferriprive",
                title_ar: "فقر الدم بنقص الحديد",
                findings_fr: [
                    "Microcytose : Les globules rouges sont plus petits que la normale car ils manquent d'hémoglobine pour se remplir.",
                    "Hypochromie : Les cellules sont pâles avec un centre clair très large, signe d'une faible concentration en fer.",
                    "Anisocytose : On observe des cellules de tailles très différentes, traduisant une production de sang perturbée.",
                    "Poïkilocytose : Les cellules prennent des formes anormales (en cible ou allongées) à cause de leur fragilité."
                ],
                findings_ar: [
                    "صغر الكريات: تكون كرات الدم الحمراء أصغر من حجمها الطبيعي نتيجة نقص الهيموجلوبين اللازم لملئها.",
                    "نقص الصباغ: تظهر الخلايا باهتة مع مركز واسع شديد البياض، مما يدل على انخفاض تركيز الحديد.",
                    "تفاوت الأحجام: نلاحظ وجود كرات دم بأحجام مختلفة بشكل كبير، مما يعكس اضطراباً في عملية الإنتاج.",
                    "تفاوت الأشكال: تأخذ الكريات أشكالاً غير منتظمة (مثل الخلايا الهدفية) بسبب ضعف بنيتها الجزيئية."
                ],
                diagnosis_fr: "Anémie microcytaire hypochrome par carence martiale",
                diagnosis_ar: "فقر الدم لنقص الحديد (النوع الصغير والباهت)",
                symptoms_fr: "Pâleur, fatigue intense, essoufflement à l'effort, chute de cheveux.",
                symptoms_ar: "شحوب، تعب شديد، ضيق تنفس عند المجهود، تساقط الشعر.",
                treatment_fr: "Supplémentation en fer (oral ou IV) et traitement de la cause du saignement.",
                treatment_ar: "مكملات الحديد (عن طريق الفم أو الوريد) وعلاج سبب النزيف.",
                action_fr: "Faire une numération formule sanguine (NFS) et doser la ferritine.",
                action_ar: "إجراء تحليل صورة دم كاملة (NFS) وفحص مخزون الحديد (Ferritin)."
            },
            {
                id: 2,
                category: "Hematology",
                title_fr: "Leucémie Myéloïde Chronique",
                title_ar: "ابيضاض الدم النقوي المزمن",
                findings_fr: [
                    "Hyperleucocytose massive : Le sang est saturé de globules blancs, souvent plus de 100 000/mm³.",
                    "Myélémie équilibrée : On voit tous les stades de croissance des cellules (du bébé cellule à l'adulte).",
                    "Basophilie : Une augmentation des polynucléaires basophiles est un signe très évocateur de cette maladie.",
                    "Moelle très riche : La production est si intense qu'elle déborde massivement dans la circulation sanguine."
                ],
                findings_ar: [
                    "ارتفاع هائل في البيض: يمتلئ الدم بعدد ضخم من كريات الدم البيضاء، يتجاوز غالباً 100 ألف.",
                    "النخاعية المتوازنة: تظهر في الدم كل مراحل نمو الخلايا (من الخلايا الفتية جداً إلى الخلايا الناضجة).",
                    "زيادة الخلايا الأساسية: ارتفاع نسبة الخلايا البيضاء الأساسية (Basophils) وهو علامة قوية على المرض.",
                    "نخاع عظم مفرط النشاط: يكون الإنتاج مكثفاً جداً لدرجة أنه يفيض بشكل كبير إلى الدورة الدموية."
                ],
                diagnosis_fr: "LMC (Leucémie Myéloïde Chronique) avec présence du chromosome Philadelphie",
                diagnosis_ar: "اللوكيميا النقوية المزمنة (LMC)",
                symptoms_fr: "Splénomégalie (gros ventre à gauche), fatigue, sueurs nocturnes.",
                symptoms_ar: "تضخم الطحال (ثقل في الجانب الأيسر)، تعب، تعرق ليلي.",
                treatment_fr: "Inhibiteurs de la tyrosine kinase (Imatinib), thérapie ciblée.",
                treatment_ar: "مثبطات تيروزين كيناز (Imatinib)، وهو علاج موجه للخلايا السرطانية.",
                action_fr: "Caryotype pour rechercher le chromosome Philadelphie.",
                action_ar: "إجراء فحص الكروموسومات للبحث عن كروموسوم فيلادلفيا."
            },
            {
                id: 3,
                category: "Histology",
                title_fr: "Adénocarcinome Gastrique",
                title_ar: "السرطان الغدي للمعدة",
                findings_fr: [
                    "Glandes monstrueuses : Les cellules forment des structures creuses irrégulières qui détruisent le tissu normal.",
                    "Noyaux sombres et gros : Les centres des cellules sont déformés and hyperactifs, signe de cancer.",
                    "Invasion du muscle : La tumeur ne reste pas en surface, elle s'enfonce profondément dans la paroi de l'estomac.",
                    "Réaction fibreuse : Le corps crée du tissu cicatriciel rigide autour de la tumeur pour tenter de se défendre."
                ],
                findings_ar: [
                    "غدد سرطانية مشوهة: تشكل الخلايا بنى جوفاء غير منتظمة تقوم بتدمير الأنسجة الطبيعية للمعدة.",
                    "أنوية ضخمة وداكنة: تظهر مراكز الخلايا مشوهة ونشطة بشكل غير طبيعي، وهي علامة صريحة للسرطان.",
                    "غزو العضلات: لا يكتفي الورم بالبقاء على السطح، بل يتغلغل بعمق داخل جدار المعدة العضلي.",
                    "تفاعل ليفي: يقوم الجسم بتكوين نسيج ندبي صلب حول الورم في محاولة دفاعية يائسة."
                ],
                diagnosis_fr: "Adénocarcinome gastrique invasif",
                diagnosis_ar: "سرطان المعدة الغدي الغازي",
                symptoms_fr: "Douleurs épigastriques, perte de poids inexpliquée, anémie, vomissements.",
                symptoms_ar: "آلام في فم المعدة، فقدان وزن غير مبرر، فقر دم، قيء مستمر.",
                treatment_fr: "Chirurgie (gastrectomie), chimiothérapie, radiothérapie.",
                treatment_ar: "الجراحة (استئصال المعدة)، العلاج الكيماوي، أو العلاج الإشعاعي.",
                action_fr: "Endoscopie digestive haute avec biopsies multiples.",
                action_ar: "إجراء منظار معدة علوي مع أخذ عينات متعددة للفحص."
            },
            {
                id: 4,
                category: "Cytology",
                title_fr: "Frottis Cervical (Dysplasie)",
                title_ar: "عسر تصنع عنق الرحم (Frottis)",
                findings_fr: [
                    "Noyaux hypertrophiés : Le noyau devient beaucoup trop gros par rapport au reste de la cellule.",
                    "Contours irréguliers : Les bords du noyau sont dentelés au lieu d'être ronds et lisses.",
                    "Chromatine dense : Le contenu génétique est très condensé et se colore intensément en bleu/noir.",
                    "Koïlocytes : Certaines cellules ont un trou blanc autour du noyau, signe d'une infection par le HPV."
                ],
                findings_ar: [
                    "تضخم الأنوية: تصبح نواة الخلية كبيرة جداً مقارنة بالمساحة الكلية للخلية.",
                    "حدود غير منتظمة: تصبح حواف النواة مسننة ومتعرجة بدلاً من كونها دائرية وملساء.",
                    "كروماتين كثيف: المادة الوراثية تكون مضغوطة جداً وتتلون بلون أزرق داكن أو أسود.",
                    "الخلايا الكويلية: ظهور فجوة بيضاء حول النواة، وهي علامة سريرية للإصابة بفيروس HPV."
                ],
                diagnosis_fr: "Lésion intra-épithéliale de haut grade (Précancéreux)",
                diagnosis_ar: "آفة ما قبل سرطانية في عنق الرحم (درجة عالية)",
                symptoms_fr: "Généralement asymptomatique, parfois saignements après les rapports.",
                symptoms_ar: "غالباً بدون أعراض، أحياناً نزيف بسيط في غير أوقات الدورة.",
                treatment_fr: "Conisation (ablation de la zone suspecte), surveillance.",
                treatment_ar: "عملية التخريم (استئصال الجزء المصاب من العنق)، والمتابعة الدورية.",
                action_fr: "Frottis régulier (tous les 3 ans) et test HPV.",
                action_ar: "إجراء فحص اللطاخة (Frottis) بانتظام وفحص فيروس HPV."
            },
            {
                id: 5,
                category: "Histology",
                title_fr: "Cirrhose Hépatique",
                title_ar: "تليف وتشمع الكبد",
                findings_fr: [
                    "Nodules de régénération : Le foie se divise en petites boules de cellules qui tentent de survivre.",
                    "Ponts de fibrose : Des bandes de tissu rigide relient les différentes zones de cicatrisation.",
                    "Perte de l'architecture : La structure organisée du foie est totalement remplacée par un aspect désordonné.",
                    "Inflammation : Des cellules de défense sont présentes dans les zones fibreuses, signe d'une agression continue."
                ],
                findings_ar: [
                    "العقيدات التجديدية: ينقسم الكبد إلى كتل صغيرة من الخلايا التي تحاول البقاء والعمل رغم التلف.",
                    "جسور التليف: حزم من النسيج الصلب تربط بين مناطق الندبات المختلفة داخل الكبد.",
                    "تخرب الهيكل الكبدي: يتم استبدال البنية المنظمة للكبد بمظهر فوضوي وغير وظيفي.",
                    "الالتهاب المزمن: وجود خلايا مناعية دفاعية في المناطق الليفية، مما يشير إلى استمرار التلف."
                ],
                diagnosis_fr: "Cirrhose hépatique (stade cicatriciel terminal)",
                diagnosis_ar: "تشمع الكبد (المرحلة النهائية من التليف)",
                symptoms_fr: "Ictère (jaunisse), ascite (liquide dans le ventre), fatigue, œdèmes.",
                symptoms_ar: "يرقان (اصفرار)، استسقاء (سوائل في البطن)، تعب، تورم القدمين.",
                treatment_fr: "Arrêt de l'alcool, traitement des hépatites, transplantation hépatique.",
                treatment_ar: "التوقف التام عن الكحول، علاج الفيروسات الكبدية، أو زراعة الكبد.",
                action_fr: "Bilan hépatique et échographie abdominale régulière.",
                action_ar: "إجراء فحوصات وظائف الكبد وسونار دوري للبطن."
            },
            {
                id: 6,
                category: "Histology",
                title_fr: "Tuberculose Ganglionnaire",
                title_ar: "سل العقد اللمفاوية",
                findings_fr: [
                    "Granulome : Un cercle de cellules immunitaires organisées pour emprisonner les bactéries.",
                    "Nécrose caséeuse : Au centre, les tissus sont détruits et ressemblent à du fromage blanc (sans cellules).",
                    "Cellules de Langhans : Des cellules géantes avec plusieurs noyaux disposés en 'fer à cheval'.",
                    "Lymphocytes : Une couronne de petites cellules bleues entoure toute la lésion."
                ],
                findings_ar: [
                    "الورم الحبيبي: حلقة منظمة من الخلايا المناعية تحاول محاصرة وحبس البكتيريا المسببة للسل.",
                    "النخر المجبن: في المركز، يتم تدمير الأنسجة تماماً لتظهر بمظهر يشبه الجبن الأبيض الخالي من الخلايا.",
                    "خلايا لانغهانز: خلايا عملاقة ضخمة تحتوي على أنوية عديدة مرتبة على شكل نعل الفرس.",
                    "الإكليل اللمفاوي: طوق من الخلايا اللمفاوية الصغيرة يحيط بالمنطقة المصابة بالكامل."
                ],
                diagnosis_fr: "Adénite tuberculeuse avec nécrose caséeuse",
                diagnosis_ar: "التهاب العقد اللمفاوية السلي (الخنازير)",
                symptoms_fr: "Grosseurs au cou, fièvre nocturne, sueurs, perte de appétit.",
                symptoms_ar: "تضخم العقد في الرقبة، حمى مسائية، تعرق، فقدان شهية.",
                treatment_fr: "Antituberculeux pendant 6 mois (associant 4 antibiotiques).",
                treatment_ar: "علاجات السل لمدة 6 أشهر (مزيج من 4 مضادات حيوية).",
                action_fr: "IDR à la tuberculine ou test Quantiferon et biopsie.",
                action_ar: "إجراء اختبار السل الجلدي أو فحص الدم المخصص وأخذ خزعة."
            },
            {
                id: 7,
                category: "Cardiovascular",
                title_fr: "Athérosclérose",
                title_ar: "تصلب الشرايين (العصيدة)",
                findings_fr: [
                    "Plaque d'athérome : Une masse de graisse et de cholestérol qui bouche progressivement l'artère.",
                    "Cristaux de cholestérol : Des fentes vides en forme d'aiguille visibles là où la graisse a fondu.",
                    "Capsule fibreuse : Une couche solide qui recouvre la graisse pour essayer de stabiliser la plaque.",
                    "Calcification : L'artère devient dure comme de la pierre à cause de dépôts de calcaire."
                ],
                findings_ar: [
                    "اللويحة العصيدية: كتلة من الدهون والكوليسترول تتراكم تدريجياً وتؤدي لانسداد الشريان.",
                    "بلورات الكوليسترول: شقوق فارغة تشبه الإبر تظهر مكان الدهون التي ذابت أثناء التحضير.",
                    "الغطاء الليفي: طبقة صلبة تغطي مركز الدهون لمحاولة تثبيت اللويحة ومنع انفجارها.",
                    "التكلس: يصبح الشريان صلباً كالحجر بسبب ترسبات الكالسيوم داخل جدرانه."
                ],
                diagnosis_fr: "Athérosclérose aortique ou coronaire",
                diagnosis_ar: "تصلب الشرايين (تراكم الدهون)",
                symptoms_fr: "Souvent silencieux, angine de poitrine, douleurs dans les jambes.",
                symptoms_ar: "غالباً صامت، ذبحة صدرية، آلام في الساقين عند المشي.",
                treatment_fr: "Statines (anti-cholestérol), régime pauvre en graisses, exercice.",
                treatment_ar: "أدوية خفض الكوليسترول (الستاتينات)، نظام غذائي قليل الدهون، الرياضة.",
                action_fr: "Bilan lipidique complet et mesure de la tension artérielle.",
                action_ar: "إجراء فحص دهونات كامل وقياس ضغط الدم بانتظام."
            },
            {
                id: 8,
                category: "Cardiovascular",
                title_fr: "Infarctus du Myocarde (Aigu)",
                title_ar: "احتشاء عضلة القلب الحاد",
                findings_fr: [
                    "Nécrose de coagulation : Les cellules cardiaques meurent mais gardent leur forme pendant quelques jours.",
                    "Fibres éosinophiles : Le muscle devient très rouge et perd ses détails internes (striations).",
                    "Perte des noyaux : Les cellules mortes perdent leur centre (noyau), signe de non-vie.",
                    "Infiltration de neutrophiles : Des milliers de globules blancs arrivent pour nettoyer les débris."
                ],
                findings_ar: [
                    "النخر التخثري: تموت خلايا القلب لكنها تحتفظ بشكلها الخارجي مؤقتاً لعدة أيام.",
                    "الألياف الحمضية: تصبح العضلة شديدة الاحمرار وتفقد تفاصيلها الداخلية (التخطيط العرضي).",
                    "فقدان الأنوية: تختفي المراكز الحيوية (الأنوية) من الخلايا، وهي علامة مؤكدة على موتها.",
                    "زحف العدلات: وصول آلاف الكريات البيضاء إلى المنطقة للبدء في تنظيف الخلايا الميتة."
                ],
                diagnosis_fr: "Infarctus myocardique en phase aiguë",
                diagnosis_ar: "احتشاء عضلة القلب (الجلطة القلبية الحادة)",
                symptoms_fr: "Douleur thoracique brutale irradiant vers le bras gauche/mâchoire.",
                symptoms_ar: "ألم مفاجئ وشديد في الصدر يمتد للذراع الأيسر أو الفك.",
                treatment_fr: "Urgences (15), angioplastie (stent) ou thrombolyse, aspirine.",
                treatment_ar: "الطوارئ فوراً، قسطرة قلبية (دعامة) أو مذيبات التجلط، أسبرين.",
                action_fr: "ECG immédiat et dosage de la Troponine sanguine.",
                action_ar: "إجراء تخطيط قلب (ECG) فوري وفحص أنزيمات القلب (Troponin)."
            },
            {
                id: 9,
                category: "Respiratory",
                title_fr: "Pneumonie Lobaire",
                title_ar: "الالتهاب الرئوي الفصي",
                findings_fr: [
                    "Alvéoles pleines : Les sacs d'air des poumons sont remplis de liquide, de fibres et de pus.",
                    "Hépatisation : Le poumon ne contient plus d'air et prend la consistance solide du foie.",
                    "Fibrine : Un réseau de fils collants emprisonne les bactéries et les globules blancs.",
                    "Congestion : Les vaisseaux sanguins autour des alvéoles sont gonflés de sang pour combattre l'infection."
                ],
                findings_ar: [
                    "امتلاء الحويصلات: تمتلئ أكياس الهواء في الرئة بالسوائل والخيوط الليفية والقيح.",
                    "تفرط الكبد: تفقد الرئة هواءها وتصبح صلبة القوام تشبه الكبد في ملمسه.",
                    "خيوط الفيبرين: شبكة من الخيوط اللاصقة تحاصر البكتيريا وكريات الدم البيضاء.",
                    "الاحتقان: تتورم الأوعية الدموية المحيطة بالحويصلات بالدم لمحاربة العدوى."
                ],
                diagnosis_fr: "Pneumonie bactérienne aiguë (souvent à Pneumocoque)",
                diagnosis_ar: "الالتهاب الرئوي الفصي (عدوى بكتيرية حادة)",
                symptoms_fr: "Fièvre élevée, frissons, toux productive (expectoration rouille).",
                symptoms_ar: "حمى عالية، قشعريرة، سعال مع بلغم (صدئي اللون أحياناً).",
                treatment_fr: "Antibiotiques (Amoxicilline), hydratation, oxygène si besoin.",
                treatment_ar: "المضادات الحيوية (مثل الأنيبيوتيك)، شرب السوائل، وأكسجين إذا لزم.",
                action_fr: "Radiographie du thorax et examen des crachats.",
                action_ar: "إجراء أشعة سينية للصدر وفحص للبلغم."
            },
            {
                id: 10,
                category: "Respiratory",
                title_fr: "Emphysème Pulmonaire",
                title_ar: "نفاخ الرئة (Emphysème)",
                findings_fr: [
                    "Destruction des parois : Les petits sacs d'air éclatent et fusionnent en de grandes bulles inutiles.",
                    "Perte d'élasticité : Le poumon devient comme un vieux sac plastique qui ne se dégonfle plus.",
                    "Espaces aériens géants : Il y a trop d'air dans le poumon, mais il circule mal vers le sang.",
                    "Septas amincis : Les séparations entre les alvéoles deviennent très fines avant de disparaître."
                ],
                findings_ar: [
                    "تدمير الجدران: تنفجر أكياس الهواء الصغيرة وتندمج لتشكل فقاعات هوائية كبيرة غير مفيدة.",
                    "فقدان المرونة: تصبح الرئة مثل كيس بلاستيكي قديم لا يستطيع الانكماش وإخراج الهواء.",
                    "فجوات هوائية عملاقة: يتجمع هواء زائد داخل الرئة لكنه لا يصل بفعالية إلى الدم.",
                    "ترقق الحواجز: تصبح الفواصل بين الحويصلات رقيقة جداً وهشة قبل أن تتلاشى تماماً."
                ],
                diagnosis_fr: "Emphysème pulmonaire destructif",
                diagnosis_ar: "نفاخ رئوي (توسع الحويصلات وتخربها)",
                symptoms_fr: "Dyspnée progressive (essoufflement), thorax en tonneau.",
                symptoms_ar: "ضيق تنفس تدريجي (نهجان)، الصدر يتخذ شكل البرميل.",
                treatment_fr: "Arrêt du tabac, bronchodilatateurs, réhabilitation respiratoire.",
                treatment_ar: "الإقلاع عن التدخين، موسعات الشعب الهوائية، إعادة التأهيل التنفسي.",
                action_fr: "Épreuves fonctionnelles respiratoires (EFR / Spirométrie).",
                action_ar: "إجراء اختبارات وظائف الرئة (Spirometry)."
            },
            {
                id: 11,
                category: "Respiratory",
                title_fr: "Carcinome Épidermoïde du Poumon",
                title_ar: "سرطان الرئة الحرشفية",
                findings_fr: [
                    "Perles de kératine : Des cercles roses de corne se forment au milieu des cellules cancéreuses.",
                    "Ponts intercellulaires : Les cellules gardent les liens typiques de la peau (épines).",
                    "Atypies majeures : Les cellules sont de tailles bizarres avec des noyaux énormes et difformes.",
                    "Infiltration : Le cancer détruit les tissus pulmonaires sains pour se frayer un chemin."
                ],
                findings_ar: [
                    "لآلئ الكيراتين: دوائر وردية صلبة تتكون في منتصف مجموعات الخلايا السرطانية.",
                    "جسور خلوية: تحتفظ الخلايا بالروابط النموذجية لخلايا الجلد (النمط الشائك).",
                    "شذوذ خلوي: تظهر الخلايا بأحجام غريبة مع أنوية ضخمة ومكتنزة ومشوهة.",
                    "التسلل الغازي: يقوم السرطان بتدمير أنسجة الرئة السليمة ليفتح طريقاً للانتشار."
                ],
                diagnosis_fr: "Carcinome épidermoïde bronchique malin",
                diagnosis_ar: "سرطان الرئة ذو الخلايا الحرشفية",
                symptoms_fr: "Toux chronique, hémoptysie (cracher du sang), perte de poids.",
                symptoms_ar: "سعال مزمن، نفث الدم (خروج دم مع السعال)، فقدان الوزن.",
                treatment_fr: "Chirurgie (si possible), radiothérapie, chimiothérapie.",
                treatment_ar: "الجراحة (إذا كان ممكناً)، العلاج الإشعاعي، أو الكيماوي.",
                action_fr: "Scanner thoracique et fibroscopie bronchique avec biopsie.",
                action_ar: "إجراء أشعة مقطعية للصدر ومنظار شعبي مع أخذ خزعة."
            },
            {
                id: 12,
                category: "Digestive",
                title_fr: "Ulcère Gastrique",
                title_ar: "قرحة المعدة (Ulcère)",
                findings_fr: [
                    "Perte de substance : Un véritable cratère s'est formé dans la paroi de l'estomac.",
                    "Nécrose fibrinoïde : Le fond de la plaie est recouvert de débris de cellules et de sang séché.",
                    "Tissu de granulation : Le corps essaie de réparer le trou en créant de nouveaux petits vaisseaux.",
                    "Fibrose : Une cicatrice dure se forme en profondeur pour renforcer la zone fragile."
                ],
                findings_ar: [
                    "فقدان النسيج: يتكون ما يشبه الفوهة أو الحفرة العميقة في جدار المعدة.",
                    "النخر شبه الفيبريني: يتغطى قاع القرحة بحطام الخلايا الميتة والدم المتخثر.",
                    "النسيج الحبيبي: يحاول الجسم إصلاح الثقب عبر تكوين أوعية دموية صغيرة جديدة.",
                    "التليف العيق: تتكون ندبة صلبة في العمق لتدعيم المنطقة الضعيفة وحمايتها من الانفجار."
                ],
                diagnosis_fr: "Ulcère gastrique chronique en phase d'activité",
                diagnosis_ar: "قرحة المعدة المزمنة",
                symptoms_fr: "Douleur brûlante à l'estomac liée aux repas, nausées.",
                symptoms_ar: "ألم حارق في المعدة مرتبط بتناول الطعام، غثيان.",
                treatment_fr: "Inhibiteurs de la pompe à protons (IPP), arrêt des AINS.",
                treatment_ar: "مثبطات مضخة البروتون (IPP)، والتوقف عن المسكنات.",
                action_fr: "Test respiratoire pour Helicobacter pylori et endoscopie.",
                action_ar: "إجراء فحص جرثومة المعدة ومنظار إذا استمر الألم."
            },
            {
                id: 13,
                category: "Digestive",
                title_fr: "Hépatite Chronique C",
                title_ar: "التهاب الكبد الوبائي C",
                findings_fr: [
                    "Infiltrat lymphocytaire : Des amas de globules blancs s'installent dans les zones de passage des vaisseaux.",
                    "Lésions des hépatocytes : Les cellules du foie sont attaquées et certaines meurent (corps de Councilman).",
                    "Début de fibrose : Des fibres commencent à entourer les cellules, préparant le terrain pour la cirrhose.",
                    "Stéatose : On voit souvent de petites gouttes de graisse dans le foie, typique du virus C."
                ],
                findings_ar: [
                    "ارتشاح لمفاوي: تتجمع كريات الدم البيضاء في مناطق مرور الأوعية الدموية الكبدية.",
                    "تضرر الخلايا الكبدية: تتعرض خلايا الكبد لهجوم مناعي ويموت بعضها (أجسام كونسيلمان).",
                    "بداية التليف: تبدأ الألياف بالالتفاف حول الخلايا، مما يمهد الطريق لحدوث التشمع.",
                    "التشحم: غالباً ما نلاحظ وجود قطرات دهنية صغيرة، وهي علامة مميزة لفيروس C."
                ],
                diagnosis_fr: "Hépatite virale chronique active",
                diagnosis_ar: "التهاب الكبد الفيروسي C المزمن",
                symptoms_fr: "Souvent aucun symptôme pendant des années, fatigue chronique.",
                symptoms_ar: "غالباً بلا أعراض لسنوات، تعب مزمن، أرق.",
                treatment_fr: "Antiviraux à action directe (DAA) - Guérison dans >95% des cas.",
                treatment_ar: "مضادات الفيروسات الحديثة (DAA) - نسبة الشفاء تتجاوز 95%.",
                action_fr: "Sérologie VHC et charge virale (PCR).",
                action_ar: "إجراء تحليل الأجسام المضادة للفيروس وفحص (PCR)."
            },
            {
                id: 14,
                category: "Digestive",
                title_fr: "Stéatose Hépatique",
                title_ar: "الكبد الدهني (تشحم)",
                findings_fr: [
                    "Grosses bulles de graisse : Des goutes de lipides remplissent les cellules du foie.",
                    "Noyau écrasé : La graisse prend tellement de place qu'elle pousse le noyau contre le bord.",
                    "Aspect de bague : La cellule ressemble à une bague dont le noyau serait le diamant.",
                    "Réversibilité : À ce stade, le foie peut encore redevenir normal si la cause est supprimée."
                ],
                findings_ar: [
                    "فقاعات دهنية كبيرة: تمتلئ خلايا الكبد ب قطرات ضخمة من الدهون الثلاثية.",
                    "انضغاط النواة: تشغل الدهون مساحة كبيرة لدرجة أنها تدفع النواة نحو جدار الخلية.",
                    "مظهر الخاتم: تبدو الخلية وكأنها خاتم فصه هو النواة المنزاحة للمحيط.",
                    "قابلية الشفاء: في هذه المرحلة، يمكن للكبد العودة لطبيعته إذا تم القضاء على السبب."
                ],
                diagnosis_fr: "Stéatose hépatique macro-vacuolaire",
                diagnosis_ar: "تشحم الكبد (الكبد الدهني)",
                symptoms_fr: "Gêne au niveau du foie (côté droit), fatigue.",
                symptoms_ar: "ثقل في الجانب الأيمن من البطن، خمول.",
                treatment_fr: "Perte de poids, exercice physique, contrôle du diabète.",
                treatment_ar: "إنقاص الوزن، ممارسة الرياضة، وتنظيم مستوى السكر.",
                action_fr: "Échographie hépatique et bilan lipidique.",
                action_ar: "إجراء سونار للكبد وفحص دهونات الدم."
            },
            {
                id: 15,
                category: "Digestive",
                title_fr: "Maladie de Crohn",
                title_ar: "داء كرون المعوي",
                findings_fr: [
                    "Inflammation totale : Toute l'épaisseur de la paroi intestinale est touchée par l'inflammation.",
                    "Granulomes : De petites zones organisées de défense immunitaire (sans nécrose).",
                    "Fissures : Des crevasses profondes s'enfoncent dans le muscle de l'intestin.",
                    "Sauts de lésions : On voit des zones malades séparées par des zones tout à fait saines."
                ],
                findings_ar: [
                    "التهاب كامل السماكة: يتأثر كامل جدار الأمعاء بالالتهاب من الداخل إلى الخارج.",
                    "الحبيبات: مناطق دفاعية مناعية صغيرة منظمة تظهر تحت المجهر (بدون نخر).",
                    "الشقوق العميقة: تتكون تصدعات غائرة تتوغل داخل الطبقة العضلية للأمعاء.",
                    "الإصابة المتقطعة: نلاحظ مناطق مصابة تفصل بينها مناطق أخرى سليمة تماماً."
                ],
                diagnosis_fr: "Maladie de Crohn active (Maladie Inflammatoire Chronique)",
                diagnosis_ar: "داء كرون (التهاب الأمعاء المزمن)",
                symptoms_fr: "Diarrhées chroniques, douleurs abdominales, perte de poids, fistules.",
                symptoms_ar: "إسهال مزمن، آلام بطنية، نقص الوزن، نواسير شرجية.",
                treatment_fr: "Corticoïdes, immunosuppresseurs, biothérapies.",
                treatment_ar: "الكورتيزون، مثبطات المناعة، والعلاجات البيولوجية.",
                action_fr: "Iléo-colonoscopie et IRM abdominale.",
                action_ar: "إجراء منظار قولون وأمعاء دقيقة وأشعة رنين مغناطيسي."
            },
            {
                id: 16,
                category: "Digestive",
                title_fr: "Rectocolite Hémorragique (RCH)",
                title_ar: "التهاب القولون التقرحي",
                findings_fr: [
                    "Atteinte de surface : Seule la couche la plus interne (muqueuse) est attaquée.",
                    "Abcès des cryptes : Les petites usines à mucus du colon se remplissent de pus.",
                    "Perte des glandes : Beaucoup de glandes disparaissent, laissant une surface lisse et fragile.",
                    "Pseudopolypes : Le colon essaie de repousser tellement vite qu'il crée de petites bosses de chair."
                ],
                findings_ar: [
                    "إصابة سطحية: يقتصر الهجوم الالتهابي على الطبقة الأكثر داخلية (المخاطية) فقط.",
                    "خراجات الخبيئة: تمتلئ الغدد المسؤولة عن إفراز المخاط في القولون بالقيح.",
                    "فقدان الغدد: تتلاشى العديد من الغدد مما يترك السطح أملساً وهشاً للغاية.",
                    "السلائل الكاذبة: يحاول القولون النمو سريعاً لتعويض التلف فيشكل نتوءات لحمية."
                ],
                diagnosis_fr: "Rectocolite hémorragique (Colite ulcéreuse)",
                diagnosis_ar: "التهاب القولون التقرحي (RCH)",
                symptoms_fr: "Diarrhée sanglante, besoins impérieux d'aller aux toilettes.",
                symptoms_ar: "إسهال دموي، رغبة ملحة ومتكررة في التبرز.",
                treatment_fr: "Dérivés salicylés (5-ASA), corticoïdes, biothérapie.",
                treatment_ar: "مشتقات الساليسيلات (5-ASA)، الكورتيزون، والعلاج البيولوجي.",
                action_fr: "Coloscopie de contrôle régulière (risque de cancer).",
                action_ar: "إجراء منظار قولون دوري (بسبب خطر السرطان مستقبلاً)."
            },
            {
                id: 17,
                category: "Urinary",
                title_fr: "Glomérulonéphrite à Changements Minimes",
                title_ar: "مرض التبدلات الطفيفة",
                findings_fr: [
                    "Apparence normale : Au microscope classique, le filtre du rein semble parfaitement sain.",
                    "Podes effacés : Seul le microscope électronique montre que les 'pieds' des cellules sont aplatis.",
                    "Fuite de protéines : Le filtre ne retient plus l'albumine, qui part massivement dans les urines.",
                    "Zéro dépôt : On ne trouve aucune trace d'anticorps ou de compléments dans le glomérule."
                ],
                findings_ar: [
                    "مظهر طبيعي: تحت المجهر الضوئي العادي، يبدو مرشح الكلية سليماً تماماً.",
                    "محو السويقات: المجهر الإلكتروني وحده يظهر تسطح 'أقدام' الخلايا المسؤولة عن الترشيح.",
                    "تسرب البروتين: يفشل المرشح في الحفاظ على الألبومين مما يؤدي لخروجه بكثرة مع البول.",
                    "غياب الرواسب: لا توجد أي آثار للأجسام المضادة داخل وحدة الترشيح الكلوية."
                ],
                diagnosis_fr: "Néphrose lipoïdique (fréquente chez l'enfant)",
                diagnosis_ar: "مرض التبدلات الطفيفة (المتلازمة الكلوية للأطفال)",
                symptoms_fr: "Œdèmes massifs (visage, jambes), urines mousseuses.",
                symptoms_ar: "تورم شديد (في الوجه والساقين)، بول رغوي.",
                treatment_fr: "Corticoïdes (très bonne réponse en général).",
                treatment_ar: "الكورتيزون (تستجيب الحالة له بشكل ممتاز غالباً).",
                action_fr: "Protéinurie des 24 heures et biopsie rénale si besoin.",
                action_ar: "فحص بروتين البول خلال 24 ساعة (خزعة عند الضرورة)."
            },
            {
                id: 18,
                category: "Urinary",
                title_fr: "Pyélonéphrite Aiguë",
                title_ar: "التهاب حويضة وكلية حاد",
                findings_fr: [
                    "Invasion de pus : Le rein est envahi par des millions de globules blancs pour tuer les bactéries.",
                    "Abcès rénaux : De petites poches de destruction se forment dans le tissu du rein.",
                    "Cylindres leucocytaires : On voit des moules de globules blancs coincés dans les tubes urinaires.",
                    "Congestion massive : Le rein est gonflé, rouge et très douloureux."
                ],
                findings_ar: [
                    "غزو قيحي: يمتلئ نسيج الكلية بملايين الكريات البيضاء للقضاء على البكتيريا.",
                    "خراجات كلوية: تتكون جيوب صغيرة من الأنسجة المدمرة داخل بنية الكلية.",
                    "الأسطوانات البيضاء: نلاحظ تجمعات من الخلايا البيضاء اتخذت شكل الأنابيب الكلوية.",
                    "احتقان شديد: تظهر الكلية متورمة، حمراء اللون، ومؤلمة جداً سريرياً."
                ],
                diagnosis_fr: "Infection urinaire haute bactérienne",
                diagnosis_ar: "التهاب الكلية والحويضة (عدوى بكتيرية حادة)",
                symptoms_fr: "Forte fièvre, frissons, douleur intense lombaire (dos).",
                symptoms_ar: "حمى شديدة، قشعريرة، آلام حادة في الظهر (الخاصرة).",
                treatment_fr: "Antibiotiques puissants par voie veineuse ou orale.",
                treatment_ar: "مضادات حيوية قوية (وريدياً أو عن طريق الفم).",
                action_fr: "ECBU (faisceau de preuves bactériologiques) et échographie.",
                action_ar: "إجراء مزرعة بول (ECBU) وسونار للكلية."
            },
            {
                id: 19,
                category: "Urinary",
                title_fr: "Carcinome Rénal à Cellules Claires",
                title_ar: "سرطان الكلى ذو الخلايا الرائقة",
                findings_fr: [
                    "Cellules transparentes : Le cytoplasme est vide (blanc) car il est plein de sucre (glycogène) et de gras.",
                    "Nombreux vaisseaux : La tumeur crée plein de petits vaisseaux sanguins fragiles pour se nourrir.",
                    "Noyaux ronds : Au centre des cellules blanches, on voit un petit noyau noir très net.",
                    "Croissance limitée par une membrane : La tumeur forme souvent une grosse boule bien délimitée."
                ],
                findings_ar: [
                    "خلايا شفافة: يظهر السيتوبلازم فارغاً (أبيض) لغناه بالسكر (الجليكوجين) والدهون.",
                    "توعية مكثفة: يقوم الورم بتخليق أوعية دموية صغيرة وهشة بكثرة ليتغذى عليها.",
                    "أنوية مستديرة: نلاحظ وجود نواة سوداء صغيرة وواضحة جداً في مركز الخلايا البيضاء.",
                    "نمو محدد: غالباً ما يشكل الورم كتلة كبيرة ضخمة ومحددة بدقة عن باقي الكلية."
                ],
                diagnosis_fr: "Carcinome à cellules claires (Tumeur de Grawitz)",
                diagnosis_ar: "سرطان الخلايا الكلوية الرائقة",
                symptoms_fr: "Sang dans les urines (hématurie), douleur lombaire, masse.",
                symptoms_ar: "دم في البول، ألم في الخاصرة، وجود كتلة ملموسة.",
                treatment_fr: "Néphrectomie (ablation du rein), thérapies ciblées.",
                treatment_ar: "استئصال الكلية (Néphrectomie)، أو العلاجات الموجهة.",
                action_fr: "Scanner abdominal contrasté.",
                action_ar: "إجراء أشعة مقطعية بالصبغة على البطن والحوض."
            },
            {
                id: 20,
                category: "Endocrine",
                title_fr: "Maladie de Graves-Basedow",
                title_ar: "داء غريفز (جويتر جحوظي)",
                findings_fr: [
                    "Follicules hyperactifs : Les usines à hormones de la thyroïde sont trop grandes et travaillent trop.",
                    "Bords festonnés : La substance rose (colloïde) semble avoir été 'mangée' sur les bords par les cellules.",
                    "Cellules hautes : Les cellules qui bordent les sacs ne sont plus plates mais deviennent cylindriques et grandes.",
                    "Vascularisation : La glande est pleine de sang car elle est stimulée en permanence par des anticorps."
                ],
                findings_ar: [
                    "جريبات مفرطة النشاط: تصبح مصانع الهرمونات في الدرقية كبيرة وتعمل بأقصى طاقتها.",
                    "حواف متآكلة: تظهر المادة الغروية الوردية وكأن حوافها قد 'أُكلت' من قبل الخلايا النشطة.",
                    "خلايا شاهقة: تتحول الخلايا المبطنة للأكياس من مسطحة إلى أسطوانية ضخمة.",
                    "غزارة دموية: تمتلئ الغدة بالدم نتيجة التحفيز المستمر من الأجسام المضادة الذاتية."
                ],
                diagnosis_fr: "Hyperthyroïdie autoimmune active",
                diagnosis_ar: "داء غريفز (فرط نشاط الغدة الدرقية المناعي)",
                symptoms_fr: "Tachycardie, perte de poids, exophtalmie (yeux sortis), nervosité.",
                symptoms_ar: "تسارع دقات القلب، نقصان وزن، جحوظ العينين، عصبية.",
                treatment_fr: "Antithyroïdiens de synthèse, iode radioactif, chirurgie.",
                treatment_ar: "أدوية مثبطة للدرقية، اليود المشع، أو الجراحة.",
                action_fr: "Dosage de la TSH, T4 libre et recherche des anticorps TRAK.",
                action_ar: "فحص هرمونات (TSH, T4) والأجسام المضادة (TRAK)."
            },
            {
                id: 21,
                category: "Endocrine",
                title_fr: "Thyroïdite de Hashimoto",
                title_ar: "التهاب هاشيموتو للدرقية",
                findings_fr: [
                    "Siège de défense : La thyroïde est envahie par un nombre immense de lymphocytes (globules blancs).",
                    "Centres germinatifs : Le tissu immunitaire s'organise tellement qu'on dirait un ganglion lymphatique.",
                    "Cellules de Hürthle : Les cellules thyroïdiennes survivantes deviennent roses, grosses et granuleuses.",
                    "Atrophie : Les follicules normaux diminuent et finissent par disparaître, causant l'hypothyroïdie."
                ],
                findings_ar: [
                    "غزو لمفاوي: تجتاح أعداد كبيرة من الكريات اللمفاوية نسيج الغدة الدرقية لتدميره.",
                    "مراكز انتاشية: ينظم النسيج المناعي نفسه لدرجة تجعل الغدة تبدو كأنها عقدة لمفاوية.",
                    "خلايا هيرتل: تصبح خلايا الدرقية الناجية ضخمة، وردية اللون، وذات مظهر حبيبي.",
                    "الضمور: تتقلص أكياس الهرمونات وتختفي تدريجياً، مما يسبب خمول الغدة."
                ],
                diagnosis_fr: "Thyroïdite lymphocytaire chronique auto-immune",
                diagnosis_ar: "التهاب هاشيموتو (خمول الغدة الدرقية المناعي)",
                symptoms_fr: "Fatigue, frilosité, prise de poids, constipation, peau sèche.",
                symptoms_ar: "خمول، شعور بالبرد، زيادة وزن، إمساك، جفاف الجلد.",
                treatment_fr: "Hormone de substitution (Lévothyroxine) à vie.",
                treatment_ar: "الهرمون البديل (L-Thyroxine) مدى الحياة.",
                action_fr: "Dosage TSH et anticorps anti-TPO.",
                action_ar: "فحص هرمون TSH والأجسام المضادة anti-TPO."
            },
            {
                id: 22,
                category: "Endocrine",
                title_fr: "Phéochromocytome",
                title_ar: "ورم القواتم (الكظر)",
                findings_fr: [
                    "Aspect en Zellballen : Les cellules se regroupent en petits paquets ronds (ballons de cellules).",
                    "Granulations d'adrénaline : Les cellules sont pleines de petits grains contenant des hormones de stress.",
                    "Pléomorphisme : Les cellules ont des formes et des tailles très différentes les unes des autres.",
                    "Richesse vasculaire : Présence de très nombreux capillaires entre les amas de cellules."
                ],
                findings_ar: [
                    "مظهر أعشاشي: تتجمع الخلايا في مجموعات مستديرة صغيرة تشبه الأعشاش أو الكرات.",
                    "حبيبات الأدرينالين: تمتلئ الخلايا بحبيبات دقيقة تحتوي على هرمونات التوتر (الادرينالين).",
                    "تعدد الأشكال: تظهر الخلايا والأنوية بأحجام وأشكال متباينة جداً فيما بينها.",
                    "ثراء وعائي: وجود شبكة كثيفة جداً من الشعيرات الدموية بين تجمعات الخلايا الورمية."
                ],
                diagnosis_fr: "Tumeur de la médullo-surrénale (sécrétant des catécholamines)",
                diagnosis_ar: "ورم القواتم (ورم لب الغدة الكظرية)",
                symptoms_fr: "Hypertension brutale, maux de tête violents, sueurs, palpitations.",
                symptoms_ar: "نوبات ضغط مرتفع جداً، صداع شديد، تعرق، خفقان.",
                treatment_fr: "Chirurgie après préparation médicamenteuse stricte.",
                treatment_ar: "الاستئصال الجراحي بعد تحضير دوائي دقيق للضغط.",
                action_fr: "Dosage des métanéphrines urinaires ou sanguines.",
                action_ar: "فحص مشتقات الأدرينالين (Metanephrines) في البول أو الدم."
            },
            {
                id: 23,
                category: "Reproductive",
                title_fr: "Maladie Fibrokystique du Sein",
                title_ar: "التغير الليفي الكيسي للثدي",
                findings_fr: [
                    "Kystes de toutes tailles : Formation de poches de liquide dans les glandes mammaires.",
                    "Fibrose : Le tissu de soutien devient dur et épais comme une cicatrice.",
                    "Métaplasie apocrine : Les cellules normales se transforment pour ressembler aux glandes de la sueur.",
                    "Hyperplasie : Parfois, les cellules des canaux se multiplient plus que la normale."
                ],
                findings_ar: [
                    "أكياس متباينة: تكون جيوب ممتلئة بالسوائل داخل الغدد الثديية بأحجام مختلفة.",
                    "تليف السدى: يصبح النسيج الداعم للثدي صلباً وسميكاً كأنه نسيج ندبي.",
                    "التحول الإفرازي: تتحول الخلايا الطبيعية لتشبه خلايا الغدد العرقية تحت المجهر.",
                    "فرط التنسج: في بعض الأحيان، تتكاثر الخلايا المبطنة للقنوات بشكل أسرع من المعتاد."
                ],
                diagnosis_fr: "Changements fibrokystiques bénins du sein",
                diagnosis_ar: "التغير الليفي الكيسي (حالة حميدة وشائعة)",
                symptoms_fr: "Tension mammaire douloureuse cyclique (avant les règles).",
                symptoms_ar: "ألم وتورم في الثدي يتكرر دورياً قبل موعد الدورة.",
                treatment_fr: "Soutien-gorge adapté, parfois progestatifs locaux.",
                treatment_ar: "استخدام حمالة صدر داعمة، وأحياناً مراهم هرمونية.",
                action_fr: "Auto-palpation et échographie mammaire.",
                action_ar: "الفحص الذاتي للثدي وإجراء سونار عند الضرورة."
            },
            {
                id: 24,
                category: "Reproductive",
                title_fr: "Léiomyome Utérin",
                title_ar: "ورم ليفي رحمي (Léiomyome)",
                findings_fr: [
                    "Faisceaux entremêlés : Les cellules musculaires s'enroulent les unes autour des autres comme un tourbillon.",
                    "Aspect fusiforme : Les cellules sont allongées et régulières, typiques d'un muscle normal.",
                    "Zéro mitose : On ne voit pas de cellules en train de se diviser rapidement (signe de bénignité).",
                    "Fibrose : Souvent, du tissu fibreux s'installe au milieu des muscles, rendant la masse très dure."
                ],
                findings_ar: [
                    "حزم متشابكة: تلتف الخلايا العضلية حول بعضها البعض بشكل حلزوني يشبه الدوامة.",
                    "خلايا مغزلية: تكون الخلايا طويلة ومنتظمة الشكل، تشبه خلايا العضلات الملساء الطبيعية.",
                    "غياب الانقسامات: لا نلاحظ انقسامات خلوية نشطة، مما يؤكد أن الورم حميد تماماً.",
                    "تليف: غالباً ما يتخلل العضلات نسيج ليفي صلب يجعل كتلة الورم قاسية جداً."
                ],
                diagnosis_fr: "Léiomyome utérin bénin (Fibrome)",
                diagnosis_ar: "الورم الليفي الرحمي (حميد)",
                symptoms_fr: "Saignements abondants, pesanteur pelvienne, douleurs.",
                symptoms_ar: "غزارة في الطمث (النزيف)، ثقل في الحوض، آلام.",
                treatment_fr: "Embolisation, myomectomie ou hystérectomie.",
                treatment_ar: "قسطرة الشرايين، استئصال ألياف، أو استئصال الرحم.",
                action_fr: "Échographie pelvienne.",
                action_ar: "إجراء سونار (أشعة تلفزيونية) للحوض."
            },
            {
                id: 25,
                category: "Reproductive",
                title_fr: "Adénocarcinome de l'Endomètre",
                title_ar: "سرطان بطانة الرحم الغدي",
                findings_fr: [
                    "Dos-à-dos glandulaire : Les glandes canceruses sont tellement nombreuses qu'elles se touchent sans tissu entre elles.",
                    "Invasion active : La tumeur pénètre dans le muscle de l'utérus (myomètre).",
                    "Noyaux atypiques : Les centres des cellules sont gros, irréguliers et contiennent des nucléoles bien visibles.",
                    "Architectures complexes : On voit des ponts de cellules et des structures qui ne devraient pas exister."
                ],
                findings_ar: [
                    "تراصف الغدد: تتكاثر الغدد السرطانية بكثافة لدرجة أنها تلتصق ببعضها دون نسيج فاصل.",
                    "الغزو النشط: يتغلغل الورم السرطاني بشكل واضح داخل طبقة عضلات الرحم.",
                    "أنوية شاذة: تظهر مراكز الخلايا كبيرة وغير منتظمة مع وجود نويات بارزة وداكنة.",
                    "بنى معقدة: نلاحظ تشكل جسور خلوية وهياكل عشوائية غريبة عن النسيج الطبيعي."
                ],
                diagnosis_fr: "Adénocarcinome endométrioïde invasif",
                diagnosis_ar: "سرطان بطانة الرحم الغدي الغازي",
                symptoms_fr: "Saignements vaginaux après la ménopause.",
                symptoms_ar: "خروج دم من الرحم بعد انقطاع الطمث (بعد اليأس).",
                treatment_fr: "Hystérectomie totale avec annexectomie.",
                treatment_ar: "استئصال كامل للرحم مع المبيضين والقنوات.",
                action_fr: "Échographie endovaginale et biopsie d'endomètre.",
                action_ar: "سونار مهبلي مع أخذ عينة من بطانة الرحم."
            },
            {
                id: 26,
                category: "Infectious",
                title_fr: "Candidose Œsophagienne",
                title_ar: "داء المبيضات المريئي",
                findings_fr: [
                    "Présence de spores et de pseudo-hyphes (filaments) qui colonisent la paroi de l'œsophage.",
                    "La coloration de PAS met en évidence ces champignons en rouge vif caractéristique.",
                    "On observe une réaction inflammatoire intense avec de nombreux globules blancs (neutrophiles).",
                    "L'épithélium de l'œsophage peut présenter des zones de destruction (ulcérations)."
                ],
                findings_ar: [
                    "وجود أبواغ وخيوط فطرية كاذبة تستعمر جدار المريء وتخترق أنسجته.",
                    "تساعد صبغة (PAS) في إظهار هذه الفطريات بلون أحمر زاهٍ ومميز تحت المجهر.",
                    "نلاحظ استجابة التهابية شديدة تشمل تجمعاً كثيفاً للكريات البيضاء في منطقة العدوى.",
                    "قد تظهر بطانة المريء علامات تآكل أو تقرحات نتيجة النشاط التخريبي للفطر."
                ],
                diagnosis_fr: "Infection fongique à Candida albicans",
                diagnosis_ar: "عدوى فطرية بالمبيضات البيضاء",
                symptoms_fr: "Dysphagie (difficulté à avaler), douleurs derrière le sternum.",
                symptoms_ar: "صعوبة في البلع، آلام في الصدر خلف عظمة القص.",
                treatment_fr: "Antifongiques oraux ou IV (Fluconazole).",
                treatment_ar: "مضادات الفطريات (Fluconazole) فموياً أو وريدياً.",
                action_fr: "Endoscopie digestive avec brossage ou biopsie.",
                action_ar: "إجراء منظار معدة ومريء مع أخذ مسحة أو خزعة."
            },
            {
                id: 27,
                category: "Infectious",
                title_fr: "Paludisme (Frottis Sanguin)",
                title_ar: "الملاريا (لطاخة دموية)",
                findings_fr: [
                    "Présence de formes en bague de Plasmodium à l'intérieur des globules rouges.",
                    "Certaines hématies sont déformées ou présentent des granulations de Schüffner.",
                    "Observation du pigment malarique (hémozoïne) issu de la digestion de l'hémoglobine.",
                    "Le parasite est visible grâce à la coloration de Giemsa (petit point rouge et anneau bleu)."
                ],
                findings_ar: [
                    "ظهور الطفيلي في مرحلة 'الحلقة' (Ring form) داخل خلايا الدم الحمراء.",
                    "قد تظهر بعض الكريات الحمراء مشوهة أو تحتوي على حبيبات دقيقة (Schüffner).",
                    "رصد صبغة 'الهيموزوين' الناتجة عن هضم الطفيلي لهيموجلوبين الدم.",
                    "يظهر الطفيلي بوضوح عند استخدام صبغة 'جيمزا' كنقطة حمراء مرصعة بحلقة زرقاء."
                ],
                diagnosis_fr: "Paludisme à Plasmodium falciparum",
                diagnosis_ar: "الملاريا (الإصابة بالمتصورات)",
                symptoms_fr: "Fièvre en accès (pics de fièvre), frissons, sueurs, anémie.",
                symptoms_ar: "نوبات حمى متكررة، قشعريرة، تعرق، فقر دم.",
                treatment_fr: "Médicaments antipaludéens (Artésunate, Quinine).",
                treatment_ar: "الأدوية المضادة للملاريا (مثل كينين أو أرتيسونات).",
                action_fr: "Frottis sanguin et Goutte épaisse.",
                action_ar: "فحص لطاخة الدم وفحص 'القطرة الغليظة' للكشف عن الطفيل."
            },
            {
                id: 28,
                category: "Musculoskeletal",
                title_fr: "Ostéosarcome",
                title_ar: "غرن عظمي (Osteosarcoma)",
                findings_fr: [
                    "Production d'ostéoïde malin (os immature) directement par les cellules cancéreuses.",
                    "Les cellules (ostéoblastes malins) sont très irrégulières avec de gros noyaux noirs.",
                    "On voit de nombreuses divisions cellulaires anormales (mitoses atypiques).",
                    "La tumeur détruit l'os normal et envahit les tissus mous aux alentours."
                ],
                findings_ar: [
                    "تكوين مادة عظمية شاذة (عظم غير ناضج) مباشرة من قبل الخلايا السرطانية.",
                    "تظهر الخلايا بانية العظم الخبيثة بأحجام متفاوتة وأنوية سوداء ضخمة غير منتظمة.",
                    "نلاحظ وجود العديد من الانقسامات الخلوية الشاذة والمتسارعة تحت المجهر.",
                    "يقوم الورم بامتصاص وتدمير العظم السليم وغزو الأنسجة الرخوة المحيطة به."
                ],
                diagnosis_fr: "Ostéosarcome ostéoblastique",
                diagnosis_ar: "سرطان العظام (أوستيو ساركوما)",
                symptoms_fr: "Douleur osseuse persistante (surtout la nuit), tuméfaction.",
                symptoms_ar: "ألم مستمر في العظم (يزداد ليلاً)، تورم المنطقة المصابة.",
                treatment_fr: "Chimiothérapie néoadjuvante et chirurgie large.",
                treatment_ar: "علاج كيماوي استباقي ثم جراحة استئصال واسعة.",
                action_fr: "Radiologie (image en feu d'herbe) et Biopsie osseuse.",
                action_ar: "أشعة سينية (منظر انفجار الشمس) وخزعة من العظم."
            },
            {
                id: 29,
                category: "Musculoskeletal",
                title_fr: "Polyarthrite Rhumatoïde (Synovite)",
                title_ar: "التهاب المفاصل الروماتويدي",
                findings_fr: [
                    "Hypertrophie massive des villosités de la membrane synoviale articulaire.",
                    "Infiltration massive par des lymphocytes et des plasmocytes (réaction immunitaire).",
                    "Formation d'un 'pannus', un tissu inflammatoire qui ronge le cartilage.",
                    "Présence de fibrine et parfois de nodules rhumatoïdes caractéristiques."
                ],
                findings_ar: [
                    "تضخم شديد في الزوائد الإصبعية (الزغابات) المكونة للغشاء المحيط بالمفصل.",
                    "ارتشاح مكثف للخلايا اللمفاوية والمصورية (خلايا مناعية) داخل النسيج الزليلي.",
                    "تكون 'السجف' (Pannus)، وهو نسيج التهابي خشن يعمل على تآكل غضاريف المفصل.",
                    "وجود رواسب فيبرينية وأحياناً عقيدات روماتويدية مميزة تحت المجهر."
                ],
                diagnosis_fr: "Synovite rhumatoïde chronique",
                diagnosis_ar: "التهاب غشاء زليلي روماتويدي مزمن",
                symptoms_fr: "Douleurs articulaires matinales, gonflements, déformations.",
                symptoms_ar: "آلام مفاصل صباحية، تورمات، تشوهات في الأصابع.",
                treatment_fr: "Anti-inflammatoires, Méthotrexate, biothérapies.",
                treatment_ar: "مضادات الالتهاب، ميثوتريكسيت، علاجات بيولوجية.",
                action_fr: "Dosage du Facteur Rhumatoïde et anticorps anti-CCP.",
                action_ar: "فحص العامل الروماتويدي (RF) والأجسام المضادة (anti-CCP)."
            },
            {
                id: 30,
                category: "Dermatopathology",
                title_fr: "Carcinome Basocellulaire",
                title_ar: "سرطان الخلايا القاعدية",
                findings_fr: [
                    "Nids de cellules bleutées qui ressemblent aux cellules de la couche basale.",
                    "Alignement des cellules en périphérie des nids (palissade périphérique).",
                    "Observation d'une fente de rétraction entre la tumeur et le stroma.",
                    "C'est un cancer à malignité locale qui ne donne presque jamais de métastases."
                ],
                findings_ar: [
                    "تشكل مجموعات (أعشاش) من الخلايا الزرقاء تشبه خلايا طبقة الجلد القاعدية.",
                    "تترتب الخلايا المحيطة بالأعشاش في صف منتظم يشبه السياج (التصفيف السياجي).",
                    "غالباً ما نلاحظ وجود فجوات انكماش واضحة تفصل الورم عن النسيج الضام المحيط.",
                    "يعتبر هذا النوع مدمراً موضعياً للأنسجة ولكنه نادراً ما ينتشر لأعضاء بعيدة."
                ],
                diagnosis_fr: "Carcinome basocellulaire nodulaire",
                diagnosis_ar: "سرطان الجلد القاعدي العقدي",
                symptoms_fr: "Petite perle rosée sur la peau, ne guérit pas, saigne parfois.",
                symptoms_ar: "حبة صغيرة لؤلؤية وردية على الجلد، لا تلتئم وتنزف أحياناً.",
                treatment_fr: "Exérèse chirurgicale simple avec marges de sécurité.",
                treatment_ar: "الاستئصال الجراحي البسيط مع حواف أمان كافية.",
                action_fr: "Biopsie cutanée et surveillance dermatologique.",
                action_ar: "أخذ خزعة جلدية ومتابعة دورية لدى طبيب الجلد."
            },
            {
                id: 31,
                category: "Dermatopathology",
                title_fr: "Mélanome Malin",
                title_ar: "الميلانوما الخبيثة",
                findings_fr: [
                    "Prolifération de mélanocytes atypiques avec un gros nucléole rouge.",
                    "Migration pagétoïde des cellules vers les couches superficielles de l'épiderme.",
                    "On observe souvent une asymétrie de la lésion et une pigmentation irrégulière.",
                    "L'infiltration du derme est le facteur pronostique principal (indice de Breslow)."
                ],
                findings_ar: [
                    "تكاثر عشوائي للخلايا الصبغية (الميلانينية) التي تصبح شاذة وعدوانية للغاية.",
                    "تهاجر الخلايا السرطانية نحو طبقات الجلد العليا بشكل عشوائي وغير طبيعي.",
                    "كثيراً ما نشاهد حبيبات صبغية (بنية اللون) موزعة بشكل غير منتظم داخل الخلايا.",
                    "يعتمد تقييم خطورة الورم على مدى عمق تغلغله داخل طبقات الأدمة (مؤشر بريسلو)."
                ],
                diagnosis_fr: "Mélanome à extension superficielle",
                diagnosis_ar: "ورم ميلانيني خبيث",
                symptoms_fr: "Grain de beauté qui change de forme, de couleur ou qui saigne.",
                symptoms_ar: "شامة (خال) يتغير شكلها، أو لونها، أو تبدأ بالنزيف.",
                treatment_fr: "Exérèse chirurgicale large, immunothérapie, thérapie ciblée.",
                treatment_ar: "الاستئصال الجراحي الواسع، العلاج المناعي، أو العلاج الموجه.",
                action_fr: "Règle ABCDE (Asymétrie, Bords, Couleur, Diamètre, Évolution).",
                action_ar: "تطبيق قاعدة ABCDE لمراقبة الشامات ومراجعة الطبيب فورياً."
            },
            {
                id: 32,
                category: "Hematology",
                title_fr: "Lymphome de Hodgkin",
                title_ar: "لمفوما هودجكين",
                findings_fr: [
                    "Présence de la cellule de Reed-Sternberg (géante, binucléée en 'œil de hibou').",
                    "Fond inflammatoire polymorphe (lymphocytes, éosinophiles, plasmocytes).",
                    "L'architecture normale du ganglion lymphatique est effacée ou nodulaire.",
                    "Présence fréquente de bandes de fibrose délimitant des nodules cellulaires."
                ],
                findings_ar: [
                    "وجود خلايا 'ريد-ستيرنبرغ' الضخمة التي تحتوي على نواتين تشبهان 'عين البوم'.",
                    "تكون الخلايا السرطانية قليلة العدد ومنتشرة وسط مزيج من الخلايا الالتهابية السليمة.",
                    "يحدث تدمير شامل للبنية الطبيعية للعقدة اللمفاوية المصابة.",
                    "غالباً ما تظهر أشرطة من التليف (ندبات صلبة) تقسم نسيج العقدة إلى فصوص."
                ],
                diagnosis_fr: "Lymphome de Hodgkin classique",
                diagnosis_ar: "لمفوما هودجكين الكلاسيكية",
                symptoms_fr: "Gros ganglions non douloureux (cou, aisselles), fièvre, sueurs nocturnes.",
                symptoms_ar: "تضخم غير مؤلم في العقد اللمفاوية (الرقبة، الإبط)، حمى، تعرق ليلي.",
                treatment_fr: "Chimiothérapie (ABVD), radiothérapie.",
                treatment_ar: "العلاج الكيماوي (بروتوكول ABVD)، أو العلاج الإشعاعي.",
                action_fr: "Biopsie ganglionnaire et scanner (TEP-scan) pour le bilan d'extension.",
                action_ar: "إجراء خزعة من العقدة وفحص (PET-scan) لتقييم مدى الانتشار."
            },
            {
                id: 33,
                category: "Hematology",
                title_fr: "Myélome Multiple",
                title_ar: "الورم النخاعي المتعدد",
                findings_fr: [
                    "Prolifération monoclonale de plasmocytes atypiques dans la moelle osseuse.",
                    "Cellules avec noyau excentré en 'roue de charrette' et zone claire périnucléaire.",
                    "Présence possible d'inclusions intracytoplasmiques (corps de Russell).",
                    "Association fréquente avec des lésions osseuses lytiques (trous dans l'os)."
                ],
                findings_ar: [
                    "غزو نخاع العظم بواسطة خلايا مصورية (بلازمية) شاذة تتجاوز نسبتها 10%.",
                    "تتميز هذه الخلايا بنواة منزاحة للطرف ومنطقة فاتحة بجانبها (جهاز جولجي).",
                    "قد نلاحظ وجود تجمعات بروتينية كروية داخل الخلايا (أجسام راسل).",
                    "يؤدي هذا المرض لتآكل العظام وظهور ثقوب فيها (آفات حالة للعظم) تظهر في الأشعة."
                ],
                diagnosis_fr: "Myélome à plasmocytes",
                diagnosis_ar: "ورم النخاع الشوكي المصوري",
                symptoms_fr: "Douleurs osseuses (dos), fractures spontanées, fatigue (anémie).",
                symptoms_ar: "آلام في العظام (خاصة الظهر)، كسور مفاجئة، تعب (فقر دم).",
                treatment_fr: "Chimiothérapie, greffe de moelle osseuse, biphosphonates.",
                treatment_ar: "العلاج الكيماوي، زراعة نخاع العظم، وأدوية تقوية العظام.",
                action_fr: "Électrophorèse des protéines et myélogramme.",
                action_ar: "إجراء فحص كهربائي لبروتينات الدم وأخذ عينة من نخاع العظم."
            },
            {
                id: 34,
                category: "Cardiovascular",
                title_fr: "Myocardite Virale",
                title_ar: "التهاب عضلة القلب الفيروسي",
                findings_fr: [
                    "Infiltration lymphocytaire interstitielle entre les cardiomyocytes.",
                    "Nécrose focale des fibres musculaires cardiaques due à l'inflammation.",
                    "Présence d'un œdème qui écarte les fibres myocardiques habituelles.",
                    "Le diagnostic nécessite souvent une biopsie endomyocardique pour confirmer l'agent."
                ],
                findings_ar: [
                    "ارتشاح كثيف للخلايا اللمفاوية بين ألياف العضلة القلبية.",
                    "تعرض بعض الألياف العضلية للتحلل أو الموت (النخر) نتيجة الهجوم الالتهابي.",
                    "وجود سوائل (وذمة) تؤدي لتباعد الألياف العضلية عن بعضها البعض.",
                    "يؤدي الالتهاب لضعف عام في كفاءة القلب وقد يتسبب في تضخمه وضعف ضخه للدم."
                ],
                diagnosis_fr: "Myocardite lymphocytaire",
                diagnosis_ar: "التهاب العضلة القلبية الفيروسي",
                symptoms_fr: "Douleur thoracique, essoufflement, palpitations après un syndrome grippal.",
                symptoms_ar: "ألم في الصدر، ضيق تنفس، خفقان (غالباً بعد نزلة برد).",
                treatment_fr: "Repos, traitement de l'insuffisance cardiaque, surveillance.",
                treatment_ar: "الراحة التامة، أدوية دعم عضلة القلب، والمراقبة المستمرة.",
                action_fr: "IRM cardiaque et dosage de la troponine.",
                action_ar: "إجراء رنين مغناطيسي للقلب وفحص أنزيمات القلب."
            },
            {
                id: 35,
                category: "Cardiovascular",
                title_fr: "Péricardite Fibrineuse",
                title_ar: "التهاب التأمور الليفي",
                findings_fr: [
                    "Dépôts de fibrine éosinophile sur le feuillet viscéral du péricarde.",
                    "Aspect macroscopique caractéristique dit en 'pain et beurre'.",
                    "Congestion vasculaire importante et infiltration de leucocytes.",
                    "L'épanchement peut gêner mécaniquement les mouvements du cœur."
                ],
                findings_ar: [
                    "ترسب مادة وردية خيطية (الفيبرين) على السطح الخارجي لعضلة القلب.",
                    "يصبح مظهر غشاء القلب خشناً، ويشبه كلاسيكياً 'شريحتي خبز بالزبدة' تم فصلهما.",
                    "نلاحظ توسعاً واحتقاناً كبيراً في الأوعية الدموية الصغيرة المحيطة.",
                    "يمتلئ الفراغ بين القلب وغشائه المحيط بسائل التهابي غني بالبروتين."
                ],
                diagnosis_fr: "Péricardite à épanchement fibrineux",
                diagnosis_ar: "التهاب غشاء القلب الليفي",
                symptoms_fr: "Douleur thoracique augmentée à l'inspiration, soulagée en position penchée.",
                symptoms_ar: "ألم في الصدر يزداد مع الشهيق، ويتحسن عند الانحناء للأمام.",
                treatment_fr: "Anti-inflammatoires (Aspirine, Colchicine).",
                treatment_ar: "مضادات الالتهاب (الأسبرين، كولشيسين).",
                action_fr: "Échographie cardiaque pour rechercher un épanchement.",
                action_ar: "إجراء أشعة تلفزيونية للقلب (Sona) للكشف عن وجود سوائل."
            },
            {
                id: 36,
                category: "Respiratory",
                title_fr: "Carcinome à Petites Cellules",
                title_ar: "سرطان الرئة ذو الخلايا الصغيرة",
                findings_fr: [
                    "Petites cellules à cytoplasme très rare et limites cellulaires indistinctes.",
                    "Chromatine nucléaire granuleuse caractéristique en 'sel et poivre'.",
                    "Effet d'empilement (moulage) des noyaux les uns contre les autres.",
                    "Tumeur à haute activité de division (mitoses très nombreuses)."
                ],
                findings_ar: [
                    "خلايا صغيرة الحجم تحتوي على كمية ضئيلة جداً من السيتوبلازم (تبدو وكأنها أنوية فقط).",
                    "يظهر الحمض النووي (الكروماتين) بمظهر حبيبي دقيق يشبه 'الملح والفلفل'.",
                    "تتراص الأنوية بشدة لدرجة أنها تضغط على بعضها وتغير أشكالها (القولبة النووية).",
                    "يعتبر هذا السرطان عدوانياً جداً ويرتبط بشكل مباشر وأساسي بتدخين التبغ."
                ],
                diagnosis_fr: "SCLC (Small Cell Lung Cancer)",
                diagnosis_ar: "سرطان الرئة ذو الخلايا الصغيرة",
                symptoms_fr: "Toux, essoufflement, syndrome de la veine cave supérieure.",
                symptoms_ar: "سعال، ضيق تنفس، تورم في الوجه (متلازمة الوريد الأجوف).",
                treatment_fr: "Chimiothérapie et radiothérapie (très chimiosensible).",
                treatment_ar: "العلاج الكيماوي والإشعاعي (يستجيب للكيماوي بشكل جيد).",
                action_fr: "Scanner et biopsie bronchique (urgence diagnostique).",
                action_ar: "إجراء أشعة مقطعية ومنظار شعبي بأسرع وقت للتشخيص."
            },
            {
                id: 37,
                category: "Respiratory",
                title_fr: "Mésothéliome Pleural",
                title_ar: "ورم الميزوثيليوما الجنبي",
                findings_fr: [
                    "Prolifération de cellules mésothéliales malignes formant des tubes ou des nappes.",
                    "Aspect souvent biphasique (mélange de zones épithéloïdes et sarcomatoïdes).",
                    "Infiltration du parenchyme pulmonaire et de la paroi thoracique.",
                    "Association forte avec une exposition antérieure aux poussières d'amiante."
                ],
                findings_ar: [
                    "تكاثر خلايا خبيثة تنشأ من الغشاء المبطن للرئة (غشاء الجنب).",
                    "قد يشكل الورم أنابيب صغيرة أو يبدو كألياف مغزلية (مظهر ثنائي الطور).",
                    "غالباً ما نلاحظ غزو الورم لجدار الصدر أو أنسجة الرئة العميقة.",
                    "يعتبر التعرض الطويل لمادة 'الأسبستوس' هو العامل الرئيسي المسبب لهذا النوع."
                ],
                diagnosis_fr: "Mésothéliome pleural malin",
                diagnosis_ar: "ورم المتوسطة الجنبي الخبيث",
                symptoms_fr: "Douleur thoracique sourde, essoufflement, épanchement récidivant.",
                symptoms_ar: "ألم مستمر في الصدر، ضيق تنفس، تجمع سوائل متكرر.",
                treatment_fr: "Chimiothérapie, parfois chirurgie très lourde.",
                treatment_ar: "العلاج الكيماوي، وأحياناً جراحة استئصال واسعة ومعقدة.",
                action_fr: "Interrogatoire sur l'exposition à l'amiante et biopsie pleurale.",
                action_ar: "السؤال عن التعرض لمادة 'الأسبستوس' وأخذ خزعة من غشاء الجنب."
            },
            {
                id: 38,
                category: "Digestive",
                title_fr: "Adénocarcinome du Colon",
                title_ar: "سرطان القولون الغدي",
                findings_fr: [
                    "Formations glandulaires irrégulières envahissant la paroi intestinale.",
                    "Cellules cylindriques atypiques avec de gros noyaux et des mitoses.",
                    "Désorganisation complète de la structure habituelle des cryptes coliques.",
                    "Infiltration de la sous-muqueuse et parfois de la séreuse."
                ],
                findings_ar: [
                    "تكون غدد غير منتظمة الشكل وعشوائية الترتيب داخل جدار القولون.",
                    "تظهر الخلايا المبطنة لهذه الغدد كبيرة وداكنة مع كثرة الانقسامات الخلوية.",
                    "يخترق الورم الطبقة العضلية للقولون ليبدأ بالانتشار خارجياً.",
                    "كثيراً ما نلاحظ وجود مناطق من الخلايا الميتة (نخر) في مركز التجمعات الورمية."
                ],
                diagnosis_fr: "Adénocarcinome colique bien différencié",
                diagnosis_ar: "سرطان القولون الغدي",
                symptoms_fr: "Troubles du transit (constipation récente), sang dans les selles.",
                symptoms_ar: "تغير في عادات الإخراج (إمساك مستجد)، وجود دم مع البراز.",
                treatment_fr: "Chirurgie (hémicolectomie), chimiothérapie selon le stade.",
                treatment_ar: "الاستئصال الجراحي للقولون، والعلاج الكيماوي حسب المرحلة.",
                action_fr: "Coloscopie totale et scanner abdominal.",
                action_ar: "إجراء منظار قولون كامل وأشعة مقطعية للبطن."
            },
            {
                id: 39,
                category: "Digestive",
                title_fr: "Hépatite Chronique C",
                title_ar: "التهاب الكبد الوبائي سي المزمن",
                findings_fr: [
                    "Aggregats lymphocytaires portaux formant parfois de vrais follicules.",
                    "Stéatose légère à modérée souvent associée (gouttes de graisse).",
                    "Nécrose parcellaire (piecemeal necrosis) à l'interface espace porte/parenchyme.",
                    "Fibrose progressive pouvant aboutir à une cirrhose constitutionnelle."
                ],
                findings_ar: [
                    "تجمعات واضحة من الخلايا اللمفاوية في المناطق البابية للكبد.",
                    "تحلل الخلايا الكبدية وظهور أجسام 'كونسيلمان' (كريات وردية صغيرة ناتجة عن موت الخلايا).",
                    "بدء تكون ألياف ضامة تصل بين المناطق البابية المختلفة (تليف جسري).",
                    "وجود قطرات دهنية صغيرة داخل خلايا الكبد، وهي علامة شائعة لهذا الفيروس."
                ],
                diagnosis_fr: "Hépatite chronique virale",
                diagnosis_ar: "التهاب الكبد الفيروسي المزمن",
                symptoms_fr: "Souvent asymptomatique, fatigue inhabituelle.",
                symptoms_ar: "غالباً صامت، تعب وإرهاق غير مبرر.",
                treatment_fr: "Antiviraux spécifiques selon le virus (B ou C).",
                treatment_ar: "مضادات الفيروسات المخصصة حسب نوع الفيروس (B أو C).",
                action_fr: "PCR virale et évaluation de la fibrose (Fibroscan).",
                action_ar: "فحص الحمل الفيروسي (PCR) وتقييم تليف الكبد (Fibroscan)."
            },
            {
                id: 40,
                category: "Digestive",
                title_fr: "Cholécystite Aiguë",
                title_ar: "التهاب المرارة الحاد",
                findings_fr: [
                    "Edème marqué de la paroi de la vésicule biliaire.",
                    "Infiltration massive de polynucléaires neutrophiles (pus).",
                    "Zones d'érosion ou d'ulcérations de la muqueuse interne.",
                    "Congestion vasculaire et parfois dépôts de fibrine en surface."
                ],
                findings_ar: [
                    "تجمع سوائل (وذمة) تؤدي لزيادة كبيرة في سمك جدار المرارة.",
                    "ارتشاح كثيف للعدلات (خلايا صديدية) في كامل طبقات جدار المرارة.",
                    "قد تظهر الطبقة المخاطية الداخلية متآكلة أو تحتوي على تقرحات.",
                    "غالباً ما توجد حصوات مرارية هي السبب في انسداد مجرى الصفراء والتهابها."
                ],
                diagnosis_fr: "Cholécystite lithiasique aiguë",
                diagnosis_ar: "التهاب المرارة الحاد",
                symptoms_fr: "Douleur intense hypocondre droit (sous les côtes), fièvre, nausées.",
                symptoms_ar: "ألم شديد في الجهة اليمنى تحت الأضلاع، حمى، غثيان.",
                treatment_fr: "Chirurgie (cholécystectomie), antibiotiques, jeûne.",
                treatment_ar: "استئصال المرارة جراحياً، مضادات حيوية، والصيام المؤقت.",
                action_fr: "Échographie abdominale en urgence.",
                action_ar: "إجراء سونار (أشعة تلفزيونية) للبطن بصفة عاجلة."
            },
            {
                id: 41,
                category: "Urinary",
                title_fr: "Carcinome Papillaire du Rein",
                title_ar: "سرطان الكلى الحليمي",
                findings_fr: [
                    "Formations en forme de doigts (papilles) avec un axe contenant des vaisseaux.",
                    "On trouve souvent des amas de macrophages à l'intérieur des papilles.",
                    "Présence fréquente de petites billes de calcaire circulaires (psammomes).",
                    "Les cellules qui tapissent les papilles sont régulières, cubiques ou cylindriques."
                ],
                findings_ar: [
                    "تشكلات تشبه الأصابع (حليمات) تحتوي في مركزها على أوعية دموية.",
                    "كثيراً ما نجد تجمعات لخلايا بلعمية كبيرة داخل هذه الحليمات.",
                    "وجود كرات صغيرة من التكلس (أجسام رملية) بشكل متكرر في هذا الورم.",
                    "تكون الخلايا المبطنة لهذه الحليمات منتظمة الشكل ومكعبة أو أسطوانية."
                ],
                diagnosis_fr: "Carcinome rénal papillaire",
                diagnosis_ar: "سرطان الخلايا الكلوية الحليمي",
                symptoms_fr: "Hématurie, souvent découvert par hasard à l'échographie.",
                symptoms_ar: "بول دموي، وغالباً ما يتم اكتشافه صدفة عبر السونار.",
                treatment_fr: "Néphrectomie partielle ou totale.",
                treatment_ar: "استئصال جزئي أو كلي للكلية.",
                action_fr: "Uro-scanner pour évaluer la tumeur.",
                action_ar: "إجراء أشعة مقطعية للمسالك البولية لتقييم الورم."
            },
            {
                id: 42,
                category: "Urinary",
                title_fr: "Nécrose Tubulaire Aiguë (NTA)",
                title_ar: "النخر الأنبوبي الحاد",
                findings_fr: [
                    "Les cellules qui tapissent les tubes du rein meurent et se détachent.",
                    "Les tubes urinaires perdent leur bordure en brosse et deviennent plats.",
                    "Des débris de cellules mortes viennent boucher l'intérieur (lumière) des tubes.",
                    "L'interstitium du rein est gonflé (œdème) à cause de l'arrêt du filtrage."
                ],
                findings_ar: [
                    "موت وتساقط الخلايا المبطنة للأنابيب الكلوية في مجرى البول.",
                    "تفقد الأنابيب حوافها 'الفرشاتية' الماصة وتصبح الخلايا المتبقية مسطحة.",
                    "يتراكم حطام الخلايا الميتة ليسد لمعة الأنابيب الكلوية من الداخل.",
                    "يتورم النسيج البيني للكلية (وذمة) نتيجة توقف عمليات الترشيح الطبيعية."
                ],
                diagnosis_fr: "NTA ischémique ou toxique",
                diagnosis_ar: "نخر أنبوبي حاد (فشل كلوي حاد مؤقت)",
                symptoms_fr: "Baisse brutale des urines (oligurie) après choc ou médicament.",
                symptoms_ar: "نقص مفاجئ في كمية البول (شح البول) بعد صدمة أو دواء.",
                treatment_fr: "Hydratation, arrêt des médicaments toxiques, parfois dialyse temporaire.",
                treatment_ar: "ترطيب الجسم بالسوائل، وقف الأدوية الضارة، وأحياناً غسيل مؤقت.",
                action_fr: "Bilan rénal (Crétinine, Urée) et surveillance ionique.",
                action_ar: "فحص وظائف الكلية (الكرياتينين) ومراقبة أملاح الدم."
            },
            {
                id: 43,
                category: "Endocrine",
                title_fr: "Adénome Hypophysaire",
                title_ar: "ورم غدي نخامي",
                findings_fr: [
                    "Prolifération d'une seule sorte de cellules (aspect très monotone).",
                    "La structure normale de la glande (en nids) disparaît au profit d'une nappe uniforme.",
                    "Le réseau de fibres qui soutient la glande (réticuline) est cassé ou absent.",
                    "Bien que bénin, il peut compresser les structures voisines à cause de sa taille."
                ],
                findings_ar: [
                    "تكاثر نوع واحد فقط من الخلايا مما يعطي مظهراً رتيباً وموحداً للنسيج.",
                    "تختفي البنية الطبيعية للغدة (التي تكون عادة في شكل أعشاش) وتصبح كتلة واحدة.",
                    "تتحطم الشبكة الليفية الداعمة للغدة أو تختفي تماماً في منطقة الورم.",
                    "رغم أنه ورم حميد، إلا أنه قد يضغط على ما حوله من أنسجة نتيجة تضخم حجمه."
                ],
                diagnosis_fr: "Adénome hypophysaire chromophobe ou acidophile",
                diagnosis_ar: "ورم غدي في الغدة النخامية",
                symptoms_fr: "Maux de tête, troubles visuels, dérèglements hormonaux.",
                symptoms_ar: "صداع، زغللة في النظر، اضطرابات هرمونية (مثل الحليب أو النمو).",
                treatment_fr: "Médicaments (Agonistes dopaminergiques), chirurgie transsphénoïdale.",
                treatment_ar: "أدوية (حسب نوع الهرمون) أو الاستئصال الجراحي عبر الأنف.",
                action_fr: "IRM cérébrale centrée sur la selle turcique et bilan hormonal.",
                action_ar: "إجراء رنين مغناطيسي (IRM) وفحص شامل للهرمونات."
            },
            {
                id: 44,
                category: "Endocrine",
                title_fr: "Carcinome Papillaire de la Thyroïde",
                title_ar: "سرطان الدرقية الحليمي",
                findings_fr: [
                    "Les noyaux des cellules sont clairs comme s'ils étaient vides (aspect en 'verre dépoli').",
                    "On observe des replis de la membrane à l'intérieur du noyau (pseudo-inclusions).",
                    "Formation de papilles nésiques et présence de massues calcifiées (psammomes).",
                    "C'est un cancer de bon pronostic avec une tendance à l'extension ganglionnaire."
                ],
                findings_ar: [
                    "تظهر أنوية الخلايا باهتة وشفافة وكأنها فارغة (مظهر الزجاج المصنفر).",
                    "نلاحظ وجود انبعاجات في غشاء النواة نحو الداخل (اشتمالات كاذبة).",
                    "تكون حليمات نسيجية ووجود كرات تكلس صغيرة دائرية (أجسام رملية).",
                    "يعتبر من السرطانات ذات التشخيص الجيد وغالباً ما ينتشر للعقد اللمفاوية."
                ],
                diagnosis_fr: "Carcinome papillaire thyroïdien",
                diagnosis_ar: "سرطان الغدة الدرقية الحليمي",
                symptoms_fr: "Nodule thyroïdien indolore, mobile à la déglutition.",
                symptoms_ar: "كتلة صلبة في الغدة الدرقية غير مؤلمة، تتحرك مع البلع.",
                treatment_fr: "Thyroïdectomie totale, souvent suivie d'iode radioactif (Irathérapie).",
                treatment_ar: "استئصال كامل للدرقية يتبعه غالباً جلسة يود مشع.",
                action_fr: "Échographie cervicale et cytoponction (FNA).",
                action_ar: "سونار للرقبة مع أخذ عينة بالإبرة الدقيقة (Cytoponction)."
            },
            {
                id: 45,
                category: "Nervous System",
                title_fr: "Glioblastome",
                title_ar: "ورم أرومي دبقي",
                findings_fr: [
                    "Cancer cérébral très agressif avec des cellules aux formes bizarres (anaplasie).",
                    "Zones de nécrose entourées de cellules qui se regroupent (palissades de nécrose).",
                    "Prolifération anarchique des vaisseaux sanguins (aspect gloméruloïde).",
                    "L'infiltration est très diffuse, rendant les limites tumorales imprécises."
                ],
                findings_ar: [
                    "سرطان دماغي عدواني جداً تظهر خلاياه بأشكال غريبة ومشوهة للغاية.",
                    "ظهور مناطق من الأنسجة الميتة (نخر) تحيط بها خلايا متراصفة بانتظام.",
                    "تتكاثر الأوعية الدموية الصغيرة بشكل عشوائي وكثيف جداً لتغذية الورم.",
                    "يتغلغل الورم في أنسجة الدماغ بشكل منتشر مما يجعل حدوده غير واضحة."
                ],
                diagnosis_fr: "Glioblastome multiforme",
                diagnosis_ar: "ورم أرومي دبقي متعدد الأشكال",
                symptoms_fr: "Céphalées matinales, crises d'épilepsie, déficits neurologiques.",
                symptoms_ar: "صداع شديد صباحاً، نوبات صرع، ضعف في أحد أطراف الجسم.",
                treatment_fr: "Résection chirurgicale maximale, radiothérapie et chimiothérapie.",
                treatment_ar: "استئصال جراحي قدر الإمكان، يليه إشعاع وكيماوي (تيمودال).",
                action_fr: "IRM cérébrale avec injection de gadolinium.",
                action_ar: "إجراء رنين مغناطيسي على الدماغ بالصبغة (IRM)."
            },
            {
                id: 46,
                category: "Nervous System",
                title_fr: "Méningiome",
                title_ar: "ورم سحائي",
                findings_fr: [
                    "Les cellules s'enroulent les unes autour des autres (aspect en bulbe d'oignon).",
                    "Présence de nombreux massues de calcaire circulaires (corps de psammome).",
                    "Les limites de la tumeur sont nettes, elle compresse le cerveau sans l'envahir.",
                    "Les noyaux sont souvent réguliers avec une chromatine fine et homogène."
                ],
                findings_ar: [
                    "تلتف الخلايا حول بعضها البعض في ترتيب دائري يشبه طبقات البصل.",
                    "وجود العديد من حبيبات التكلس الصغيرة والمستديرة (أجسام رملية).",
                    "تكون حدود الورم واضحة وحادة، حيث يضغط على الدماغ دون اختراقه.",
                    "تتميز الأنوية بكونها منتظمة الشكل مع توزيع متجانس للمادة الوراثية."
                ],
                diagnosis_fr: "Méningiome méningothélial",
                diagnosis_ar: "ورم سحائي (حميد)",
                symptoms_fr: "Céphalées progressives, parfois asymptomatique (découverte fortuite).",
                symptoms_ar: "صداع يزداد تدريجياً، وقد يكون بلا أعراض ويكتشف بالصدفة.",
                treatment_fr: "Surveillance si petit, chirurgie si compressif.",
                treatment_ar: "المراقبة إذا كان صغيراً، أو الاستئصال الجراحي إذا كان يضغط على الدماغ.",
                action_fr: "Scanner ou IRM cérébrale.",
                action_ar: "إجراء أشعة مقطعية أو رنين مغناطيسي للدماغ."
            },
            {
                id: 47,
                category: "Nervous System",
                title_fr: "Maladie d'Alzheimer (Microscopie)",
                title_ar: "مرض الزهايمر",
                findings_fr: [
                    "Plaques extracellulaires de substance amyloïde (plaques séniles).",
                    "Dégénérescence neurofibrillaire intracellulaire (accumulation de protéine Tau).",
                    "Atrophie neuronale marquée, particulièrement dans le cortex et l'hippocampe.",
                    "Réaction inflammatoire astrocytaire autour des zones de destruction."
                ],
                findings_ar: [
                    "تراكم لوحات بروتينية خارج الخلايا العصبية (لوحات شيخوخة - بيتا أميلويد).",
                    "التواء وتشابك الخيوط البروتينية داخل الخلايا العصبية نفسها (بروتين تاو).",
                    "فقدان تدريجي وكبير للعصبونات خاصة في قشرة الدماغ ومراكز الذاكرة.",
                    "استجابة التهابية من الخلايا النجمية المحيطة بمناطق تلف الأنسجة."
                ],
                diagnosis_fr: "Maladie d'Alzheimer",
                diagnosis_ar: "مرض الزهايمر",
                symptoms_fr: "Pertes de mémoire à court terme, désorientation, aphasie.",
                symptoms_ar: "فقدان الذاكرة القريبة، التيه في الأماكن، وصعوبة في الكلام.",
                treatment_fr: "Traitements symptomatiques (inhibiteurs de l'acétylcholinestérase).",
                treatment_ar: "علاجات لتحسين الأعراض (مثبطات الأستيل كولين إستريز).",
                action_fr: "Tests neuropsychologiques et IRM (pour éliminer d'autres causes).",
                action_ar: "اختبارات الذاكرة وإجراء رنين مغناطيسي لاستبعاد أسباب أخرى."
            },
            {
                id: 48,
                category: "Infectious",
                title_fr: "Aspergillose Pulmonaire",
                title_ar: "داء الرشاشيات الرئوي",
                findings_fr: [
                    "Hyphes (filaments) mycétiens septés présentant une bifurcation à 45°.",
                    "Tendance à l'envahissement des parois vasculaires (angio-invasion).",
                    "Infarctus tissulaire secondaire à l'obstruction des vaisseaux par le champignon.",
                    "Réaction inflammatoire granulomateuse possible chez les patients immunocompétents."
                ],
                findings_ar: [
                    "نمو خيوط فطرية مقسمة تتفرع بانتظام بزوايا حادة (45 درجة).",
                    "يميل هذا الفطر إلى اختراق جدران الأوعية الدموية والنمو داخلها بكثافة.",
                    "يؤدي هذا الاختراق لموت أنسجة الرئة نتيجة انسداد الأوعية بالفطر (احتشاء).",
                    "قد يتكون تفاعل حبيبي التهابي في محاولة من الجسم لحصر العدوى الفطرية."
                ],
                diagnosis_fr: "Aspergillose invasive",
                diagnosis_ar: "داء الرشاشيات (عدوى فطرية رئوية)",
                symptoms_fr: "Toux sanglante (hémoptysie), douleur thoracique, fièvre persistante.",
                symptoms_ar: "سعال مدمم، ألم في الصدر، حمى لا تنخفض بالمضادات العادية.",
                treatment_fr: "Antifongiques puissants (Voriconazole).",
                treatment_ar: "مضادات الفطريات القوية (Voriconazole).",
                action_fr: "Scanner thoracique (aspect en halo) et dosage du galactomannane.",
                action_ar: "أشعة مقطعية للصدر وفحص مادة 'الجالاكتومانان' في الدم."
            },
            {
                id: 49,
                category: "Infectious",
                title_fr: "Bilharziose (Vessie)",
                title_ar: "البلهارسيا (المثانة)",
                findings_fr: [
                    "Présence d'œufs de Schistosoma haematobium avec un éperon terminal.",
                    "Réaction inflammatoire intense de type granulome autour des œufs.",
                    "Infiltration massive d'éosinophiles dans la muqueuse et la sous-muqueuse.",
                    "Fibrose cicatricielle pouvant mener à une sténose ou un cancer vésical."
                ],
                findings_ar: [
                    "وجود بيوض طفيلي 'لهيماتوبيوم' التي تتميز بوجود شوكة نهائية بارزة.",
                    "يستجيب الجسم بتكوين حبيبات التهابية (جرانولوما) تحيط بكل بيضة.",
                    "نلاحظ كثرة الكريات البيضاء 'الحمضية' (Eosinophils) في طبقات المثانة.",
                    "يؤدي المرض لتليف مزمن قد يتطور لضيق في مجرى البول أو سرطان المثانة."
                ],
                diagnosis_fr: "Distomatose urinaire (Bilharziose)",
                diagnosis_ar: "بلهارسيا المجاري البولية",
                symptoms_fr: "Urines sanglantes (hématurie terminale), brûlures urinaires.",
                symptoms_ar: "بول مدمم (خاصة في نهاية التبول)، حرقان أثناء التبول.",
                treatment_fr: "Praziquantel (traitement de référence).",
                treatment_ar: "دواء البرازيكوانتيل (Praziquantel) هو العلاج النوعي والحاسم.",
                action_fr: "Examen des urines (recherche d'œufs) et cystoscopie.",
                action_ar: "فحص البول مجهرياً للبحث عن البيوض ومنظار للمثانة."
            },
            {
                id: 50,
                category: "Reproductive",
                title_fr: "Carcinome Canalaire Infiltrant (Sein)",
                title_ar: "سرطان الثدي (القنوات الغازي)",
                findings_fr: [
                    "Cellules malignes organisées en cordons ou nids envahissant le stroma mammaire.",
                    "Réaction fibreuse intense (desmoplasie) rendant la tumeur cliniquement dure.",
                    "Atypies nucléaires marquées avec de nombreux nucléoles et mitoses.",
                    "Infiltration fréquente des espaces lymphatiques et adipeux environnants."
                ],
                findings_ar: [
                    "تشكل الخلايا السرطانية حبالاً أو أعشاشاً تخترق الأنسجة الداعمة للثدي.",
                    "يصاحب ذلك تكون نسيج ليفي كثيف جداً، مما يجعل الورم قاسي الملمس.",
                    "تظهر أنوية الخلايا بشكل شاذ مع وجود علامات كثيرة لانقسامات خلوية نشطة.",
                    "كثيراً ما تغزو الخلايا السرطانية الأوعية اللمفاوية والأنسجة الدهنية المحيطة."
                ],
                diagnosis_fr: "Carcinome canalaire infiltrant",
                diagnosis_ar: "سرطان الثدي (القنوات الغازي)",
                symptoms_fr: "Masse dure fixe du sein, rétraction de la peau ou du mamelon.",
                symptoms_ar: "وجود كتلة قاسية ثابتة في الثدي، انكماش في الجلد أو الحلمة.",
                treatment_fr: "Chirurgie (Mastectomie ou tumorectomie), chimiothérapie, radiothérapie, hormonothérapie.",
                treatment_ar: "الجراحة (استئصال كامل أو جزئي)، كيماوي، إشعاع، وعلاج هرموني.",
                action_fr: "Mammographie, échographie et microbiopsie indispensable.",
                action_ar: "إجراء تصوير (Mammographie) وسونار للثدي وأخذ عينة (Biopsy) ضروري جداً."
            },
            {
                id: 51,
                category: "Respiratory",
                title_fr: "Tuberculose Pulmonaire (Granulome)",
                title_ar: "السل الرئوي (حبيبوم)",
                findings_fr: [
                    "Formation de granulomes épithéloïdes avec une nécrose caséeuse centrale.",
                    "Présence de cellules géantes de Langhans (noyaux disposés en fer à cheval).",
                    "Couronne lymphocytaire périphérique entourant la lésion granulomateuse.",
                    "La coloration de Ziehl-Neelsen peut révéler des bacilles de Koch rouges."
                ],
                findings_ar: [
                    "تكون حبيبات التهابية تحتوي في مركزها على نخر 'جبني' باهت.",
                    "وجود خلايا 'لانغهانز' العملاقة (تترتب أنويتها بشكل حدوة الحصان).",
                    "نطاق من الخلايا اللمفاوية يحيط بالحبيبة الالتهابية كجدار دفاعي.",
                    "تساعد صبغة 'زيل-نيلسون' في إظهار بكتيريا السل كعصيات حمراء صغيرة."
                ],
                diagnosis_fr: "Tuberculose caséofolliculaire",
                diagnosis_ar: "الدرن (السل) الرئوي",
                symptoms_fr: "Toux prolongée, sueurs nocturnes, perte de poids, crachats sanglants.",
                symptoms_ar: "سعال مستمر (أكثر من 3 أسابيع)، تعرق ليلي، نقص وزن، بلغم مدمم.",
                treatment_fr: "Protocole antibiotique long (6 mois) : Rifampicine, Isoniazide...",
                treatment_ar: "مضادات حيوية خاصة لمدة 6 أشهر على الأقل (نظام علاج السل).",
                action_fr: "Examen des crachats (recherche de BK) et radiographie thoracique.",
                action_ar: "فحص البلغم للبحث عن العصيات وأشعة سينية للصدر."
            },
            {
                id: 52,
                category: "Digestive",
                title_fr: "Cirrhose Hépatique",
                title_ar: "تليف الكبد",
                findings_fr: [
                    "Désorganisation totale de l'architecture normale du foie.",
                    "Formation de nodules de régénération de tailles variables.",
                    "Bandes de fibrose (tissu cicatriciel) entourant et isolant les nodules.",
                    "Signes de cholestase ou de stéatose souvent associés selon la cause."
                ],
                findings_ar: [
                    "فقدان كامل للبنية الطبيعية المنتظمة لنسيج الكبد.",
                    "تكون عقد نسيجية متجددة ذات أحجام ومقاسات متفاوتة.",
                    "أشرطة من التليف (ندبات ليفية) تحيط بالعقد الكبدية وتعزلها.",
                    "غالباً ما نلاحظ وجود علامات احتقان صفراوي أو تجمع دهني في الخلايا."
                ],
                diagnosis_fr: "Cirrhose micronodulaire ou macronodulaire",
                diagnosis_ar: "تليف الكبد المزمن",
                symptoms_fr: "Ventre gonflé (ascite), jaunisse (ictère), fatigue intense.",
                symptoms_ar: "استسقاء البطن (تجمع سوائل)، اصفرار العينين (يرقان)، خمول.",
                treatment_fr: "Traitement de la cause, régime pauvre en sel, diurétiques, transplantation hépatique.",
                treatment_ar: "علاج المسبب، تقليل الملح، مدرات بول، أو زراعة الكبد.",
                action_fr: "Échographie hépatique et bilan de coagulation.",
                action_ar: "إجراء سونار دوري وفحص وظائف وسيولة الدم."
            },
            {
                id: 53,
                category: "Urinary",
                title_fr: "Glomérulonéphrite Post-Streptococcique",
                title_ar: "التهاب كبيبات الكلى بعد العدوى",
                findings_fr: [
                    "Prolifération diffuse de cellules mésangiales et endothéliales.",
                    "Infiltration de nombreux polynucléaires neutrophiles (aspect hypercellulaire).",
                    "Présence de dépôts immuns caractéristiques en forme de 'bosses' (humps).",
                    "Fermeture des lumières capillaires glomérulaires par le gonflement cellulaire."
                ],
                findings_ar: [
                    "تكاثر منتشر لخلايا 'المنسجيوم' وخلايا بطانة الأوعية الكلوية.",
                    "ارتشاح كثيف للعدلات مما يجعل الكبيبات الكلوية تبدو مزدحمة بالخلايا.",
                    "وجود ترسبات مناعية مميزة تحت المجهر الإلكتروني تشبه السنام (Humps).",
                    "انسداد المسامات الدقيقة للأوعية الدموية في الكلى نتيجة تورم الخلايا."
                ],
                diagnosis_fr: "Glomérulonéphrite aiguë proliférative",
                diagnosis_ar: "التهاب كبيبات الكلى الحاد",
                symptoms_fr: "Urines foncées (couleur Coca), œdèmes du visage le matin, hypertension.",
                symptoms_ar: "بول داكن (لون الكولا)، تورم الوجه صباحاً، ارتفاع ضغط الدم.",
                treatment_fr: "Repos, restriction de sel et d'eau, traitement de l'hypertension.",
                treatment_ar: "الراحة، تقليل الأملاح والسوائل، وأدوية للضغط.",
                action_fr: "Analyse d'urine et dosage des anticorps antistreptolysine (ASLO).",
                action_ar: "فحص البول وتحليل الأجسام المضادة للمكورات السبحية (ASLO)."
            },
            {
                id: 54,
                category: "Digestive",
                title_fr: "Maladie de Crohn",
                title_ar: "داء كرون",
                findings_fr: [
                    "Inflammation transmurale touchant toutes les couches de la paroi digestive.",
                    "Présence de fissures profondes et d'ulcérations serpigineuses.",
                    "Granulomes épithéloïdes sans nécrose caséeuse (dans 30-50% des cas).",
                    "Alternance de zones saines et de zones atteintes (lésions segmentaires)."
                ],
                findings_ar: [
                    "التهاب يخترق كامل سماكة جدار الأمعاء من الداخل إلى الخارج.",
                    "وجود شقوق عميقة وتقرحات طولية متعرجة في الغشاء المخاطي.",
                    "تكون 'حبيبات' التهابية معينة (بدون نخر جبني) في جدار الأمعاء.",
                    "تتميز الإصابة بوجود مناطق مريضة تفصل بينها مناطق سليمة تماماً."
                ],
                diagnosis_fr: "Maladie de Crohn iléo-cécale",
                diagnosis_ar: "مرض كرون المعوي",
                symptoms_fr: "Douleurs abdominales chroniques, diarrhées, perte de poids.",
                symptoms_ar: "آلام بطنية مزمنة، إسهال متكرر، نقص هائل في الوزن.",
                treatment_fr: "Corticoïdes, immunosuppresseurs, biothérapies.",
                treatment_ar: "الكورتيزون، مثبطات المناعة، والعلاجات البيولوجية.",
                action_fr: "Iléo-colonoscopie et scanner abdominal.",
                action_ar: "إجراء منظار للقولون والأمعاء الدقيقة وأشعة مقطعية."
            },
            {
                id: 55,
                category: "Digestive",
                title_fr: "Rectocolite Hémorragique (RCH)",
                title_ar: "التهاب القولون التقرحي",
                findings_fr: [
                    "Inflammation limitée à la muqueuse et à la sous-muqueuse.",
                    "Présence d'abcès cryptiques (accumulation de pus dans les glandes).",
                    "Distorsion de l'architecture des cryptes et perte des cellules caliciformes.",
                    "Atteinte continue partant du rectum sans intervalles de muqueuse saine."
                ],
                findings_ar: [
                    "التهاب سطحي يقتصر على الطبقة المخاطية وما تحتها فقط.",
                    "تكون 'خراجات' دقيقة داخل غدد الأمعاء (خراجات المخابئ).",
                    "تشوه في شكل الغدد المعوية وفقدان الخلايا المفرزة للمخاط.",
                    "تكون الإصابة مستمرة وتبدأ من المستقيم وتمتد للأعلى دون انقطاع."
                ],
                diagnosis_fr: "Rectocolite ulcéro-hémorragique",
                diagnosis_ar: "التهاب القولون التقرحي",
                symptoms_fr: "Émissions de sang et de glaires par l'anus, besoins fréquents.",
                symptoms_ar: "خروج دم ومخاط مع البراز، رغبة ملحة في دخول الحمام.",
                treatment_fr: "Dérivés du 5-ASA, corticoïdes locaux ou oraux.",
                treatment_ar: "مشتقات الـ 5-ASA، كورتيزون موضعي أو بالفم.",
                action_fr: "Coloscopie de surveillance (risque de transformation maligne).",
                action_ar: "منظار قولون دوري لمتابعة الحالة خوفاً من التحول السرطاني."
            },
            {
                id: 56,
                category: "Digestive",
                title_fr: "Appendicite Aiguë",
                title_ar: "التهاب الزائدة الدودية الحاد",
                findings_fr: [
                    "Infiltration massive des couches musculaires par des neutrophiles.",
                    "Ulcération de la muqueuse interne avec parfois des foyers de nécrose.",
                    "Exsudat fibrino-purulent visible à la surface de la séreuse.",
                    "Congestion vasculaire majeure avec des suffusions hémorragiques."
                ],
                findings_ar: [
                    "ارتشاح كثيف لخلايا الصديد (العدلات) في عضلات جدار الزائدة.",
                    "تآكل وتقرح في البطانة الداخلية وقد يصل الأمر لموت الأنسجة.",
                    "تكون طبقة من الصديد والفيبرين على السطح الخارجي للزائدة.",
                    "احتقان شديد في الأوعية الدموية مع وجود نزيف دقيق داخل الجدار."
                ],
                diagnosis_fr: "Appendicite aiguë suppurée",
                diagnosis_ar: "التهاب الزائدة الدودية الحاد",
                symptoms_fr: "Douleur brutale fosse iliaque droite (en bas à droite), nausées, fièvre légère.",
                symptoms_ar: "ألم مفاجئ أسفل البطن جهة اليمين، غثيان، حرارة خفيفة.",
                treatment_fr: "Appendicectomie chirurgicale (ablation de la pendicite).",
                treatment_ar: "استئصال الزائدة الدودية جراحياً (عملية مستعجلة).",
                action_fr: "Palpation abdominale (douleur au point de McBurney) et échographie.",
                action_ar: "فحص البطن (نقطة مكبيرني) وإجراء سونار لتأكيد الالتهاب."
            },
            {
                id: 57,
                category: "Digestive",
                title_fr: "Pancreatitis (Stéatonécrose)",
                title_ar: "التهاب البنكرياس (نخر دهني)",
                findings_fr: [
                    "Destruction chimique des adipocytes (cellules graisseuses) par les enzymes lipolytiques.",
                    "Formation de dépôts de calcium (savons) blanchâtres (saponification).",
                    "Réaction inflammatoire riche en macrophages et en neutrophiles.",
                    "Hémorragie et œdème interstitiel pancréatique massif."
                ],
                findings_ar: [
                    "تدمير الخلايا الدهنية بفعل إنزيمات البنكرياس التي تسربت للخارج.",
                    "تكون ترسبات كلسية بيضاء تشبه الصابون داخل دهون البطن.",
                    "استجابة التهابية قوية تشمل الخلايا البلعمية وكريات الدم البيضاء.",
                    "نزيف حاد وتورم شديد في نسيج البنكرياس والمناطق المحيطة به."
                ],
                diagnosis_fr: "Pancléatite aiguë avec nécrose graisseuse",
                diagnosis_ar: "التهاب البنكرياس الحاد مع نخر دهني",
                symptoms_fr: "Douleur abdominale transfixiante (dans le dos), vomissements.",
                symptoms_ar: "ألم عنيف في أعلى البطن يمتد للظهر، قيء مستمر.",
                treatment_fr: "Hospitalisation en urgence, jeûne, hydratation IV, antalgiques.",
                treatment_ar: "دخول المستشفى فوراً، الصيام، سوائل وريدية، ومسكنات قوية.",
                action_fr: "Dosage de la lipase sanguine et scanner abdominal.",
                action_ar: "فحص إنزيم الليباز (Lipase) في الدم وأشعة مقطعية."
            },
            {
                id: 58,
                category: "Endocrine",
                title_fr: "Phéochromocytome",
                title_ar: "ورم القواتم",
                findings_fr: [
                    "Tumeur de la médullosurrénale organisée en nids de cellules (Zellballen).",
                    "Cellules avec un cytoplasme granuleux riche en catécholamines.",
                    "Pléomorphisme nucléaire marqué (noyaux de formes variées).",
                    "Riche vascularisation entre les nids cellulaires."
                ],
                findings_ar: [
                    "ورم في نخاع الغدة الكظرية يترتب في شكل أعشاش خلوية دائرية.",
                    "تتميز الخلايا بسيتوبلازم حبيبي يحتوي على هرمونات (أدرينالين).",
                    "تفاوت كبير في أحجام وأشكال أنوية الخلايا الورمية.",
                    "وجود شبكة كثيفة من الأوعية الدموية الدقيقة بين الأعشاش الخلوية."
                ],
                diagnosis_fr: "Phéochromocytome surrénalien",
                diagnosis_ar: "ورم القواتم (ورم الغدة الكظرية)",
                symptoms_fr: "La triade de Ménard : céphalées, sueurs, palpitations.",
                symptoms_ar: "ثلاثية مينارد: صداع شديد، تعرق، وخفقان القلب.",
                treatment_fr: "Chirurgie après contrôle de la tension par alpha et bêta-bloquants.",
                treatment_ar: "الجراحة بعد تنظيم ضغط الدم بالأدوية المناسبة.",
                action_fr: "Dosage des métanéphrines urinaires.",
                action_ar: "فحص مشتقات الهرمونات (Metanephrines) في البول."
            },
            {
                id: 59,
                category: "Reproductive",
                title_fr: "Fibroadénome du Sein",
                title_ar: "الورم الغدي الليفي في الثدي",
                findings_fr: [
                    "Tumeur bénigne mélangeant tissu fibreux et structures glandulaires.",
                    "Compression des conduits (canaux) par la prolifération du tissu fibreux.",
                    "Les cellules des canaux sont régulières sans aucun signe de cancer.",
                    "Limites très nettes de la lésion par rapport au tissu mammaire normal."
                ],
                findings_ar: [
                    "ورم حميد يتكون من مزيج من الأنسجة الليفية والغدد الثديية.",
                    "يؤدي نمو النسيج الليفي لضغط وانضغاط قنوات الحليب (نمو داخل القنيات).",
                    "تظهر الخلايا المبطنة للقنوات بشكل طبيعي ومنتظم تماماً.",
                    "يكون للورم حدود واضحة جداً تميزه عن بقية أنسجة الثدي السليمة."
                ],
                diagnosis_fr: "Fibroadénome mammaire",
                diagnosis_ar: "تليف غدي حميد في الثدي",
                symptoms_fr: "Nodule ferme et très mobile au sein, non douloureux.",
                symptoms_ar: "كتلة صلبة تتحرك بسهولة داخل الثدي، غير مؤلمة.",
                treatment_fr: "Simple surveillance si petit ou stable, exérèse si volumineux.",
                treatment_ar: "المراقبة إذا كان صغيراً، أو الاستئصال إذا كان كبيراً أو يسبب قلقاً.",
                action_fr: "Échographie mammaire pour confirmer la bénignité.",
                action_ar: "إجراء سونار للثدي للتأكد من طبيعة الورم الحميدة."
            },
            {
                id: 60,
                category: "Reproductive",
                title_fr: "Léiomyome (Fibrome Utérin)",
                title_ar: "ورم عضلي أملس (ليف الرحم)",
                findings_fr: [
                    "Faisceaux de cellules musculaires lisses s'entrecroisant (aspect tourbillonnant).",
                    "Cellules allongées sans atypies, ressemblant au myomètre normal.",
                    "Zones possibles de fibrose, de calcification ou de dégénérescence hyaline.",
                    "Tumeur bénigne très bien limitée, souvent capsulée."
                ],
                findings_ar: [
                    "حزم من العضلات الملساء تتقاطع في ترتيب دائري أو 'دوامي' مميز.",
                    "تبدو الخلايا مستطيلة وسليمة تشبه عضلات الرحم الطبيعية تماماً.",
                    "قد تظهر مناطق صلبة (تليف) أو ترسبات كلسية داخل الورم مع الوقت.",
                    "يعتبر ورماً حميداً جداً ومحدد الحدود تماماً داخل جدار الرحم."
                ],
                diagnosis_fr: "Léiomyome utérin",
                diagnosis_ar: "ورم ليفي في الرحم (حميد)",
                symptoms_fr: "Règles abondantes et prolongées, pesanteur dans le bas-ventre.",
                symptoms_ar: "نزيف طمث غزير، شعور بثقل وضغط في أسفل البطن.",
                treatment_fr: "Traitement hormonal ou chirurgie (myomectomie).",
                treatment_ar: "أدوية هرمونية لتصغير الحجم أو الاستئصال الجراحي للليف.",
                action_fr: "Échographie pelvienne.",
                action_ar: "إجراء أشعة تلفزيونية (Sona) على الحوض والرحم."
            },
            {
                id: 61,
                category: "Nervous System",
                title_fr: "Méningite Bactérienne Aiguë",
                title_ar: "التهاب السحايا البكتيري الحاد",
                findings_fr: [
                    "Infiltration massive des méninges (leptoméninges) par des neutrophiles.",
                    "Présence d'un exsudat purulent dans l'espace sous-arachnoïdien.",
                    "Congestion vasculaire cérébrale intense avec œdème périmasculaire.",
                    "Coloration de Gram possible pour identifier l'agent causal (ex: méningocoque)."
                ],
                findings_ar: [
                    "ارتشاح كثيف لخلايا الصديد في الأغشية المحيطة بالدماغ (السحايا).",
                    "وجود سائل صديدي (قيح) في الفراغ تحت العنكبوتية.",
                    "احتقان شديد في أوعية الدماغ مع تورم حول الأوعية الدموية.",
                    "استخدام صبغة 'جرام' للتعرف على نوع البكتيريا المسببة للالتهاب."
                ],
                diagnosis_fr: "Méningite purulente",
                diagnosis_ar: "التهاب السحايا الصديدي",
                symptoms_fr: "Forte fièvre, raideur de la nuque, intolérance à la lumière (photophobie).",
                symptoms_ar: "حمى شديدة، تصلب في الرقبة، وعدم تحمل الضوء.",
                treatment_fr: "Urgence absolue : Antibiotiques IV immédiats.",
                treatment_ar: "حالة طارئة جداً: مضادات حيوية وريدية فوراً.",
                action_fr: "Ponction lombaire (PL) rapide pour analyse du liquide céphalo-rachidien.",
                action_ar: "إجراء بزل قطني (خزعة من سائل الظهر) للتحليل الفوري."
            },
            {
                id: 62,
                category: "Musculoskeletal",
                title_fr: "Ostéomyélite Aiguë",
                title_ar: "التهاب العظم والنقي الحاد",
                findings_fr: [
                    "Infiltrat neutrophile massif au sein de la moelle osseuse.",
                    "Nécrose du tissu osseux (séquestre) due à l'ischémie inflammatoire.",
                    "Formation de nouvel os (involucre) en périphérie de la zone infectée.",
                    "Formation d'abcès sous-périostés pouvant s'évacuer par des fistules."
                ],
                findings_ar: [
                    "ارتشاح مكثف للعدلات (خلايا صديدية) داخل نخاع العظم.",
                    "موت نسيج العظم (شظايا عظمية ميتة) نتيجة نقص التروية بالعظم المزمن.",
                    "تكون عظم جديد حول المنطقة المصابة كجزء من محاولة الجسم للإصلاح.",
                    "تكون خراجات تحت غشاء العظم قد تؤدي لفتحات تصريف (ناسور)."
                ],
                diagnosis_fr: "Ostéomyélite pyogène",
                diagnosis_ar: "التهاب العظم الصديدي",
                symptoms_fr: "Douleur osseuse localisée intense, impuissance fonctionnelle, fièvre.",
                symptoms_ar: "ألم شديد وموضعي في العظم، عدم القدرة على الحركة، حمى.",
                treatment_fr: "Antibiotiques IV de longue durée, parfois drainage chirurgical.",
                treatment_ar: "مضادات حيوية وريدية لفترة طويلة، وأحياناً تنظيف جراحي.",
                action_fr: "Radiographie, IRM osseuse et hémocultures.",
                action_ar: "أشعة سينية، رنين مغناطيسي للعظام، ومزارع دم."
            },
            {
                id: 63,
                category: "Musculoskeletal",
                title_fr: "Goutte (Tophus)",
                title_ar: "داء النقرس (توفوس)",
                findings_fr: [
                    "Amas de cristaux d'urate de sodium en forme d'aiguilles.",
                    "Réaction granulomateuse à corps étranger entourant les dépôts de cristaux.",
                    "Présence de cellules géantes multinucléées et de tissu fibreux.",
                    "Les cristaux sont biréfringents en lumière polarisée."
                ],
                findings_ar: [
                    "تجمعات لبلورات أملاح اليورات بشكل إبري مدبب تحت المجهر.",
                    "تفاعل حبيبي (جرانولوما) يحيط بالبلورات كجسم غريب داخل النسيج.",
                    "وجود خلايا عملاقة متعددة الأنوية مع نسيج ليفي داعم.",
                    "تظهر البلورات بلمعان مميز عند فحصها بالضوء المستقطب."
                ],
                diagnosis_fr: "Arthropathie uratique (Goutte)",
                diagnosis_ar: "داء النقرس",
                symptoms_fr: "Crise brutale de douleur à la base du gros orteil, rougeur, chaleur.",
                symptoms_ar: "ألم مفاجئ وعنيف في إصبع القدم الكبير، مع احمرار وسخونة.",
                treatment_fr: "Anti-inflammatoires (AINS), Colchicine, Allopurinol (au long cours).",
                treatment_ar: "مسكنات (AINS)، كولشيسين، وأدوية خفض اليوريك (مستقبلاً).",
                action_fr: "Dosage de l'acide urique et ponction de liquide articulaire.",
                action_ar: "فحص نسبة حمض اليوريك في الدم وسحب سائل من المفصل."
            },
            {
                id: 64,
                category: "Musculoskeletal",
                title_fr: "Arthrose (Ostéoarthrite)",
                title_ar: "خشونة المفاصل (الفصال العظمي)",
                findings_fr: [
                    "Fibrillation et érosion progressive du cartilage articulaire.",
                    "Eburnation de l'os sous-chondral (aspect poli et dur).",
                    "Formation d'ostéophytes (petits becs osseux) aux contours articulaires.",
                    "Présence de kystes géodiques dans l'os sous-jacent."
                ],
                findings_ar: [
                    "تآكل وتفتت تدريجي في الغضاريف المبطنة للمفاصل.",
                    "تصلب العظم الموجود تحت الغضروف ليصبح صلباً ولامعاً كالعاج.",
                    "تكون نتوءات عظمية صغيرة عند حواف المفصل المتضرر.",
                    "ظهور فجوات (أكياس عظمية) صغيرة داخل العظم تحت المفصل."
                ],
                diagnosis_fr: "Arthrose dégénérative",
                diagnosis_ar: "خشونة المفاصل (الاحتكاك)",
                symptoms_fr: "Douleurs articulaires à l'effort, raideur après repos.",
                symptoms_ar: "آلام في المفاصل عند الحركة، وتيبس في الصباح.",
                treatment_fr: "Kinésithérapie, perte de poids, antalgiques, parfois prothèse.",
                treatment_ar: "علاج طبيعي، إنقاص الوزن، مسكنات، وأحياناً تغيير مفصل.",
                action_fr: "Radiographie standard de l'articulation concernée.",
                action_ar: "أشعة سينية عادية على المفصل المصاب."
            },
            {
                id: 65,
                category: "Cardiovascular",
                title_fr: "Hémangiome (Foie)",
                title_ar: "الورم الوعائي الدموي (الكبد)",
                findings_fr: [
                    "Prolifération de cavités vasculaires de taille variable (souvent caverneuses).",
                    "Parois des cavités tapissées d'un endothélium régulier et mince.",
                    "Cavités remplies de sang frais ou de thrombi anciens.",
                    "Lésion bénigne très bien délimitée du parenchyme hépatique par une fine capsule."
                ],
                findings_ar: [
                    "تكاثر تجاويف دموية واسعة ومختلفة الأحجام (كهفية).",
                    "تبطن هذه التجاويف طبقة رقيقة ومنتظمة من خلايا البطانة الوعائية.",
                    "تمتلئ التجاويف بالدم أو بجلطات دموية قديمة أحياناً.",
                    "ورم حميد ينفصل بوضوح عن نسيج الكبد الطبيعي بغلاف رقيق."
                ],
                diagnosis_fr: "Hémangiome caverneux hépatique",
                diagnosis_ar: "وحمة دموية في الكبد",
                symptoms_fr: "Généralement aucun symptôme (découverte par hasard).",
                symptoms_ar: "غالباً بلا أعراض (يكتشف صدفة بالأشعة).",
                treatment_fr: "Abstention thérapeutique et surveillance (le plus souvent).",
                treatment_ar: "لا يحتاج لعلاج في أغلب الحالات، يكتفى بالمتابعة.",
                action_fr: "Échographie ou IRM hépatique avec injection.",
                action_ar: "إجراء سونار أو رنين مغناطيسي بالصبغة للتأكد من المظهر."
            },
            {
                id: 66,
                category: "Dermatopathology",
                title_fr: "Lipome",
                title_ar: "ورم دهني",
                findings_fr: [
                    "Prolifération monomorphe d'adipocytes matures (cellules graisseuses).",
                    "Cellules graisseuses indiscernables des cellules normales mais organisées en masse.",
                    "Presence d'une fine capsule fibreuse entourant la tumeur.",
                    "Absence de signes de malignité (pas de lipoblastes, pas de mitoses)."
                ],
                findings_ar: [
                    "تكاثر موحد لخلايا دهنية ناضجة تماماً ومنتظمة.",
                    "تشبه الخلايا الدهنية الورمية الخلايا الطبيعية لكنها تشكل كتلة بارزة.",
                    "يحيط بالورم غلاف ليفي رقيق جداً يفصله عن الأنسجة المجاورة.",
                    "انعدام أي علامات للسرطان أو انقسامات خلوية غير طبيعية."
                ],
                diagnosis_fr: "Lipome sous-cutané bénin",
                diagnosis_ar: "ورم دهني حميد",
                symptoms_fr: "Masse molle, indolore, roulant sous les doigts.",
                symptoms_ar: "كتلة طرية، غير مؤلمة، تتحرك بسهولة تحت الجلد.",
                treatment_fr: "Abstention ou exérèse chirurgicale simple pour motif esthétique.",
                treatment_ar: "المراقبة أو الاستئصال الجراحي البسيط (لأسباب تجميلية غالباً).",
                action_fr: "Examen clinique simple (le diagnostic est souvent évident).",
                action_ar: "الفحص السريري (التشخيص غالباً ما يكون واضحاً باللمس)."
            },
            {
                id: 67,
                category: "Respiratory",
                title_fr: "Carcinome Épidermoïde du Poumon",
                title_ar: "سرطان الخلايا الحرشفية (الرئة)",
                findings_fr: [
                    "Prolifération de cellules tumorales avec ponts d'union intercellulaires.",
                    "Formation de 'globes cornés' ou perles de kératine caractéristiques.",
                    "Atypies nucléaires sévères et nombreuses mitoses anormales.",
                    "Infiltration du parenchyme pulmonaire avec réaction inflammatoire associée."
                ],
                findings_ar: [
                    "تكاثر خلايا سرطانية تتميز بوجود روابط واضحة بينها.",
                    "تكون كرات من مادة 'الكيراتين' (القرنية) داخل كتل الورم.",
                    "شذوذ كبير في شكل الأنوية مع وجود انقسامات خلوية سرطانية كثيرة.",
                    "ارتشاح الورم في أنسجة الرئة مع استجابة التهابية محيطة."
                ],
                diagnosis_fr: "Carcinome épidermoïde kératinisant",
                diagnosis_ar: "سرطان الرئة الحرشفي",
                symptoms_fr: "Toux rebelle, hémoptysie (sang dans les crachats), douleur thoracique.",
                symptoms_ar: "سعال لا يستجيب للعلاج، بلغم مدمم، وألم في الصدر.",
                treatment_fr: "Chirurgie si possible, radiothérapie, chimiothérapie intégrée.",
                treatment_ar: "الجراحة (إن أمكن)، العلاج الإشعاعي، والكيماوي.",
                action_fr: "Scanner thoracique et fibroscopie bronchique avec biopsie.",
                action_ar: "أشعة مقطعية للصدر ومنظار شعبي لأخذ عينة من الورم."
            },
            {
                id: 68,
                category: "Digestive",
                title_fr: "Ulcère Gastrique Chronique",
                title_ar: "قرحة المعدة المزمنة",
                findings_fr: [
                    "Perte de substance profonde atteignant la sous-muqueuse ou la musculeuse.",
                    "Plancher de l'ulcère constitué de nécrose fibrinoïde et de tissu de granulation.",
                    "Endartérite oblitérante au voisinage de la lésion.",
                    "Fibrose cicatricielle importante à la base de l'ulcère."
                ],
                findings_ar: [
                    "فقدان عميق للمكونات المخاطية يصل للطبقة العضلية للمعدة.",
                    "تتكون قاعدة القرحة من نسيج ميت (فيبريني) ونسيج حبيبي إصلاحي.",
                    "تضخم وانسداد في الأوعية الدموية الصغيرة القريبة من القرحة.",
                    "تكون نسيج ندبي ليفي كثيف أسفل قاعدة القرحة نتيجة المزمنية."
                ],
                diagnosis_fr: "Ulcère gastrique chronique actif",
                diagnosis_ar: "قرحة المعدة المزمنة",
                symptoms_fr: "Douleur épigastrique (creux de l'estomac) rythmée par les repas.",
                symptoms_ar: "ألم في فم المعدة يرتبط بتناول الطعام (يزيد أو ينقص بعد الأكل).",
                treatment_fr: "Inhibiteurs de la pompe à protons (IPP), éradication d'Helicobacter pylori.",
                treatment_ar: "مثبطات حموضة المعدة (IPP) وعلاج بكتيريا المعدة الحلزونية.",
                action_fr: "Fibroscopie oeso-gastro-duodénale (FOGD) avec biopsies.",
                action_ar: "إجراء منظار معدة وضرورة أخذ عينات للتأكد من عدم وجود سرطانات."
            },
            {
                id: 69,
                category: "Cardiovascular",
                title_fr: "Infarctus du Myocarde (Cicatrice)",
                title_ar: "احتشاء عضلة القلب (ندبة قديمة)",
                findings_fr: [
                    "Remplacement des cardiomyocytes nécrosés par un tissu fibreux dense (cicatrice).",
                    "Absence de noyaux dans les zones de fibrose ancienne.",
                    "Amincissement focal de la paroi ventriculaire cardiaque.",
                    "Persistance possible de quelques fibres musculaires hypertrophiées en périphérie."
                ],
                findings_ar: [
                    "استبدال خلايا القلب الميتة بنسيج ليفي صلب وداكن (ندبة).",
                    "اختفاء الأنوية تماماً في منطقة التليف القديمة.",
                    "رقق بؤري في جدار بطين القلب المتضرر بالجلطة القديمة.",
                    "بقاء بعض ألياف العضلات القلبية المتضخمة عند أطراف الندبة."
                ],
                diagnosis_fr: "Séquelle d'infarctus du myocarde",
                diagnosis_ar: "ندبة جلطة قلبية قديمة",
                symptoms_fr: "Essoufflement à l'effort (insuffisance cardiaque), parfois asymptomatique.",
                symptoms_ar: "ضيق تنفس عند المجهود (ضعف القلب)، وأحياناً لا توجد أعراض.",
                treatment_fr: "Bêta-bloquants, IEC, Aspirine, réadaptation cardiaque.",
                treatment_ar: "أدوية تنظيم ضربات القلب، مخفضات الضغط، أسبرين، وتغيير نمط الحياة.",
                action_fr: "Échographie cardiaque (recherche de zone immobile) et ECG.",
                action_ar: "أشعة تلفزيونية للقلب (ECHO) ورسم قلب لمتابعة كفاءة العضلة."
            },
            {
                id: 70,
                category: "Cardiovascular",
                title_fr: "Athérosclérose (Plaque)",
                title_ar: "تصلب الشرايين (اللوحة)",
                findings_fr: [
                    "Accumulation de lipides (cristaux de cholestérol) dans l'intima de l'artère.",
                    "Présence d'une chape fibreuse recouvrant le noyau lipidique.",
                    "Infiltration de macrophages spumeux (chargés de graisse) et de lymphocytes.",
                    "Calcification possible de la plaque à un stade avancé."
                ],
                findings_ar: [
                    "تراكم الدهون (بلورات الكولسترول) داخل جدار الشريان الداخلي.",
                    "وجود غطاء ليفي صلب يغطي نويات الدهون المتراكمة.",
                    "ارتشاح خلايا بلعمية 'رغوية' (محملة بالدهون) وخلايا لمفاوية.",
                    "قد يتكلس جدار الشريان في المراحل المتقدمة من المرض."
                ],
                diagnosis_fr: "Plaque d'athérome fibro-lipidique",
                diagnosis_ar: "تصلب الشرايين (تراكم اللويحات)",
                symptoms_fr: "Souvent silencieux jusqu'à l'accident (angine de poitrine, AVC).",
                symptoms_ar: "مرض صامت غالباً حتى تظهر مضاعفاته مثل الذبحة أو الجلطة.",
                treatment_fr: "Statines (contre le cholestérol), contrôle des facteurs de risque (tabac, diabète).",
                treatment_ar: "أدوية خفض الكوليسترول (Statins) والتحكم في السكر والضغط والتدخين.",
                action_fr: "Bilan lipidique complet et Echo-Doppler vasculaire.",
                action_ar: "فحص الدهون في الدم وإجراء أشعة 'دوبلر' على الأوعية الدموية."
            },
            {
                id: 71,
                category: "Nervous System",
                title_fr: "Hémorragie Intra-Cérébrale",
                title_ar: "نزيف داخل الدماغ",
                findings_fr: [
                    "Hématome intra-parenchymateux refoulant le tissu cérébral adjacent.",
                    "Présence de macrophages chargés d'hémosidérine (pigment brun issu du sang).",
                    "Réaction inflammatoire astrocytaire (gliose) en périphérie du foyer.",
                    "Œdème cérébral périlésionnel important."
                ],
                findings_ar: [
                    "تجمع دموي ضخم داخل نسيج الدماغ مما يضغط على الأجزاء المجاورة.",
                    "وجود بلعميات محملة بصبغة 'الهيموسيديرين' ناتجة عن تحلل الدم.",
                    "تفاعل دفاعي من الخلايا الدبقية (تغري) حول منطقة النزيف.",
                    "تورم مائي (وذمة) شديد في أنسجة الدماغ المحيطة بالإصابة."
                ],
                diagnosis_fr: "AVC hémorragique",
                diagnosis_ar: "سكتة دماغية نزفية",
                symptoms_fr: "Céphalée brutale 'en coup de tonnerre', déficit moteur, coma.",
                symptoms_ar: "صداع مفاجئ وعنيف جداً، شلل في جانب واحد، أو فقدان الوعي.",
                treatment_fr: "Contrôle de la tension, parfois neurochirurgie d'évacuation.",
                treatment_ar: "التحكم الصارم في ضغط الدم، وأحياناً جراحة لإزالة التجمع الدموي.",
                action_fr: "Scanner cérébral sans injection en urgence.",
                action_ar: "أشعة مقطعية عاجلة على الدماغ (بدون صبغة) لتشخيص النزيف."
            },
            {
                id: 72,
                category: "Nervous System",
                title_fr: "Maladie de Parkinson (Corps de Lewy)",
                title_ar: "مرض باركنسون (أجسام لوي)",
                findings_fr: [
                    "Présence de corps de Lewy (inclusions roses rondes) dans les neurones rescapés.",
                    "Perte massive des neurones pigmentés dans la substance noire du cerveau.",
                    "Accumulation de la protéine alpha-synucléine détectable en immunohistochimie.",
                    "Réaction cicatricielle (gliose) dans les zones où les neurones ont disparu."
                ],
                findings_ar: [
                    "وجود 'أجسام لوي' (اشتمالات وردية دائرية) داخل الأعصاب المتبقية.",
                    "فقدان كبير للخلايا العصبية الملونة (الميلانينية) في المادة السوداء بالدماغ.",
                    "تراكم غير طبيعي لبروتين 'ألفا-سينوكلين' داخل الخلايا العصبية.",
                    "تكون نسيج ندبي دفاعي في المناطق التي فقدت خلاياها العصبية."
                ],
                diagnosis_fr: "Maladie de Parkinson",
                diagnosis_ar: "مرض باركنسون",
                symptoms_fr: "Tremblement de repos, lenteur des mouvements (akinésie), rigidité.",
                symptoms_ar: "رعشة في اليدين عند الراحة، بطء في الحركة،وتيبس العضلات.",
                treatment_fr: "L-Dopa et agonistes dopaminergiques.",
                treatment_ar: "دواء (إل-دوبا) وبدائل الدوبامين لتعويض النقص في الدماغ.",
                action_fr: "Examen clinique neurologique (le diagnostic est clinique).",
                action_ar: "الفحص السريري من قبل طبيب الأعصاب (التشخيص سريري بالدرجة الأولى)."
            },
            {
                id: 73,
                category: "Infectious",
                title_fr: "Hydatidose Hépatique (Kyste)",
                title_ar: "مرض الكيسة المائية (الكبد)",
                findings_fr: [
                    "La paroi du kyste présente une membrane externe acellulaire et stratifiée.",
                    "Présence d'une membrane interne plus fine (membrane proligère).",
                    "On observe souvent des scolex (têtes de parasites) avec leurs crochets.",
                    "Réaction fibreuse périphérique de l'hôte formant le périkyste."
                ],
                findings_ar: [
                    "يظهر جدار الكيس غشاءً خارجياً سميكاً ومخططاً لا يحتوي على خلايا.",
                    "وجود غشاء داخلي رقيق جداً ومنبت هو المصدر لتكوين الطفيليات.",
                    "نلاحظ وجود رؤيسات (رؤوس) الطفيل الصغيرة المزودة بكلاليب للتثبيت.",
                    "يحيط الكبد بالكيس بغلاف ليفي صلب يحاول عزل الإصابة عن النسيج السليم."
                ],
                diagnosis_fr: "Kyste hydatique hépatique",
                diagnosis_ar: "الكيسة المائية الكبدية",
                symptoms_fr: "Lourdeur de l'hypochondre droit, parfois urticaire (allergie).",
                symptoms_ar: "ثقل في الجهة اليمنى من الكبد، وأحياناً حساسية جلدية (ارتيكاريا).",
                treatment_fr: "Chirurgie de retrait du kyste ou traitement médical (Albendazole).",
                treatment_ar: "الاستئصال الجراحي للكيس أو المعالجة بالأدوية (Albendazole).",
                action_fr: "Échographie hépatique et sérologie hydatique.",
                action_ar: "إجراء سونار للكبد وفحص الأجسام المضادة (التحليل المصلي)."
            },
            {
                id: 74,
                category: "Infectious",
                title_fr: "Syphilis (Chancre)",
                title_ar: "مرض الزهري (القرح الصلب)",
                findings_fr: [
                    "Infiltrat de plasmocytes très dense autour des petits vaisseaux sanguins.",
                    "Lésion de la paroi des vaisseaux (endartérite oblitérante) typique.",
                    "Ulcération superficielle recouverte d'un exsudat riche en globules blancs.",
                    "Présence de nombreux spirochètes (Treponema pallidum) visibles en imprégnation argentique."
                ],
                findings_ar: [
                    "ارتشاح مكثف للخلايا المصورية حول الأوعية الدموية الصغيرة.",
                    "التهاب وتضخم في بطانة الأوعية الدموية مما يؤدي لضيق مجراها.",
                    "تقرح سطحي يفرز سائلاً غنياً بخلايا الدم البيضاء المدافعة.",
                    "يمكن رؤية بكتيريا الزهري اللولبية بوضوح عند استخدام صبغة الفضة."
                ],
                diagnosis_fr: "Syphilis primaire",
                diagnosis_ar: "الزهري الأولي",
                symptoms_fr: "Chancre (ulcère) génital unique, induré et totalement indolore.",
                symptoms_ar: "قرحة وحيدة في الأعضاء التناسلية، صلبة وغير مؤلمة تماماً.",
                treatment_fr: "Injection unique de Pénicilline G (Benzathine-pénicilline).",
                treatment_ar: "حقنة واحدة من البنسلين طويل المفعول (Pénicilline G).",
                action_fr: "Prélèvement pour examen direct et sérologie (VDRL/TPHA).",
                action_ar: "فحص مجهري للمفرزات وإجراء تحليل الزهري (VDRL/TPHA)."
            },
            {
                id: 75,
                category: "Infectious",
                title_fr: "Infection à CMV",
                title_ar: "عدوى الفيروس المضخم للخلايا (CMV)",
                findings_fr: [
                    "Les cellules infectées deviennent géantes (cytomégalie).",
                    "Inclusions intra-nucléaires mauves entourées d'un halo clair (aspect en 'œil de hibou').",
                    "Petites inclusions granuleuses présentes dans le cytoplasme.",
                    "Nécrose tissulaire focale avec une réaction inflammatoire de l'hôte."
                ],
                findings_ar: [
                    "تصبح الخلايا المصابة بالعدوى ضخمة جداً مقارنة بالخلايا السليمة.",
                    "ظهور اشتمالات بنفسجية داخل النواة يحيط بها فراغ (مظهر عين البوم).",
                    "وجود حبيبات دقيقة جداً داخل سيتوبلازم الخلية المصابة.",
                    "موت بعض أنسجة العضو المصاب مع استجابة التهابية دفاعية."
                ],
                diagnosis_fr: "Infection à Cytomégalovirus",
                diagnosis_ar: "عدوى فيروس CMV",
                symptoms_fr: "Fièvre prolongée, fatigue, syndrome mononucléosique.",
                symptoms_ar: "حمى مستمرة، إجهاد عام، وتضخم في العقد اللمفاوية.",
                treatment_fr: "Antiviraux (Ganciclovir) chez les sujets immunodéprimés.",
                treatment_ar: "مضادات الفيروسات (Ganciclovir) خاصة لضعاف المناعة.",
                action_fr: "PCR CMV et recherche d'antigénémie.",
                action_ar: "فحص الحمل الفيروسي (PCR) للبحث عن نشاط الفيروس."
            },
            {
                id: 76,
                category: "Reproductive",
                title_fr: "Tératome Mature (Ovaire)",
                title_ar: "الورم العجائبي الناضج (المبيض)",
                findings_fr: [
                    "Présence de tissus variés : peau, cheveux, dents, cartilage, tissu nerveux.",
                    "Tous les tissus sont matures et ressemblent aux tissus adultes normaux.",
                    "Généralement organisé en un kyste rempli de sébum et de poils.",
                    "Tumeur bénigne qui se développe à partir de cellules germinales."
                ],
                findings_ar: [
                    "وجود أنسجة متنوعة جداً داخل الورم مثل: الجلد، الشعر، الأسنان، والغضاريف.",
                    "تكون جميع هذه الأنسجة ناضجة تماماً وتماثل الأنسجة الطبيعية للبالغين.",
                    "غالباً ما يظهر ككيس ممتلئ بمادة دهنية (زهم) وتكتلات من الشعر.",
                    "يعتبر ورماً حميداً ينشأ من الخلايا التناسلية الأولية في المبيض."
                ],
                diagnosis_fr: "Kyste dermoïde de l'ovaire",
                diagnosis_ar: "كيس ديرمويد (ورم عجائبي حميد)",
                symptoms_fr: "Souvent asymptomatique, risque de torsion de l'ovaire.",
                symptoms_ar: "غالباً بلا أعراض، لكنه قد يؤدي لالتواء المبيض (حالة طارئة).",
                treatment_fr: "Kystectomie (ablation chirurgicale du kyste seul).",
                treatment_ar: "استئصال الكيس جراحياً مع الحفاظ على المبيض.",
                action_fr: "Échographie endovaginale ou scanner pelvien.",
                action_ar: "إجراء أشعة تلفزيونية عن طريق المهبل أو أشعة مقطعية."
            },
            {
                id: 77,
                category: "Reproductive",
                title_fr: "Carcinome de la Prostate",
                title_ar: "سرطان البروستاتا الغدي",
                findings_fr: [
                    "Formations de petites glandes serrées les unes contre les autres (aspect dos-à-dos).",
                    "Noyaux des cellules avec de gros nucléoles rouges très visibles.",
                    "Disparition totale de la couche de cellules basales qui entoure normalement les glandes.",
                    "Infiltration du stroma fibreux et parfois des nerfs (engainement périnerveux)."
                ],
                findings_ar: [
                    "تكون غدد صغيرة جداً متراصة بشدة فوق بعضها البعض دون مسافات.",
                    "تحتوي أنوية الخلايا على نويات حمراء كبيرة وبارزة جداً تحت المجهر.",
                    "اختفاء الطبقة القاعدية تماماً، وهي العلامة الأهم للسرطان في البروستاتا.",
                    "غزو الخلايا السرطانية للأنسجة المحيطة وأحياناً للأعصاب المجاورة."
                ],
                diagnosis_fr: "Adénocarcinome prostatique",
                diagnosis_ar: "سرطان البروستاتا الغدي",
                symptoms_fr: "Difficultés urinaires, besoins fréquents, douleurs osseuses (si métastases).",
                symptoms_ar: "صعوبة في التبول، تكرار التبول، وآلام في العظام (في حال الانتشار).",
                treatment_fr: "Prostatectomie, radiothérapie, hormonothérapie (anti-androgènes).",
                treatment_ar: "استئصال البروستاتا، علاج إشعاعي، أو علاج هرموني.",
                action_fr: "Dosage du PSA et toucher rectal (TR) puis biopsies.",
                action_ar: "فحص (PSA) في الدم وفحص البروستاتا السريري ثم أخذ عينات."
            },
            {
                id: 78,
                category: "Musculoskeletal",
                title_fr: "Arthrite Septique",
                title_ar: "التهاب المفاصل القيحية",
                findings_fr: [
                    "Le liquide de l'articulation est envahi par des millions de neutrophiles (pus).",
                    "Destruction de la surface du cartilage articulaire par les enzymes bactériennes.",
                    "Membrane synoviale très gonflée, rouge et infiltrée de cellules inflammatoires.",
                    "Les bactéries sont souvent visibles si on utilise des colorations spéciales."
                ],
                findings_ar: [
                    "يمتلئ سائل المفصل بملايين خلايا الصديد (العدلات) نتيجة العدوى.",
                    "تآكل شديد في سطح الغضروف المفصلي بفعل إنزيمات البكتيريا المفرزة.",
                    "يتورم الغشاء المحيط بالمفصل بشدة ويصبح محتقناً ومليئاً بالخلايا الدفاعية.",
                    "كثيراً ما تظهر البكتيريا المسببة عند فحص عينة من سائل المفصل المصبوغ."
                ],
                diagnosis_fr: "Arthrite bactérienne pyogène",
                diagnosis_ar: "التهاب المفصل البكتيري الحاد",
                symptoms_fr: "Articulations gonflée, rouge, chaude et extrêmement douloureuse.",
                symptoms_ar: "مفصل متورم، محمر، ساخن جداً ومؤلم للغاية عند أي حركة.",
                treatment_fr: "Urgence : Antibiothérapie IV et lavage articulaire.",
                treatment_ar: "حالة طارئة: مضادات حيوية وريدية وغسيل للمفصل.",
                action_fr: "Ponction articulaire pour analyse cytologique et bactériologique.",
                action_ar: "سحب عينة من سائل المفصل للتحليل المجهري والمزرعة فوراً."
            },
            {
                id: 79,
                category: "Musculoskeletal",
                title_fr: "Maladie de Paget (Os)",
                title_ar: "داء باجيت العظمي",
                findings_fr: [
                    "Texture de l'os en puzzle (mosaïque) à cause d'un remodelage anarchique.",
                    "Présence simultanée d'activités ostéoclastiques (destruction) et ostéoblastiques (reconstruction).",
                    "Les lignes de ciment entre les morceaux d'os sont nombreuses et irrégulières.",
                    "L'os devient plus épais mais beaucoup plus fragile que la normale."
                ],
                findings_ar: [
                    "يظهر نسيج العظم بشكل يشبه 'الأحجية' أو الفسيفساء نتيجة إعادة التشكيل العشوائي.",
                    "نشاط مزدوج ومتزامن للهدم والبناء في نفس منطقة العظم المصابة بالمرض.",
                    "ظهور خطوط أسمنتية داكنة وغير منتظمة تفصل بين أجزاء النسيج العظمي.",
                    "يصبح العظم المصاب أكثر سمكاً ولكنه يفقد قوته ويصبح عرضة للهشاشة والكسر."
                ],
                diagnosis_fr: "Ostéodystrophie déformante de Paget",
                diagnosis_ar: "داء باجيت العظمي",
                symptoms_fr: "Douleurs osseuses, déformations (jambes en arc), augmentation du périmètre crânien.",
                symptoms_ar: "آلام في العظام، تشوهات (تقوس الساقين)، كبر حجم الرأس.",
                treatment_fr: "Bisphosphonates (pour freiner le remodelage osseux).",
                treatment_ar: "أدوية 'البيسفوسفونات' لتقليل سرعة تآكل وبناء العظم العشوائي.",
                action_fr: "Dosage des phosphatases alcalines (PAL) et radiographies.",
                action_ar: "فحص إنزيم (PAL) في الدم وإجراء أشعة سينية للعظام."
            },
            {
                id: 80,
                category: "Dermatopathology",
                title_fr: "Psoriasis (Peau)",
                title_ar: "مرض الصدفية",
                findings_fr: [
                    "Épaississement de l'épiderme avec allongement régulier des crêtes épidermiques.",
                    "La couche cornée garde des noyaux cellulaires (parakératose).",
                    "Présence de micro-abcès formés de neutrophiles (abcès de Munro).",
                    "Dilatation des vaisseaux dans les papilles du derme (signe de la rosée sanglante)."
                ],
                findings_ar: [
                    "زيادة كبيرة في سمك طبقة الجلد الخارجية مع تطاول منتظم في نتوءاتها.",
                    "تحتفظ الطبقة القرنية السطحية بأنوية الخلايا، وهو وضع غير طبيعي (تقرن ناقص).",
                    "تكون خراجات مجهرية دقيقة تحتوي على عدلات داخل طبقات الجلد العليا.",
                    "توسع الأوعية الدموية الدقيقة في الجلد مما يسبب الاحمرار وظهور نقاط دم عند القشر."
                ],
                diagnosis_fr: "Psoriasis vulgaire",
                diagnosis_ar: "مرض الصدفية",
                symptoms_fr: "Plaques rouges recouvertes de squames blanches (croûtes) sèches.",
                symptoms_ar: "لوحات جلدية حمراء تغطيها قشور بيضاء كثيفة فضية اللون.",
                treatment_fr: "Dermo-corticoïdes, dérivés de la vitamine D, photothérapie.",
                treatment_ar: "مراهم الكورتيزون، مشتقات فيتامين د، والعلاج بالضوء.",
                action_fr: "Signe de la rosée sanglante (Auspit) au grattage des squames.",
                action_ar: "ملاحظة وجود نقاط نزيف دقيقة عند إزالة القشور (علامة أوسبيتز)."
            },
            {
                id: 81,
                category: "Miscellaneous",
                title_fr: "Amyloïdose Cardiaque",
                title_ar: "داء الأميلويد القلبي",
                findings_fr: [
                    "Dépôts de substance rose homogène (amyloïde) entre les fibres du cœur.",
                    "Ces dépôts étouffent et atrophient progressivement les cellules musculaires.",
                    "Coloration spécifique au Rouge Congo montrant une biréfringence vert pomme.",
                    "Le muscle cardiaque devient rigide, empêchant le bon remplissage du cœur."
                ],
                findings_ar: [
                    "ترسب مادة وردية متجانسة (نشوانية) بين ألياف العضلة القلبية.",
                    "تؤدي هذه الترسبات لضغط وضمور الخلايا العضلية في القلب تدريجياً.",
                    "تظهر المادة بلون أخضر لامع عند صبغها بـ 'كونغو الأحمر' وفحصها بضوء خاص.",
                    "يصبح جدار القلب متصلباً مما يمنع تمدده وامتلاءه بالدم بشكل سليم."
                ],
                diagnosis_fr: "Amylose cardiaque restrictive",
                diagnosis_ar: "اعتلال القلب النشواني",
                symptoms_fr: "Insuffisance cardiaque (essoufflement, œdèmes), troubles du rythme.",
                symptoms_ar: "هبوط القلب (ضيق تنفس، تورم القدمين)، اضطراب ضربات القلب.",
                treatment_fr: "Traitement de l'amylose sous-jacente (ex: stabilisateurs de la transthyrétine).",
                treatment_ar: "علاج المسبب (مثل أدوية تثبيت بروتين الترانستيريتين).",
                action_fr: "IRM cardiaque et biopsies (souvent d'autres organes comme la graisse abdominale).",
                action_ar: "إجراء رنين مغناطيسي للقلب وأخذ عينة (غالباً من دهون البطن أولاً)."
            },
            {
                id: 82,
                category: "Hematology",
                title_fr: "Thalassémie (Frottis)",
                title_ar: "الثلاسيميا (فقر دم البحر المتوسط)",
                findings_fr: [
                    "Hématies avec un centre coloré et un halo clair (aspect en cible ou cocarde).",
                    "Globules rouges anormalement petits (microcytose) et pâles (hypochromie).",
                    "Présence de granulations bleues dans les hématies (basophilie ponctuée).",
                    "Beaucoup de variations dans la forme des cellules rouges (poïkilocytose)."
                ],
                findings_ar: [
                    "كريات دم حمراء بمركز ملون محاط بفراغ يشبه 'الهدف' (Target cells).",
                    "تكون كريات الدم الحمراء صغيرة جداً وباهتة اللون تحت المجهر.",
                    "ظهور حبيبات زرقاء دقيقة داخل بعض خلايا الدم الحمراء النشطة.",
                    "تفاوت كبير وواضح في أشكال وأحجام كريات الدم الحمراء المصابة."
                ],
                diagnosis_fr: "Bêta-thalassémie",
                diagnosis_ar: "الثلاسيميا (أنيميا البحر المتوسط)",
                symptoms_fr: "Anémie chronique, fatigue, déformations osseuses du visage (chez l'enfant).",
                symptoms_ar: "فقر دم مزمن، تعب، وتغيرات في شكل عظام الوجه (في الأطفال).",
                treatment_fr: "Transfusions sanguines régulières et chélateurs du fer.",
                treatment_ar: "نقل دم دوري وأدوية لسحب الحديد الزائد من الجسم.",
                action_fr: "Électrophorèse de l'hémoglobine.",
                action_ar: "إجراء فحص 'الفصل الكهربائي للهيموجلوبين'."
            },
            {
                id: 83,
                category: "Hematology",
                title_fr: "Leucémie Lymphoïde Chronique (LLC)",
                title_ar: "سرطان الدم اللمفاوي المزمن",
                findings_fr: [
                    "Pullulation de petits lymphocytes d'aspect mature et monotone.",
                    "Présence de cellules éclatées lors de l'étalement (ombres de Gumprecht).",
                    "La chromatine des noyaux est très dense et regroupée en mottes.",
                    "C'est une prolifération cancer de globules blancs qui s'accumulent sans mourir."
                ],
                findings_ar: [
                    "انتشار واسع لخلايا لمفاوية صغيرة تبدو ناضجة ولكنها تتكاثر بشكل عشوائي.",
                    "ظهور خلايا محطمة أو 'لطخات' (Shadow cells) ناتجة عن هشاشة هذه الخلايا.",
                    "تكون المادة الوراثية داخل الأنوية مكتظة بشدة وتظهر ككتل داكنة.",
                    "يتجمع هذا النوع من خلايا الدم البيضاء في الدم والنخاع دون أن تموت بشكل طبيعي."
                ],
                diagnosis_fr: "Leucémie lymphoïde chronique",
                diagnosis_ar: "ابيضاض الدم اللمفاوي المزمن",
                symptoms_fr: "Gros ganglions indolores, fatigue, souvent découverte fortuite sur prise de sang.",
                symptoms_ar: "تضخم غير مؤلم في العقد اللمفاوية، خمول، وغالباً ما يكتشف صدفة.",
                treatment_fr: "Surveillance attentive ('watch and wait'), chimiothérapie ou thérapies ciblées.",
                treatment_ar: "المراقبة الدقيقة أو الكيماوي أو العلاج الموجه (حسب الحالة).",
                action_fr: "Immunophénotypage des lymphocytes sanguins (Score de Matutes).",
                action_ar: "إجراء تحليل 'البصمة المناعية' للخلايا اللمفاوية (Score de Matutes)."
            },
            {
                id: 84,
                category: "Cardiovascular",
                title_fr: "Anévrisme de l'Aorte",
                title_ar: "تمدد الشريان الأورطي",
                findings_fr: [
                    "Dilatation permanente de la paroi d'une artère à cause de sa fragilité.",
                    "Destruction des fibres élastiques de la couche moyenne du vaisseau (média).",
                    "Présence fréquente de plaques de cholestérol (athérosclérose) sur la paroi interne.",
                    "Risque majeur de rupture ou de formation de caillots de sang (thrombose)."
                ],
                findings_ar: [
                    "توسع دائم ومستمر في جدار الشريان نتيجة لضعف أنسجته.",
                    "تحطم وفقدان الألياف المرنة في الطبقة الوسطى المكونة لجدار الوعاء الدموي.",
                    "كثيراً ما توجد ترسبات دهنية (تصلب شرايين) تغطي البطانة الداخلية للوعاء.",
                    "يوجد خطر كبير من حدوث انفجار في الشريان أو تكون جلطات دموية داخله."
                ],
                diagnosis_fr: "Anévrisme aortique",
                diagnosis_ar: "تمدد الشريان الأورطي",
                symptoms_fr: "Souvent aucun jusqu'à la rupture (douleur abdominale ou dorsale brutale).",
                symptoms_ar: "بلا أعراض غالباً حتى ينفجر (ألم مفاجئ وعنيف في البطن أو الظهر).",
                treatment_fr: "Contrôle de la tension, chirurgie ou pose de stent (endoprothèse).",
                treatment_ar: "تنظيم الضغط، الجراحة، أو تركيب دعامة داخل الشريان.",
                action_fr: "Échographie abdominale ou Scanner (CTA).",
                action_ar: "إجراء سونار للبطن أو أشعة مقطعية بالصبغة على الشرايين."
            },
            {
                id: 85,
                category: "Cardiovascular",
                title_fr: "Angiosarcome",
                title_ar: "الساركوما الوعائية الخبيثة",
                findings_fr: [
                    "Cancer très agressif des cellules qui tapissent les vaisseaux (endothélium).",
                    "Formation de canaux sanguins irréguliers qui communiquent entre eux.",
                    "Les cellules malignes sont grandes avec des noyaux foncés et des mitoses.",
                    "Zones massives d'hémorragie et de nécrose à l'intérieur de la tumeur."
                ],
                findings_ar: [
                    "سرطان عنيف جداً يصيب الخلايا المبطنة للأوعية الدموية (البطانة).",
                    "تكون قنوات دموية عشوائية ومشوهة تتصل ببعضها البعض بشكل غير طبيعي.",
                    "تظهر الخلايا السرطانية كبيرة الحجم بأنوية داكنة وعلامات انقسام وحشية.",
                    "وجود مناطق واسعة من النزيف وموت الأنسجة داخل نسيج الورم نفسه."
                ],
                diagnosis_fr: "Angiosarcome malin",
                diagnosis_ar: "ساركوما وعائية (سرطان الأوعية)",
                symptoms_fr: "Masse cutanée ou profonde augmentant rapidement, ecchymoses bizarres.",
                symptoms_ar: "كتلة تنمو بسرعة تحت الجلد أو في الأحشاء، مع كدمات غير مبررة.",
                treatment_fr: "Chirurgie large, radiothérapie, chimiothérapie (pronostic sombre).",
                treatment_ar: "استئصال جراحي واسع، إشعاع، وكيماوي (مرض عدواني جداً).",
                action_fr: "Biopsie et bilan d'extension complet.",
                action_ar: "أخذ خزعة وإجراء مَسح شامل للجسم لتقييم مدى الانتشار."
            },
            {
                id: 86,
                category: "Respiratory",
                title_fr: "Silicose (Poumon)",
                title_ar: "داء السحار السيليسي (الرئة)",
                findings_fr: [
                    "Formation de nodules silicotiques fibro-hyalins concentriques.",
                    "Présence de particules de silice de petite taille, biréfringentes en lumière polarisée.",
                    "Destruction progressive du parenchyme pulmonaire fonctionnel.",
                    "Réaction inflammatoire chronique avec accumulation de poussières minérales."
                ],
                findings_ar: [
                    "تكون عقيدات ليفية صلبة ومرتبة بشكل دوائر متداخلة داخل الرئة.",
                    "وجود جزيئات 'سيليكا' دقيقة جداً تلمع عند فحصها بضوء خاص.",
                    "تدمير تدريجي للأنسجة الهوائية السليمة واستبدالها بنسيج ليفي صلب.",
                    "التهاب مزمن واستجابة دفاعية ضد الغبار المعدني المتراكم في الرئة."
                ],
                diagnosis_fr: "Silicose pulmonaire chronique",
                diagnosis_ar: "تليف الرئة السيليسي",
                symptoms_fr: "Essoufflement progressif, toux sèche (chez un travailleur exposé).",
                symptoms_ar: "ضيق تنفس يزداد تدريجياً وسعال جاف (غالباً لعمال المناجم أو الرخام).",
                treatment_fr: "Prévention, arrêt de l'exposition, traitement des complications (tuberculose associée).",
                treatment_ar: "الوقاية، وقف التعرض للغبار، وعلاج المضاعفات (مثل السل المصاحب).",
                action_fr: "Radiographie thoracique (opacités nodulaires) et EFR.",
                action_ar: "أشعة سينية للصدر (عقيدات صغيرة) وفحص وظائف التنفس."
            },
            {
                id: 87,
                category: "Respiratory",
                title_fr: "Adénocarcinome du Poumon",
                title_ar: "سرطان الرئة الغدي",
                findings_fr: [
                    "Prolifération maligne formant des structures glandulaires ou des papilles.",
                    "Production fréquente de mucine (mucus) par les cellules cancéreuses.",
                    "Noyaux volumineux, irréguliers avec des nucléoles très apparents.",
                    "Généralement situé en périphérie du poumon, infiltrant le stroma."
                ],
                findings_ar: [
                    "تكاثر سرطاني يشكل بنيات تشبه الغدد أو نتوءات إصبعية دقيقة.",
                    "كثيراً ما تفرز الخلايا السرطانية مادة 'المخاط' أو الموسين.",
                    "تظهر أنوية الخلايا بحجم كبير غير منتظم مع نويات بارزة وواضحة.",
                    "غالباً ما يظهر الورم في أطراف الرئة ويخترق الأنسجة المحيطة به بشدة."
                ],
                diagnosis_fr: "Adénocarcinome pulmonaire invasif",
                diagnosis_ar: "سرطان الرئة الغدي",
                symptoms_fr: "Toux, essoufflement, douleurs thoraciques, souvent chez les non-fumeurs.",
                symptoms_ar: "سعال، ضيق تنفس، آلام في الصدر (يصيب غير المدخنين أحياناً).",
                treatment_fr: "Chirurgie, thérapies ciblées (EGFR/ALK), immunothérapie.",
                treatment_ar: "الجراحة، العلاج الموجه (EGFR/ALK)، أو العلاج المناعي.",
                action_fr: "Scanner thoracique et biopsie transpariétale ou bronchique.",
                action_ar: "أشعة مقطعية للصدر وأخذ عينة عبر الجلد أو المنظار."
            },
            {
                id: 88,
                category: "Digestive",
                title_fr: "Carcinome Gastrique (Bague à Chaton)",
                title_ar: "سرطان المعدة (خلايا خاتم الفص)",
                findings_fr: [
                    "Cellules malignes isolées contenant une large vésicule de mucus.",
                    "Le noyau est refoulé et aplati contre la paroi par le mucus (aspect en bague).",
                    "Infiltration diffuse de la paroi stomacale (aspect de linite plastique).",
                    "Agressivité élevée avec un pronostic souvent réservé."
                ],
                findings_ar: [
                    "خلايا سرطانية منفردة تحتوي على مخزون كبير من مادة المخاط داخلها.",
                    "يؤدي ضغط المخاط لإزاحة النواة لطرف الخلية لتصبح مسطحة (مظهر الخاتم).",
                    "ينتشر الورم بشكل واسع داخل جدار المعدة مما يجعله سميكاً وصلباً.",
                    "يعتبر هذا النوع من الأنواع الشرسة جداً التي تتطلب علاجاً مكثفاً وسريعاً."
                ],
                diagnosis_fr: "Carcinome à cellules indépendantes",
                diagnosis_ar: "سرطان المعدة (خلايا خاتم الفص)",
                symptoms_fr: "Douleur à l'estomac, perte d'appétit, amaigrissement rapide.",
                symptoms_ar: "آلام شديدة في المعدة، فقدان الشهية، ونقصان سريع في الوزن.",
                treatment_fr: "Gastrectomie totale ou partielle, chimiothérapie adjuvante.",
                treatment_ar: "استئصال كامل أو جزئي للمعدة، وعلاج كيماوي مكمل.",
                action_fr: "Gastroscopie avec de multiples biopsies.",
                action_ar: "إجراء منظار معدة وأخذ عينات متعددة من جدار المعدة."
            },
            {
                id: 89,
                category: "Digestive",
                title_fr: "Pancreatitis (Nécrose enzymatique)",
                title_ar: "التهاب البنكرياس (النخر الإنزيمي)",
                findings_fr: [
                    "Destruction massive du pancréas par ses propres enzymes libérées.",
                    "Foyers de nécrose adipeuse (stéatonécrose) avec aspects blanchâtres.",
                    "Congestion vasculaire majeure avec des zones d'hémorragie profuse.",
                    "Réaction inflammatoire aiguë avec un œdème interstitiel sévère."
                ],
                findings_ar: [
                    "تدمير حاد لنسيج البنكرياس بفعل إنزيماته الهاضمة التي تسربت للخارج.",
                    "وجود بؤر من موت الأنسجة الدهنية (نخر دهني) تظهر كبقع بيضاء صلبة.",
                    "احتقان حاد جداً في الأوعية الدموية مع وجود نزيف دموي غزير.",
                    "استجابة التهابية فورية وقوية تؤدي لتورم مائي شديد في العضو."
                ],
                diagnosis_fr: "Pancréatite aiguë nécrosante",
                diagnosis_ar: "التهاب البنكرياس النخري الحاد",
                symptoms_fr: "Douleur épigastrique violente irradiant dans le dos, état de choc.",
                symptoms_ar: "ألم عنيف في فم المعدة يمتد للظهر، مع هبوط حاد في الدورة الدموية.",
                treatment_fr: "Soins intensifs, réanimation, parfois chirurgie (nécrosectomie).",
                treatment_ar: "عناية مركزة، إنعاش بالسوائل، وأحياناً تنظيف جراحي للأنسجة الميتة.",
                action_fr: "Scanner abdominal (score de Balthazar) et bilan inflammatoire.",
                action_ar: "أشعة مقطعية للبطن لتقييم درجة الإصابة (Balthazar) وفحوصات الدم."
            },
            {
                id: 90,
                category: "Urinary",
                title_fr: "Tumeur de Wilms",
                title_ar: "ورم ويلمز (سرطان الكلى للأطفال)",
                findings_fr: [
                    "Tumeur rénale mélangeant trois composantes : blastème, épithélium et stroma.",
                    "Les cellules du blastème sont petites, bleues, rondes et très serrées.",
                    "Tentatives de formation de tubules ou de glomérules immatures.",
                    "Tumeur pédiatrique la plus fréquente se développant à partir du reste embryonnaire."
                ],
                findings_ar: [
                    "ورم كلوي يتكون من مزيج من ثلاثة أنواع من الأنسجة الجنينية والأولية.",
                    "تكون خلايا 'الأرومة' صغيرة وزرقاء ودائرية الشكل ومزدحمة جداً.",
                    "نلاحظ محاولات من الورم لتكوين قنيات كلوية غير مكتملة أو بدائية.",
                    "يعد الورم الأكثر انتشاراً في الكلى عند الأطفال وينشأ من بقايا جنينية."
                ],
                diagnosis_fr: "Néphroblastome pédiatrique",
                diagnosis_ar: "سرطان الكلى للأطفال (ورم ويلمز)",
                symptoms_fr: "Grosse masse abdominale chez un enfant, souvent sans douleur.",
                symptoms_ar: "كتلة كبيرة في بطن الطفل (غالباً ما تلاحظها الأم أثناء الاستحمام).",
                treatment_fr: "Chimiothérapie pré-opératoire puis néphrectomie (chirurgie).",
                treatment_ar: "كيماوي أولاً لتصغير الورم ثم استئصال كلي للكلية.",
                action_fr: "Échographie et Scanner abdominal.",
                action_ar: "إجراء سونار وأشعة مقطعية على البطن والحوض."
            },
            {
                id: 91,
                category: "Urinary",
                title_fr: "Carcinome Urothélial",
                title_ar: "سرطان المسالك البولية",
                findings_fr: [
                    "Prolifération maligne de l'épithélium qui tapisse la vessie ou l'uretère.",
                    "Les cellules tumorales sont pléomorphes avec des noyaux atypiques.",
                    "Perte de la polarité et organisation en plusieurs épaisseurs irrégulières.",
                    "Possibilité d'infiltration de la couche musculaire de la paroi vésicale."
                ],
                findings_ar: [
                    "تكاثر سرطاني في الطبقة المبطنة للمثانة أو الحالب (الظهارة البولية).",
                    "تظهر الخلايا بأشكال وأحجام غير منتظمة مع أنوية سرطانية شاذة.",
                    "فقدان التنظيم الطبيعي لطبقات الخلايا لتصبح عشوائية وكثيرة الطبقات.",
                    "قد يخترق الورم العضلات العميقة في جدار المثانة، مما يزيد من خطورته."
                ],
                diagnosis_fr: "Carcinome urothélial de la vessie",
                diagnosis_ar: "سرطان المثانة البولية",
                symptoms_fr: "Sang dans les urines (hématurie) sans douleur.",
                symptoms_ar: "وجود دم في البول (بول دامي) ولا يصاحبه أي ألم.",
                treatment_fr: "Résection par les voies naturelles (RTUV), immunothérapie locale (BCG).",
                treatment_ar: "كحت الورم بالمنظار، أو حقن مادة (BCG) داخل المثانة.",
                action_fr: "Cystoscopie et cytologie urinaire.",
                action_ar: "منظار للمثانة وفحص الخلايا في عينة البول."
            },
            {
                id: 92,
                category: "Urinary",
                title_fr: "Glomérulonéphrite Membrano-proliférative",
                title_ar: "التهاب الكبيبات الغشائي التكاثري",
                findings_fr: [
                    "Doublement des parois des capillaires glomérulaires (aspect en 'rail de tramway').",
                    "Augmentation marquée des cellules mésangiales (hypercellularité).",
                    "Présence de dépôts de complexes immuns sous-endothéliaux.",
                    "Épaississement diffus de la membrane basale glomérulaire."
                ],
                findings_ar: [
                    "ظهور جدران الشعيرات الكلوية بخط مزدوج (يشبه سكة الترام).",
                    "زيادة كبيرة جداً وفائضة في عدد الخلايا الداعمة للكبيبات (خلايا ميزانجيوم).",
                    "تراكم ترسبات مناعية معينة تحت البطانة الداخلية للأوعية.",
                    "تكون الطبقة الدفاعية الأساسية للكلى أكثر سمكاً بشكل غير طبيعي."
                ],
                diagnosis_fr: "GNMP (Glomérulonéphrite de Type I)",
                diagnosis_ar: "التهاب كبيبات الكلى (النوع الأول)",
                symptoms_fr: "Syndrome néphrotique (œdèmes massifs), sang dans les urines.",
                symptoms_ar: "تورم شديد في الجسم (المتلازمة الكلوية)، بول دامي، وضغط.",
                treatment_fr: "Corticoïdes et immunosuppresseurs.",
                treatment_ar: "الكورتيزون ومثبطات الجهاز المناعي.",
                action_fr: "Ponction-biopsie rénale (PBR) indispensable.",
                action_ar: "ضرورة أخذ عينة (خزعة) من الكلية للتشخيص الدقيق."
            },
            {
                id: 93,
                category: "Endocrine",
                title_fr: "Insulinome",
                title_ar: "ورم الأنسولين (البنكرياس)",
                findings_fr: [
                    "Tumeur neuroendocrine bien limitée provenant des cellules bêta des îlots.",
                    "Cellules organisées en cordons ou nids, ressemblant aux îlots normaux.",
                    "Presence fréquente de dépôts d'amyloïde entre les cellules tumorales.",
                    "Noyaux ronds et réguliers avec une chromatine fine ('sel et poivre')."
                ],
                findings_ar: [
                    "ورم هرموني محدد ينشأ من خلايا 'بيتا' المسؤولة عن إفراز الأنسولين.",
                    "تترتب الخلايا في شكل حبال أو أعشاش تشبه خلايا البنكرياس الطبيعية.",
                    "كثيراً ما نجد ترسبات من مادة الأميلويد بين الخلايا السرطانية.",
                    "تتميز الأنوية بأنها دائرية ومنتظمة مع مادة وراثية تشبه 'الملح والفلفل'."
                ],
                diagnosis_fr: "Tumeur neuroendocrine pancréatique",
                diagnosis_ar: "ورم خلايا جزر البنكرياس (حميد أو خبيث)",
                symptoms_fr: "Malaises hypoglycémiques (faim, sueurs, perte de conscience).",
                symptoms_ar: "نوبات هبوط السكر (جوع شديد، تعرق، تعب، قد يصل للإغماء).",
                treatment_fr: "Ablation chirurgicale de la tumeur (énucléation).",
                treatment_ar: "استئصال الورم جراحياً من البنكرياس.",
                action_fr: "Dosage de l'insuline et du C-peptide lors d'un jeûne.",
                action_ar: "فحص مستوى الأنسولين و (C-peptide) أثناء الصيام الطبي."
            },
            {
                id: 94,
                category: "Endocrine",
                title_fr: "Carcinome Anaplasique de la Thyroïde",
                title_ar: "سرطان الغدة الدرقية غير المتمايز",
                findings_fr: [
                    "Variante extrêmement agressive du cancer thyroïdien avec perte totale de différenciation.",
                    "Cellules tumorales géantes, fusiformes ou d'aspect monstrueux.",
                    "Nombreuses mitoses atypiques et foyers de nécrose étendue.",
                    "Invasion précoce et massive des tissus mous du cou et de la peau."
                ],
                findings_ar: [
                    "نوع عنيف جداً من سرطان الدرقية فقدت فيه الخلايا خصائصها الأصلية.",
                    "تظهر الخلايا السرطانية بأحجام ضخمة أو أشكال مغزلية مشوهة تماماً.",
                    "وجود انقسامات خلوية وحشية ومساحات واسعة وميتة داخل الورم.",
                    "غزو سريع وكامل للأنسجة الرخوة في منطقة الرقبة والجلد المحيط."
                ],
                diagnosis_fr: "Carcinome thyroïdien anaplasique",
                diagnosis_ar: "سرطان الغدة الدرقية الكشمي (عنيف)",
                symptoms_fr: "Masse du cou augmentant de volume très vite, voix cassée, gêne pour avaler.",
                symptoms_ar: "كتلة في الرقبة تنمو بسرعة هائلة، بحة في الصوت، وصعوبة في البلع.",
                treatment_fr: " souvent palliatives (radiothérapie/chimiothérapie), la chirurgie est souvent impossible.",
                treatment_ar: "غالباً علاج تلطيفي (إشعاع/كيماوي) لصعوبة الاستئصال الكامل.",
                action_fr: "Cytoponction ou biopsie rapide (urgence chirurgicale).",
                action_ar: "أخذ عينة فورية بالإبرة أو الجراحة لتشخيص الحالة الطارئة."
            },
            {
                id: 95,
                category: "Nervous System",
                title_fr: "Épendymome",
                title_ar: "ورم البطانة العصبية",
                findings_fr: [
                    "Tumeur gliale se développant souvent dans le système ventriculaire.",
                    "Présence de pseudorosettes périvasculaires (cellules entourant un vaisseau).",
                    "Rosettes épendymaires caractéristiques (cellules entourant une lumière vide).",
                    "Cellules d'aspect régulier avec peu de mitoses dans les formes de grade I/II."
                ],
                findings_ar: [
                    "ورم دماغي ينشأ غالباً من البطانة المكسوة لتجاويف الدماغ والنخاع.",
                    "تكون الخلايا حلقات كاذبة حول الأوعية الدموية (Pseudorosettes).",
                    "وجود حلقات كاملة ومنتظمة تسمى (Ependymal rosettes) حول فراغ دقيق.",
                    "تظهر الخلايا بشكل منتظم في الدرجات الأقل خطورة من هذا الورم."
                ],
                diagnosis_fr: "Épendymome ventriculaire",
                diagnosis_ar: "ورم البطانة العصبية الدماغي",
                symptoms_fr: "Vomissements, maux de tête (hydrocéphalie), troubles de l'équilibre.",
                symptoms_ar: "قيء، صداع (بسبب تجمع السوائل في الدماغ)، واختلال التوازن.",
                treatment_fr: "Chirurgie de retrait et radiothérapie.",
                treatment_ar: "الاستئصال الجراحي للورم يتبعه علاج إشعاعي.",
                action_fr: "IRM cérébrale et médullaire.",
                action_ar: "إجراء رنين مغناطيسي على الدماغ والنخاع الشوكي."
            },
            {
                id: 96,
                category: "Nervous System",
                title_fr: "Médulloblastome",
                title_ar: "ورم أرومي نخاعي (مخيخ)",
                findings_fr: [
                    "Tumeur cérébelleuse pédiatrique hautement maligne.",
                    "Nappes denses de petites cellules bleues rondes (embryonnaires).",
                    "Formation de rosettes de Homer-Wright (cellules autour d'un centre fibrillaire).",
                    "Nombreuses mitoses et index de prolifération cellulaire très élevé."
                ],
                findings_ar: [
                    "ورم مخيخي يصيب الأطفال بشكل خاص ويعتبر من الأورام الخبيثة.",
                    "تجمعات كثيفة جداً من خلايا زرقاء صغيرة تشبه الخلايا الجنينية.",
                    "تكون الخلايا حلقات مميزة تسمى 'هومر-رايت' (حول مركز ليفي).",
                    "يظهر فحص الورم سرعة هائلة جداً في انقسام الخلايا وتكاثرها."
                ],
                diagnosis_fr: "Médulloblastome cérébelleux",
                diagnosis_ar: "ورم المخيخ الأرومي النخاعي",
                symptoms_fr: "Céphalées matinales, vomissements en jet, instabilité à la marche (ataxie).",
                symptoms_ar: "صداع صباحي، قيء مفاجئ، واختلال في التوازن أثناء المشي.",
                treatment_fr: "Chirurgie, radiothérapie cranio-spinale et chimiothérapie.",
                treatment_ar: "الجراحة، العلاج الإشعاعي للدماغ والنخاع، والكيماوي.",
                action_fr: "IRM cérébrale et médullaire immédiate.",
                action_ar: "إجراء رنين مغناطيسي فوري على الدماغ والنخاع الشوكي."
            },
            {
                id: 97,
                category: "Infectious",
                title_fr: "Rage (Corps de Negri)",
                title_ar: "داء الكلب (أجسام نيغري)",
                findings_fr: [
                    "Inclusions intra-cytoplasmiques éosinophiles (corps de Negri) dans les neurones.",
                    "Localisation typique dans les cellules pyramidales de l'hippocampe (corne d'Ammon).",
                    "Réaction inflammatoire périvasculaire avec une dégénérescence neuronale.",
                    "Le virus de la rage voyage le long des nerfs pour atteindre le cerveau."
                ],
                findings_ar: [
                    "ظهور اشتمالات وردية في سيتوبلازم الخلايا العصبية (أجسام نيغري).",
                    "توجد هذه الأجسام غالباً في منطقة 'الحصين' داخل الدماغ بشكل محدد.",
                    "التهاب شديد حول الأوعية الدموية مع تلف سريع ومميت في خلايا المخ.",
                    "ينتقل فيروس داء الكلب من مكان العضة عبر الأعصاب حتى يستقر في الدماغ."
                ],
                diagnosis_fr: "Encéphalite rabique",
                diagnosis_ar: "التهاب الدماغ السعاري (داء الكلب)",
                symptoms_fr: "Hydrophobie (peur de l'eau), spasmes, agitation, hallucinations.",
                symptoms_ar: "الخوف الشديد من الماء، تشنجات، هياج، وهلاوس.",
                treatment_fr: "Uniquement préventif (vaccin après morsure). Aucun traitement curatif efficace.",
                treatment_ar: "وقائي فقط (اللقاح بعد العضة مباشرة)؛ لا يوجد علاج بعد ظهور الأعراض.",
                action_fr: "Nettoyage de la plaie et vaccination d'urgence (protocole post-exposition).",
                action_ar: "غسل الجرح جيداً والتوجه فوراً للمستشفى لأخذ المصل واللقاح."
            },
            {
                id: 98,
                category: "Infectious",
                title_fr: "Lèpre (Lépromateuse)",
                title_ar: "مرض الجذام (الورمي)",
                findings_fr: [
                    "Infiltrat massif de macrophages spumeux (cellules de Virchow).",
                    "Les macrophages sont remplis de bacilles acido-alcoolo-résistants (Mycobacterium leprae).",
                    "Absence relative de lymphocytes traduisant une immunité faible chez l'hôte.",
                    "Atteinte cutanée diffuse avec destruction possible des nerfs périphériques."
                ],
                findings_ar: [
                    "ارتشاح مكثف لخلايا بلعمية رغوية تسمى (خلايا فيرشو).",
                    "تمتلئ هذه الخلايا البلعمية ببكتيريا الجذام التي تقاوم الصبغات الحمضية.",
                    "نقص واضح في الخلايا اللمفاوية مما يعني ضعف مناعة الجسم ضد البكتيريا.",
                    "يؤدي المرض لتآكل تدريجي في الجلد وفقدان كامل للإحساس نتيجة تلف الأعصاب."
                ],
                diagnosis_fr: "Lèpre lépromateuse",
                diagnosis_ar: "مرض الجذام (خبير الخبايا)",
                symptoms_fr: "Nodules cutanés (lépromes), nez bouché, perte de sourcils, anesthésie.",
                symptoms_ar: "عقيدات جلدية، انسداد الأنف، سقوط الحواجب، وفقدان الإحساس.",
                treatment_fr: "Polychimiothérapie (Dapsone, Rifampicine, Clofazimine).",
                treatment_ar: "العلاج الكيميائي المتعدد (Dapsone, Rifampicine, Clofazimine).",
                action_fr: "Examen des sucs cutanés et biopsie nerveuse.",
                action_ar: "فحص مسحات من الجلد وأخذ عينات من الأعصاب الطرفية."
            },
            {
                id: 99,
                category: "Infectious",
                title_fr: "Strongyloïdose (Duodénum)",
                title_ar: "داء الأسطوانيات (الأمعاء)",
                findings_fr: [
                    "Présence de larves de Strongyloides stercoralis dans les cryptes du duodénum.",
                    "Inflammation de la muqueuse riche en éosinophiles (signe d'allergie parasitaire).",
                    "Dégâts possibles sur les villosités intestinales (atrophie focale).",
                    "Parasitose capable d'auto-infection massive chez les immunodéprimés."
                ],
                findings_ar: [
                    "وجود يرقات دودة 'الأستورال' داخل ثنايا الغشاء المخاطي للإثني عشر.",
                    "التهاب قوي يتميز بكثرة الخلايا 'الحمضية' الدفاعية ضد الطفيليات.",
                    "تضرر واضح في شعيرات الامتصاص المعوية مما قد يؤدي لسوء التغذية.",
                    "يتميز هذا الطفيل بقدرة هائلة على إعادة إرسال عدوى لنفس الشخص المريض."
                ],
                diagnosis_fr: "Strongyloïdose intestinale",
                diagnosis_ar: "داء الأسطوانيات (ديدان المعاء)",
                symptoms_fr: "Douleurs abdominales, diarrhée, lésions cutanées (larva currens).",
                symptoms_ar: "آلام في البطن، إسهال، وخطوط حمراء تحت الجلد (زحف اليرقات).",
                treatment_fr: "Ivermectine ou Albendazole.",
                treatment_ar: "دواء إيفرمكتين (Ivermectine) أو ألبيندازول.",
                action_fr: "Examen des selles (technique de Baermann) et sérologie.",
                action_ar: "فحص البراز (بتقنية معينة) وفحص الأجسام المضادة في الدم."
            },
            {
                id: 100,
                category: "Reproductive",
                title_fr: "Cystadénome Séreux (Ovaire)",
                title_ar: "ورم غدي كيسي مصلي",
                findings_fr: [
                    "Tumeur kystique remplie d'un liquide clair (séreux).",
                    "Généralement unilobée avec une paroi interne lisse.",
                    "Tapissé par un épithélium cylindrique simple souvent cilié.",
                    "Tumeur bénigne la plus courante de l'ovaire chez la femme."
                ],
                findings_ar: [
                    "ورم على شكل كيس يحتوي داخله على سائل مائي صافي (مصلي).",
                    "يتكون الكيس غالباً من حجرة واحدة ذات جدار داخلي ناعم وأملس.",
                    "تبطن الكيس خلايا بسيطة تشبه في شكلها خلايا قناة فالوب.",
                    "يعد هذا الورم الحميد أكثر أورام المبيض شيوعاً لدى النساء."
                ],
                diagnosis_fr: "Tumeur séreuse bénigne de l'ovaire",
                diagnosis_ar: "ورم غدي كيسي حميد",
                symptoms_fr: "Pesanteur pelvienne, augmentation du volume de l'abdomen.",
                symptoms_ar: "ثقل في الحوض وزيادة تدريجية في حجم البطن.",
                treatment_fr: "Kystectomie ou annexectomie (selon l'âge).",
                treatment_ar: "استئصال الكيس أو المبيض (حسب عمر المريضة).",
                action_fr: "Échographie pelvienne et dosage du marqueur CA-125.",
                action_ar: "أشعة تلفزيونية على الحوض وفحص دلالات الأورام (CA-125)."
            },
            {
                id: 101,
                category: "Reproductive",
                title_fr: "Choriocarcinome",
                title_ar: "سرطانة مشيمائية (سرطان الحمل)",
                findings_fr: [
                    "Tumeur trophoblastique extrêmement maligne et hémorragique.",
                    "Mélange de cellules cytotrophoblastiques et syncytiotrophoblastiques.",
                    "Absence totale de villosités choriales normales.",
                    "Métastases précoces par voie sanguine, notamment vers les poumons."
                ],
                findings_ar: [
                    "ورم سرطاني عنيف جداً يصيب الخلايا المسؤولة عن تكوين المشيمة.",
                    "مزيج من نوعين من الخلايا المتكاثرة بشكل وحشي ونزيفي.",
                    "انعدام تام للشعيرات المشيمية الطبيعية، فقط كتل خلوية سرطانية ونزيف.",
                    "ينتشر هذا الورم بسرعة هائلة عبر الدم ليصل للرئتين وأعضاء أخرى."
                ],
                diagnosis_fr: "Choriocarcinome gestationnel",
                diagnosis_ar: "السرطانة المشيمائية",
                symptoms_fr: "Saignements vaginaux persistants après un accouchement ou une fausse couche.",
                symptoms_ar: "نزيف مهبلي مستمر بعد ولادة أو إجهاض أو حمل عنقودي.",
                treatment_fr: "Chimiothérapie très efficace (Méthotrexate).",
                treatment_ar: "العلاج الكيميائي بفعالية عالية جداً (دواء ميثوتريكسيت).",
                action_fr: "Dosage sanguin de la bêta-hCG (taux très élevé).",
                action_ar: "فحص هرمون الحمل (bêta-hCG) المرتفع جداً في الدم."
            },
            {
                id: 102,
                category: "Musculoskeletal",
                title_fr: "Sarcome d'Ewing",
                title_ar: "ساركوما إيوينغ (سرطان العظم)",
                findings_fr: [
                    "Cancer osseux de l'enfant composé de petites cellules bleues rondes.",
                    "Les cellules sont très uniformes et contiennent souvent du glycogène (PAS+).",
                    "Peut former des rosettes de Homer-Wright de manière occassionnelle.",
                    "Infiltration osseuse agressive avec destruction de la trame normale."
                ],
                findings_ar: [
                    "سرطان عظام يصيب الأطفال والشباب، يتكون من خلايا زرقاء كروية دقيقة.",
                    "تظهر الخلايا بشكل موحد جداً وتحتوي على مادة سكرية (جليكوجين).",
                    "قد تترتب الخلايا أحياناً في شكل حلقات دقيقة حول مركز معين.",
                    "غزو عنيف للعظم المصاب يؤدي لتدمير بنيته وزيادة خطر الكسور."
                ],
                diagnosis_fr: "Sarcome d'Ewing osseux",
                diagnosis_ar: "ساركوما إيوينغ",
                symptoms_fr: "Douleur osseuse, gonflement, fièvre, fatigue.",
                symptoms_ar: "ألم مستمر في الهيكل العظمي، تورم، حمى، وتعب عام.",
                treatment_fr: "Chimiothérapie première, puis chirurgie ou radiothérapie.",
                treatment_ar: "الكيماوي أولاً ثم الجراحة أو العلاج الإشعاعي.",
                action_fr: "Radiographie (aspect en feuillets d'oignon), IRM et biopsie.",
                action_ar: "أشعة سينية (مظهر قشر البصل)، رنين مغناطيسي، وأخذ خزعة عظمية."
            },
            {
                id: 103,
                category: "Musculoskeletal",
                title_fr: "Goutte (Cristaux)",
                title_ar: "مرض النقرس (البلورات)",
                findings_fr: [
                    "Accumulation de cristaux d'urate de sodium dans les tissus (tophus).",
                    "Les cristaux ont une forme d'aiguille et sont biréfringents.",
                    "Réaction inflammatoire chronique avec des cellules géantes multinucléées.",
                    "Souvent localisé dans les zones fraîches comme le pavillon de l'oreille ou l'orteil."
                ],
                findings_ar: [
                    "تراكم بلورات أملاح اليورات داخل الأنسجة الرخوة (ما يسمى بالتوفوس).",
                    "تظهر البلورات تحت المجهر بشكل إبر حادة تلمع تحت الضوء المستقطب.",
                    "تفاعل التهابي مزمن يشمل خلايا عملاقة تحاول التخلص من هذه البلورات.",
                    "غالباً ما يظهر في الأطراف أو صيوان الأذن حيث تكون درجة الحرارة أقل."
                ],
                diagnosis_fr: "Arthropathie microcristalline (Goutte)",
                diagnosis_ar: "داء النقرس (تراكم البلورات)",
                symptoms_fr: "Crise articulaire aiguë, rougeur, gonflement, 'douleur de brodequin'.",
                symptoms_ar: "نوبات ألم مفصلي شديد، احمرار، تورم (خاصة في إبهام القدم).",
                treatment_fr: "AINS, Colchicine, traitement hypo-uricémiant.",
                treatment_ar: "مسكنات (AINS)، كولشيسين، وأدوية خفض حمض اليوريك بالدم.",
                action_fr: "Analyse du liquide articulaire à la recherche de cristaux.",
                action_ar: "فحص السائل المفصلي مجهرياً للبحث عن البلورات الإبرية."
            },
            {
                id: 104,
                category: "Dermatopathology",
                title_fr: "Dermatofibrome",
                title_ar: "الورم الليفي الجلدي (حميد)",
                findings_fr: [
                    "Prolifération bénigne de fibroblastes et d'histiocytes dans le derme.",
                    "Enclavement caractéristique des fibres de collagène épaissies.",
                    "Possible hyperpigmentation de la couche basale de l'épiderme en regard.",
                    "Lésion ferme au toucher, souvent consécutive à une piqûre d'insecte ou trauma."
                ],
                findings_ar: [
                    "تكاثر حميد للألياف والخلايا المنسجية داخل طبقة الجلد العميقة.",
                    "تمتاز الإصابة بانحشار حزم 'الكولاجين' السميكة بين الخلايا الورمية.",
                    "قد يصاحبه زيادة في صبغة الجلد في الطبقة السطحية فوق الورم مباشرة.",
                    "تكون الكتلة صلبة الملمس وغالباً ما تظهر بعد قرصة حشرة أو إصابة خفيفة."
                ],
                diagnosis_fr: "Histiocytome fibreux bénin",
                diagnosis_ar: "ورم ليفي جلدي حميد",
                symptoms_fr: "Petit nodule dur, brun ou rosé, signe de la pastille au pincement.",
                symptoms_ar: "عقيدة صغيرة صلبة، لونها بني أو وردي، تنغمس للداخل عند الضغط الجانبي.",
                treatment_fr: "Abstention thérapeutique (lésion bénigne).",
                treatment_ar: "لا يحتاج لعلاج عادةً (ورم حميد).",
                action_fr: "Examen clinique (dermoscopie).",
                action_ar: "الفحص السريري للجلد واستخدام منظار الجلد (Dermoscopy)."
            },
            {
                id: 105,
                category: "Miscellaneous",
                title_fr: "Maladie de Wilson (Foie)",
                title_ar: "مرض ويلسون (تراكم النحاس)",
                findings_fr: [
                    "Accumulation toxique de cuivre dans le foie et d'autres organes (cerveau).",
                    "La coloration à la rhodanine montre des granules de cuivre orangés.",
                    "Stéatose hépatique, noyaux vacuolés et évolution possible vers la cirrhose.",
                    "Maladie génétique liée à un transport défectueux du cuivre."
                ],
                findings_ar: [
                    "تراكم سام لمعدن النحاس داخل الكبد وأعضاء أخرى مثل الدماغ.",
                    "استخدام صبغات خاصة يظهر حبيبات النحاس بلون برتقالي داخل الخلايا.",
                    "تجمع دهني في الكبد وتغيرات في أنوية الخلايا قد تنتهي بتليف الكبد.",
                    "مرض وراثي ناتج عن خلل في البروتين المسؤول عن تصريف النحاس الزائد."
                ],
                diagnosis_fr: "Maladie de Wilson (Hépatite chronique)",
                diagnosis_ar: "داء ويلسون (تراكم النحاس في الكبد)",
                symptoms_fr: "Hépatite, tremblements, anneau de Kayser-Fleischer dans l'œil.",
                symptoms_ar: "التهاب كبدي، رعشة، وظهور حلقة بنية حول قرنية العين.",
                treatment_fr: "Chélateurs du cuivre (D-pénicillamine) à vie.",
                treatment_ar: "أدوية لسحب النحاس من الجسم (D-pénicillamine) مدى الحياة.",
                action_fr: "Dosages de la céruléoplasmine, du cuivre urinaire et examen à la lampe à fente.",
                action_ar: "فحص بروتين (Ceruloplasmin) بالدم ونسبة النحاس بالبول وفحص العين."
            },
            {
                id: 106,
                category: "Miscellaneous",
                title_fr: "Hémochromatose (Foie)",
                title_ar: "مرض ترسب الحديد",
                findings_fr: [
                    "Surcharge systémique en fer par absorption intestinale excessive.",
                    "Dépôts massifs d'hémosidérine visibles par la coloration au Bleu de Prusse.",
                    "Coloration bleue intense des hépatocytes et des cellules de Kupffer.",
                    "Fibrose progressive pouvant aboutir à une cirrhose et au cancer du foie."
                ],
                findings_ar: [
                    "زيادة هائلة في مستويات الحديد في الجسم نتيجة زيادة امتصاصه.",
                    "ترسبات ضخمة لصبغة 'الهيموسيديرين' تظهر بوضوح باللون الأزرق.",
                    "تتلون خلايا الكبد باللون الأزرق الغامق عند استخدام صبغة 'بروسيا'.",
                    "يؤدي تراكم الحديد المستمر لتليف الكبد وزيادة خطر الإصابة بسرطان الكبد."
                ],
                diagnosis_fr: "Hémochromatose génétique",
                diagnosis_ar: "داء ترسب الأصبغة الدموية (الحديد الزائد)",
                symptoms_fr: "Peau bronzée, fatigue, diabète, douleurs articulaires.",
                symptoms_ar: "تغير لون الجلد للبرونزي، تعب، مرض السكر، وآلام في المفاصل.",
                treatment_fr: "Saignées régulières (phlébotomies).",
                treatment_ar: "عملية 'الفصادة' (سحب الدم الدوري) لتقليل نسبة الحديد.",
                action_fr: "Dosage de la ferritine et coefficient de saturation de la transferrine.",
                action_ar: "فحص نسبة الفيريتين (مخزون الحديد) وتشبع البروتين الناقل للحديد."
            },
        ];

        let pathologyData = [];
        let currentPathologyCategory = 'all';

        function initPathologyData() {
            const userCases = JSON.parse(localStorage.getItem('user_pathology_cases') || '[]');
            pathologyData = [...INTERNAL_PATHOLOGY_DATA, ...userCases];
            renderPathologyGallery();
        }

        function renderPathologyGallery(data = pathologyData) {
            const grid = document.getElementById('pathologyGrid');
            const emptyState = document.getElementById('pathologyEmpty');
            if (!grid) return;

            grid.innerHTML = '';

            if (data.length === 0) {
                emptyState.style.display = 'flex';
                grid.style.display = 'none';
                return;
            }

            emptyState.style.display = 'none';
            grid.style.display = 'grid';

            data.forEach(item => {
                const isUserAdded = item.id >= 1000;
                const card = document.createElement('div');
                card.className = 'pathology-card';
                card.style.position = 'relative';

                let deleteHtml = isUserAdded ? `<div class="delete-case-icon" onclick="deleteUserCase(event, ${item.id})">🗑️</div>` : '';

                card.onclick = () => openPathologyModal(item.id);
                card.innerHTML = `
                        ${deleteHtml}
                        <div class="pathology-info">
                            <div class="pathology-category">${item.category}</div>
                            <div class="pathology-title-ar" style="font-size: 1.2rem; margin: 0.5rem 0;">${item.title_ar}</div>
                            <div class="pathology-title-fr" style="color: var(--text-secondary);">${item.title_fr}</div>
                        </div>
                    `;
                grid.appendChild(card);
            });
        }

        function filterPathology() {
            const query = document.getElementById('pathologySearch').value.toLowerCase();

            let filtered = pathologyData.filter(item =>
                item.title_fr.toLowerCase().includes(query) ||
                item.title_ar.includes(query) ||
                item.category.toLowerCase().includes(query)
            );

            if (currentPathologyCategory !== 'all') {
                filtered = filtered.filter(item => item.category === currentPathologyCategory);
            }

            renderPathologyGallery(filtered);
        }

        function filterPathologyCategory(category) {
            currentPathologyCategory = category;

            document.querySelectorAll('.pathology-filters .filter-btn').forEach(btn => {
                btn.classList.remove('active');
                // Exact match for the category passed in onclick
                if (btn.getAttribute('onclick').includes(`'${category}'`)) {
                    btn.classList.add('active');
                }
            });

            filterPathology();
        }

        function openPathologyModal(id) {
            const item = pathologyData.find(i => i.id === id);
            if (!item) return;

            const modal = document.getElementById('pathologyModal');
            const modalBody = document.getElementById('pathologyModalBody');

            const findingsFrHtml = item.findings_fr.map(f => `<li>${f}</li>`).join('');
            const findingsArHtml = item.findings_ar.map(f => `<li>${f}</li>`).join('');

            modalBody.innerHTML = `
                    <div class="pathology-modal-layout" style="padding: 2rem;">
                        <div class="pathology-modal-content" style="max-width: 900px; margin: 0 auto; background: var(--bg-secondary); border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); overflow: hidden;">
                            <div style="background: var(--gradient-1); color: white; padding: 2.5rem 1.5rem; text-align: center;">
                                <div style="font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; opacity: 0.9; margin-bottom: 0.5rem;">${item.category}</div>
                                <h2 style="margin-bottom:0.5rem; font-size: 2.2rem; font-weight: 800;">${item.title_ar}</h2>
                                <h3 style="font-size: 1.4rem; font-weight: 400; opacity: 0.9;">${item.title_fr}</h3>
                            </div>
                            
                            <div style="padding: 2rem;">
                                <!-- Diagnostic Section -->
                                <div style="background: var(--bg-primary); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; border-right: 5px solid var(--success);">
                                    <strong style="color: var(--success); display: flex; align-items: center; gap: 8px; margin-bottom: 0.8rem; font-size: 1.1rem;">
                                        <span>🎯</span> Diagnosis / التشخيص:
                                    </strong>
                                    <div style="font-weight:700; font-size:1.3rem; margin-bottom: 0.5rem; color: var(--text-primary);">${item.diagnosis_fr}</div>
                                    <div style="font-size:1.3rem; color: var(--text-primary);">${item.diagnosis_ar}</div>
                                </div>

                                <!-- Findings Section -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2.5rem;">
                                    <div>
                                        <h4 style="margin-bottom:1rem; color: var(--primary); font-weight: 800;">🔬 Detailed Findings</h4>
                                        <ul class="pathology-findings-list" style="padding-left: 1.2rem; line-height: 1.6;">
                                            ${findingsFrHtml}
                                        </ul>
                                    </div>
                                    <div style="text-align: right;">
                                        <h4 style="margin-bottom:1rem; color: var(--primary); font-weight: 800;">🧬 الشرح التفصيلي</h4>
                                        <ul class="pathology-findings-list" style="padding-right: 1.2rem; line-height: 1.6; direction: rtl;">
                                            ${findingsArHtml}
                                        </ul>
                                    </div>
                                </div>

                                <!-- Clinical Info Section (Symptoms, Treatment, Action) -->
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; border-top: 1px solid var(--glass-border); padding-top: 2rem;">
                                    <!-- Symptoms -->
                                    <div style="background: rgba(59, 130, 246, 0.05); padding: 1.5rem; border-radius: 16px; border-top: 3px solid #3b82f6;">
                                        <h5 style="color: #2563eb; margin-bottom: 0.8rem; display: flex; align-items: center; gap: 8px;">
                                            <span>🤒</span> الأعراض السريرية
                                        </h5>
                                        <p style="font-size: 0.95rem; margin-bottom: 0.5rem; direction: rtl;">${item.symptoms_ar || 'غير متوفر'}</p>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary);">${item.symptoms_fr || 'N/A'}</p>
                                    </div>


                                    <!-- Treatment -->
                                    <div style="background: rgba(16, 185, 129, 0.05); padding: 1.5rem; border-radius: 16px; border-top: 3px solid #10b981;">
                                        <h5 style="color: #059669; margin-bottom: 0.8rem; display: flex; align-items: center; gap: 8px;">
                                            <span>💊</span> الخطة العلاجية
                                        </h5>
                                        <p style="font-size: 0.95rem; margin-bottom: 0.5rem; direction: rtl;">${item.treatment_ar || 'غير متوفر'}</p>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary);">${item.treatment_fr || 'N/A'}</p>
                                    </div>

                                    <!-- Action -->
                                    <div style="background: rgba(245, 158, 11, 0.05); padding: 1.5rem; border-radius: 16px; border-top: 3px solid #f59e0b;">
                                        <h5 style="color: #d97706; margin-bottom: 0.8rem; display: flex; align-items: center; gap: 8px;">
                                            <span>✅</span> التصرف الصحيح
                                        </h5>
                                        <p style="font-size: 0.95rem; margin-bottom: 0.5rem; direction: rtl;">${item.action_ar || 'غير متوفر'}</p>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary);">${item.action_fr || 'N/A'}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closePathologyModal() {
            document.getElementById('pathologyModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Add Case Form Logics
        function openAddPathologyModal() {
            document.getElementById('addPathologyModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeAddPathologyModal() {
            document.getElementById('addPathologyModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function saveNewPathologyCase() {
            const category = document.getElementById('case_category').value;
            const title_ar = document.getElementById('case_title_ar').value;
            const title_fr = document.getElementById('case_title_fr').value;
            const diagnosis_ar = document.getElementById('case_diag_ar').value;
            const diagnosis_fr = document.getElementById('case_diag_fr').value;
            const findings_ar = document.getElementById('case_findings_ar').value.split('\n').filter(l => l.trim() !== '');
            const findings_fr = document.getElementById('case_findings_fr').value.split('\n').filter(l => l.trim() !== '');

            const symptoms_ar = document.getElementById('case_symptoms_ar').value;
            const symptoms_fr = document.getElementById('case_symptoms_fr').value;
            const treatment_ar = document.getElementById('case_treatment_ar').value;
            const treatment_fr = document.getElementById('case_treatment_fr').value;
            const action_ar = document.getElementById('case_action_ar').value;
            const action_fr = document.getElementById('case_action_fr').value;

            if (!title_ar || !title_fr || !diagnosis_ar || !diagnosis_fr || findings_ar.length === 0 || findings_fr.length === 0) {
                showToast('يرجى ملء جميع الحقول المطلوبة ⚠️', 'warning');
                return;
            }

            const newCase = {
                id: Date.now(), // High ID for user cases
                category,
                title_ar,
                title_fr,
                diagnosis_ar,
                diagnosis_fr,
                findings_ar,
                findings_fr,
                symptoms_ar,
                symptoms_fr,
                treatment_ar,
                treatment_fr,
                action_ar,
                action_fr
            };

            const userCases = JSON.parse(localStorage.getItem('user_pathology_cases') || '[]');
            userCases.push(newCase);
            localStorage.setItem('user_pathology_cases', JSON.stringify(userCases));

            showToast('تمت إضافة الحالة بنجاح! 🔬 +15 نقطة مكافأة 🌟', 'success');
            if (typeof updatePoints === 'function') updatePoints(15);
            closeAddPathologyModal();
            document.getElementById('addPathologyForm').reset();
            initPathologyData();
        }

        function deleteUserCase(event, id) {
            event.stopPropagation(); // Prevents opening the modal
            if (confirm('هل أنت متأكد من حذف هذه الحالة؟')) {
                let userCases = JSON.parse(localStorage.getItem('user_pathology_cases') || '[]');
                userCases = userCases.filter(c => c.id !== id);
                localStorage.setItem('user_pathology_cases', JSON.stringify(userCases));
                showToast('تم حذف الحالة', 'info');
                initPathologyData();
            }
        }

        // Initialize Gallery
        initPathologyData();

        /* --- Rotation Tracker Logic --- */
        let rotations = JSON.parse(localStorage.getItem('medgpa_rotations') || '[]');

        function toggleRotationForm() {
            const form = document.getElementById('rotationForm');
            if (!form) return;
            form.style.display = form.style.display === 'block' ? 'none' : 'block';
            if (form.style.display === 'block') {
                form.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function addRotation() {
            const service = document.getElementById('rotService').value;
            const hospital = document.getElementById('rotHospital').value;
            const start = document.getElementById('rotStart').value;
            const time = document.getElementById('rotTime').value;

            if (!service || !hospital || !start || !time) {
                showToast('يرجى ملء جميع الحقول المطلوبة ⚠️', 'warning');
                return;
            }

            const skillsInput = document.getElementById('rotSkills').value;
            const skillsArray = skillsInput ? skillsInput.split(/[،,]+/).map((s, index) => ({
                id: Date.now() + index,
                name: s.trim(),
                mastered: false
            })).filter(s => s.name !== '') : [
                { id: 1, name: 'سحب دم', mastered: false },
                { id: 2, name: 'تركيب كانيولا', mastered: false },
                { id: 3, name: 'تخطيط قلب', mastered: false },
                { id: 4, name: 'خياطة جروح', mastered: false },
                { id: 5, name: 'فحص سريري', mastered: false }
            ];

            const newRot = {
                id: Date.now(),
                service,
                hospital,
                start,
                time,
                skills: skillsArray
            };

            rotations.push(newRot);
            saveRotations();
            renderRotations();
            toggleRotationForm();
            showToast('تمت إضافة التربص بنجاح 🏥', 'success');

            // Clear inputs
            document.getElementById('rotService').value = '';
            document.getElementById('rotHospital').value = '';
            document.getElementById('rotStart').value = '';
            document.getElementById('rotTime').value = '';
            document.getElementById('rotSkills').value = '';
        }

        function saveRotations() {
            localStorage.setItem('medgpa_rotations', JSON.stringify(rotations));
        }

        function deleteRotation(id) {
            if (confirm('هل أنت متأكد من حذف هذا التربص؟')) {
                rotations = rotations.filter(r => r.id !== id);
                saveRotations();
                renderRotations();
                showToast('تم حذف التربص', 'info');
            }
        }

        function toggleSkill(rotId, skillId) {
            const rot = rotations.find(r => r.id === rotId);
            if (rot) {
                const skill = rot.skills.find(s => s.id === skillId);
                if (skill) {
                    skill.mastered = !skill.mastered;
                    saveRotations();
                    renderRotations();
                }
            }
        }


        function renderRotations() {
            const grid = document.getElementById('rotationGrid');
            if (!grid) return;

            rotations.sort((a, b) => new Date(b.start) - new Date(a.start));

            let html = '';
            let totalDays = 0;
            let masteredSkillsCount = 0;

            rotations.forEach(rot => {
                const statusClass = 'status-active';
                const statusLabel = 'تربص مسجل';

                const start = new Date(rot.start);
                totalDays += 1; // Each entry counts as a day/session now

                const masteredCount = rot.skills.filter(s => s.mastered).length;
                masteredSkillsCount += masteredCount;

                html += `
                        <div class="rotation-card">
                            <span class="rotation-status ${statusClass}">${statusLabel}</span>
                            <div style="margin-bottom: 1rem; margin-top: 1rem;">
                                <h3 style="color: var(--primary); font-size: 1.4rem;">${rot.service}</h3>
                            <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">
                                📅 ${rot.start} | 🕒 ${rot.time}
                            </div>
                            <div style="border-top: 1px solid rgba(0,0,0,0.05); padding-top: 1rem;">
                                <p style="font-weight: 700; font-size: 0.85rem; margin-bottom: 0.5rem;">المهارات السريرية:</p>
                                <div class="skills-list">
                                    ${rot.skills.map(skill => `
                                        <span class="skill-tag ${skill.mastered ? 'mastered' : ''}" 
                                              onclick="toggleSkill(${rot.id}, ${skill.id})">
                                            ${skill.mastered ? '✓ ' : '+ '}${skill.name}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                            <button onclick="deleteRotation(${rot.id})" 
                                    style="background: none; border: none; color: var(--danger); font-size: 0.8rem; cursor: pointer; margin-top: 1.5rem;">
                                🗑️ حذف التربص
                            </button>
                        </div>
                    `;
            });

            grid.innerHTML = html || '<p style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-secondary);">لا يوجد تربصات مضافة حالياً. اضغط على زر + للبدء.</p>';

            document.getElementById('totalRotationsDisplay').textContent = rotations.length;
            document.getElementById('completedDaysDisplay').textContent = totalDays;
            document.getElementById('masteredSkillsDisplay').textContent = masteredSkillsCount;
        }

        // Patch showPage to init glossary and rotation tracker
        const originalShowPage = window.showPage || function (id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const target = document.getElementById(id);
            if (target) target.classList.add('active');
        };

        window.showPage = function (pageId) {
            originalShowPage(pageId);
            if (pageId === 'med_glossary') {
                initGlossary();
            }
            if (pageId === 'rotation_tracker') {
                renderRotations();
            }
            if (pageId === 'students_section') {
                renderStudentContributions();
            }
        };

        /* --- Students' Section Logic --- */
        let studentContributions = JSON.parse(localStorage.getItem('medgpa_student_contributions') || '[]');
        let currentContributionFilter = 'all';

        function openAddContributionModal() {
            document.getElementById('addContributionModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeAddContributionModal() {
            document.getElementById('addContributionModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function saveStudentContribution() {
            const title = document.getElementById('cont_title').value;
            const type = document.getElementById('cont_type').value;
            const year = document.getElementById('cont_year').value;
            const subject = document.getElementById('cont_subject').value;
            const link = document.getElementById('cont_link').value;
            const author = document.getElementById('cont_author').value || 'طالب متطوع';

            if (!title || !type || !year || !subject || !link) {
                showToast('يرجى ملء جميع الحقول المطلوبة ⚠️', 'warning');
                return;
            }

            const newContribution = {
                id: Date.now(),
                title,
                type,
                year,
                subject,
                link,
                author,
                date: new Date().toLocaleDateString('ar-EG')
            };

            studentContributions.push(newContribution);
            localStorage.setItem('medgpa_student_contributions', JSON.stringify(studentContributions));

            showToast('تمت إضافة مساهمتك بنجاح شكراً لك! 🌟', 'success');
            updatePoints(10);
            closeAddContributionModal();
            document.getElementById('addContributionForm').reset();
            renderStudentContributions();
        }

        function filterContributions(type, element) {
            currentContributionFilter = type;
            document.querySelectorAll('.contribution-filters .filter-chip').forEach(chip => chip.classList.remove('active'));
            element.classList.add('active');
            renderStudentContributions();
        }

        function renderStudentContributions() {
            const grid = document.getElementById('contributionGrid');
            const emptyState = document.getElementById('contributionEmpty');
            if (!grid) return;

            let filtered = studentContributions;
            if (currentContributionFilter !== 'all') {
                filtered = studentContributions.filter(c => c.type === currentContributionFilter);
            }

            grid.innerHTML = '';
            if (filtered.length === 0) {
                emptyState.style.display = 'flex';
                grid.style.display = 'none';
                return;
            }

            emptyState.style.display = 'none';
            grid.style.display = 'grid';

            [...filtered].sort((a, b) => b.id - a.id).forEach(c => {
                const card = document.createElement('div');
                card.className = `contribution-card card-${c.type}`;

                const typeLabels = {
                    lesson: 'درس',
                    summary: 'ملخص',
                    video: 'فيديو',
                    other: 'أخرى'
                };

                const typeIcons = {
                    lesson: '📖',
                    summary: '📑',
                    video: '🎥',
                    other: '✨'
                };

                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <span class="contribution-badge badge-${c.type}">${typeIcons[c.type]} ${typeLabels[c.type]}</span>
                        <button onclick="deleteContribution(${c.id})" style="background:none; border:none; cursor:pointer; font-size:1.1rem; opacity:0.6; transition:0.3s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">🗑️</button>
                    </div>
                    <h3 class="contribution-title">${c.title}</h3>
                    <div class="contribution-meta">
                        <span>📚 ${c.subject}</span>
                        <span>🎓 السنة ${c.year}</span>
                    </div>
                    <div class="contribution-meta" style="font-size: 0.8rem; margin-top: -0.5rem;">
                        <span>👤 بواسطة: ${c.author}</span>
                        <span>📅 ${c.date}</span>
                    </div>
                    <a href="${c.link}" target="_blank" class="contribution-link">
                        <span>🔗</span> عرض المحتوى
                    </a>
                `;
                grid.appendChild(card);
            });
        }

        function deleteContribution(id) {
            if (confirm('هل أنت متأكد من حذف هذه المساهمة؟')) {
                studentContributions = studentContributions.filter(c => c.id !== id);
                localStorage.setItem('medgpa_student_contributions', JSON.stringify(studentContributions));
                showToast('تم حذف المساهمة', 'info');
                renderStudentContributions();
            }
        }
    </script>

    <!-- Focus Mode -->
    <script>
        console.log('Focus mode system initialized.');
    </script>

    <!-- Achievements System -->
    <script>
        const achievements = [
            { id: 'first_lesson', title: 'بداية المشوار', desc: 'أكملت أول درس لك', icon: '📖', points: 10 },
            { id: 'calc_master', title: 'خبير الحساب', desc: 'استخدمت الحاسبة الطبية', icon: '⚖️', points: 5 },
            { id: 'focus_king', title: 'ملك التركيز', desc: 'أكملت جلسة تركيز كاملة', icon: '🧘', points: 20 }
        ];

        function initAchievements() {
            const list = document.getElementById('achievements-list');
            if (!list) return;

            list.innerHTML = achievements.map(ach => {
                const isUnlocked = localStorage.getItem(`ach_${ach.id}`) === 'unlocked';
                return `
            <div class="achievement-item" style="display: flex; align-items: center; gap: 15px; padding: 1rem; border-radius: 12px; background: rgba(0,0,0,0.05); margin-bottom: 10px; opacity: ${isUnlocked ? 1 : 0.5}">
                <div style="font-size: 2rem;">${ach.icon}</div>
                <div style="flex: 1;">
                    <div style="font-weight: 700;">${ach.title}</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">${ach.desc}</div>
                </div>
                <div style="font-weight: 800; color: var(--primary);">${ach.points}</div>
            </div>
        `;
            }).join('');

            updatePointsDisplay(); // Sync display
        }

        document.addEventListener('DOMContentLoaded', initAchievements);
    </script>

    <!-- Study Calendar -->
    <script>
        console.log('Calendar system initialized.');
        function toggleMobileMenu() {
            const dropdown = document.getElementById('navDropdown');
            dropdown.classList.toggle('active');
        }

        function closeMobileMenu() {
            const dropdown = document.getElementById('navDropdown');
            dropdown.classList.remove('active');
        }

        // Unified Outside Click Listener for all Modals and Dropdowns
        document.addEventListener('click', function (e) {
            const dropdown = document.getElementById('navDropdown');
            const searchModal = document.getElementById('search-modal');
            const pathologyModal = document.getElementById('pathologyModal');
            const addPathologyModal = document.getElementById('addPathologyModal');
            const focusOverlay = document.getElementById('focus-mode-overlay');
            const achievementsPanel = document.getElementById('achievements-panel');

            // 1. Navigation Dropdown
            if (dropdown && !dropdown.contains(e.target) && dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            }

            // 2. Search Modal (if clicking the overlay)
            if (e.target === searchModal && searchModal.classList.contains('active')) {
                toggleSearch();
            }

            // 3. Pathology View Modal (if clicking the overlay)
            if (e.target === pathologyModal && pathologyModal.style.display === 'block') {
                closePathologyModal();
            }

            // 4. Add Case Modal (if clicking the overlay)
            if (e.target === addPathologyModal && addPathologyModal.style.display === 'block') {
                closeAddPathologyModal();
            }

            // 5. Focus Mode Overlay (if clicking the overlay)
            if (e.target === focusOverlay && focusOverlay.classList.contains('active')) {
                toggleFocusMode();
            }

            // 6. Achievements Panel (if clicking the overlay)
            if (e.target === achievementsPanel && achievementsPanel.classList.contains('active')) {
                toggleAchievements();
            }
        });
    </script>

    <script>
        // Notification system removed
    </script>

    <script>
        // Notification system removed as per user request
    </script>

    <!-- Win Modal -->
    <div id="win-modal">
        <div class="win-content">
            <span class="win-icon">🏆</span>
            <div class="win-title">مذهــل! أحسنت يا بطل!</div>
            <p class="win-message">لقد أتممت 60 نقطة بنجاح! استمر في هذا الأداء الرائع، أنت في طريقك للتميز.</p>
            <button class="win-btn" onclick="closeWinModal()">متابعة التحدي 🚀</button>
        </div>
    </div>

    <!-- Focus Mode Timer Widget -->
    <div id="focus-timer"
        style="display: none; position: fixed; bottom: 30px; right: 30px; background: linear-gradient(135deg, #6366f1, #4f46e5); color: white; padding: 1.5rem 2rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4); z-index: 99999; min-width: 200px; backdrop-filter: blur(10px);">
        <div style="text-align: center;">
            <div style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; opacity: 0.9;">⏱️ وضع التركيز
            </div>
            <div id="timer-display"
                style="font-size: 2.5rem; font-weight: 900; font-family: 'Courier New', monospace; letter-spacing: 2px;">
                00:00:00</div>
            <button onclick="endFocusMode()"
                style="margin-top: 1rem; background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 0.5rem 1.5rem; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; font-size: 0.9rem;"
                onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'"
                onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">إنهاء</button>
        </div>
    </div>

    <!-- Focus Mode Backdrop -->
    <div id="focus-timer-backdrop"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 99999; backdrop-filter: blur(4px);">
    </div>

    <script>
        function toggleAchievements() {
            showPage('achievements');
            if (typeof updatePointsDisplay === 'function') updatePointsDisplay();
        }

        function resetPoints() {
            if (confirm('هل أنت متأكد من إعادة تعيين جميع النقاط إلى 0؟')) {
                localStorage.setItem('userPoints', '0');
                if (typeof updatePointsDisplay === 'function') updatePointsDisplay();
                if (typeof showToast === 'function') showToast('✅ تم إعادة تعيين النقاط بنجاح');
            }
        }
    </script>

</body>

</html>